"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/sanity-plugin-iframe-pane";
exports.ids = ["vendor-chunks/sanity-plugin-iframe-pane"];
exports.modules = {

/***/ "(ssr)/./node_modules/sanity-plugin-iframe-pane/lib/_chunks/is-valid-secret-fac49993.cjs":
/*!*****************************************************************************************!*\
  !*** ./node_modules/sanity-plugin-iframe-pane/lib/_chunks/is-valid-secret-fac49993.cjs ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nvar name = \"sanity-plugin-iframe-pane\";\nconst SECRET_TTL = 60 * 60;\nconst fetchSecretQuery = /* groq */\n\"*[_id == $id && dateTime(_updatedAt) > dateTime(now()) - \".concat(SECRET_TTL, \"][0]{secret, _updatedAt}\");\nconst tag = name;\nconst apiVersion = \"2023-08-08\";\nconst isDev = \"development\" === \"development\";\nasync function isValidSecret(client, urlSecretId, urlSecret) {\n  if (!urlSecret) {\n    throw new TypeError(\"`urlSecret` is required\");\n  }\n  if (!urlSecretId) {\n    throw new TypeError(\"`urlSecretId` is required\");\n  }\n  if (!urlSecretId.includes(\".\")) {\n    throw new TypeError(\"`urlSecretId` must have a dot prefix, `\".concat(urlSecretId, \"` is not secure, add a prefix, for example `preview.\").concat(urlSecretId, \"` \"));\n  }\n  if (!client) {\n    throw new TypeError(\"`client` is required\");\n  }\n  if (!client.config().token) {\n    throw new TypeError(\"`client` must have a `token` specified\");\n  }\n  if (typeof EdgeRuntime !== \"undefined\") {\n    await new Promise(resolve => setTimeout(resolve, 300));\n  }\n  const customClient = client.withConfig({\n    apiVersion,\n    useCdn: false,\n    perspective: \"raw\",\n    resultSourceMap: false\n  });\n  const data = await customClient.fetch(fetchSecretQuery, {\n    id: urlSecretId\n  },\n  // @ts-expect-error -- the `cache` option is valid, but not in the types when NextJS typings aren't installed\n  {\n    cache: \"no-store\",\n    tag\n  });\n  if (!(data == null ? void 0 : data.secret) && isDev) {\n    const exists = await client.fetch( /* groq */\n    \"*[_id == $id][0]\", {\n      id: urlSecretId\n    },\n    // @ts-expect-error -- the `cache` option is valid, but not in the types when NextJS typings aren't installed\n    {\n      cache: \"no-store\",\n      tag\n    });\n    if (!exists) {\n      throw new TypeError(\"Unable to find a secret in the dataset, with the id `\".concat(urlSecretId, \"`. Have you set the `urlSecretId` option in your `Iframe` and `previewUrl` configurations?\"));\n    }\n  }\n  return (data == null ? void 0 : data.secret) === urlSecret;\n}\nexports.SECRET_TTL = SECRET_TTL;\nexports.apiVersion = apiVersion;\nexports.fetchSecretQuery = fetchSecretQuery;\nexports.isValidSecret = isValidSecret;\nexports.tag = tag;\n//# sourceMappingURL=is-valid-secret-fac49993.cjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc2FuaXR5LXBsdWdpbi1pZnJhbWUtcGFuZS9saWIvX2NodW5rcy9pcy12YWxpZC1zZWNyZXQtZmFjNDk5OTMuY2pzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBLHFGQUFxRixtQkFBbUI7QUFDeEc7QUFDQTtBQUNBLGNBQWMsYUFBb0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLGtCQUFrQjtBQUNsQix3QkFBd0I7QUFDeEIscUJBQXFCO0FBQ3JCLFdBQVc7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyZXltYXR0ZXItdjIvLi9ub2RlX21vZHVsZXMvc2FuaXR5LXBsdWdpbi1pZnJhbWUtcGFuZS9saWIvX2NodW5rcy9pcy12YWxpZC1zZWNyZXQtZmFjNDk5OTMuY2pzPzg0ZDEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgbmFtZSA9IFwic2FuaXR5LXBsdWdpbi1pZnJhbWUtcGFuZVwiO1xuY29uc3QgU0VDUkVUX1RUTCA9IDYwICogNjA7XG5jb25zdCBmZXRjaFNlY3JldFF1ZXJ5ID0gLyogZ3JvcSAqL1xuXCIqW19pZCA9PSAkaWQgJiYgZGF0ZVRpbWUoX3VwZGF0ZWRBdCkgPiBkYXRlVGltZShub3coKSkgLSBcIi5jb25jYXQoU0VDUkVUX1RUTCwgXCJdWzBde3NlY3JldCwgX3VwZGF0ZWRBdH1cIik7XG5jb25zdCB0YWcgPSBuYW1lO1xuY29uc3QgYXBpVmVyc2lvbiA9IFwiMjAyMy0wOC0wOFwiO1xuY29uc3QgaXNEZXYgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiO1xuYXN5bmMgZnVuY3Rpb24gaXNWYWxpZFNlY3JldChjbGllbnQsIHVybFNlY3JldElkLCB1cmxTZWNyZXQpIHtcbiAgaWYgKCF1cmxTZWNyZXQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYHVybFNlY3JldGAgaXMgcmVxdWlyZWRcIik7XG4gIH1cbiAgaWYgKCF1cmxTZWNyZXRJZCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJgdXJsU2VjcmV0SWRgIGlzIHJlcXVpcmVkXCIpO1xuICB9XG4gIGlmICghdXJsU2VjcmV0SWQuaW5jbHVkZXMoXCIuXCIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImB1cmxTZWNyZXRJZGAgbXVzdCBoYXZlIGEgZG90IHByZWZpeCwgYFwiLmNvbmNhdCh1cmxTZWNyZXRJZCwgXCJgIGlzIG5vdCBzZWN1cmUsIGFkZCBhIHByZWZpeCwgZm9yIGV4YW1wbGUgYHByZXZpZXcuXCIpLmNvbmNhdCh1cmxTZWNyZXRJZCwgXCJgIFwiKSk7XG4gIH1cbiAgaWYgKCFjbGllbnQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYGNsaWVudGAgaXMgcmVxdWlyZWRcIik7XG4gIH1cbiAgaWYgKCFjbGllbnQuY29uZmlnKCkudG9rZW4pIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYGNsaWVudGAgbXVzdCBoYXZlIGEgYHRva2VuYCBzcGVjaWZpZWRcIik7XG4gIH1cbiAgaWYgKHR5cGVvZiBFZGdlUnVudGltZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAzMDApKTtcbiAgfVxuICBjb25zdCBjdXN0b21DbGllbnQgPSBjbGllbnQud2l0aENvbmZpZyh7XG4gICAgYXBpVmVyc2lvbixcbiAgICB1c2VDZG46IGZhbHNlLFxuICAgIHBlcnNwZWN0aXZlOiBcInJhd1wiLFxuICAgIHJlc3VsdFNvdXJjZU1hcDogZmFsc2VcbiAgfSk7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBjdXN0b21DbGllbnQuZmV0Y2goZmV0Y2hTZWNyZXRRdWVyeSwge1xuICAgIGlkOiB1cmxTZWNyZXRJZFxuICB9LFxuICAvLyBAdHMtZXhwZWN0LWVycm9yIC0tIHRoZSBgY2FjaGVgIG9wdGlvbiBpcyB2YWxpZCwgYnV0IG5vdCBpbiB0aGUgdHlwZXMgd2hlbiBOZXh0SlMgdHlwaW5ncyBhcmVuJ3QgaW5zdGFsbGVkXG4gIHtcbiAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxuICAgIHRhZ1xuICB9KTtcbiAgaWYgKCEoZGF0YSA9PSBudWxsID8gdm9pZCAwIDogZGF0YS5zZWNyZXQpICYmIGlzRGV2KSB7XG4gICAgY29uc3QgZXhpc3RzID0gYXdhaXQgY2xpZW50LmZldGNoKCAvKiBncm9xICovXG4gICAgXCIqW19pZCA9PSAkaWRdWzBdXCIsIHtcbiAgICAgIGlkOiB1cmxTZWNyZXRJZFxuICAgIH0sXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtLSB0aGUgYGNhY2hlYCBvcHRpb24gaXMgdmFsaWQsIGJ1dCBub3QgaW4gdGhlIHR5cGVzIHdoZW4gTmV4dEpTIHR5cGluZ3MgYXJlbid0IGluc3RhbGxlZFxuICAgIHtcbiAgICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXG4gICAgICB0YWdcbiAgICB9KTtcbiAgICBpZiAoIWV4aXN0cykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBmaW5kIGEgc2VjcmV0IGluIHRoZSBkYXRhc2V0LCB3aXRoIHRoZSBpZCBgXCIuY29uY2F0KHVybFNlY3JldElkLCBcImAuIEhhdmUgeW91IHNldCB0aGUgYHVybFNlY3JldElkYCBvcHRpb24gaW4geW91ciBgSWZyYW1lYCBhbmQgYHByZXZpZXdVcmxgIGNvbmZpZ3VyYXRpb25zP1wiKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiAoZGF0YSA9PSBudWxsID8gdm9pZCAwIDogZGF0YS5zZWNyZXQpID09PSB1cmxTZWNyZXQ7XG59XG5leHBvcnRzLlNFQ1JFVF9UVEwgPSBTRUNSRVRfVFRMO1xuZXhwb3J0cy5hcGlWZXJzaW9uID0gYXBpVmVyc2lvbjtcbmV4cG9ydHMuZmV0Y2hTZWNyZXRRdWVyeSA9IGZldGNoU2VjcmV0UXVlcnk7XG5leHBvcnRzLmlzVmFsaWRTZWNyZXQgPSBpc1ZhbGlkU2VjcmV0O1xuZXhwb3J0cy50YWcgPSB0YWc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pcy12YWxpZC1zZWNyZXQtZmFjNDk5OTMuY2pzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/sanity-plugin-iframe-pane/lib/_chunks/is-valid-secret-fac49993.cjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/sanity-plugin-iframe-pane/lib/_chunks/utils-a281f455.cjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/sanity-plugin-iframe-pane/lib/_chunks/utils-a281f455.cjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nvar isValidSecret = __webpack_require__(/*! ./is-valid-secret-fac49993.cjs */ \"(ssr)/./node_modules/sanity-plugin-iframe-pane/lib/_chunks/is-valid-secret-fac49993.cjs\");\nconst MissingSlug = Symbol(\"MissingSlug\");\nfunction defineUrlResolver(options) {\n  const {\n    base,\n    requiresSlug = []\n  } = options;\n  return (document, urlSecret) => {\n    var _a;\n    const url = new URL(base, location.origin);\n    url.searchParams.set(\"type\", document._type);\n    const slug = (_a = document == null ? void 0 : document.slug) == null ? void 0 : _a.current;\n    if (slug) {\n      url.searchParams.set(\"slug\", slug);\n    } else if (requiresSlug.includes(document._type)) {\n      return MissingSlug;\n    }\n    if (urlSecret) {\n      url.searchParams.set(\"secret\", urlSecret);\n    }\n    return url.toString();\n  };\n}\nfunction getExpiresAt(_updatedAt) {\n  return new Date(_updatedAt.getTime() + 1e3 * isValidSecret.SECRET_TTL);\n}\nfunction generateUrlSecret() {\n  if (typeof crypto !== \"undefined\") {\n    const array = new Uint8Array(16);\n    crypto.getRandomValues(array);\n    let key = \"\";\n    for (let i = 0; i < array.length; i++) {\n      key += array[i].toString(16).padStart(2, \"0\");\n    }\n    key = btoa(key).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/[=]+$/, \"\");\n    return key;\n  }\n  return Math.random().toString(36).slice(2);\n}\nasync function patchUrlSecret(client, urlSecretId, signal) {\n  const newSecret = generateUrlSecret();\n  const patch = client.patch(urlSecretId).set({\n    secret: newSecret\n  });\n  await client.transaction().createIfNotExists({\n    _id: urlSecretId,\n    _type: urlSecretId\n  }).patch(patch).commit({\n    tag: isValidSecret.tag,\n    signal\n  });\n  return newSecret;\n}\nexports.MissingSlug = MissingSlug;\nexports.defineUrlResolver = defineUrlResolver;\nexports.getExpiresAt = getExpiresAt;\nexports.patchUrlSecret = patchUrlSecret;\n//# sourceMappingURL=utils-a281f455.cjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc2FuaXR5LXBsdWdpbi1pZnJhbWUtcGFuZS9saWIvX2NodW5rcy91dGlscy1hMjgxZjQ1NS5janMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsb0JBQW9CLG1CQUFPLENBQUMsK0hBQWdDO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQix5QkFBeUI7QUFDekIsb0JBQW9CO0FBQ3BCLHNCQUFzQjtBQUN0QiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyZXltYXR0ZXItdjIvLi9ub2RlX21vZHVsZXMvc2FuaXR5LXBsdWdpbi1pZnJhbWUtcGFuZS9saWIvX2NodW5rcy91dGlscy1hMjgxZjQ1NS5janM/OTg2NyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBpc1ZhbGlkU2VjcmV0ID0gcmVxdWlyZSgnLi9pcy12YWxpZC1zZWNyZXQtZmFjNDk5OTMuY2pzJyk7XG5jb25zdCBNaXNzaW5nU2x1ZyA9IFN5bWJvbChcIk1pc3NpbmdTbHVnXCIpO1xuZnVuY3Rpb24gZGVmaW5lVXJsUmVzb2x2ZXIob3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgYmFzZSxcbiAgICByZXF1aXJlc1NsdWcgPSBbXVxuICB9ID0gb3B0aW9ucztcbiAgcmV0dXJuIChkb2N1bWVudCwgdXJsU2VjcmV0KSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoYmFzZSwgbG9jYXRpb24ub3JpZ2luKTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInR5cGVcIiwgZG9jdW1lbnQuX3R5cGUpO1xuICAgIGNvbnN0IHNsdWcgPSAoX2EgPSBkb2N1bWVudCA9PSBudWxsID8gdm9pZCAwIDogZG9jdW1lbnQuc2x1ZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmN1cnJlbnQ7XG4gICAgaWYgKHNsdWcpIHtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic2x1Z1wiLCBzbHVnKTtcbiAgICB9IGVsc2UgaWYgKHJlcXVpcmVzU2x1Zy5pbmNsdWRlcyhkb2N1bWVudC5fdHlwZSkpIHtcbiAgICAgIHJldHVybiBNaXNzaW5nU2x1ZztcbiAgICB9XG4gICAgaWYgKHVybFNlY3JldCkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJzZWNyZXRcIiwgdXJsU2VjcmV0KTtcbiAgICB9XG4gICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xuICB9O1xufVxuZnVuY3Rpb24gZ2V0RXhwaXJlc0F0KF91cGRhdGVkQXQpIHtcbiAgcmV0dXJuIG5ldyBEYXRlKF91cGRhdGVkQXQuZ2V0VGltZSgpICsgMWUzICogaXNWYWxpZFNlY3JldC5TRUNSRVRfVFRMKTtcbn1cbmZ1bmN0aW9uIGdlbmVyYXRlVXJsU2VjcmV0KCkge1xuICBpZiAodHlwZW9mIGNyeXB0byAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGNvbnN0IGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMTYpO1xuICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYXJyYXkpO1xuICAgIGxldCBrZXkgPSBcIlwiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleSArPSBhcnJheVtpXS50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpO1xuICAgIH1cbiAgICBrZXkgPSBidG9hKGtleSkucmVwbGFjZSgvXFwrL2csIFwiLVwiKS5yZXBsYWNlKC9cXC8vZywgXCJfXCIpLnJlcGxhY2UoL1s9XSskLywgXCJcIik7XG4gICAgcmV0dXJuIGtleTtcbiAgfVxuICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7XG59XG5hc3luYyBmdW5jdGlvbiBwYXRjaFVybFNlY3JldChjbGllbnQsIHVybFNlY3JldElkLCBzaWduYWwpIHtcbiAgY29uc3QgbmV3U2VjcmV0ID0gZ2VuZXJhdGVVcmxTZWNyZXQoKTtcbiAgY29uc3QgcGF0Y2ggPSBjbGllbnQucGF0Y2godXJsU2VjcmV0SWQpLnNldCh7XG4gICAgc2VjcmV0OiBuZXdTZWNyZXRcbiAgfSk7XG4gIGF3YWl0IGNsaWVudC50cmFuc2FjdGlvbigpLmNyZWF0ZUlmTm90RXhpc3RzKHtcbiAgICBfaWQ6IHVybFNlY3JldElkLFxuICAgIF90eXBlOiB1cmxTZWNyZXRJZFxuICB9KS5wYXRjaChwYXRjaCkuY29tbWl0KHtcbiAgICB0YWc6IGlzVmFsaWRTZWNyZXQudGFnLFxuICAgIHNpZ25hbFxuICB9KTtcbiAgcmV0dXJuIG5ld1NlY3JldDtcbn1cbmV4cG9ydHMuTWlzc2luZ1NsdWcgPSBNaXNzaW5nU2x1ZztcbmV4cG9ydHMuZGVmaW5lVXJsUmVzb2x2ZXIgPSBkZWZpbmVVcmxSZXNvbHZlcjtcbmV4cG9ydHMuZ2V0RXhwaXJlc0F0ID0gZ2V0RXhwaXJlc0F0O1xuZXhwb3J0cy5wYXRjaFVybFNlY3JldCA9IHBhdGNoVXJsU2VjcmV0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMtYTI4MWY0NTUuY2pzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/sanity-plugin-iframe-pane/lib/_chunks/utils-a281f455.cjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/sanity-plugin-iframe-pane/lib/index.cjs":
/*!**************************************************************!*\
  !*** ./node_modules/sanity-plugin-iframe-pane/lib/index.cjs ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nvar utils = __webpack_require__(/*! ./_chunks/utils-a281f455.cjs */ \"(ssr)/./node_modules/sanity-plugin-iframe-pane/lib/_chunks/utils-a281f455.cjs\");\nvar jsxRuntime = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/shared/react-jsx-runtime.js\");\nvar icons = __webpack_require__(/*! @sanity/icons */ \"(ssr)/./node_modules/@sanity/icons/dist/index.cjs\");\nvar ui = __webpack_require__(/*! @sanity/ui */ \"(ssr)/./node_modules/@sanity/ui/dist/index.js\");\nvar framerMotion = __webpack_require__(/*! framer-motion */ \"(ssr)/./node_modules/framer-motion/dist/cjs/index.js\");\nvar react = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\nvar sanity = __webpack_require__(/*! sanity */ \"(ssr)/./node_modules/sanity/lib/index.js\");\nvar isValidSecret = __webpack_require__(/*! ./_chunks/is-valid-secret-fac49993.cjs */ \"(ssr)/./node_modules/sanity-plugin-iframe-pane/lib/_chunks/is-valid-secret-fac49993.cjs\");\nvar usehooksTs = __webpack_require__(/*! usehooks-ts */ \"(ssr)/./node_modules/usehooks-ts/dist/cjs/index.js\");\nfunction GetUrlSecret(props) {\n  const {\n    urlSecretId,\n    setUrlSecret,\n    urlSecret,\n    setError\n  } = props;\n  const client = sanity.useClient({\n    apiVersion: isValidSecret.apiVersion\n  });\n  const [secretExpiresAt, setSecretExpiresAt] = react.useState(null);\n  if (!urlSecretId.includes(\".\")) {\n    throw new TypeError(\"`urlSecretId` must have a dot prefix, `\".concat(urlSecretId, \"` is not secure, add a prefix, for example `preview.\").concat(urlSecretId, \"` \"));\n  }\n  react.useEffect(() => {\n    if (urlSecret) return;\n    async function getSecret(signal) {\n      const data = await client.fetch(isValidSecret.fetchSecretQuery, {\n        id: urlSecretId\n      }, {\n        signal,\n        tag: isValidSecret.tag\n      });\n      if (signal.aborted) return;\n      if (!(data == null ? void 0 : data.secret) || !(data == null ? void 0 : data._updatedAt)) {\n        try {\n          const newUpdatedAt = /* @__PURE__ */new Date();\n          const newSecret = await utils.patchUrlSecret(client, urlSecretId, signal);\n          if (signal.aborted) return;\n          setUrlSecret(newSecret);\n          setSecretExpiresAt(utils.getExpiresAt(newUpdatedAt));\n        } catch (err) {\n          console.error(\"Failed to create a new preview secret. Ensure the `client` has a `token` specified that has `write` permissions.\", err);\n        }\n        return;\n      }\n      if ((data == null ? void 0 : data.secret) !== urlSecret) {\n        setUrlSecret(data == null ? void 0 : data.secret);\n        setSecretExpiresAt(utils.getExpiresAt(new Date(data == null ? void 0 : data._updatedAt)));\n      }\n    }\n    const abort = new AbortController();\n    getSecret(abort.signal).catch(error => error.name !== \"AbortError\" && setError(error));\n    return () => abort.abort();\n  }, [client, setError, setUrlSecret, urlSecret, urlSecretId]);\n  react.useEffect(() => {\n    if (!secretExpiresAt) return;\n    const timeout = setTimeout(() => {\n      setUrlSecret(null);\n      setSecretExpiresAt(null);\n    }, Math.max(0, secretExpiresAt.getTime() - /* @__PURE__ */new Date().getTime()));\n    return () => clearTimeout(timeout);\n  }, [secretExpiresAt, setUrlSecret]);\n  return null;\n}\nfunction DisplayUrl(_ref) {\n  let {\n    displayUrl\n  } = _ref;\n  const truncatedUrl = react.useMemo(() => {\n    const url = new URL(displayUrl);\n    if (url.searchParams.has(\"secret\")) {\n      url.searchParams.delete(\"secret\");\n      url.searchParams.append(\"secret\", \"***\");\n    }\n    return \"\".concat(url.origin === location.origin ? \"\" : url.origin).concat(url.pathname).concat(url.search);\n  }, [displayUrl]);\n  return /* @__PURE__ */jsxRuntime.jsx(ui.Text, {\n    size: 0,\n    textOverflow: \"ellipsis\",\n    title: displayUrl,\n    children: truncatedUrl\n  });\n}\nconst sizes = {\n  desktop: {\n    width: \"100%\",\n    height: \"100%\"\n  },\n  mobile: {\n    width: 414,\n    height: 746\n  }\n};\nconst DEFAULT_SIZE = \"desktop\";\nfunction Toolbar(props) {\n  const {\n    displayUrl,\n    iframeSize,\n    setIframeSize,\n    reloading,\n    showDisplayUrl,\n    reloadButton,\n    handleReload\n  } = props;\n  const input = react.useRef(null);\n  const {\n    push: pushToast\n  } = ui.useToast();\n  const [, copy] = usehooksTs.useCopyToClipboard();\n  return /* @__PURE__ */jsxRuntime.jsxs(jsxRuntime.Fragment, {\n    children: [/* @__PURE__ */jsxRuntime.jsx(\"textarea\", {\n      style: {\n        position: \"absolute\",\n        pointerEvents: \"none\",\n        opacity: 0\n      },\n      ref: input,\n      value: displayUrl,\n      readOnly: true,\n      tabIndex: -1\n    }), /* @__PURE__ */jsxRuntime.jsx(ui.Card, {\n      padding: 2,\n      borderBottom: true,\n      children: /* @__PURE__ */jsxRuntime.jsxs(ui.Flex, {\n        align: \"center\",\n        gap: 2,\n        children: [/* @__PURE__ */jsxRuntime.jsx(ui.Flex, {\n          align: \"center\",\n          gap: 1,\n          children: /* @__PURE__ */jsxRuntime.jsx(ui.Tooltip, {\n            content: /* @__PURE__ */jsxRuntime.jsx(ui.Text, {\n              size: 1,\n              style: {\n                whiteSpace: \"nowrap\"\n              },\n              children: iframeSize === \"mobile\" ? \"Exit mobile preview\" : \"Preview mobile viewport\"\n            }),\n            padding: 2,\n            placement: \"bottom-start\",\n            children: /* @__PURE__ */jsxRuntime.jsx(ui.Button, {\n              disabled: !displayUrl,\n              fontSize: [1],\n              padding: 2,\n              mode: iframeSize === \"mobile\" ? \"default\" : \"ghost\",\n              icon: icons.MobileDeviceIcon,\n              onClick: () => setIframeSize(iframeSize === \"mobile\" ? \"desktop\" : \"mobile\")\n            })\n          })\n        }), /* @__PURE__ */jsxRuntime.jsx(ui.Box, {\n          flex: 1,\n          children: showDisplayUrl && displayUrl && /* @__PURE__ */jsxRuntime.jsx(DisplayUrl, {\n            displayUrl\n          })\n        }), /* @__PURE__ */jsxRuntime.jsxs(ui.Flex, {\n          align: \"center\",\n          gap: 1,\n          children: [reloadButton ? /* @__PURE__ */jsxRuntime.jsx(ui.Tooltip, {\n            content: /* @__PURE__ */jsxRuntime.jsx(ui.Text, {\n              size: 1,\n              style: {\n                whiteSpace: \"nowrap\"\n              },\n              children: reloading ? \"Reloading\\u2026\" : \"Reload\"\n            }),\n            padding: 2,\n            children: /* @__PURE__ */jsxRuntime.jsx(ui.Button, {\n              disabled: !displayUrl,\n              mode: \"bleed\",\n              fontSize: [1],\n              padding: 2,\n              icon: /* @__PURE__ */jsxRuntime.jsx(icons.UndoIcon, {\n                style: {\n                  transform: \"rotate(90deg) scaleY(-1)\"\n                }\n              }),\n              loading: reloading,\n              \"aria-label\": \"Reload\",\n              onClick: () => handleReload()\n            })\n          }) : null, /* @__PURE__ */jsxRuntime.jsx(ui.Tooltip, {\n            content: /* @__PURE__ */jsxRuntime.jsx(ui.Text, {\n              size: 1,\n              style: {\n                whiteSpace: \"nowrap\"\n              },\n              children: \"Copy URL\"\n            }),\n            padding: 2,\n            children: /* @__PURE__ */jsxRuntime.jsx(ui.Button, {\n              mode: \"bleed\",\n              disabled: !displayUrl,\n              fontSize: [1],\n              icon: icons.ClipboardIcon,\n              padding: [2],\n              \"aria-label\": \"Copy URL\",\n              onClick: () => {\n                var _a;\n                if (!((_a = input == null ? void 0 : input.current) == null ? void 0 : _a.value)) return;\n                copy(input.current.value);\n                pushToast({\n                  closable: true,\n                  status: \"success\",\n                  title: \"The URL is copied to the clipboard\"\n                });\n              }\n            })\n          }), /* @__PURE__ */jsxRuntime.jsx(ui.Tooltip, {\n            content: /* @__PURE__ */jsxRuntime.jsx(ui.Text, {\n              size: 1,\n              style: {\n                whiteSpace: \"nowrap\"\n              },\n              children: \"Open URL in a new tab\"\n            }),\n            padding: 2,\n            placement: \"bottom-end\",\n            children: /* @__PURE__ */jsxRuntime.jsx(ui.Button, {\n              disabled: !displayUrl,\n              fontSize: [1],\n              icon: icons.LaunchIcon,\n              mode: \"ghost\",\n              paddingY: [2],\n              text: \"Open\",\n              \"aria-label\": \"Open URL in a new tab\",\n              onClick: () => window.open(displayUrl)\n            })\n          })]\n        })]\n      })\n    })]\n  });\n}\nconst MotionFlex = framerMotion.motion(ui.Flex);\nfunction Iframe(props) {\n  var _a;\n  const [error, setError] = react.useState(null);\n  if (error) {\n    throw error;\n  }\n  const {\n    document: sanityDocument,\n    options\n  } = props;\n  const {\n    url,\n    urlSecretId,\n    defaultSize = DEFAULT_SIZE,\n    reload,\n    loader = \"Loading\\u2026\",\n    attributes = {},\n    showDisplayUrl = true\n  } = options;\n  const [iframeSize, setIframeSize] = react.useState(((_a = sizes) == null ? void 0 : _a[defaultSize]) ? defaultSize : DEFAULT_SIZE);\n  const [workaroundEmptyDocument, setWorkaroundEmptyDocument] = react.useState(true);\n  react.useEffect(() => {\n    const timeout = setTimeout(() => setWorkaroundEmptyDocument(false), 1e3);\n    return () => clearTimeout(timeout);\n  }, []);\n  const prefersReducedMotion = ui.usePrefersReducedMotion();\n  const [urlState, setUrlState] = react.useState(() => typeof url === \"function\" ? \"\" : url);\n  const [loading, setLoading] = react.useState(true);\n  const [reloading, setReloading] = react.useState(false);\n  const iframe = react.useRef(null);\n  const {\n    displayed\n  } = sanityDocument;\n  const handleReload = react.useCallback(() => {\n    if (!(iframe == null ? void 0 : iframe.current)) {\n      return;\n    }\n    iframe.current.src = iframe.current.src;\n    setReloading(true);\n  }, []);\n  const deferredRevision = react.useDeferredValue(displayed._rev);\n  const displayUrl = typeof urlState === \"string\" ? urlState : \"\";\n  return /* @__PURE__ */jsxRuntime.jsx(framerMotion.MotionConfig, {\n    transition: prefersReducedMotion ? {\n      duration: 0\n    } : void 0,\n    children: /* @__PURE__ */jsxRuntime.jsxs(ui.Flex, {\n      direction: \"column\",\n      style: {\n        height: \"100%\"\n      },\n      children: [/* @__PURE__ */jsxRuntime.jsx(Toolbar, {\n        displayUrl,\n        iframeSize,\n        reloading,\n        setIframeSize,\n        showDisplayUrl,\n        reloadButton: !!(reload == null ? void 0 : reload.button),\n        handleReload\n      }), urlState === utils.MissingSlug && !workaroundEmptyDocument ? /* @__PURE__ */jsxRuntime.jsx(MissingSlugScreen, {}) : /* @__PURE__ */jsxRuntime.jsx(ui.Card, {\n        tone: \"transparent\",\n        style: {\n          height: \"100%\"\n        },\n        children: /* @__PURE__ */jsxRuntime.jsx(Frame, {\n          ref: iframe,\n          loader,\n          loading,\n          reloading,\n          iframeSize,\n          setReloading,\n          setLoading,\n          displayUrl,\n          attributes\n        })\n      }), typeof url === \"function\" && /* @__PURE__ */jsxRuntime.jsx(AsyncUrl, {\n        url,\n        displayed,\n        urlSecretId,\n        setDisplayUrl: setUrlState,\n        setError\n      }, deferredRevision), displayUrl && ((reload == null ? void 0 : reload.revision) || (reload == null ? void 0 : reload.revision) === 0) && /* @__PURE__ */jsxRuntime.jsx(ReloadOnRevision, {\n        revision: reload.revision,\n        _rev: deferredRevision,\n        handleReload\n      })]\n    })\n  });\n}\nconst Frame = react.forwardRef(function Frame2(props, iframe) {\n  const {\n    loader,\n    loading,\n    setLoading,\n    iframeSize,\n    attributes,\n    reloading,\n    displayUrl,\n    setReloading\n  } = props;\n  function handleIframeLoad() {\n    setLoading(false);\n    setReloading(false);\n    if (attributes.onLoad && typeof attributes.onLoad === \"function\") {\n      attributes.onLoad();\n    }\n  }\n  return /* @__PURE__ */jsxRuntime.jsxs(ui.Flex, {\n    align: \"center\",\n    justify: \"center\",\n    style: {\n      height: \"100%\",\n      position: \"relative\"\n    },\n    children: [/* @__PURE__ */jsxRuntime.jsx(framerMotion.AnimatePresence, {\n      children: loader && loading && /* @__PURE__ */jsxRuntime.jsx(MotionFlex, {\n        initial: \"initial\",\n        animate: \"animate\",\n        exit: \"exit\",\n        variants: spinnerVariants,\n        justify: \"center\",\n        align: \"center\",\n        style: {\n          inset: \"0\",\n          position: \"absolute\"\n        },\n        children: /* @__PURE__ */jsxRuntime.jsxs(ui.Flex, {\n          style: {\n            ...sizes[iframeSize]\n          },\n          justify: \"center\",\n          align: \"center\",\n          direction: \"column\",\n          gap: 4,\n          children: [/* @__PURE__ */jsxRuntime.jsx(ui.Spinner, {\n            muted: true\n          }), loader && typeof loader === \"string\" && /* @__PURE__ */jsxRuntime.jsx(ui.Text, {\n            muted: true,\n            size: 1,\n            children: loader\n          })]\n        })\n      })\n    }), /* @__PURE__ */jsxRuntime.jsx(framerMotion.motion.iframe, {\n      ref: iframe,\n      title: \"preview\",\n      frameBorder: \"0\",\n      style: {\n        maxHeight: \"100%\"\n      },\n      src: displayUrl,\n      initial: [\"background\", iframeSize],\n      variants: iframeVariants,\n      animate: [loader && loading ? \"background\" : \"active\", reloading ? \"reloading\" : \"idle\", iframeSize],\n      ...attributes,\n      onLoad: handleIframeLoad\n    })]\n  });\n});\nconst spinnerVariants = {\n  initial: {\n    opacity: 1\n  },\n  animate: {\n    opacity: [0, 0, 1]\n  },\n  exit: {\n    opacity: [1, 0, 0]\n  }\n};\nconst iframeVariants = {\n  ...sizes,\n  desktop: {\n    ...sizes.desktop,\n    boxShadow: \"0 0 0 0px var(--card-shadow-outline-color)\"\n  },\n  mobile: {\n    ...sizes.mobile,\n    boxShadow: \"0 0 0 1px var(--card-shadow-outline-color)\"\n  },\n  background: {\n    opacity: 0,\n    scale: 1\n  },\n  idle: {\n    scale: 1\n  },\n  reloading: {\n    scale: [1, 1, 1, 0.98]\n  },\n  active: {\n    opacity: [0, 0, 1],\n    scale: 1\n  }\n};\nfunction ReloadOnRevision(props) {\n  const {\n    revision,\n    handleReload,\n    _rev\n  } = props;\n  const [initialRev] = react.useState(_rev);\n  react.useEffect(() => {\n    if (_rev !== initialRev) {\n      const timeout = setTimeout(handleReload, Number(revision === true ? 300 : revision));\n      return () => clearTimeout(timeout);\n    }\n  }, [_rev, revision, handleReload, initialRev]);\n  return null;\n}\nfunction AsyncUrl(props) {\n  const {\n    urlSecretId,\n    setDisplayUrl,\n    setError\n  } = props;\n  const [displayed] = react.useState(props.displayed);\n  const [url] = react.useState(() => props.url);\n  const [urlSecret, setUrlSecret] = react.useState(null);\n  react.useEffect(() => {\n    if (urlSecretId && !urlSecret) return;\n    const getUrl = async signal => {\n      const resolveUrl = await url(displayed, urlSecret, abort.signal);\n      if (!signal.aborted && resolveUrl) {\n        setDisplayUrl(resolveUrl);\n      }\n    };\n    const abort = new AbortController();\n    getUrl(abort.signal).catch(error => error.name !== \"AbortError\" && setError(error));\n    return () => abort.abort();\n  }, [displayed, setDisplayUrl, setError, url, urlSecret, urlSecretId]);\n  if (urlSecretId) {\n    return /* @__PURE__ */jsxRuntime.jsx(GetUrlSecret, {\n      urlSecretId,\n      urlSecret,\n      setUrlSecret,\n      setError\n    });\n  }\n  return null;\n}\nfunction MissingSlugScreen() {\n  return /* @__PURE__ */jsxRuntime.jsx(ui.Card, {\n    height: \"fill\",\n    children: /* @__PURE__ */jsxRuntime.jsx(ui.Flex, {\n      align: \"center\",\n      height: \"fill\",\n      justify: \"center\",\n      padding: 4,\n      sizing: \"border\",\n      children: /* @__PURE__ */jsxRuntime.jsx(ui.Container, {\n        width: 0,\n        children: /* @__PURE__ */jsxRuntime.jsx(ui.Card, {\n          padding: 4,\n          radius: 2,\n          shadow: 1,\n          tone: \"caution\",\n          children: /* @__PURE__ */jsxRuntime.jsxs(ui.Flex, {\n            children: [/* @__PURE__ */jsxRuntime.jsx(ui.Box, {\n              children: /* @__PURE__ */jsxRuntime.jsx(ui.Text, {\n                size: 1,\n                children: /* @__PURE__ */jsxRuntime.jsx(icons.WarningOutlineIcon, {})\n              })\n            }), /* @__PURE__ */jsxRuntime.jsxs(ui.Stack, {\n              flex: 1,\n              marginLeft: 3,\n              space: 3,\n              children: [/* @__PURE__ */jsxRuntime.jsx(ui.Text, {\n                as: \"h1\",\n                size: 1,\n                weight: \"bold\",\n                children: \"Missing slug\"\n              }), /* @__PURE__ */jsxRuntime.jsx(ui.Text, {\n                as: \"p\",\n                muted: true,\n                size: 1,\n                children: \"Add a slug to see the preview.\"\n              })]\n            })]\n          })\n        })\n      })\n    })\n  });\n}\nexports.defineUrlResolver = utils.defineUrlResolver;\nexports.Iframe = Iframe;\nexports[\"default\"] = Iframe;\n//# sourceMappingURL=index.cjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc2FuaXR5LXBsdWdpbi1pZnJhbWUtcGFuZS9saWIvaW5kZXguY2pzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLFlBQVksbUJBQU8sQ0FBQyxtSEFBOEI7QUFDbEQsaUJBQWlCLG1CQUFPLENBQUMsbUlBQW1CO0FBQzVDLFlBQVksbUJBQU8sQ0FBQyx3RUFBZTtBQUNuQyxTQUFTLG1CQUFPLENBQUMsaUVBQVk7QUFDN0IsbUJBQW1CLG1CQUFPLENBQUMsMkVBQWU7QUFDMUMsWUFBWSxtQkFBTyxDQUFDLHdHQUFPO0FBQzNCLGFBQWEsbUJBQU8sQ0FBQyx3REFBUTtBQUM3QixvQkFBb0IsbUJBQU8sQ0FBQyx1SUFBd0M7QUFDcEUsaUJBQWlCLG1CQUFPLENBQUMsdUVBQWE7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sbUhBQW1IO0FBQzFIO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRkFBb0Y7QUFDcEYsZUFBZTtBQUNmLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLGFBQWE7QUFDYixXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0EseUJBQXlCO0FBQ3pCLGNBQWM7QUFDZCxrQkFBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JleW1hdHRlci12Mi8uL25vZGVfbW9kdWxlcy9zYW5pdHktcGx1Z2luLWlmcmFtZS1wYW5lL2xpYi9pbmRleC5janM/OWYwYiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi9fY2h1bmtzL3V0aWxzLWEyODFmNDU1LmNqcycpO1xudmFyIGpzeFJ1bnRpbWUgPSByZXF1aXJlKCdyZWFjdC9qc3gtcnVudGltZScpO1xudmFyIGljb25zID0gcmVxdWlyZSgnQHNhbml0eS9pY29ucycpO1xudmFyIHVpID0gcmVxdWlyZSgnQHNhbml0eS91aScpO1xudmFyIGZyYW1lck1vdGlvbiA9IHJlcXVpcmUoJ2ZyYW1lci1tb3Rpb24nKTtcbnZhciByZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgc2FuaXR5ID0gcmVxdWlyZSgnc2FuaXR5Jyk7XG52YXIgaXNWYWxpZFNlY3JldCA9IHJlcXVpcmUoJy4vX2NodW5rcy9pcy12YWxpZC1zZWNyZXQtZmFjNDk5OTMuY2pzJyk7XG52YXIgdXNlaG9va3NUcyA9IHJlcXVpcmUoJ3VzZWhvb2tzLXRzJyk7XG5mdW5jdGlvbiBHZXRVcmxTZWNyZXQocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHVybFNlY3JldElkLFxuICAgIHNldFVybFNlY3JldCxcbiAgICB1cmxTZWNyZXQsXG4gICAgc2V0RXJyb3JcbiAgfSA9IHByb3BzO1xuICBjb25zdCBjbGllbnQgPSBzYW5pdHkudXNlQ2xpZW50KHtcbiAgICBhcGlWZXJzaW9uOiBpc1ZhbGlkU2VjcmV0LmFwaVZlcnNpb25cbiAgfSk7XG4gIGNvbnN0IFtzZWNyZXRFeHBpcmVzQXQsIHNldFNlY3JldEV4cGlyZXNBdF0gPSByZWFjdC51c2VTdGF0ZShudWxsKTtcbiAgaWYgKCF1cmxTZWNyZXRJZC5pbmNsdWRlcyhcIi5cIikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYHVybFNlY3JldElkYCBtdXN0IGhhdmUgYSBkb3QgcHJlZml4LCBgXCIuY29uY2F0KHVybFNlY3JldElkLCBcImAgaXMgbm90IHNlY3VyZSwgYWRkIGEgcHJlZml4LCBmb3IgZXhhbXBsZSBgcHJldmlldy5cIikuY29uY2F0KHVybFNlY3JldElkLCBcImAgXCIpKTtcbiAgfVxuICByZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh1cmxTZWNyZXQpIHJldHVybjtcbiAgICBhc3luYyBmdW5jdGlvbiBnZXRTZWNyZXQoc2lnbmFsKSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgY2xpZW50LmZldGNoKGlzVmFsaWRTZWNyZXQuZmV0Y2hTZWNyZXRRdWVyeSwge1xuICAgICAgICBpZDogdXJsU2VjcmV0SWRcbiAgICAgIH0sIHtcbiAgICAgICAgc2lnbmFsLFxuICAgICAgICB0YWc6IGlzVmFsaWRTZWNyZXQudGFnXG4gICAgICB9KTtcbiAgICAgIGlmIChzaWduYWwuYWJvcnRlZCkgcmV0dXJuO1xuICAgICAgaWYgKCEoZGF0YSA9PSBudWxsID8gdm9pZCAwIDogZGF0YS5zZWNyZXQpIHx8ICEoZGF0YSA9PSBudWxsID8gdm9pZCAwIDogZGF0YS5fdXBkYXRlZEF0KSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IG5ld1VwZGF0ZWRBdCA9IC8qIEBfX1BVUkVfXyAqL25ldyBEYXRlKCk7XG4gICAgICAgICAgY29uc3QgbmV3U2VjcmV0ID0gYXdhaXQgdXRpbHMucGF0Y2hVcmxTZWNyZXQoY2xpZW50LCB1cmxTZWNyZXRJZCwgc2lnbmFsKTtcbiAgICAgICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHJldHVybjtcbiAgICAgICAgICBzZXRVcmxTZWNyZXQobmV3U2VjcmV0KTtcbiAgICAgICAgICBzZXRTZWNyZXRFeHBpcmVzQXQodXRpbHMuZ2V0RXhwaXJlc0F0KG5ld1VwZGF0ZWRBdCkpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBhIG5ldyBwcmV2aWV3IHNlY3JldC4gRW5zdXJlIHRoZSBgY2xpZW50YCBoYXMgYSBgdG9rZW5gIHNwZWNpZmllZCB0aGF0IGhhcyBgd3JpdGVgIHBlcm1pc3Npb25zLlwiLCBlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICgoZGF0YSA9PSBudWxsID8gdm9pZCAwIDogZGF0YS5zZWNyZXQpICE9PSB1cmxTZWNyZXQpIHtcbiAgICAgICAgc2V0VXJsU2VjcmV0KGRhdGEgPT0gbnVsbCA/IHZvaWQgMCA6IGRhdGEuc2VjcmV0KTtcbiAgICAgICAgc2V0U2VjcmV0RXhwaXJlc0F0KHV0aWxzLmdldEV4cGlyZXNBdChuZXcgRGF0ZShkYXRhID09IG51bGwgPyB2b2lkIDAgOiBkYXRhLl91cGRhdGVkQXQpKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFib3J0ID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGdldFNlY3JldChhYm9ydC5zaWduYWwpLmNhdGNoKGVycm9yID0+IGVycm9yLm5hbWUgIT09IFwiQWJvcnRFcnJvclwiICYmIHNldEVycm9yKGVycm9yKSk7XG4gICAgcmV0dXJuICgpID0+IGFib3J0LmFib3J0KCk7XG4gIH0sIFtjbGllbnQsIHNldEVycm9yLCBzZXRVcmxTZWNyZXQsIHVybFNlY3JldCwgdXJsU2VjcmV0SWRdKTtcbiAgcmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXNlY3JldEV4cGlyZXNBdCkgcmV0dXJuO1xuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNldFVybFNlY3JldChudWxsKTtcbiAgICAgIHNldFNlY3JldEV4cGlyZXNBdChudWxsKTtcbiAgICB9LCBNYXRoLm1heCgwLCBzZWNyZXRFeHBpcmVzQXQuZ2V0VGltZSgpIC0gLyogQF9fUFVSRV9fICovbmV3IERhdGUoKS5nZXRUaW1lKCkpKTtcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICB9LCBbc2VjcmV0RXhwaXJlc0F0LCBzZXRVcmxTZWNyZXRdKTtcbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBEaXNwbGF5VXJsKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBkaXNwbGF5VXJsXG4gIH0gPSBfcmVmO1xuICBjb25zdCB0cnVuY2F0ZWRVcmwgPSByZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGRpc3BsYXlVcmwpO1xuICAgIGlmICh1cmwuc2VhcmNoUGFyYW1zLmhhcyhcInNlY3JldFwiKSkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5kZWxldGUoXCJzZWNyZXRcIik7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInNlY3JldFwiLCBcIioqKlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIFwiXCIuY29uY2F0KHVybC5vcmlnaW4gPT09IGxvY2F0aW9uLm9yaWdpbiA/IFwiXCIgOiB1cmwub3JpZ2luKS5jb25jYXQodXJsLnBhdGhuYW1lKS5jb25jYXQodXJsLnNlYXJjaCk7XG4gIH0sIFtkaXNwbGF5VXJsXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeCh1aS5UZXh0LCB7XG4gICAgc2l6ZTogMCxcbiAgICB0ZXh0T3ZlcmZsb3c6IFwiZWxsaXBzaXNcIixcbiAgICB0aXRsZTogZGlzcGxheVVybCxcbiAgICBjaGlsZHJlbjogdHJ1bmNhdGVkVXJsXG4gIH0pO1xufVxuY29uc3Qgc2l6ZXMgPSB7XG4gIGRlc2t0b3A6IHtcbiAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgaGVpZ2h0OiBcIjEwMCVcIlxuICB9LFxuICBtb2JpbGU6IHtcbiAgICB3aWR0aDogNDE0LFxuICAgIGhlaWdodDogNzQ2XG4gIH1cbn07XG5jb25zdCBERUZBVUxUX1NJWkUgPSBcImRlc2t0b3BcIjtcbmZ1bmN0aW9uIFRvb2xiYXIocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGRpc3BsYXlVcmwsXG4gICAgaWZyYW1lU2l6ZSxcbiAgICBzZXRJZnJhbWVTaXplLFxuICAgIHJlbG9hZGluZyxcbiAgICBzaG93RGlzcGxheVVybCxcbiAgICByZWxvYWRCdXR0b24sXG4gICAgaGFuZGxlUmVsb2FkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgaW5wdXQgPSByZWFjdC51c2VSZWYobnVsbCk7XG4gIGNvbnN0IHtcbiAgICBwdXNoOiBwdXNoVG9hc3RcbiAgfSA9IHVpLnVzZVRvYXN0KCk7XG4gIGNvbnN0IFssIGNvcHldID0gdXNlaG9va3NUcy51c2VDb3B5VG9DbGlwYm9hcmQoKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4cyhqc3hSdW50aW1lLkZyYWdtZW50LCB7XG4gICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeChcInRleHRhcmVhXCIsIHtcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgIHBvaW50ZXJFdmVudHM6IFwibm9uZVwiLFxuICAgICAgICBvcGFjaXR5OiAwXG4gICAgICB9LFxuICAgICAgcmVmOiBpbnB1dCxcbiAgICAgIHZhbHVlOiBkaXNwbGF5VXJsLFxuICAgICAgcmVhZE9ubHk6IHRydWUsXG4gICAgICB0YWJJbmRleDogLTFcbiAgICB9KSwgLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3godWkuQ2FyZCwge1xuICAgICAgcGFkZGluZzogMixcbiAgICAgIGJvcmRlckJvdHRvbTogdHJ1ZSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeHModWkuRmxleCwge1xuICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgZ2FwOiAyLFxuICAgICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4KHVpLkZsZXgsIHtcbiAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgICBnYXA6IDEsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4KHVpLlRvb2x0aXAsIHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4KHVpLlRleHQsIHtcbiAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBpZnJhbWVTaXplID09PSBcIm1vYmlsZVwiID8gXCJFeGl0IG1vYmlsZSBwcmV2aWV3XCIgOiBcIlByZXZpZXcgbW9iaWxlIHZpZXdwb3J0XCJcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgcGFkZGluZzogMixcbiAgICAgICAgICAgIHBsYWNlbWVudDogXCJib3R0b20tc3RhcnRcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeCh1aS5CdXR0b24sIHtcbiAgICAgICAgICAgICAgZGlzYWJsZWQ6ICFkaXNwbGF5VXJsLFxuICAgICAgICAgICAgICBmb250U2l6ZTogWzFdLFxuICAgICAgICAgICAgICBwYWRkaW5nOiAyLFxuICAgICAgICAgICAgICBtb2RlOiBpZnJhbWVTaXplID09PSBcIm1vYmlsZVwiID8gXCJkZWZhdWx0XCIgOiBcImdob3N0XCIsXG4gICAgICAgICAgICAgIGljb246IGljb25zLk1vYmlsZURldmljZUljb24sXG4gICAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHNldElmcmFtZVNpemUoaWZyYW1lU2l6ZSA9PT0gXCJtb2JpbGVcIiA/IFwiZGVza3RvcFwiIDogXCJtb2JpbGVcIilcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4KHVpLkJveCwge1xuICAgICAgICAgIGZsZXg6IDEsXG4gICAgICAgICAgY2hpbGRyZW46IHNob3dEaXNwbGF5VXJsICYmIGRpc3BsYXlVcmwgJiYgLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3goRGlzcGxheVVybCwge1xuICAgICAgICAgICAgZGlzcGxheVVybFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeHModWkuRmxleCwge1xuICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgIGdhcDogMSxcbiAgICAgICAgICBjaGlsZHJlbjogW3JlbG9hZEJ1dHRvbiA/IC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4KHVpLlRvb2x0aXAsIHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4KHVpLlRleHQsIHtcbiAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiByZWxvYWRpbmcgPyBcIlJlbG9hZGluZ1xcdTIwMjZcIiA6IFwiUmVsb2FkXCJcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgcGFkZGluZzogMixcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeCh1aS5CdXR0b24sIHtcbiAgICAgICAgICAgICAgZGlzYWJsZWQ6ICFkaXNwbGF5VXJsLFxuICAgICAgICAgICAgICBtb2RlOiBcImJsZWVkXCIsXG4gICAgICAgICAgICAgIGZvbnRTaXplOiBbMV0sXG4gICAgICAgICAgICAgIHBhZGRpbmc6IDIsXG4gICAgICAgICAgICAgIGljb246IC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4KGljb25zLlVuZG9JY29uLCB7XG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogXCJyb3RhdGUoOTBkZWcpIHNjYWxlWSgtMSlcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIGxvYWRpbmc6IHJlbG9hZGluZyxcbiAgICAgICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IFwiUmVsb2FkXCIsXG4gICAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IGhhbmRsZVJlbG9hZCgpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pIDogbnVsbCwgLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3godWkuVG9vbHRpcCwge1xuICAgICAgICAgICAgY29udGVudDogLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3godWkuVGV4dCwge1xuICAgICAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwibm93cmFwXCJcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFwiQ29weSBVUkxcIlxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBwYWRkaW5nOiAyLFxuICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4KHVpLkJ1dHRvbiwge1xuICAgICAgICAgICAgICBtb2RlOiBcImJsZWVkXCIsXG4gICAgICAgICAgICAgIGRpc2FibGVkOiAhZGlzcGxheVVybCxcbiAgICAgICAgICAgICAgZm9udFNpemU6IFsxXSxcbiAgICAgICAgICAgICAgaWNvbjogaWNvbnMuQ2xpcGJvYXJkSWNvbixcbiAgICAgICAgICAgICAgcGFkZGluZzogWzJdLFxuICAgICAgICAgICAgICBcImFyaWEtbGFiZWxcIjogXCJDb3B5IFVSTFwiLFxuICAgICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIGlmICghKChfYSA9IGlucHV0ID09IG51bGwgPyB2b2lkIDAgOiBpbnB1dC5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWUpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29weShpbnB1dC5jdXJyZW50LnZhbHVlKTtcbiAgICAgICAgICAgICAgICBwdXNoVG9hc3Qoe1xuICAgICAgICAgICAgICAgICAgY2xvc2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiVGhlIFVSTCBpcyBjb3BpZWQgdG8gdGhlIGNsaXBib2FyZFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4KHVpLlRvb2x0aXAsIHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4KHVpLlRleHQsIHtcbiAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBcIk9wZW4gVVJMIGluIGEgbmV3IHRhYlwiXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHBhZGRpbmc6IDIsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6IFwiYm90dG9tLWVuZFwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4KHVpLkJ1dHRvbiwge1xuICAgICAgICAgICAgICBkaXNhYmxlZDogIWRpc3BsYXlVcmwsXG4gICAgICAgICAgICAgIGZvbnRTaXplOiBbMV0sXG4gICAgICAgICAgICAgIGljb246IGljb25zLkxhdW5jaEljb24sXG4gICAgICAgICAgICAgIG1vZGU6IFwiZ2hvc3RcIixcbiAgICAgICAgICAgICAgcGFkZGluZ1k6IFsyXSxcbiAgICAgICAgICAgICAgdGV4dDogXCJPcGVuXCIsXG4gICAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiBcIk9wZW4gVVJMIGluIGEgbmV3IHRhYlwiLFxuICAgICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB3aW5kb3cub3BlbihkaXNwbGF5VXJsKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KV1cbiAgICAgICAgfSldXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cbmNvbnN0IE1vdGlvbkZsZXggPSBmcmFtZXJNb3Rpb24ubW90aW9uKHVpLkZsZXgpO1xuZnVuY3Rpb24gSWZyYW1lKHByb3BzKSB7XG4gIHZhciBfYTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSByZWFjdC51c2VTdGF0ZShudWxsKTtcbiAgaWYgKGVycm9yKSB7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgY29uc3Qge1xuICAgIGRvY3VtZW50OiBzYW5pdHlEb2N1bWVudCxcbiAgICBvcHRpb25zXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qge1xuICAgIHVybCxcbiAgICB1cmxTZWNyZXRJZCxcbiAgICBkZWZhdWx0U2l6ZSA9IERFRkFVTFRfU0laRSxcbiAgICByZWxvYWQsXG4gICAgbG9hZGVyID0gXCJMb2FkaW5nXFx1MjAyNlwiLFxuICAgIGF0dHJpYnV0ZXMgPSB7fSxcbiAgICBzaG93RGlzcGxheVVybCA9IHRydWVcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IFtpZnJhbWVTaXplLCBzZXRJZnJhbWVTaXplXSA9IHJlYWN0LnVzZVN0YXRlKCgoX2EgPSBzaXplcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hW2RlZmF1bHRTaXplXSkgPyBkZWZhdWx0U2l6ZSA6IERFRkFVTFRfU0laRSk7XG4gIGNvbnN0IFt3b3JrYXJvdW5kRW1wdHlEb2N1bWVudCwgc2V0V29ya2Fyb3VuZEVtcHR5RG9jdW1lbnRdID0gcmVhY3QudXNlU3RhdGUodHJ1ZSk7XG4gIHJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gc2V0V29ya2Fyb3VuZEVtcHR5RG9jdW1lbnQoZmFsc2UpLCAxZTMpO1xuICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gIH0sIFtdKTtcbiAgY29uc3QgcHJlZmVyc1JlZHVjZWRNb3Rpb24gPSB1aS51c2VQcmVmZXJzUmVkdWNlZE1vdGlvbigpO1xuICBjb25zdCBbdXJsU3RhdGUsIHNldFVybFN0YXRlXSA9IHJlYWN0LnVzZVN0YXRlKCgpID0+IHR5cGVvZiB1cmwgPT09IFwiZnVuY3Rpb25cIiA/IFwiXCIgOiB1cmwpO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSByZWFjdC51c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3JlbG9hZGluZywgc2V0UmVsb2FkaW5nXSA9IHJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgaWZyYW1lID0gcmVhY3QudXNlUmVmKG51bGwpO1xuICBjb25zdCB7XG4gICAgZGlzcGxheWVkXG4gIH0gPSBzYW5pdHlEb2N1bWVudDtcbiAgY29uc3QgaGFuZGxlUmVsb2FkID0gcmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghKGlmcmFtZSA9PSBudWxsID8gdm9pZCAwIDogaWZyYW1lLmN1cnJlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmcmFtZS5jdXJyZW50LnNyYyA9IGlmcmFtZS5jdXJyZW50LnNyYztcbiAgICBzZXRSZWxvYWRpbmcodHJ1ZSk7XG4gIH0sIFtdKTtcbiAgY29uc3QgZGVmZXJyZWRSZXZpc2lvbiA9IHJlYWN0LnVzZURlZmVycmVkVmFsdWUoZGlzcGxheWVkLl9yZXYpO1xuICBjb25zdCBkaXNwbGF5VXJsID0gdHlwZW9mIHVybFN0YXRlID09PSBcInN0cmluZ1wiID8gdXJsU3RhdGUgOiBcIlwiO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3goZnJhbWVyTW90aW9uLk1vdGlvbkNvbmZpZywge1xuICAgIHRyYW5zaXRpb246IHByZWZlcnNSZWR1Y2VkTW90aW9uID8ge1xuICAgICAgZHVyYXRpb246IDBcbiAgICB9IDogdm9pZCAwLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeHModWkuRmxleCwge1xuICAgICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIlxuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3goVG9vbGJhciwge1xuICAgICAgICBkaXNwbGF5VXJsLFxuICAgICAgICBpZnJhbWVTaXplLFxuICAgICAgICByZWxvYWRpbmcsXG4gICAgICAgIHNldElmcmFtZVNpemUsXG4gICAgICAgIHNob3dEaXNwbGF5VXJsLFxuICAgICAgICByZWxvYWRCdXR0b246ICEhKHJlbG9hZCA9PSBudWxsID8gdm9pZCAwIDogcmVsb2FkLmJ1dHRvbiksXG4gICAgICAgIGhhbmRsZVJlbG9hZFxuICAgICAgfSksIHVybFN0YXRlID09PSB1dGlscy5NaXNzaW5nU2x1ZyAmJiAhd29ya2Fyb3VuZEVtcHR5RG9jdW1lbnQgPyAvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeChNaXNzaW5nU2x1Z1NjcmVlbiwge30pIDogLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3godWkuQ2FyZCwge1xuICAgICAgICB0b25lOiBcInRyYW5zcGFyZW50XCIsXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIlxuICAgICAgICB9LFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3goRnJhbWUsIHtcbiAgICAgICAgICByZWY6IGlmcmFtZSxcbiAgICAgICAgICBsb2FkZXIsXG4gICAgICAgICAgbG9hZGluZyxcbiAgICAgICAgICByZWxvYWRpbmcsXG4gICAgICAgICAgaWZyYW1lU2l6ZSxcbiAgICAgICAgICBzZXRSZWxvYWRpbmcsXG4gICAgICAgICAgc2V0TG9hZGluZyxcbiAgICAgICAgICBkaXNwbGF5VXJsLFxuICAgICAgICAgIGF0dHJpYnV0ZXNcbiAgICAgICAgfSlcbiAgICAgIH0pLCB0eXBlb2YgdXJsID09PSBcImZ1bmN0aW9uXCIgJiYgLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3goQXN5bmNVcmwsIHtcbiAgICAgICAgdXJsLFxuICAgICAgICBkaXNwbGF5ZWQsXG4gICAgICAgIHVybFNlY3JldElkLFxuICAgICAgICBzZXREaXNwbGF5VXJsOiBzZXRVcmxTdGF0ZSxcbiAgICAgICAgc2V0RXJyb3JcbiAgICAgIH0sIGRlZmVycmVkUmV2aXNpb24pLCBkaXNwbGF5VXJsICYmICgocmVsb2FkID09IG51bGwgPyB2b2lkIDAgOiByZWxvYWQucmV2aXNpb24pIHx8IChyZWxvYWQgPT0gbnVsbCA/IHZvaWQgMCA6IHJlbG9hZC5yZXZpc2lvbikgPT09IDApICYmIC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4KFJlbG9hZE9uUmV2aXNpb24sIHtcbiAgICAgICAgcmV2aXNpb246IHJlbG9hZC5yZXZpc2lvbixcbiAgICAgICAgX3JldjogZGVmZXJyZWRSZXZpc2lvbixcbiAgICAgICAgaGFuZGxlUmVsb2FkXG4gICAgICB9KV1cbiAgICB9KVxuICB9KTtcbn1cbmNvbnN0IEZyYW1lID0gcmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiBGcmFtZTIocHJvcHMsIGlmcmFtZSkge1xuICBjb25zdCB7XG4gICAgbG9hZGVyLFxuICAgIGxvYWRpbmcsXG4gICAgc2V0TG9hZGluZyxcbiAgICBpZnJhbWVTaXplLFxuICAgIGF0dHJpYnV0ZXMsXG4gICAgcmVsb2FkaW5nLFxuICAgIGRpc3BsYXlVcmwsXG4gICAgc2V0UmVsb2FkaW5nXG4gIH0gPSBwcm9wcztcbiAgZnVuY3Rpb24gaGFuZGxlSWZyYW1lTG9hZCgpIHtcbiAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICBzZXRSZWxvYWRpbmcoZmFsc2UpO1xuICAgIGlmIChhdHRyaWJ1dGVzLm9uTG9hZCAmJiB0eXBlb2YgYXR0cmlidXRlcy5vbkxvYWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgYXR0cmlidXRlcy5vbkxvYWQoKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4cyh1aS5GbGV4LCB7XG4gICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAganVzdGlmeTogXCJjZW50ZXJcIixcbiAgICBzdHlsZToge1xuICAgICAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCJcbiAgICB9LFxuICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3goZnJhbWVyTW90aW9uLkFuaW1hdGVQcmVzZW5jZSwge1xuICAgICAgY2hpbGRyZW46IGxvYWRlciAmJiBsb2FkaW5nICYmIC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4KE1vdGlvbkZsZXgsIHtcbiAgICAgICAgaW5pdGlhbDogXCJpbml0aWFsXCIsXG4gICAgICAgIGFuaW1hdGU6IFwiYW5pbWF0ZVwiLFxuICAgICAgICBleGl0OiBcImV4aXRcIixcbiAgICAgICAgdmFyaWFudHM6IHNwaW5uZXJWYXJpYW50cyxcbiAgICAgICAganVzdGlmeTogXCJjZW50ZXJcIixcbiAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgaW5zZXQ6IFwiMFwiLFxuICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCJcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4cyh1aS5GbGV4LCB7XG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgIC4uLnNpemVzW2lmcmFtZVNpemVdXG4gICAgICAgICAgfSxcbiAgICAgICAgICBqdXN0aWZ5OiBcImNlbnRlclwiLFxuICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgICAgICBnYXA6IDQsXG4gICAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeCh1aS5TcGlubmVyLCB7XG4gICAgICAgICAgICBtdXRlZDogdHJ1ZVxuICAgICAgICAgIH0pLCBsb2FkZXIgJiYgdHlwZW9mIGxvYWRlciA9PT0gXCJzdHJpbmdcIiAmJiAvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeCh1aS5UZXh0LCB7XG4gICAgICAgICAgICBtdXRlZDogdHJ1ZSxcbiAgICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgICBjaGlsZHJlbjogbG9hZGVyXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeChmcmFtZXJNb3Rpb24ubW90aW9uLmlmcmFtZSwge1xuICAgICAgcmVmOiBpZnJhbWUsXG4gICAgICB0aXRsZTogXCJwcmV2aWV3XCIsXG4gICAgICBmcmFtZUJvcmRlcjogXCIwXCIsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtYXhIZWlnaHQ6IFwiMTAwJVwiXG4gICAgICB9LFxuICAgICAgc3JjOiBkaXNwbGF5VXJsLFxuICAgICAgaW5pdGlhbDogW1wiYmFja2dyb3VuZFwiLCBpZnJhbWVTaXplXSxcbiAgICAgIHZhcmlhbnRzOiBpZnJhbWVWYXJpYW50cyxcbiAgICAgIGFuaW1hdGU6IFtsb2FkZXIgJiYgbG9hZGluZyA/IFwiYmFja2dyb3VuZFwiIDogXCJhY3RpdmVcIiwgcmVsb2FkaW5nID8gXCJyZWxvYWRpbmdcIiA6IFwiaWRsZVwiLCBpZnJhbWVTaXplXSxcbiAgICAgIC4uLmF0dHJpYnV0ZXMsXG4gICAgICBvbkxvYWQ6IGhhbmRsZUlmcmFtZUxvYWRcbiAgICB9KV1cbiAgfSk7XG59KTtcbmNvbnN0IHNwaW5uZXJWYXJpYW50cyA9IHtcbiAgaW5pdGlhbDoge1xuICAgIG9wYWNpdHk6IDFcbiAgfSxcbiAgYW5pbWF0ZToge1xuICAgIG9wYWNpdHk6IFswLCAwLCAxXVxuICB9LFxuICBleGl0OiB7XG4gICAgb3BhY2l0eTogWzEsIDAsIDBdXG4gIH1cbn07XG5jb25zdCBpZnJhbWVWYXJpYW50cyA9IHtcbiAgLi4uc2l6ZXMsXG4gIGRlc2t0b3A6IHtcbiAgICAuLi5zaXplcy5kZXNrdG9wLFxuICAgIGJveFNoYWRvdzogXCIwIDAgMCAwcHggdmFyKC0tY2FyZC1zaGFkb3ctb3V0bGluZS1jb2xvcilcIlxuICB9LFxuICBtb2JpbGU6IHtcbiAgICAuLi5zaXplcy5tb2JpbGUsXG4gICAgYm94U2hhZG93OiBcIjAgMCAwIDFweCB2YXIoLS1jYXJkLXNoYWRvdy1vdXRsaW5lLWNvbG9yKVwiXG4gIH0sXG4gIGJhY2tncm91bmQ6IHtcbiAgICBvcGFjaXR5OiAwLFxuICAgIHNjYWxlOiAxXG4gIH0sXG4gIGlkbGU6IHtcbiAgICBzY2FsZTogMVxuICB9LFxuICByZWxvYWRpbmc6IHtcbiAgICBzY2FsZTogWzEsIDEsIDEsIDAuOThdXG4gIH0sXG4gIGFjdGl2ZToge1xuICAgIG9wYWNpdHk6IFswLCAwLCAxXSxcbiAgICBzY2FsZTogMVxuICB9XG59O1xuZnVuY3Rpb24gUmVsb2FkT25SZXZpc2lvbihwcm9wcykge1xuICBjb25zdCB7XG4gICAgcmV2aXNpb24sXG4gICAgaGFuZGxlUmVsb2FkLFxuICAgIF9yZXZcbiAgfSA9IHByb3BzO1xuICBjb25zdCBbaW5pdGlhbFJldl0gPSByZWFjdC51c2VTdGF0ZShfcmV2KTtcbiAgcmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoX3JldiAhPT0gaW5pdGlhbFJldikge1xuICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoaGFuZGxlUmVsb2FkLCBOdW1iZXIocmV2aXNpb24gPT09IHRydWUgPyAzMDAgOiByZXZpc2lvbikpO1xuICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB9XG4gIH0sIFtfcmV2LCByZXZpc2lvbiwgaGFuZGxlUmVsb2FkLCBpbml0aWFsUmV2XSk7XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gQXN5bmNVcmwocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHVybFNlY3JldElkLFxuICAgIHNldERpc3BsYXlVcmwsXG4gICAgc2V0RXJyb3JcbiAgfSA9IHByb3BzO1xuICBjb25zdCBbZGlzcGxheWVkXSA9IHJlYWN0LnVzZVN0YXRlKHByb3BzLmRpc3BsYXllZCk7XG4gIGNvbnN0IFt1cmxdID0gcmVhY3QudXNlU3RhdGUoKCkgPT4gcHJvcHMudXJsKTtcbiAgY29uc3QgW3VybFNlY3JldCwgc2V0VXJsU2VjcmV0XSA9IHJlYWN0LnVzZVN0YXRlKG51bGwpO1xuICByZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh1cmxTZWNyZXRJZCAmJiAhdXJsU2VjcmV0KSByZXR1cm47XG4gICAgY29uc3QgZ2V0VXJsID0gYXN5bmMgc2lnbmFsID0+IHtcbiAgICAgIGNvbnN0IHJlc29sdmVVcmwgPSBhd2FpdCB1cmwoZGlzcGxheWVkLCB1cmxTZWNyZXQsIGFib3J0LnNpZ25hbCk7XG4gICAgICBpZiAoIXNpZ25hbC5hYm9ydGVkICYmIHJlc29sdmVVcmwpIHtcbiAgICAgICAgc2V0RGlzcGxheVVybChyZXNvbHZlVXJsKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGFib3J0ID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGdldFVybChhYm9ydC5zaWduYWwpLmNhdGNoKGVycm9yID0+IGVycm9yLm5hbWUgIT09IFwiQWJvcnRFcnJvclwiICYmIHNldEVycm9yKGVycm9yKSk7XG4gICAgcmV0dXJuICgpID0+IGFib3J0LmFib3J0KCk7XG4gIH0sIFtkaXNwbGF5ZWQsIHNldERpc3BsYXlVcmwsIHNldEVycm9yLCB1cmwsIHVybFNlY3JldCwgdXJsU2VjcmV0SWRdKTtcbiAgaWYgKHVybFNlY3JldElkKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeFJ1bnRpbWUuanN4KEdldFVybFNlY3JldCwge1xuICAgICAgdXJsU2VjcmV0SWQsXG4gICAgICB1cmxTZWNyZXQsXG4gICAgICBzZXRVcmxTZWNyZXQsXG4gICAgICBzZXRFcnJvclxuICAgIH0pO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gTWlzc2luZ1NsdWdTY3JlZW4oKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeCh1aS5DYXJkLCB7XG4gICAgaGVpZ2h0OiBcImZpbGxcIixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3godWkuRmxleCwge1xuICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICBoZWlnaHQ6IFwiZmlsbFwiLFxuICAgICAganVzdGlmeTogXCJjZW50ZXJcIixcbiAgICAgIHBhZGRpbmc6IDQsXG4gICAgICBzaXppbmc6IFwiYm9yZGVyXCIsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3godWkuQ29udGFpbmVyLCB7XG4gICAgICAgIHdpZHRoOiAwLFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3godWkuQ2FyZCwge1xuICAgICAgICAgIHBhZGRpbmc6IDQsXG4gICAgICAgICAgcmFkaXVzOiAyLFxuICAgICAgICAgIHNoYWRvdzogMSxcbiAgICAgICAgICB0b25lOiBcImNhdXRpb25cIixcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3hzKHVpLkZsZXgsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3godWkuQm94LCB7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeCh1aS5UZXh0LCB7XG4gICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3goaWNvbnMuV2FybmluZ091dGxpbmVJY29uLCB7fSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeHModWkuU3RhY2ssIHtcbiAgICAgICAgICAgICAgZmxleDogMSxcbiAgICAgICAgICAgICAgbWFyZ2luTGVmdDogMyxcbiAgICAgICAgICAgICAgc3BhY2U6IDMsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4UnVudGltZS5qc3godWkuVGV4dCwge1xuICAgICAgICAgICAgICAgIGFzOiBcImgxXCIsXG4gICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICB3ZWlnaHQ6IFwiYm9sZFwiLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBcIk1pc3Npbmcgc2x1Z1wiXG4gICAgICAgICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3hSdW50aW1lLmpzeCh1aS5UZXh0LCB7XG4gICAgICAgICAgICAgICAgYXM6IFwicFwiLFxuICAgICAgICAgICAgICAgIG11dGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiQWRkIGEgc2x1ZyB0byBzZWUgdGhlIHByZXZpZXcuXCJcbiAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICB9KV1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn1cbmV4cG9ydHMuZGVmaW5lVXJsUmVzb2x2ZXIgPSB1dGlscy5kZWZpbmVVcmxSZXNvbHZlcjtcbmV4cG9ydHMuSWZyYW1lID0gSWZyYW1lO1xuZXhwb3J0cy5kZWZhdWx0ID0gSWZyYW1lO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguY2pzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/sanity-plugin-iframe-pane/lib/index.cjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/sanity-plugin-iframe-pane/lib/index.cjs.js":
/*!*****************************************************************!*\
  !*** ./node_modules/sanity-plugin-iframe-pane/lib/index.cjs.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Iframe: () => (/* binding */ Iframe),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   defineUrlResolver: () => (/* binding */ defineUrlResolver)\n/* harmony export */ });\n/* harmony import */ var _index_cjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.cjs */ \"(ssr)/./node_modules/sanity-plugin-iframe-pane/lib/index.cjs\");\n\n\nconst defineUrlResolver = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.defineUrlResolver;\nconst Iframe = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.Iframe;\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_index_cjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc2FuaXR5LXBsdWdpbi1pZnJhbWUtcGFuZS9saWIvaW5kZXguY2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBOEI7O0FBRXZCLDBCQUEwQix5REFBcUI7QUFDL0MsZUFBZSw4Q0FBVTs7QUFFaEMsaUVBQWUsa0RBQVcsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyZXltYXR0ZXItdjIvLi9ub2RlX21vZHVsZXMvc2FuaXR5LXBsdWdpbi1pZnJhbWUtcGFuZS9saWIvaW5kZXguY2pzLmpzPzVmZWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNqcyBmcm9tICcuL2luZGV4LmNqcyc7XG5cbmV4cG9ydCBjb25zdCBkZWZpbmVVcmxSZXNvbHZlciA9IGNqcy5kZWZpbmVVcmxSZXNvbHZlcjtcbmV4cG9ydCBjb25zdCBJZnJhbWUgPSBjanMuSWZyYW1lO1xuXG5leHBvcnQgZGVmYXVsdCBjanMuZGVmYXVsdDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/sanity-plugin-iframe-pane/lib/index.cjs.js\n");

/***/ })

};
;