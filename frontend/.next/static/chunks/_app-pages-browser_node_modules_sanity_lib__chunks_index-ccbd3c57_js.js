/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_sanity_lib__chunks_index-ccbd3c57_js"],{

/***/ "(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/json-inspector.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/json-inspector.js ***!
  \**********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var React = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\nvar createReactClass = __webpack_require__(/*! create-react-class */ \"(app-pages-browser)/./node_modules/create-react-class/index.js\");\nvar debounce = __webpack_require__(/*! debounce */ \"(app-pages-browser)/./node_modules/debounce/index.js\");\n\nvar h = React.createElement;\nvar Leaf = __webpack_require__(/*! ./lib/leaf */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/leaf.js\");\nvar SearchBar = __webpack_require__(/*! ./lib/search-bar */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/search-bar.js\");\n\nvar filterer = __webpack_require__(/*! ./lib/filterer */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/filterer.js\");\nvar isEmpty = __webpack_require__(/*! ./lib/is-empty */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/is-empty.js\");\nvar lens = __webpack_require__(/*! ./lib/lens */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/lens.js\");\nvar noop = __webpack_require__(/*! ./lib/noop */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/noop.js\");\n\nmodule.exports = createReactClass({\n    getDefaultProps: function() {\n        return {\n            data: null,\n            search: SearchBar,\n            searchOptions: {\n                debounceTime: 0\n            },\n            className: '',\n            id: 'json-' + Date.now(),\n            onClick: noop,\n            filterOptions: {\n                cacheResults: true,\n                ignoreCase: false\n            },\n            validateQuery: function(query) {\n                return query.length >= 2;\n            },\n            /**\n             * Decide whether the leaf node at given `keypath` should be\n             * expanded initially.\n             * @param  {String} keypath\n             * @param  {Any} value\n             * @return {Boolean}\n             */\n            isExpanded: function(keypath, value) {\n                return false;\n            },\n            verboseShowOriginal: false\n        };\n    },\n    getInitialState: function() {\n        return {\n            query: this.props.query || ''\n        };\n    },\n    render: function() {\n        var p = this.props;\n        var s = this.state;\n\n        var isQueryValid = (\n            s.query !== '' &&\n            p.validateQuery(s.query)\n        );\n\n        var data = (\n            isQueryValid ?\n                s.filterer(s.query) :\n                p.data\n        );\n\n        var isNotFound = (\n            isQueryValid &&\n            isEmpty(data)\n        );\n\n        return h('div', { className: 'json-inspector ' + p.className },\n            this.renderToolbar(),\n            (\n                isNotFound ?\n                    h('div', { className: 'json-inspector__not-found' }, 'Nothing found') :\n                    h(Leaf, {\n                        data: data,\n                        onClick: p.onClick,\n                        id: p.id,\n                        getOriginal: this.getOriginal,\n                        query: (\n                            isQueryValid ?\n                                new RegExp(\n                                        s.query,\n                                        (p.filterOptions.ignoreCase ? 'i' : '')\n                                ) :\n                                null\n                        ),\n                        label: 'root',\n                        root: true,\n                        isExpanded: p.isExpanded,\n                        interactiveLabel: p.interactiveLabel,\n                        verboseShowOriginal: p.verboseShowOriginal\n                    })\n            )\n        );\n    },\n    renderToolbar: function() {\n        var search = this.props.search;\n\n        if (search) {\n            return h('div', { className: 'json-inspector__toolbar' },\n                h(search, {\n                    onChange: debounce(this.search, this.props.searchOptions.debounceTime),\n                    data: this.props.data,\n                    query: this.state.query\n                })\n            );\n        }\n    },\n    search: function(query) {\n        this.setState({\n            query: query\n        });\n    },\n    componentWillMount: function() {\n        this.createFilterer(this.props.data, this.props.filterOptions);\n    },\n    componentWillReceiveProps: function(p) {\n        this.createFilterer(p.data, p.filterOptions);\n\n        var isReceivingNewQuery = (\n            typeof p.query === 'string' &&\n            p.query !== this.state.query\n        );\n\n        if (isReceivingNewQuery) {\n            this.setState({\n                query: p.query\n            });\n        }\n    },\n    shouldComponentUpdate: function (p, s) {\n        return (\n            p.query !== this.props.query ||\n            s.query !== this.state.query ||\n            p.data !== this.props.data ||\n            p.onClick !== this.props.onClick\n        );\n    },\n    createFilterer: function(data, options) {\n        this.setState({\n            filterer: filterer(data, options)\n        });\n    },\n    getOriginal: function(path) {\n        return lens(this.props.data, path);\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9qc29uLWluc3BlY3Rvci5qcyIsIm1hcHBpbmdzIjoiQUFBQSxZQUFZLG1CQUFPLENBQUMsbUZBQU87QUFDM0IsdUJBQXVCLG1CQUFPLENBQUMsMEZBQW9CO0FBQ25ELGVBQWUsbUJBQU8sQ0FBQyxzRUFBVTs7QUFFakM7QUFDQSxXQUFXLG1CQUFPLENBQUMsZ0dBQVk7QUFDL0IsZ0JBQWdCLG1CQUFPLENBQUMsNEdBQWtCOztBQUUxQyxlQUFlLG1CQUFPLENBQUMsd0dBQWdCO0FBQ3ZDLGNBQWMsbUJBQU8sQ0FBQyx3R0FBZ0I7QUFDdEMsV0FBVyxtQkFBTyxDQUFDLGdHQUFZO0FBQy9CLFdBQVcsbUJBQU8sQ0FBQyxnR0FBWTs7QUFFL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEMsd0JBQXdCLEtBQUs7QUFDN0Isd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBCQUEwQiw0Q0FBNEM7QUFDdEU7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHdDQUF3QztBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0EsOEJBQThCLHNDQUFzQztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2pzb24taW5zcGVjdG9yLmpzPzM4ZjYiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG52YXIgZGVib3VuY2UgPSByZXF1aXJlKCdkZWJvdW5jZScpO1xuXG52YXIgaCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQ7XG52YXIgTGVhZiA9IHJlcXVpcmUoJy4vbGliL2xlYWYnKTtcbnZhciBTZWFyY2hCYXIgPSByZXF1aXJlKCcuL2xpYi9zZWFyY2gtYmFyJyk7XG5cbnZhciBmaWx0ZXJlciA9IHJlcXVpcmUoJy4vbGliL2ZpbHRlcmVyJyk7XG52YXIgaXNFbXB0eSA9IHJlcXVpcmUoJy4vbGliL2lzLWVtcHR5Jyk7XG52YXIgbGVucyA9IHJlcXVpcmUoJy4vbGliL2xlbnMnKTtcbnZhciBub29wID0gcmVxdWlyZSgnLi9saWIvbm9vcCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgc2VhcmNoOiBTZWFyY2hCYXIsXG4gICAgICAgICAgICBzZWFyY2hPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgZGVib3VuY2VUaW1lOiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnJyxcbiAgICAgICAgICAgIGlkOiAnanNvbi0nICsgRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IG5vb3AsXG4gICAgICAgICAgICBmaWx0ZXJPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgY2FjaGVSZXN1bHRzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlnbm9yZUNhc2U6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmFsaWRhdGVRdWVyeTogZnVuY3Rpb24ocXVlcnkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcXVlcnkubGVuZ3RoID49IDI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNpZGUgd2hldGhlciB0aGUgbGVhZiBub2RlIGF0IGdpdmVuIGBrZXlwYXRoYCBzaG91bGQgYmVcbiAgICAgICAgICAgICAqIGV4cGFuZGVkIGluaXRpYWxseS5cbiAgICAgICAgICAgICAqIEBwYXJhbSAge1N0cmluZ30ga2V5cGF0aFxuICAgICAgICAgICAgICogQHBhcmFtICB7QW55fSB2YWx1ZVxuICAgICAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaXNFeHBhbmRlZDogZnVuY3Rpb24oa2V5cGF0aCwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmVyYm9zZVNob3dPcmlnaW5hbDogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBxdWVyeTogdGhpcy5wcm9wcy5xdWVyeSB8fCAnJ1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHAgPSB0aGlzLnByb3BzO1xuICAgICAgICB2YXIgcyA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgdmFyIGlzUXVlcnlWYWxpZCA9IChcbiAgICAgICAgICAgIHMucXVlcnkgIT09ICcnICYmXG4gICAgICAgICAgICBwLnZhbGlkYXRlUXVlcnkocy5xdWVyeSlcbiAgICAgICAgKTtcblxuICAgICAgICB2YXIgZGF0YSA9IChcbiAgICAgICAgICAgIGlzUXVlcnlWYWxpZCA/XG4gICAgICAgICAgICAgICAgcy5maWx0ZXJlcihzLnF1ZXJ5KSA6XG4gICAgICAgICAgICAgICAgcC5kYXRhXG4gICAgICAgICk7XG5cbiAgICAgICAgdmFyIGlzTm90Rm91bmQgPSAoXG4gICAgICAgICAgICBpc1F1ZXJ5VmFsaWQgJiZcbiAgICAgICAgICAgIGlzRW1wdHkoZGF0YSlcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gaCgnZGl2JywgeyBjbGFzc05hbWU6ICdqc29uLWluc3BlY3RvciAnICsgcC5jbGFzc05hbWUgfSxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVG9vbGJhcigpLFxuICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgIGlzTm90Rm91bmQgP1xuICAgICAgICAgICAgICAgICAgICBoKCdkaXYnLCB7IGNsYXNzTmFtZTogJ2pzb24taW5zcGVjdG9yX19ub3QtZm91bmQnIH0sICdOb3RoaW5nIGZvdW5kJykgOlxuICAgICAgICAgICAgICAgICAgICBoKExlYWYsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBwLm9uQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldE9yaWdpbmFsOiB0aGlzLmdldE9yaWdpbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1F1ZXJ5VmFsaWQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmVnRXhwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMucXVlcnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHAuZmlsdGVyT3B0aW9ucy5pZ25vcmVDYXNlID8gJ2knIDogJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdyb290JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0V4cGFuZGVkOiBwLmlzRXhwYW5kZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcmFjdGl2ZUxhYmVsOiBwLmludGVyYWN0aXZlTGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJib3NlU2hvd09yaWdpbmFsOiBwLnZlcmJvc2VTaG93T3JpZ2luYWxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9LFxuICAgIHJlbmRlclRvb2xiYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2VhcmNoID0gdGhpcy5wcm9wcy5zZWFyY2g7XG5cbiAgICAgICAgaWYgKHNlYXJjaCkge1xuICAgICAgICAgICAgcmV0dXJuIGgoJ2RpdicsIHsgY2xhc3NOYW1lOiAnanNvbi1pbnNwZWN0b3JfX3Rvb2xiYXInIH0sXG4gICAgICAgICAgICAgICAgaChzZWFyY2gsIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGRlYm91bmNlKHRoaXMuc2VhcmNoLCB0aGlzLnByb3BzLnNlYXJjaE9wdGlvbnMuZGVib3VuY2VUaW1lKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5wcm9wcy5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBxdWVyeTogdGhpcy5zdGF0ZS5xdWVyeVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzZWFyY2g6IGZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVGaWx0ZXJlcih0aGlzLnByb3BzLmRhdGEsIHRoaXMucHJvcHMuZmlsdGVyT3B0aW9ucyk7XG4gICAgfSxcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihwKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlRmlsdGVyZXIocC5kYXRhLCBwLmZpbHRlck9wdGlvbnMpO1xuXG4gICAgICAgIHZhciBpc1JlY2VpdmluZ05ld1F1ZXJ5ID0gKFxuICAgICAgICAgICAgdHlwZW9mIHAucXVlcnkgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICBwLnF1ZXJ5ICE9PSB0aGlzLnN0YXRlLnF1ZXJ5XG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGlzUmVjZWl2aW5nTmV3UXVlcnkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBwLnF1ZXJ5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiBmdW5jdGlvbiAocCwgcykge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgcC5xdWVyeSAhPT0gdGhpcy5wcm9wcy5xdWVyeSB8fFxuICAgICAgICAgICAgcy5xdWVyeSAhPT0gdGhpcy5zdGF0ZS5xdWVyeSB8fFxuICAgICAgICAgICAgcC5kYXRhICE9PSB0aGlzLnByb3BzLmRhdGEgfHxcbiAgICAgICAgICAgIHAub25DbGljayAhPT0gdGhpcy5wcm9wcy5vbkNsaWNrXG4gICAgICAgICk7XG4gICAgfSxcbiAgICBjcmVhdGVGaWx0ZXJlcjogZnVuY3Rpb24oZGF0YSwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGZpbHRlcmVyOiBmaWx0ZXJlcihkYXRhLCBvcHRpb25zKVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGdldE9yaWdpbmFsOiBmdW5jdGlvbihwYXRoKSB7XG4gICAgICAgIHJldHVybiBsZW5zKHRoaXMucHJvcHMuZGF0YSwgcGF0aCk7XG4gICAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/json-inspector.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/filterer.js":
/*!********************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/filterer.js ***!
  \********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var keys = Object.keys;\n\nvar isPrimitive = __webpack_require__(/*! ./is-primitive */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/is-primitive.js\");\nvar isEmpty = __webpack_require__(/*! ./is-empty */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/is-empty.js\");\n\nmodule.exports = function(data, options) {\n    options || (options = { cacheResults: true });\n\n    var cache = {};\n\n    return function(query) {\n        if (!options.cacheResults) {\n           return find(data, query, options);\n        }\n\n        var subquery;\n\n        if (!cache[query]) {\n            for (var i = query.length - 1; i > 0; i -= 1) {\n                subquery = query.substr(0, i);\n\n                if (cache[subquery]) {\n                    cache[query] = find(cache[subquery], query, options);\n                    break;\n                }\n            }\n        }\n\n        if (!cache[query]) {\n            cache[query] = find(data, query, options);\n        }\n\n        return cache[query];\n    };\n};\n\nfunction find(data, query, options) {\n    return keys(data).reduce(function(acc, key) {\n        var value = data[key];\n        var matches;\n\n        if (isPrimitive(value)) {\n            if (contains(query, key, options) || contains(query, value, options)) {\n                acc[key] = value;\n            }\n        } else {\n            if (contains(query, key, options)) {\n                acc[key] = value;\n            } else {\n                matches = find(value, query, options);\n\n                if (!isEmpty(matches)) {\n                    Object.assign(acc, pair(key, matches));\n                }\n            }\n        }\n\n        return acc;\n    }, {});\n}\n\nfunction contains(query, string, options) {\n    if (string) {\n        var haystack = String(string);\n        var needle = query;\n\n        if (options.ignoreCase) {\n            haystack = haystack.toLowerCase();\n            needle = needle.toLowerCase();\n        }\n\n        return haystack.indexOf(needle) !== -1;\n    }\n}\n\nfunction pair(key, value) {\n    var p = {};\n    p[key] = value;\n    return p;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvZmlsdGVyZXIuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsa0JBQWtCLG1CQUFPLENBQUMsNEdBQWdCO0FBQzFDLGNBQWMsbUJBQU8sQ0FBQyxvR0FBWTs7QUFFbEM7QUFDQSw0QkFBNEIsb0JBQW9COztBQUVoRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDJDQUEyQyxPQUFPO0FBQ2xEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUssSUFBSTtBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvZmlsdGVyZXIuanM/YTNhYiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIga2V5cyA9IE9iamVjdC5rZXlzO1xuXG52YXIgaXNQcmltaXRpdmUgPSByZXF1aXJlKCcuL2lzLXByaW1pdGl2ZScpO1xudmFyIGlzRW1wdHkgPSByZXF1aXJlKCcuL2lzLWVtcHR5Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZGF0YSwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7IGNhY2hlUmVzdWx0czogdHJ1ZSB9KTtcblxuICAgIHZhciBjYWNoZSA9IHt9O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgICAgIGlmICghb3B0aW9ucy5jYWNoZVJlc3VsdHMpIHtcbiAgICAgICAgICAgcmV0dXJuIGZpbmQoZGF0YSwgcXVlcnksIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN1YnF1ZXJ5O1xuXG4gICAgICAgIGlmICghY2FjaGVbcXVlcnldKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gcXVlcnkubGVuZ3RoIC0gMTsgaSA+IDA7IGkgLT0gMSkge1xuICAgICAgICAgICAgICAgIHN1YnF1ZXJ5ID0gcXVlcnkuc3Vic3RyKDAsIGkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlW3N1YnF1ZXJ5XSkge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZVtxdWVyeV0gPSBmaW5kKGNhY2hlW3N1YnF1ZXJ5XSwgcXVlcnksIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNhY2hlW3F1ZXJ5XSkge1xuICAgICAgICAgICAgY2FjaGVbcXVlcnldID0gZmluZChkYXRhLCBxdWVyeSwgb3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2FjaGVbcXVlcnldO1xuICAgIH07XG59O1xuXG5mdW5jdGlvbiBmaW5kKGRhdGEsIHF1ZXJ5LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGtleXMoZGF0YSkucmVkdWNlKGZ1bmN0aW9uKGFjYywga2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGRhdGFba2V5XTtcbiAgICAgICAgdmFyIG1hdGNoZXM7XG5cbiAgICAgICAgaWYgKGlzUHJpbWl0aXZlKHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKGNvbnRhaW5zKHF1ZXJ5LCBrZXksIG9wdGlvbnMpIHx8IGNvbnRhaW5zKHF1ZXJ5LCB2YWx1ZSwgb3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICBhY2Nba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNvbnRhaW5zKHF1ZXJ5LCBrZXksIG9wdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgYWNjW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlcyA9IGZpbmQodmFsdWUsIHF1ZXJ5LCBvcHRpb25zKTtcblxuICAgICAgICAgICAgICAgIGlmICghaXNFbXB0eShtYXRjaGVzKSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGFjYywgcGFpcihrZXksIG1hdGNoZXMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbn1cblxuZnVuY3Rpb24gY29udGFpbnMocXVlcnksIHN0cmluZywgb3B0aW9ucykge1xuICAgIGlmIChzdHJpbmcpIHtcbiAgICAgICAgdmFyIGhheXN0YWNrID0gU3RyaW5nKHN0cmluZyk7XG4gICAgICAgIHZhciBuZWVkbGUgPSBxdWVyeTtcblxuICAgICAgICBpZiAob3B0aW9ucy5pZ25vcmVDYXNlKSB7XG4gICAgICAgICAgICBoYXlzdGFjayA9IGhheXN0YWNrLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBuZWVkbGUgPSBuZWVkbGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBoYXlzdGFjay5pbmRleE9mKG5lZWRsZSkgIT09IC0xO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcGFpcihrZXksIHZhbHVlKSB7XG4gICAgdmFyIHAgPSB7fTtcbiAgICBwW2tleV0gPSB2YWx1ZTtcbiAgICByZXR1cm4gcDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/filterer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/highlighter.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/highlighter.js ***!
  \***********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var React = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\nvar createReactClass = __webpack_require__(/*! create-react-class */ \"(app-pages-browser)/./node_modules/create-react-class/index.js\");\nvar h = React.createElement;\n\nmodule.exports = createReactClass({\n    getDefaultProps: function() {\n        return {\n            string: '',\n            highlight: ''\n        };\n    },\n    shouldComponentUpdate: function(p) {\n        return p.highlight !== this.props.highlight;\n    },\n    render: function() {\n        var p = this.props,\n            highlightStart = p.string.search(p.highlight);\n\n        if (!p.highlight || highlightStart === -1) {\n            return h('span', null, p.string);\n        }\n        var highlightLength = p.highlight.source.length,\n            highlightString = p.string.substr(highlightStart, highlightLength);\n        return h('span', null,\n            p.string.split(p.highlight).map(function(part, index) {\n                return h('span', { key: index },\n                    index > 0 ?\n                        h('span', { className: 'json-inspector__hl' }, highlightString) :\n                        null,\n                    part);\n            }));\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvaGlnaGxpZ2h0ZXIuanMiLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxtQkFBTyxDQUFDLG1GQUFPO0FBQzNCLHVCQUF1QixtQkFBTyxDQUFDLDBGQUFvQjtBQUNuRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsWUFBWTtBQUMvQztBQUNBLG9DQUFvQyxpQ0FBaUM7QUFDckU7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9oaWdobGlnaHRlci5qcz9hMWM4Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IHJlcXVpcmUoJ2NyZWF0ZS1yZWFjdC1jbGFzcycpO1xudmFyIGggPSBSZWFjdC5jcmVhdGVFbGVtZW50O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdHJpbmc6ICcnLFxuICAgICAgICAgICAgaGlnaGxpZ2h0OiAnJ1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiBmdW5jdGlvbihwKSB7XG4gICAgICAgIHJldHVybiBwLmhpZ2hsaWdodCAhPT0gdGhpcy5wcm9wcy5oaWdobGlnaHQ7XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcCA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgICBoaWdobGlnaHRTdGFydCA9IHAuc3RyaW5nLnNlYXJjaChwLmhpZ2hsaWdodCk7XG5cbiAgICAgICAgaWYgKCFwLmhpZ2hsaWdodCB8fCBoaWdobGlnaHRTdGFydCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBoKCdzcGFuJywgbnVsbCwgcC5zdHJpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBoaWdobGlnaHRMZW5ndGggPSBwLmhpZ2hsaWdodC5zb3VyY2UubGVuZ3RoLFxuICAgICAgICAgICAgaGlnaGxpZ2h0U3RyaW5nID0gcC5zdHJpbmcuc3Vic3RyKGhpZ2hsaWdodFN0YXJ0LCBoaWdobGlnaHRMZW5ndGgpO1xuICAgICAgICByZXR1cm4gaCgnc3BhbicsIG51bGwsXG4gICAgICAgICAgICBwLnN0cmluZy5zcGxpdChwLmhpZ2hsaWdodCkubWFwKGZ1bmN0aW9uKHBhcnQsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGgoJ3NwYW4nLCB7IGtleTogaW5kZXggfSxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPiAwID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGgoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2pzb24taW5zcGVjdG9yX19obCcgfSwgaGlnaGxpZ2h0U3RyaW5nKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICBwYXJ0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICB9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/highlighter.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/is-empty.js":
/*!********************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/is-empty.js ***!
  \********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("module.exports = function(object) {\n    return Object.keys(object).length === 0;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvaXMtZW1wdHkuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvaXMtZW1wdHkuanM/ZmYxYyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmplY3QpLmxlbmd0aCA9PT0gMDtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/is-empty.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/is-primitive.js":
/*!************************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/is-primitive.js ***!
  \************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var type = __webpack_require__(/*! ./type */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/type.js\");\n\nfunction isPrimitive(value) {\n    var t = type(value);\n    return t !== 'Object' && t !== 'Array';\n}\n\nmodule.exports = isPrimitive;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvaXMtcHJpbWl0aXZlLmpzIiwibWFwcGluZ3MiOiJBQUFBLFdBQVcsbUJBQU8sQ0FBQyw0RkFBUTs7QUFFM0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9pcy1wcmltaXRpdmUuanM/MzZiMyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdHlwZSA9IHJlcXVpcmUoJy4vdHlwZScpO1xuXG5mdW5jdGlvbiBpc1ByaW1pdGl2ZSh2YWx1ZSkge1xuICAgIHZhciB0ID0gdHlwZSh2YWx1ZSk7XG4gICAgcmV0dXJuIHQgIT09ICdPYmplY3QnICYmIHQgIT09ICdBcnJheSc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNQcmltaXRpdmU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/is-primitive.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/leaf.js":
/*!****************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/leaf.js ***!
  \****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var React = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\nvar createReactClass = __webpack_require__(/*! create-react-class */ \"(app-pages-browser)/./node_modules/create-react-class/index.js\");\n\nvar md5omatic = __webpack_require__(/*! md5-o-matic */ \"(app-pages-browser)/./node_modules/md5-o-matic/lib/md5omatic.js\");\n\nvar uid = __webpack_require__(/*! ./uid */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/uid.js\");\nvar type = __webpack_require__(/*! ./type */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/type.js\");\nvar isPrimitive = __webpack_require__(/*! ./is-primitive */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/is-primitive.js\");\n\nvar Highlighter = __webpack_require__(/*! ./highlighter */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/highlighter.js\");\n\nvar h = React.createElement;\nvar PATH_PREFIX = '.root.';\n\nvar Leaf = createReactClass({\n    getInitialState: function() {\n        return {\n            expanded: this._isInitiallyExpanded(this.props)\n        };\n    },\n    getDefaultProps: function() {\n        return {\n            root: false,\n            prefix: ''\n        };\n    },\n    render: function() {\n        var id = 'id_' + uid();\n        var p = this.props;\n\n        var d = {\n            path: this.keypath(),\n            key: p.label.toString(),\n            value: p.data\n        };\n\n        var onLabelClick = this._onClick.bind(this, d);\n\n        return h('div', { className: this.getClassName(), id: 'leaf-' + this._rootPath() },\n            h('input', { className: 'json-inspector__radio', type: 'radio', name: p.id, id: id, tabIndex: -1 }),\n            h('label', { className: 'json-inspector__line', htmlFor: id, onClick: onLabelClick },\n                h('div', { className: 'json-inspector__flatpath' },\n                    d.path),\n                h('span', { className: 'json-inspector__key' },\n                    this.format(d.key),\n                    ':',\n                    this.renderInteractiveLabel(d.key, true)),\n                this.renderTitle(),\n                this.renderShowOriginalButton()),\n            this.renderChildren());\n    },\n    renderTitle: function() {\n        var data = this.data();\n        var t = type(data);\n\n        switch (t) {\n            case 'Array':\n                var length = data.length\n                return h('span', { className: 'json-inspector__value json-inspector__value_helper' },\n                    (length > 0 ? '[…] ' : '[] ') + items(length));\n            case 'Object':\n                var keys = Object.keys(data).length\n                return h('span', { className: 'json-inspector__value json-inspector__value_helper' },\n                    (keys > 0 ? '{…} ' : '{} ') + properties(keys));\n            default:\n                return h('span', { className: 'json-inspector__value json-inspector__value_' + t.toLowerCase() },\n                    this.format(String(data)),\n                    this.renderInteractiveLabel(data, false));\n        }\n    },\n    renderChildren: function() {\n        var p = this.props;\n        var childPrefix = this._rootPath();\n        var data = this.data();\n\n        if (this.state.expanded && !isPrimitive(data)) {\n            return Object.keys(data).map(function(key) {\n                var value = data[key];\n\n                var shouldGetOriginal = !this.state.original || (p.verboseShowOriginal ? p.query : false);\n\n                return h(Leaf, {\n                    data: value,\n                    label: key,\n                    prefix: childPrefix,\n                    onClick: p.onClick,\n                    id: p.id,\n                    query: p.query,\n                    getOriginal: shouldGetOriginal ? p.getOriginal : null,\n                    key: getLeafKey(key, value),\n                    isExpanded: p.isExpanded,\n                    interactiveLabel: p.interactiveLabel,\n                    verboseShowOriginal: p.verboseShowOriginal\n                });\n            }, this);\n        }\n\n        return null;\n    },\n    renderShowOriginalButton: function() {\n        var p = this.props;\n\n        if (isPrimitive(p.data) || this.state.original || !p.getOriginal || !p.query || contains(this.keypath(), p.query)) {\n            return null;\n        }\n\n        return h('span', {\n            className: 'json-inspector__show-original',\n            onClick: this._onShowOriginalClick\n        });\n    },\n    renderInteractiveLabel: function(originalValue, isKey) {\n        if (typeof this.props.interactiveLabel === 'function') {\n            return h(this.props.interactiveLabel, {\n                // The distinction between `value` and `originalValue` is\n                // provided to have backwards compatibility.\n                value: String(originalValue),\n                originalValue: originalValue,\n                isKey: isKey,\n                keypath: this.keypath()\n            });\n        }\n\n        return null;\n    },\n    componentWillReceiveProps: function(p) {\n        if (p.query) {\n            this.setState({\n                expanded: !contains(p.label, p.query)\n            });\n        }\n\n        // Restore original expansion state when switching from search mode\n        // to full browse mode.\n        if (this.props.query && !p.query) {\n            this.setState({\n                expanded: this._isInitiallyExpanded(p)\n            });\n        }\n    },\n    _rootPath: function() {\n        return this.props.prefix + '.' + this.props.label;\n    },\n    keypath: function() {\n        return this._rootPath().substr(PATH_PREFIX.length);\n    },\n    data: function() {\n        return this.state.original || this.props.data;\n    },\n    format: function(string) {\n        return h(Highlighter, {\n            string: string,\n            highlight: this.props.query\n        });\n    },\n    getClassName: function() {\n        var cn = 'json-inspector__leaf';\n\n        if (this.props.root) {\n            cn += ' json-inspector__leaf_root';\n        }\n\n        if (this.state.expanded) {\n            cn += ' json-inspector__leaf_expanded';\n        }\n\n        if (!isPrimitive(this.props.data)) {\n            cn += ' json-inspector__leaf_composite';\n        }\n\n        return cn;\n    },\n    toggle: function() {\n        this.setState({\n            expanded: !this.state.expanded\n        });\n    },\n    _onClick: function(data, e) {\n        this.toggle();\n        this.props.onClick(data);\n\n        e.stopPropagation();\n    },\n    _onShowOriginalClick: function(e) {\n        this.setState({\n            original: this.props.getOriginal(this.keypath())\n        });\n\n        e.stopPropagation();\n    },\n    _isInitiallyExpanded: function(p) {\n        var keypath = this.keypath();\n\n        if (p.root) {\n            return true;\n        }\n\n        if (!p.query) {\n            return p.isExpanded(keypath, p.data);\n        } else {\n            // When a search query is specified, first check if the keypath\n            // contains the search query: if it does, then the current leaf\n            // is itself a search result and there is no need to expand further.\n            //\n            // Having a `getOriginal` function passed signalizes that current\n            // leaf only displays a subset of data, thus should be rendered\n            // expanded to reveal the children that is being searched for.\n            return !contains(keypath, p.query) && (typeof p.getOriginal === 'function');\n        }\n    }\n});\n\nfunction items(count) {\n    return count + (count === 1 ? ' item' : ' items');\n}\n\nfunction properties(count) {\n    return count + (count === 1 ? ' property' : ' properties');\n}\n\nfunction getLeafKey(key, value) {\n    if (isPrimitive(value)) {\n        // TODO: Sanitize `value` better.\n        var hash = md5omatic(String(value));\n        return key + ':' + hash;\n    } else {\n        return key + '[' + type(value) + ']';\n    }\n}\n\nfunction contains(string, substring) {\n    return string.indexOf(substring) !== -1;\n}\n\nmodule.exports = Leaf;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvbGVhZi5qcyIsIm1hcHBpbmdzIjoiQUFBQSxZQUFZLG1CQUFPLENBQUMsbUZBQU87QUFDM0IsdUJBQXVCLG1CQUFPLENBQUMsMEZBQW9COztBQUVuRCxnQkFBZ0IsbUJBQU8sQ0FBQyxvRkFBYTs7QUFFckMsVUFBVSxtQkFBTyxDQUFDLDBGQUFPO0FBQ3pCLFdBQVcsbUJBQU8sQ0FBQyw0RkFBUTtBQUMzQixrQkFBa0IsbUJBQU8sQ0FBQyw0R0FBZ0I7O0FBRTFDLGtCQUFrQixtQkFBTyxDQUFDLDBHQUFlOztBQUV6QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSwwQkFBMEIsZ0VBQWdFO0FBQzFGLHlCQUF5QixxRkFBcUY7QUFDOUcseUJBQXlCLHVFQUF1RTtBQUNoRywyQkFBMkIsdUNBQXVDO0FBQ2xFO0FBQ0EsNEJBQTRCLGtDQUFrQztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxpRUFBaUU7QUFDcEc7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGlFQUFpRTtBQUNwRyxrQ0FBa0MsR0FBRyxRQUFRO0FBQzdDO0FBQ0EsbUNBQW1DLDZFQUE2RTtBQUNoSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvbGVhZi5qcz8wNWJkIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IHJlcXVpcmUoJ2NyZWF0ZS1yZWFjdC1jbGFzcycpO1xuXG52YXIgbWQ1b21hdGljID0gcmVxdWlyZSgnbWQ1LW8tbWF0aWMnKTtcblxudmFyIHVpZCA9IHJlcXVpcmUoJy4vdWlkJyk7XG52YXIgdHlwZSA9IHJlcXVpcmUoJy4vdHlwZScpO1xudmFyIGlzUHJpbWl0aXZlID0gcmVxdWlyZSgnLi9pcy1wcmltaXRpdmUnKTtcblxudmFyIEhpZ2hsaWdodGVyID0gcmVxdWlyZSgnLi9oaWdobGlnaHRlcicpO1xuXG52YXIgaCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQ7XG52YXIgUEFUSF9QUkVGSVggPSAnLnJvb3QuJztcblxudmFyIExlYWYgPSBjcmVhdGVSZWFjdENsYXNzKHtcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZXhwYW5kZWQ6IHRoaXMuX2lzSW5pdGlhbGx5RXhwYW5kZWQodGhpcy5wcm9wcylcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb290OiBmYWxzZSxcbiAgICAgICAgICAgIHByZWZpeDogJydcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpZCA9ICdpZF8nICsgdWlkKCk7XG4gICAgICAgIHZhciBwID0gdGhpcy5wcm9wcztcblxuICAgICAgICB2YXIgZCA9IHtcbiAgICAgICAgICAgIHBhdGg6IHRoaXMua2V5cGF0aCgpLFxuICAgICAgICAgICAga2V5OiBwLmxhYmVsLnRvU3RyaW5nKCksXG4gICAgICAgICAgICB2YWx1ZTogcC5kYXRhXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIG9uTGFiZWxDbGljayA9IHRoaXMuX29uQ2xpY2suYmluZCh0aGlzLCBkKTtcblxuICAgICAgICByZXR1cm4gaCgnZGl2JywgeyBjbGFzc05hbWU6IHRoaXMuZ2V0Q2xhc3NOYW1lKCksIGlkOiAnbGVhZi0nICsgdGhpcy5fcm9vdFBhdGgoKSB9LFxuICAgICAgICAgICAgaCgnaW5wdXQnLCB7IGNsYXNzTmFtZTogJ2pzb24taW5zcGVjdG9yX19yYWRpbycsIHR5cGU6ICdyYWRpbycsIG5hbWU6IHAuaWQsIGlkOiBpZCwgdGFiSW5kZXg6IC0xIH0pLFxuICAgICAgICAgICAgaCgnbGFiZWwnLCB7IGNsYXNzTmFtZTogJ2pzb24taW5zcGVjdG9yX19saW5lJywgaHRtbEZvcjogaWQsIG9uQ2xpY2s6IG9uTGFiZWxDbGljayB9LFxuICAgICAgICAgICAgICAgIGgoJ2RpdicsIHsgY2xhc3NOYW1lOiAnanNvbi1pbnNwZWN0b3JfX2ZsYXRwYXRoJyB9LFxuICAgICAgICAgICAgICAgICAgICBkLnBhdGgpLFxuICAgICAgICAgICAgICAgIGgoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2pzb24taW5zcGVjdG9yX19rZXknIH0sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0KGQua2V5KSxcbiAgICAgICAgICAgICAgICAgICAgJzonLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckludGVyYWN0aXZlTGFiZWwoZC5rZXksIHRydWUpKSxcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRpdGxlKCksXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTaG93T3JpZ2luYWxCdXR0b24oKSksXG4gICAgICAgICAgICB0aGlzLnJlbmRlckNoaWxkcmVuKCkpO1xuICAgIH0sXG4gICAgcmVuZGVyVGl0bGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YSgpO1xuICAgICAgICB2YXIgdCA9IHR5cGUoZGF0YSk7XG5cbiAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICBjYXNlICdBcnJheSc6XG4gICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGRhdGEubGVuZ3RoXG4gICAgICAgICAgICAgICAgcmV0dXJuIGgoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2pzb24taW5zcGVjdG9yX192YWx1ZSBqc29uLWluc3BlY3Rvcl9fdmFsdWVfaGVscGVyJyB9LFxuICAgICAgICAgICAgICAgICAgICAobGVuZ3RoID4gMCA/ICdb4oCmXSAnIDogJ1tdICcpICsgaXRlbXMobGVuZ3RoKSk7XG4gICAgICAgICAgICBjYXNlICdPYmplY3QnOlxuICAgICAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoXG4gICAgICAgICAgICAgICAgcmV0dXJuIGgoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2pzb24taW5zcGVjdG9yX192YWx1ZSBqc29uLWluc3BlY3Rvcl9fdmFsdWVfaGVscGVyJyB9LFxuICAgICAgICAgICAgICAgICAgICAoa2V5cyA+IDAgPyAne+KApn0gJyA6ICd7fSAnKSArIHByb3BlcnRpZXMoa2V5cykpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gaCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnanNvbi1pbnNwZWN0b3JfX3ZhbHVlIGpzb24taW5zcGVjdG9yX192YWx1ZV8nICsgdC50b0xvd2VyQ2FzZSgpIH0sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0KFN0cmluZyhkYXRhKSksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVySW50ZXJhY3RpdmVMYWJlbChkYXRhLCBmYWxzZSkpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByZW5kZXJDaGlsZHJlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBwID0gdGhpcy5wcm9wcztcbiAgICAgICAgdmFyIGNoaWxkUHJlZml4ID0gdGhpcy5fcm9vdFBhdGgoKTtcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGEoKTtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5leHBhbmRlZCAmJiAhaXNQcmltaXRpdmUoZGF0YSkpIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhkYXRhKS5tYXAoZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZGF0YVtrZXldO1xuXG4gICAgICAgICAgICAgICAgdmFyIHNob3VsZEdldE9yaWdpbmFsID0gIXRoaXMuc3RhdGUub3JpZ2luYWwgfHwgKHAudmVyYm9zZVNob3dPcmlnaW5hbCA/IHAucXVlcnkgOiBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gaChMZWFmLCB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDoga2V5LFxuICAgICAgICAgICAgICAgICAgICBwcmVmaXg6IGNoaWxkUHJlZml4LFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBwLm9uQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgIGlkOiBwLmlkLFxuICAgICAgICAgICAgICAgICAgICBxdWVyeTogcC5xdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgZ2V0T3JpZ2luYWw6IHNob3VsZEdldE9yaWdpbmFsID8gcC5nZXRPcmlnaW5hbCA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGtleTogZ2V0TGVhZktleShrZXksIHZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgaXNFeHBhbmRlZDogcC5pc0V4cGFuZGVkLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcmFjdGl2ZUxhYmVsOiBwLmludGVyYWN0aXZlTGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIHZlcmJvc2VTaG93T3JpZ2luYWw6IHAudmVyYm9zZVNob3dPcmlnaW5hbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHJlbmRlclNob3dPcmlnaW5hbEJ1dHRvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBwID0gdGhpcy5wcm9wcztcblxuICAgICAgICBpZiAoaXNQcmltaXRpdmUocC5kYXRhKSB8fCB0aGlzLnN0YXRlLm9yaWdpbmFsIHx8ICFwLmdldE9yaWdpbmFsIHx8ICFwLnF1ZXJ5IHx8IGNvbnRhaW5zKHRoaXMua2V5cGF0aCgpLCBwLnF1ZXJ5KSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaCgnc3BhbicsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ2pzb24taW5zcGVjdG9yX19zaG93LW9yaWdpbmFsJyxcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuX29uU2hvd09yaWdpbmFsQ2xpY2tcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICByZW5kZXJJbnRlcmFjdGl2ZUxhYmVsOiBmdW5jdGlvbihvcmlnaW5hbFZhbHVlLCBpc0tleSkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMuaW50ZXJhY3RpdmVMYWJlbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGgodGhpcy5wcm9wcy5pbnRlcmFjdGl2ZUxhYmVsLCB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGRpc3RpbmN0aW9uIGJldHdlZW4gYHZhbHVlYCBhbmQgYG9yaWdpbmFsVmFsdWVgIGlzXG4gICAgICAgICAgICAgICAgLy8gcHJvdmlkZWQgdG8gaGF2ZSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgICAgICAgICB2YWx1ZTogU3RyaW5nKG9yaWdpbmFsVmFsdWUpLFxuICAgICAgICAgICAgICAgIG9yaWdpbmFsVmFsdWU6IG9yaWdpbmFsVmFsdWUsXG4gICAgICAgICAgICAgICAgaXNLZXk6IGlzS2V5LFxuICAgICAgICAgICAgICAgIGtleXBhdGg6IHRoaXMua2V5cGF0aCgpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24ocCkge1xuICAgICAgICBpZiAocC5xdWVyeSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgZXhwYW5kZWQ6ICFjb250YWlucyhwLmxhYmVsLCBwLnF1ZXJ5KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXN0b3JlIG9yaWdpbmFsIGV4cGFuc2lvbiBzdGF0ZSB3aGVuIHN3aXRjaGluZyBmcm9tIHNlYXJjaCBtb2RlXG4gICAgICAgIC8vIHRvIGZ1bGwgYnJvd3NlIG1vZGUuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnF1ZXJ5ICYmICFwLnF1ZXJ5KSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBleHBhbmRlZDogdGhpcy5faXNJbml0aWFsbHlFeHBhbmRlZChwKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9yb290UGF0aDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLnByZWZpeCArICcuJyArIHRoaXMucHJvcHMubGFiZWw7XG4gICAgfSxcbiAgICBrZXlwYXRoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jvb3RQYXRoKCkuc3Vic3RyKFBBVEhfUFJFRklYLmxlbmd0aCk7XG4gICAgfSxcbiAgICBkYXRhOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUub3JpZ2luYWwgfHwgdGhpcy5wcm9wcy5kYXRhO1xuICAgIH0sXG4gICAgZm9ybWF0OiBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIGgoSGlnaGxpZ2h0ZXIsIHtcbiAgICAgICAgICAgIHN0cmluZzogc3RyaW5nLFxuICAgICAgICAgICAgaGlnaGxpZ2h0OiB0aGlzLnByb3BzLnF1ZXJ5XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0Q2xhc3NOYW1lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNuID0gJ2pzb24taW5zcGVjdG9yX19sZWFmJztcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5yb290KSB7XG4gICAgICAgICAgICBjbiArPSAnIGpzb24taW5zcGVjdG9yX19sZWFmX3Jvb3QnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZXhwYW5kZWQpIHtcbiAgICAgICAgICAgIGNuICs9ICcganNvbi1pbnNwZWN0b3JfX2xlYWZfZXhwYW5kZWQnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc1ByaW1pdGl2ZSh0aGlzLnByb3BzLmRhdGEpKSB7XG4gICAgICAgICAgICBjbiArPSAnIGpzb24taW5zcGVjdG9yX19sZWFmX2NvbXBvc2l0ZSc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY247XG4gICAgfSxcbiAgICB0b2dnbGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGV4cGFuZGVkOiAhdGhpcy5zdGF0ZS5leHBhbmRlZFxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIF9vbkNsaWNrOiBmdW5jdGlvbihkYXRhLCBlKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlKCk7XG4gICAgICAgIHRoaXMucHJvcHMub25DbGljayhkYXRhKTtcblxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0sXG4gICAgX29uU2hvd09yaWdpbmFsQ2xpY2s6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBvcmlnaW5hbDogdGhpcy5wcm9wcy5nZXRPcmlnaW5hbCh0aGlzLmtleXBhdGgoKSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9LFxuICAgIF9pc0luaXRpYWxseUV4cGFuZGVkOiBmdW5jdGlvbihwKSB7XG4gICAgICAgIHZhciBrZXlwYXRoID0gdGhpcy5rZXlwYXRoKCk7XG5cbiAgICAgICAgaWYgKHAucm9vdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXAucXVlcnkpIHtcbiAgICAgICAgICAgIHJldHVybiBwLmlzRXhwYW5kZWQoa2V5cGF0aCwgcC5kYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFdoZW4gYSBzZWFyY2ggcXVlcnkgaXMgc3BlY2lmaWVkLCBmaXJzdCBjaGVjayBpZiB0aGUga2V5cGF0aFxuICAgICAgICAgICAgLy8gY29udGFpbnMgdGhlIHNlYXJjaCBxdWVyeTogaWYgaXQgZG9lcywgdGhlbiB0aGUgY3VycmVudCBsZWFmXG4gICAgICAgICAgICAvLyBpcyBpdHNlbGYgYSBzZWFyY2ggcmVzdWx0IGFuZCB0aGVyZSBpcyBubyBuZWVkIHRvIGV4cGFuZCBmdXJ0aGVyLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEhhdmluZyBhIGBnZXRPcmlnaW5hbGAgZnVuY3Rpb24gcGFzc2VkIHNpZ25hbGl6ZXMgdGhhdCBjdXJyZW50XG4gICAgICAgICAgICAvLyBsZWFmIG9ubHkgZGlzcGxheXMgYSBzdWJzZXQgb2YgZGF0YSwgdGh1cyBzaG91bGQgYmUgcmVuZGVyZWRcbiAgICAgICAgICAgIC8vIGV4cGFuZGVkIHRvIHJldmVhbCB0aGUgY2hpbGRyZW4gdGhhdCBpcyBiZWluZyBzZWFyY2hlZCBmb3IuXG4gICAgICAgICAgICByZXR1cm4gIWNvbnRhaW5zKGtleXBhdGgsIHAucXVlcnkpICYmICh0eXBlb2YgcC5nZXRPcmlnaW5hbCA9PT0gJ2Z1bmN0aW9uJyk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuZnVuY3Rpb24gaXRlbXMoY291bnQpIHtcbiAgICByZXR1cm4gY291bnQgKyAoY291bnQgPT09IDEgPyAnIGl0ZW0nIDogJyBpdGVtcycpO1xufVxuXG5mdW5jdGlvbiBwcm9wZXJ0aWVzKGNvdW50KSB7XG4gICAgcmV0dXJuIGNvdW50ICsgKGNvdW50ID09PSAxID8gJyBwcm9wZXJ0eScgOiAnIHByb3BlcnRpZXMnKTtcbn1cblxuZnVuY3Rpb24gZ2V0TGVhZktleShrZXksIHZhbHVlKSB7XG4gICAgaWYgKGlzUHJpbWl0aXZlKHZhbHVlKSkge1xuICAgICAgICAvLyBUT0RPOiBTYW5pdGl6ZSBgdmFsdWVgIGJldHRlci5cbiAgICAgICAgdmFyIGhhc2ggPSBtZDVvbWF0aWMoU3RyaW5nKHZhbHVlKSk7XG4gICAgICAgIHJldHVybiBrZXkgKyAnOicgKyBoYXNoO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBrZXkgKyAnWycgKyB0eXBlKHZhbHVlKSArICddJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNvbnRhaW5zKHN0cmluZywgc3Vic3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5pbmRleE9mKHN1YnN0cmluZykgIT09IC0xO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IExlYWY7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/leaf.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/lens.js":
/*!****************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/lens.js ***!
  \****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var type = __webpack_require__(/*! ./type */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/type.js\");\n\nvar PATH_DELIMITER = '.';\n\nfunction lens(data, path) {\n    var p = path.split(PATH_DELIMITER);\n    var segment = p.shift();\n\n    if (!segment) {\n        return data;\n    }\n\n    var t = type(data);\n\n    if (t === 'Array' && data[integer(segment)]) {\n        return lens(data[integer(segment)], p.join(PATH_DELIMITER));\n    } else if (t === 'Object' && data[segment]) {\n        return lens(data[segment], p.join(PATH_DELIMITER));\n    }\n}\n\nfunction integer(string) {\n    return parseInt(string, 10);\n}\n\nmodule.exports = lens;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvbGVucy5qcyIsIm1hcHBpbmdzIjoiQUFBQSxXQUFXLG1CQUFPLENBQUMsNEZBQVE7O0FBRTNCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvbGVucy5qcz9mZGUwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciB0eXBlID0gcmVxdWlyZSgnLi90eXBlJyk7XG5cbnZhciBQQVRIX0RFTElNSVRFUiA9ICcuJztcblxuZnVuY3Rpb24gbGVucyhkYXRhLCBwYXRoKSB7XG4gICAgdmFyIHAgPSBwYXRoLnNwbGl0KFBBVEhfREVMSU1JVEVSKTtcbiAgICB2YXIgc2VnbWVudCA9IHAuc2hpZnQoKTtcblxuICAgIGlmICghc2VnbWVudCkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICB2YXIgdCA9IHR5cGUoZGF0YSk7XG5cbiAgICBpZiAodCA9PT0gJ0FycmF5JyAmJiBkYXRhW2ludGVnZXIoc2VnbWVudCldKSB7XG4gICAgICAgIHJldHVybiBsZW5zKGRhdGFbaW50ZWdlcihzZWdtZW50KV0sIHAuam9pbihQQVRIX0RFTElNSVRFUikpO1xuICAgIH0gZWxzZSBpZiAodCA9PT0gJ09iamVjdCcgJiYgZGF0YVtzZWdtZW50XSkge1xuICAgICAgICByZXR1cm4gbGVucyhkYXRhW3NlZ21lbnRdLCBwLmpvaW4oUEFUSF9ERUxJTUlURVIpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGludGVnZXIoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHN0cmluZywgMTApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxlbnM7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/lens.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/noop.js":
/*!****************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/noop.js ***!
  \****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("module.exports = function() {};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvbm9vcC5qcyIsIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHJleHhhcnMvcmVhY3QtanNvbi1pbnNwZWN0b3IvbGliL25vb3AuanM/Y2FhNiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/noop.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/search-bar.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/search-bar.js ***!
  \**********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var React = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\nvar createReactClass = __webpack_require__(/*! create-react-class */ \"(app-pages-browser)/./node_modules/create-react-class/index.js\");\n\nvar h = React.createElement;\nvar noop = __webpack_require__(/*! ./noop */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/noop.js\");\n\nmodule.exports = createReactClass({\n    getDefaultProps: function() {\n        return {\n            onChange: noop\n        };\n    },\n    render: function() {\n        return h('input', {\n            className: 'json-inspector__search',\n            type: 'search',\n            placeholder: 'Search',\n            onChange: this.onChange\n        });\n    },\n    onChange: function(e) {\n        this.props.onChange(e.target.value);\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvc2VhcmNoLWJhci5qcyIsIm1hcHBpbmdzIjoiQUFBQSxZQUFZLG1CQUFPLENBQUMsbUZBQU87QUFDM0IsdUJBQXVCLG1CQUFPLENBQUMsMEZBQW9COztBQUVuRDtBQUNBLFdBQVcsbUJBQU8sQ0FBQyw0RkFBUTs7QUFFM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi9zZWFyY2gtYmFyLmpzPzYyYTAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG5cbnZhciBoID0gUmVhY3QuY3JlYXRlRWxlbWVudDtcbnZhciBub29wID0gcmVxdWlyZSgnLi9ub29wJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlUmVhY3RDbGFzcyh7XG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9uQ2hhbmdlOiBub29wXG4gICAgICAgIH07XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaCgnaW5wdXQnLCB7XG4gICAgICAgICAgICBjbGFzc05hbWU6ICdqc29uLWluc3BlY3Rvcl9fc2VhcmNoJyxcbiAgICAgICAgICAgIHR5cGU6ICdzZWFyY2gnLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdTZWFyY2gnLFxuICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMub25DaGFuZ2VcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBvbkNoYW5nZTogZnVuY3Rpb24oZSkge1xuICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/search-bar.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/type.js":
/*!****************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/type.js ***!
  \****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("module.exports = function(value) {\n    return Object.prototype.toString.call(value).slice(8, -1);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvdHlwZS5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yL2xpYi90eXBlLmpzPzg1MjciXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLnNsaWNlKDgsIC0xKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/type.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/uid.js":
/*!***************************************************************!*\
  !*** ./node_modules/@rexxars/react-json-inspector/lib/uid.js ***!
  \***************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var id = Math.ceil(Math.random() * 10);\n\nmodule.exports = function() {\n    return ++id;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmV4eGFycy9yZWFjdC1qc29uLWluc3BlY3Rvci9saWIvdWlkLmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHJleHhhcnMvcmVhY3QtanNvbi1pbnNwZWN0b3IvbGliL3VpZC5qcz9lNDI0Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBpZCA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMTApO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiArK2lkO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/lib/uid.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/create-react-class/factory.js":
/*!****************************************************!*\
  !*** ./node_modules/create-react-class/factory.js ***!
  \****************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n\nvar _assign = __webpack_require__(/*! object-assign */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/object-assign.js\");\n\n// -- Inlined from fbjs --\n\nvar emptyObject = {};\n\nif (true) {\n  Object.freeze(emptyObject);\n}\n\nvar validateFormat = function validateFormat(format) {};\n\nif (true) {\n  validateFormat = function validateFormat(format) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  };\n}\n\nfunction _invariant(condition, format, a, b, c, d, e, f) {\n  validateFormat(format);\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nvar warning = function(){};\n\nif (true) {\n  var printWarning = function printWarning(format) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var argIndex = 0;\n    var message = 'Warning: ' + format.replace(/%s/g, function () {\n      return args[argIndex++];\n    });\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n\n  warning = function warning(condition, format) {\n    if (format === undefined) {\n      throw new Error('`warning(condition, format, ...args)` requires a warning ' + 'message argument');\n    }\n\n    if (format.indexOf('Failed Composite propType: ') === 0) {\n      return; // Ignore CompositeComponent proptype check.\n    }\n\n    if (!condition) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n        args[_key2 - 2] = arguments[_key2];\n      }\n\n      printWarning.apply(undefined, [format].concat(args));\n    }\n  };\n}\n\n// /-- Inlined from fbjs --\n\nvar MIXINS_KEY = 'mixins';\n\n// Helper function to allow the creation of anonymous functions which do not\n// have .name set to the name of the variable being assigned to.\nfunction identity(fn) {\n  return fn;\n}\n\nvar ReactPropTypeLocationNames;\nif (true) {\n  ReactPropTypeLocationNames = {\n    prop: 'prop',\n    context: 'context',\n    childContext: 'child context'\n  };\n} else {}\n\nfunction factory(ReactComponent, isValidElement, ReactNoopUpdateQueue) {\n  /**\n   * Policies that describe methods in `ReactClassInterface`.\n   */\n\n  var injectedMixins = [];\n\n  /**\n   * Composite components are higher-level components that compose other composite\n   * or host components.\n   *\n   * To create a new type of `ReactClass`, pass a specification of\n   * your new class to `React.createClass`. The only requirement of your class\n   * specification is that you implement a `render` method.\n   *\n   *   var MyComponent = React.createClass({\n   *     render: function() {\n   *       return <div>Hello World</div>;\n   *     }\n   *   });\n   *\n   * The class specification supports a specific protocol of methods that have\n   * special meaning (e.g. `render`). See `ReactClassInterface` for\n   * more the comprehensive protocol. Any other properties and methods in the\n   * class specification will be available on the prototype.\n   *\n   * @interface ReactClassInterface\n   * @internal\n   */\n  var ReactClassInterface = {\n    /**\n     * An array of Mixin objects to include when defining your component.\n     *\n     * @type {array}\n     * @optional\n     */\n    mixins: 'DEFINE_MANY',\n\n    /**\n     * An object containing properties and methods that should be defined on\n     * the component's constructor instead of its prototype (static methods).\n     *\n     * @type {object}\n     * @optional\n     */\n    statics: 'DEFINE_MANY',\n\n    /**\n     * Definition of prop types for this component.\n     *\n     * @type {object}\n     * @optional\n     */\n    propTypes: 'DEFINE_MANY',\n\n    /**\n     * Definition of context types for this component.\n     *\n     * @type {object}\n     * @optional\n     */\n    contextTypes: 'DEFINE_MANY',\n\n    /**\n     * Definition of context types this component sets for its children.\n     *\n     * @type {object}\n     * @optional\n     */\n    childContextTypes: 'DEFINE_MANY',\n\n    // ==== Definition methods ====\n\n    /**\n     * Invoked when the component is mounted. Values in the mapping will be set on\n     * `this.props` if that prop is not specified (i.e. using an `in` check).\n     *\n     * This method is invoked before `getInitialState` and therefore cannot rely\n     * on `this.state` or use `this.setState`.\n     *\n     * @return {object}\n     * @optional\n     */\n    getDefaultProps: 'DEFINE_MANY_MERGED',\n\n    /**\n     * Invoked once before the component is mounted. The return value will be used\n     * as the initial value of `this.state`.\n     *\n     *   getInitialState: function() {\n     *     return {\n     *       isOn: false,\n     *       fooBaz: new BazFoo()\n     *     }\n     *   }\n     *\n     * @return {object}\n     * @optional\n     */\n    getInitialState: 'DEFINE_MANY_MERGED',\n\n    /**\n     * @return {object}\n     * @optional\n     */\n    getChildContext: 'DEFINE_MANY_MERGED',\n\n    /**\n     * Uses props from `this.props` and state from `this.state` to render the\n     * structure of the component.\n     *\n     * No guarantees are made about when or how often this method is invoked, so\n     * it must not have side effects.\n     *\n     *   render: function() {\n     *     var name = this.props.name;\n     *     return <div>Hello, {name}!</div>;\n     *   }\n     *\n     * @return {ReactComponent}\n     * @required\n     */\n    render: 'DEFINE_ONCE',\n\n    // ==== Delegate methods ====\n\n    /**\n     * Invoked when the component is initially created and about to be mounted.\n     * This may have side effects, but any external subscriptions or data created\n     * by this method must be cleaned up in `componentWillUnmount`.\n     *\n     * @optional\n     */\n    componentWillMount: 'DEFINE_MANY',\n\n    /**\n     * Invoked when the component has been mounted and has a DOM representation.\n     * However, there is no guarantee that the DOM node is in the document.\n     *\n     * Use this as an opportunity to operate on the DOM when the component has\n     * been mounted (initialized and rendered) for the first time.\n     *\n     * @param {DOMElement} rootNode DOM element representing the component.\n     * @optional\n     */\n    componentDidMount: 'DEFINE_MANY',\n\n    /**\n     * Invoked before the component receives new props.\n     *\n     * Use this as an opportunity to react to a prop transition by updating the\n     * state using `this.setState`. Current props are accessed via `this.props`.\n     *\n     *   componentWillReceiveProps: function(nextProps, nextContext) {\n     *     this.setState({\n     *       likesIncreasing: nextProps.likeCount > this.props.likeCount\n     *     });\n     *   }\n     *\n     * NOTE: There is no equivalent `componentWillReceiveState`. An incoming prop\n     * transition may cause a state change, but the opposite is not true. If you\n     * need it, you are probably looking for `componentWillUpdate`.\n     *\n     * @param {object} nextProps\n     * @optional\n     */\n    componentWillReceiveProps: 'DEFINE_MANY',\n\n    /**\n     * Invoked while deciding if the component should be updated as a result of\n     * receiving new props, state and/or context.\n     *\n     * Use this as an opportunity to `return false` when you're certain that the\n     * transition to the new props/state/context will not require a component\n     * update.\n     *\n     *   shouldComponentUpdate: function(nextProps, nextState, nextContext) {\n     *     return !equal(nextProps, this.props) ||\n     *       !equal(nextState, this.state) ||\n     *       !equal(nextContext, this.context);\n     *   }\n     *\n     * @param {object} nextProps\n     * @param {?object} nextState\n     * @param {?object} nextContext\n     * @return {boolean} True if the component should update.\n     * @optional\n     */\n    shouldComponentUpdate: 'DEFINE_ONCE',\n\n    /**\n     * Invoked when the component is about to update due to a transition from\n     * `this.props`, `this.state` and `this.context` to `nextProps`, `nextState`\n     * and `nextContext`.\n     *\n     * Use this as an opportunity to perform preparation before an update occurs.\n     *\n     * NOTE: You **cannot** use `this.setState()` in this method.\n     *\n     * @param {object} nextProps\n     * @param {?object} nextState\n     * @param {?object} nextContext\n     * @param {ReactReconcileTransaction} transaction\n     * @optional\n     */\n    componentWillUpdate: 'DEFINE_MANY',\n\n    /**\n     * Invoked when the component's DOM representation has been updated.\n     *\n     * Use this as an opportunity to operate on the DOM when the component has\n     * been updated.\n     *\n     * @param {object} prevProps\n     * @param {?object} prevState\n     * @param {?object} prevContext\n     * @param {DOMElement} rootNode DOM element representing the component.\n     * @optional\n     */\n    componentDidUpdate: 'DEFINE_MANY',\n\n    /**\n     * Invoked when the component is about to be removed from its parent and have\n     * its DOM representation destroyed.\n     *\n     * Use this as an opportunity to deallocate any external resources.\n     *\n     * NOTE: There is no `componentDidUnmount` since your component will have been\n     * destroyed by that point.\n     *\n     * @optional\n     */\n    componentWillUnmount: 'DEFINE_MANY',\n\n    /**\n     * Replacement for (deprecated) `componentWillMount`.\n     *\n     * @optional\n     */\n    UNSAFE_componentWillMount: 'DEFINE_MANY',\n\n    /**\n     * Replacement for (deprecated) `componentWillReceiveProps`.\n     *\n     * @optional\n     */\n    UNSAFE_componentWillReceiveProps: 'DEFINE_MANY',\n\n    /**\n     * Replacement for (deprecated) `componentWillUpdate`.\n     *\n     * @optional\n     */\n    UNSAFE_componentWillUpdate: 'DEFINE_MANY',\n\n    // ==== Advanced methods ====\n\n    /**\n     * Updates the component's currently mounted DOM representation.\n     *\n     * By default, this implements React's rendering and reconciliation algorithm.\n     * Sophisticated clients may wish to override this.\n     *\n     * @param {ReactReconcileTransaction} transaction\n     * @internal\n     * @overridable\n     */\n    updateComponent: 'OVERRIDE_BASE'\n  };\n\n  /**\n   * Similar to ReactClassInterface but for static methods.\n   */\n  var ReactClassStaticInterface = {\n    /**\n     * This method is invoked after a component is instantiated and when it\n     * receives new props. Return an object to update state in response to\n     * prop changes. Return null to indicate no change to state.\n     *\n     * If an object is returned, its keys will be merged into the existing state.\n     *\n     * @return {object || null}\n     * @optional\n     */\n    getDerivedStateFromProps: 'DEFINE_MANY_MERGED'\n  };\n\n  /**\n   * Mapping from class specification keys to special processing functions.\n   *\n   * Although these are declared like instance properties in the specification\n   * when defining classes using `React.createClass`, they are actually static\n   * and are accessible on the constructor instead of the prototype. Despite\n   * being static, they must be defined outside of the \"statics\" key under\n   * which all other static methods are defined.\n   */\n  var RESERVED_SPEC_KEYS = {\n    displayName: function(Constructor, displayName) {\n      Constructor.displayName = displayName;\n    },\n    mixins: function(Constructor, mixins) {\n      if (mixins) {\n        for (var i = 0; i < mixins.length; i++) {\n          mixSpecIntoComponent(Constructor, mixins[i]);\n        }\n      }\n    },\n    childContextTypes: function(Constructor, childContextTypes) {\n      if (true) {\n        validateTypeDef(Constructor, childContextTypes, 'childContext');\n      }\n      Constructor.childContextTypes = _assign(\n        {},\n        Constructor.childContextTypes,\n        childContextTypes\n      );\n    },\n    contextTypes: function(Constructor, contextTypes) {\n      if (true) {\n        validateTypeDef(Constructor, contextTypes, 'context');\n      }\n      Constructor.contextTypes = _assign(\n        {},\n        Constructor.contextTypes,\n        contextTypes\n      );\n    },\n    /**\n     * Special case getDefaultProps which should move into statics but requires\n     * automatic merging.\n     */\n    getDefaultProps: function(Constructor, getDefaultProps) {\n      if (Constructor.getDefaultProps) {\n        Constructor.getDefaultProps = createMergedResultFunction(\n          Constructor.getDefaultProps,\n          getDefaultProps\n        );\n      } else {\n        Constructor.getDefaultProps = getDefaultProps;\n      }\n    },\n    propTypes: function(Constructor, propTypes) {\n      if (true) {\n        validateTypeDef(Constructor, propTypes, 'prop');\n      }\n      Constructor.propTypes = _assign({}, Constructor.propTypes, propTypes);\n    },\n    statics: function(Constructor, statics) {\n      mixStaticSpecIntoComponent(Constructor, statics);\n    },\n    autobind: function() {}\n  };\n\n  function validateTypeDef(Constructor, typeDef, location) {\n    for (var propName in typeDef) {\n      if (typeDef.hasOwnProperty(propName)) {\n        // use a warning instead of an _invariant so components\n        // don't show up in prod but only in __DEV__\n        if (true) {\n          warning(\n            typeof typeDef[propName] === 'function',\n            '%s: %s type `%s` is invalid; it must be a function, usually from ' +\n              'React.PropTypes.',\n            Constructor.displayName || 'ReactClass',\n            ReactPropTypeLocationNames[location],\n            propName\n          );\n        }\n      }\n    }\n  }\n\n  function validateMethodOverride(isAlreadyDefined, name) {\n    var specPolicy = ReactClassInterface.hasOwnProperty(name)\n      ? ReactClassInterface[name]\n      : null;\n\n    // Disallow overriding of base class methods unless explicitly allowed.\n    if (ReactClassMixin.hasOwnProperty(name)) {\n      _invariant(\n        specPolicy === 'OVERRIDE_BASE',\n        'ReactClassInterface: You are attempting to override ' +\n          '`%s` from your class specification. Ensure that your method names ' +\n          'do not overlap with React methods.',\n        name\n      );\n    }\n\n    // Disallow defining methods more than once unless explicitly allowed.\n    if (isAlreadyDefined) {\n      _invariant(\n        specPolicy === 'DEFINE_MANY' || specPolicy === 'DEFINE_MANY_MERGED',\n        'ReactClassInterface: You are attempting to define ' +\n          '`%s` on your component more than once. This conflict may be due ' +\n          'to a mixin.',\n        name\n      );\n    }\n  }\n\n  /**\n   * Mixin helper which handles policy validation and reserved\n   * specification keys when building React classes.\n   */\n  function mixSpecIntoComponent(Constructor, spec) {\n    if (!spec) {\n      if (true) {\n        var typeofSpec = typeof spec;\n        var isMixinValid = typeofSpec === 'object' && spec !== null;\n\n        if (true) {\n          warning(\n            isMixinValid,\n            \"%s: You're attempting to include a mixin that is either null \" +\n              'or not an object. Check the mixins included by the component, ' +\n              'as well as any mixins they include themselves. ' +\n              'Expected object but got %s.',\n            Constructor.displayName || 'ReactClass',\n            spec === null ? null : typeofSpec\n          );\n        }\n      }\n\n      return;\n    }\n\n    _invariant(\n      typeof spec !== 'function',\n      \"ReactClass: You're attempting to \" +\n        'use a component class or function as a mixin. Instead, just use a ' +\n        'regular object.'\n    );\n    _invariant(\n      !isValidElement(spec),\n      \"ReactClass: You're attempting to \" +\n        'use a component as a mixin. Instead, just use a regular object.'\n    );\n\n    var proto = Constructor.prototype;\n    var autoBindPairs = proto.__reactAutoBindPairs;\n\n    // By handling mixins before any other properties, we ensure the same\n    // chaining order is applied to methods with DEFINE_MANY policy, whether\n    // mixins are listed before or after these methods in the spec.\n    if (spec.hasOwnProperty(MIXINS_KEY)) {\n      RESERVED_SPEC_KEYS.mixins(Constructor, spec.mixins);\n    }\n\n    for (var name in spec) {\n      if (!spec.hasOwnProperty(name)) {\n        continue;\n      }\n\n      if (name === MIXINS_KEY) {\n        // We have already handled mixins in a special case above.\n        continue;\n      }\n\n      var property = spec[name];\n      var isAlreadyDefined = proto.hasOwnProperty(name);\n      validateMethodOverride(isAlreadyDefined, name);\n\n      if (RESERVED_SPEC_KEYS.hasOwnProperty(name)) {\n        RESERVED_SPEC_KEYS[name](Constructor, property);\n      } else {\n        // Setup methods on prototype:\n        // The following member methods should not be automatically bound:\n        // 1. Expected ReactClass methods (in the \"interface\").\n        // 2. Overridden methods (that were mixed in).\n        var isReactClassMethod = ReactClassInterface.hasOwnProperty(name);\n        var isFunction = typeof property === 'function';\n        var shouldAutoBind =\n          isFunction &&\n          !isReactClassMethod &&\n          !isAlreadyDefined &&\n          spec.autobind !== false;\n\n        if (shouldAutoBind) {\n          autoBindPairs.push(name, property);\n          proto[name] = property;\n        } else {\n          if (isAlreadyDefined) {\n            var specPolicy = ReactClassInterface[name];\n\n            // These cases should already be caught by validateMethodOverride.\n            _invariant(\n              isReactClassMethod &&\n                (specPolicy === 'DEFINE_MANY_MERGED' ||\n                  specPolicy === 'DEFINE_MANY'),\n              'ReactClass: Unexpected spec policy %s for key %s ' +\n                'when mixing in component specs.',\n              specPolicy,\n              name\n            );\n\n            // For methods which are defined more than once, call the existing\n            // methods before calling the new property, merging if appropriate.\n            if (specPolicy === 'DEFINE_MANY_MERGED') {\n              proto[name] = createMergedResultFunction(proto[name], property);\n            } else if (specPolicy === 'DEFINE_MANY') {\n              proto[name] = createChainedFunction(proto[name], property);\n            }\n          } else {\n            proto[name] = property;\n            if (true) {\n              // Add verbose displayName to the function, which helps when looking\n              // at profiling tools.\n              if (typeof property === 'function' && spec.displayName) {\n                proto[name].displayName = spec.displayName + '_' + name;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  function mixStaticSpecIntoComponent(Constructor, statics) {\n    if (!statics) {\n      return;\n    }\n\n    for (var name in statics) {\n      var property = statics[name];\n      if (!statics.hasOwnProperty(name)) {\n        continue;\n      }\n\n      var isReserved = name in RESERVED_SPEC_KEYS;\n      _invariant(\n        !isReserved,\n        'ReactClass: You are attempting to define a reserved ' +\n          'property, `%s`, that shouldn\\'t be on the \"statics\" key. Define it ' +\n          'as an instance property instead; it will still be accessible on the ' +\n          'constructor.',\n        name\n      );\n\n      var isAlreadyDefined = name in Constructor;\n      if (isAlreadyDefined) {\n        var specPolicy = ReactClassStaticInterface.hasOwnProperty(name)\n          ? ReactClassStaticInterface[name]\n          : null;\n\n        _invariant(\n          specPolicy === 'DEFINE_MANY_MERGED',\n          'ReactClass: You are attempting to define ' +\n            '`%s` on your component more than once. This conflict may be ' +\n            'due to a mixin.',\n          name\n        );\n\n        Constructor[name] = createMergedResultFunction(Constructor[name], property);\n\n        return;\n      }\n\n      Constructor[name] = property;\n    }\n  }\n\n  /**\n   * Merge two objects, but throw if both contain the same key.\n   *\n   * @param {object} one The first object, which is mutated.\n   * @param {object} two The second object\n   * @return {object} one after it has been mutated to contain everything in two.\n   */\n  function mergeIntoWithNoDuplicateKeys(one, two) {\n    _invariant(\n      one && two && typeof one === 'object' && typeof two === 'object',\n      'mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.'\n    );\n\n    for (var key in two) {\n      if (two.hasOwnProperty(key)) {\n        _invariant(\n          one[key] === undefined,\n          'mergeIntoWithNoDuplicateKeys(): ' +\n            'Tried to merge two objects with the same key: `%s`. This conflict ' +\n            'may be due to a mixin; in particular, this may be caused by two ' +\n            'getInitialState() or getDefaultProps() methods returning objects ' +\n            'with clashing keys.',\n          key\n        );\n        one[key] = two[key];\n      }\n    }\n    return one;\n  }\n\n  /**\n   * Creates a function that invokes two functions and merges their return values.\n   *\n   * @param {function} one Function to invoke first.\n   * @param {function} two Function to invoke second.\n   * @return {function} Function that invokes the two argument functions.\n   * @private\n   */\n  function createMergedResultFunction(one, two) {\n    return function mergedResult() {\n      var a = one.apply(this, arguments);\n      var b = two.apply(this, arguments);\n      if (a == null) {\n        return b;\n      } else if (b == null) {\n        return a;\n      }\n      var c = {};\n      mergeIntoWithNoDuplicateKeys(c, a);\n      mergeIntoWithNoDuplicateKeys(c, b);\n      return c;\n    };\n  }\n\n  /**\n   * Creates a function that invokes two functions and ignores their return vales.\n   *\n   * @param {function} one Function to invoke first.\n   * @param {function} two Function to invoke second.\n   * @return {function} Function that invokes the two argument functions.\n   * @private\n   */\n  function createChainedFunction(one, two) {\n    return function chainedFunction() {\n      one.apply(this, arguments);\n      two.apply(this, arguments);\n    };\n  }\n\n  /**\n   * Binds a method to the component.\n   *\n   * @param {object} component Component whose method is going to be bound.\n   * @param {function} method Method to be bound.\n   * @return {function} The bound method.\n   */\n  function bindAutoBindMethod(component, method) {\n    var boundMethod = method.bind(component);\n    if (true) {\n      boundMethod.__reactBoundContext = component;\n      boundMethod.__reactBoundMethod = method;\n      boundMethod.__reactBoundArguments = null;\n      var componentName = component.constructor.displayName;\n      var _bind = boundMethod.bind;\n      boundMethod.bind = function(newThis) {\n        for (\n          var _len = arguments.length,\n            args = Array(_len > 1 ? _len - 1 : 0),\n            _key = 1;\n          _key < _len;\n          _key++\n        ) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        // User is trying to bind() an autobound method; we effectively will\n        // ignore the value of \"this\" that the user is trying to use, so\n        // let's warn.\n        if (newThis !== component && newThis !== null) {\n          if (true) {\n            warning(\n              false,\n              'bind(): React component methods may only be bound to the ' +\n                'component instance. See %s',\n              componentName\n            );\n          }\n        } else if (!args.length) {\n          if (true) {\n            warning(\n              false,\n              'bind(): You are binding a component method to the component. ' +\n                'React does this for you automatically in a high-performance ' +\n                'way, so you can safely remove this call. See %s',\n              componentName\n            );\n          }\n          return boundMethod;\n        }\n        var reboundMethod = _bind.apply(boundMethod, arguments);\n        reboundMethod.__reactBoundContext = component;\n        reboundMethod.__reactBoundMethod = method;\n        reboundMethod.__reactBoundArguments = args;\n        return reboundMethod;\n      };\n    }\n    return boundMethod;\n  }\n\n  /**\n   * Binds all auto-bound methods in a component.\n   *\n   * @param {object} component Component whose method is going to be bound.\n   */\n  function bindAutoBindMethods(component) {\n    var pairs = component.__reactAutoBindPairs;\n    for (var i = 0; i < pairs.length; i += 2) {\n      var autoBindKey = pairs[i];\n      var method = pairs[i + 1];\n      component[autoBindKey] = bindAutoBindMethod(component, method);\n    }\n  }\n\n  var IsMountedPreMixin = {\n    componentDidMount: function() {\n      this.__isMounted = true;\n    }\n  };\n\n  var IsMountedPostMixin = {\n    componentWillUnmount: function() {\n      this.__isMounted = false;\n    }\n  };\n\n  /**\n   * Add more to the ReactClass base class. These are all legacy features and\n   * therefore not already part of the modern ReactComponent.\n   */\n  var ReactClassMixin = {\n    /**\n     * TODO: This will be deprecated because state should always keep a consistent\n     * type signature and the only use case for this, is to avoid that.\n     */\n    replaceState: function(newState, callback) {\n      this.updater.enqueueReplaceState(this, newState, callback);\n    },\n\n    /**\n     * Checks whether or not this composite component is mounted.\n     * @return {boolean} True if mounted, false otherwise.\n     * @protected\n     * @final\n     */\n    isMounted: function() {\n      if (true) {\n        warning(\n          this.__didWarnIsMounted,\n          '%s: isMounted is deprecated. Instead, make sure to clean up ' +\n            'subscriptions and pending requests in componentWillUnmount to ' +\n            'prevent memory leaks.',\n          (this.constructor && this.constructor.displayName) ||\n            this.name ||\n            'Component'\n        );\n        this.__didWarnIsMounted = true;\n      }\n      return !!this.__isMounted;\n    }\n  };\n\n  var ReactClassComponent = function() {};\n  _assign(\n    ReactClassComponent.prototype,\n    ReactComponent.prototype,\n    ReactClassMixin\n  );\n\n  /**\n   * Creates a composite component class given a class specification.\n   * See https://facebook.github.io/react/docs/top-level-api.html#react.createclass\n   *\n   * @param {object} spec Class specification (which must define `render`).\n   * @return {function} Component constructor function.\n   * @public\n   */\n  function createClass(spec) {\n    // To keep our warnings more understandable, we'll use a little hack here to\n    // ensure that Constructor.name !== 'Constructor'. This makes sure we don't\n    // unnecessarily identify a class without displayName as 'Constructor'.\n    var Constructor = identity(function(props, context, updater) {\n      // This constructor gets overridden by mocks. The argument is used\n      // by mocks to assert on what gets mounted.\n\n      if (true) {\n        warning(\n          this instanceof Constructor,\n          'Something is calling a React component directly. Use a factory or ' +\n            'JSX instead. See: https://fb.me/react-legacyfactory'\n        );\n      }\n\n      // Wire up auto-binding\n      if (this.__reactAutoBindPairs.length) {\n        bindAutoBindMethods(this);\n      }\n\n      this.props = props;\n      this.context = context;\n      this.refs = emptyObject;\n      this.updater = updater || ReactNoopUpdateQueue;\n\n      this.state = null;\n\n      // ReactClasses doesn't have constructors. Instead, they use the\n      // getInitialState and componentWillMount methods for initialization.\n\n      var initialState = this.getInitialState ? this.getInitialState() : null;\n      if (true) {\n        // We allow auto-mocks to proceed as if they're returning null.\n        if (\n          initialState === undefined &&\n          this.getInitialState._isMockFunction\n        ) {\n          // This is probably bad practice. Consider warning here and\n          // deprecating this convenience.\n          initialState = null;\n        }\n      }\n      _invariant(\n        typeof initialState === 'object' && !Array.isArray(initialState),\n        '%s.getInitialState(): must return an object or null',\n        Constructor.displayName || 'ReactCompositeComponent'\n      );\n\n      this.state = initialState;\n    });\n    Constructor.prototype = new ReactClassComponent();\n    Constructor.prototype.constructor = Constructor;\n    Constructor.prototype.__reactAutoBindPairs = [];\n\n    injectedMixins.forEach(mixSpecIntoComponent.bind(null, Constructor));\n\n    mixSpecIntoComponent(Constructor, IsMountedPreMixin);\n    mixSpecIntoComponent(Constructor, spec);\n    mixSpecIntoComponent(Constructor, IsMountedPostMixin);\n\n    // Initialize the defaultProps property after all mixins have been merged.\n    if (Constructor.getDefaultProps) {\n      Constructor.defaultProps = Constructor.getDefaultProps();\n    }\n\n    if (true) {\n      // This is a tag to indicate that the use of these method names is ok,\n      // since it's used with createClass. If it's not, then it's likely a\n      // mistake so we'll warn you to use the static property, property\n      // initializer or constructor respectively.\n      if (Constructor.getDefaultProps) {\n        Constructor.getDefaultProps.isReactClassApproved = {};\n      }\n      if (Constructor.prototype.getInitialState) {\n        Constructor.prototype.getInitialState.isReactClassApproved = {};\n      }\n    }\n\n    _invariant(\n      Constructor.prototype.render,\n      'createClass(...): Class specification must implement a `render` method.'\n    );\n\n    if (true) {\n      warning(\n        !Constructor.prototype.componentShouldUpdate,\n        '%s has a method called ' +\n          'componentShouldUpdate(). Did you mean shouldComponentUpdate()? ' +\n          'The name is phrased as a question because the function is ' +\n          'expected to return a value.',\n        spec.displayName || 'A component'\n      );\n      warning(\n        !Constructor.prototype.componentWillRecieveProps,\n        '%s has a method called ' +\n          'componentWillRecieveProps(). Did you mean componentWillReceiveProps()?',\n        spec.displayName || 'A component'\n      );\n      warning(\n        !Constructor.prototype.UNSAFE_componentWillRecieveProps,\n        '%s has a method called UNSAFE_componentWillRecieveProps(). ' +\n          'Did you mean UNSAFE_componentWillReceiveProps()?',\n        spec.displayName || 'A component'\n      );\n    }\n\n    // Reduce time spent doing lookups by setting these on the prototype.\n    for (var methodName in ReactClassInterface) {\n      if (!Constructor.prototype[methodName]) {\n        Constructor.prototype[methodName] = null;\n      }\n    }\n\n    return Constructor;\n  }\n\n  return createClass;\n}\n\nmodule.exports = factory;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9jcmVhdGUtcmVhY3QtY2xhc3MvZmFjdG9yeS5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFYTs7QUFFYixjQUFjLG1CQUFPLENBQUMsb0dBQWU7O0FBRXJDOztBQUVBOztBQUVBLElBQUksSUFBcUM7QUFDekM7QUFDQTs7QUFFQTs7QUFFQSxJQUFJLElBQXFDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRDtBQUN0RCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBOztBQUVBOztBQUVBLElBQUksSUFBcUM7QUFDekM7QUFDQSx1RkFBdUYsYUFBYTtBQUNwRztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkOztBQUVBO0FBQ0EsNkZBQTZGLGVBQWU7QUFDNUc7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSSxJQUFxQztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxLQUFLLEVBRU47O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNk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O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFFBQVEsSUFBcUM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9mYWN0b3J5LmpzP2MwN2UiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2Fzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxuLy8gLS0gSW5saW5lZCBmcm9tIGZianMgLS1cblxudmFyIGVtcHR5T2JqZWN0ID0ge307XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIE9iamVjdC5mcmVlemUoZW1wdHlPYmplY3QpO1xufVxuXG52YXIgdmFsaWRhdGVGb3JtYXQgPSBmdW5jdGlvbiB2YWxpZGF0ZUZvcm1hdChmb3JtYXQpIHt9O1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICB2YWxpZGF0ZUZvcm1hdCA9IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybWF0KGZvcm1hdCkge1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gX2ludmFyaWFudChjb25kaXRpb24sIGZvcm1hdCwgYSwgYiwgYywgZCwgZSwgZikge1xuICB2YWxpZGF0ZUZvcm1hdChmb3JtYXQpO1xuXG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdmFyIGVycm9yO1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoJ01pbmlmaWVkIGV4Y2VwdGlvbiBvY2N1cnJlZDsgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50ICcgKyAnZm9yIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2UgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107XG4gICAgICB9KSk7XG4gICAgICBlcnJvci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nO1xuICAgIH1cblxuICAgIGVycm9yLmZyYW1lc1RvUG9wID0gMTsgLy8gd2UgZG9uJ3QgY2FyZSBhYm91dCBpbnZhcmlhbnQncyBvd24gZnJhbWVcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG52YXIgd2FybmluZyA9IGZ1bmN0aW9uKCl7fTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdmFyIHByaW50V2FybmluZyA9IGZ1bmN0aW9uIHByaW50V2FybmluZyhmb3JtYXQpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgdmFyIG1lc3NhZ2UgPSAnV2FybmluZzogJyArIGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcbiAgICB9KTtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgLy8gLS0tIFdlbGNvbWUgdG8gZGVidWdnaW5nIFJlYWN0IC0tLVxuICAgICAgLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrXG4gICAgICAvLyB0byBmaW5kIHRoZSBjYWxsc2l0ZSB0aGF0IGNhdXNlZCB0aGlzIHdhcm5pbmcgdG8gZmlyZS5cbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9IGNhdGNoICh4KSB7fVxuICB9O1xuXG4gIHdhcm5pbmcgPSBmdW5jdGlvbiB3YXJuaW5nKGNvbmRpdGlvbiwgZm9ybWF0KSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2B3YXJuaW5nKGNvbmRpdGlvbiwgZm9ybWF0LCAuLi5hcmdzKWAgcmVxdWlyZXMgYSB3YXJuaW5nICcgKyAnbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cblxuICAgIGlmIChmb3JtYXQuaW5kZXhPZignRmFpbGVkIENvbXBvc2l0ZSBwcm9wVHlwZTogJykgPT09IDApIHtcbiAgICAgIHJldHVybjsgLy8gSWdub3JlIENvbXBvc2l0ZUNvbXBvbmVudCBwcm9wdHlwZSBjaGVjay5cbiAgICB9XG5cbiAgICBpZiAoIWNvbmRpdGlvbikge1xuICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIgPiAyID8gX2xlbjIgLSAyIDogMCksIF9rZXkyID0gMjsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICBhcmdzW19rZXkyIC0gMl0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgfVxuXG4gICAgICBwcmludFdhcm5pbmcuYXBwbHkodW5kZWZpbmVkLCBbZm9ybWF0XS5jb25jYXQoYXJncykpO1xuICAgIH1cbiAgfTtcbn1cblxuLy8gLy0tIElubGluZWQgZnJvbSBmYmpzIC0tXG5cbnZhciBNSVhJTlNfS0VZID0gJ21peGlucyc7XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBhbGxvdyB0aGUgY3JlYXRpb24gb2YgYW5vbnltb3VzIGZ1bmN0aW9ucyB3aGljaCBkbyBub3Rcbi8vIGhhdmUgLm5hbWUgc2V0IHRvIHRoZSBuYW1lIG9mIHRoZSB2YXJpYWJsZSBiZWluZyBhc3NpZ25lZCB0by5cbmZ1bmN0aW9uIGlkZW50aXR5KGZuKSB7XG4gIHJldHVybiBmbjtcbn1cblxudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzO1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSB7XG4gICAgcHJvcDogJ3Byb3AnLFxuICAgIGNvbnRleHQ6ICdjb250ZXh0JyxcbiAgICBjaGlsZENvbnRleHQ6ICdjaGlsZCBjb250ZXh0J1xuICB9O1xufSBlbHNlIHtcbiAgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSB7fTtcbn1cblxuZnVuY3Rpb24gZmFjdG9yeShSZWFjdENvbXBvbmVudCwgaXNWYWxpZEVsZW1lbnQsIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlKSB7XG4gIC8qKlxuICAgKiBQb2xpY2llcyB0aGF0IGRlc2NyaWJlIG1ldGhvZHMgaW4gYFJlYWN0Q2xhc3NJbnRlcmZhY2VgLlxuICAgKi9cblxuICB2YXIgaW5qZWN0ZWRNaXhpbnMgPSBbXTtcblxuICAvKipcbiAgICogQ29tcG9zaXRlIGNvbXBvbmVudHMgYXJlIGhpZ2hlci1sZXZlbCBjb21wb25lbnRzIHRoYXQgY29tcG9zZSBvdGhlciBjb21wb3NpdGVcbiAgICogb3IgaG9zdCBjb21wb25lbnRzLlxuICAgKlxuICAgKiBUbyBjcmVhdGUgYSBuZXcgdHlwZSBvZiBgUmVhY3RDbGFzc2AsIHBhc3MgYSBzcGVjaWZpY2F0aW9uIG9mXG4gICAqIHlvdXIgbmV3IGNsYXNzIHRvIGBSZWFjdC5jcmVhdGVDbGFzc2AuIFRoZSBvbmx5IHJlcXVpcmVtZW50IG9mIHlvdXIgY2xhc3NcbiAgICogc3BlY2lmaWNhdGlvbiBpcyB0aGF0IHlvdSBpbXBsZW1lbnQgYSBgcmVuZGVyYCBtZXRob2QuXG4gICAqXG4gICAqICAgdmFyIE15Q29tcG9uZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgKiAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICogICAgICAgcmV0dXJuIDxkaXY+SGVsbG8gV29ybGQ8L2Rpdj47XG4gICAqICAgICB9XG4gICAqICAgfSk7XG4gICAqXG4gICAqIFRoZSBjbGFzcyBzcGVjaWZpY2F0aW9uIHN1cHBvcnRzIGEgc3BlY2lmaWMgcHJvdG9jb2wgb2YgbWV0aG9kcyB0aGF0IGhhdmVcbiAgICogc3BlY2lhbCBtZWFuaW5nIChlLmcuIGByZW5kZXJgKS4gU2VlIGBSZWFjdENsYXNzSW50ZXJmYWNlYCBmb3JcbiAgICogbW9yZSB0aGUgY29tcHJlaGVuc2l2ZSBwcm90b2NvbC4gQW55IG90aGVyIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMgaW4gdGhlXG4gICAqIGNsYXNzIHNwZWNpZmljYXRpb24gd2lsbCBiZSBhdmFpbGFibGUgb24gdGhlIHByb3RvdHlwZS5cbiAgICpcbiAgICogQGludGVyZmFjZSBSZWFjdENsYXNzSW50ZXJmYWNlXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdmFyIFJlYWN0Q2xhc3NJbnRlcmZhY2UgPSB7XG4gICAgLyoqXG4gICAgICogQW4gYXJyYXkgb2YgTWl4aW4gb2JqZWN0cyB0byBpbmNsdWRlIHdoZW4gZGVmaW5pbmcgeW91ciBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7YXJyYXl9XG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgbWl4aW5zOiAnREVGSU5FX01BTlknLFxuXG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IGNvbnRhaW5pbmcgcHJvcGVydGllcyBhbmQgbWV0aG9kcyB0aGF0IHNob3VsZCBiZSBkZWZpbmVkIG9uXG4gICAgICogdGhlIGNvbXBvbmVudCdzIGNvbnN0cnVjdG9yIGluc3RlYWQgb2YgaXRzIHByb3RvdHlwZSAoc3RhdGljIG1ldGhvZHMpLlxuICAgICAqXG4gICAgICogQHR5cGUge29iamVjdH1cbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBzdGF0aWNzOiAnREVGSU5FX01BTlknLFxuXG4gICAgLyoqXG4gICAgICogRGVmaW5pdGlvbiBvZiBwcm9wIHR5cGVzIGZvciB0aGlzIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtvYmplY3R9XG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgcHJvcFR5cGVzOiAnREVGSU5FX01BTlknLFxuXG4gICAgLyoqXG4gICAgICogRGVmaW5pdGlvbiBvZiBjb250ZXh0IHR5cGVzIGZvciB0aGlzIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtvYmplY3R9XG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgY29udGV4dFR5cGVzOiAnREVGSU5FX01BTlknLFxuXG4gICAgLyoqXG4gICAgICogRGVmaW5pdGlvbiBvZiBjb250ZXh0IHR5cGVzIHRoaXMgY29tcG9uZW50IHNldHMgZm9yIGl0cyBjaGlsZHJlbi5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtvYmplY3R9XG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgY2hpbGRDb250ZXh0VHlwZXM6ICdERUZJTkVfTUFOWScsXG5cbiAgICAvLyA9PT09IERlZmluaXRpb24gbWV0aG9kcyA9PT09XG5cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkLiBWYWx1ZXMgaW4gdGhlIG1hcHBpbmcgd2lsbCBiZSBzZXQgb25cbiAgICAgKiBgdGhpcy5wcm9wc2AgaWYgdGhhdCBwcm9wIGlzIG5vdCBzcGVjaWZpZWQgKGkuZS4gdXNpbmcgYW4gYGluYCBjaGVjaykuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnZva2VkIGJlZm9yZSBgZ2V0SW5pdGlhbFN0YXRlYCBhbmQgdGhlcmVmb3JlIGNhbm5vdCByZWx5XG4gICAgICogb24gYHRoaXMuc3RhdGVgIG9yIHVzZSBgdGhpcy5zZXRTdGF0ZWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgZ2V0RGVmYXVsdFByb3BzOiAnREVGSU5FX01BTllfTUVSR0VEJyxcblxuICAgIC8qKlxuICAgICAqIEludm9rZWQgb25jZSBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkLiBUaGUgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZFxuICAgICAqIGFzIHRoZSBpbml0aWFsIHZhbHVlIG9mIGB0aGlzLnN0YXRlYC5cbiAgICAgKlxuICAgICAqICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgcmV0dXJuIHtcbiAgICAgKiAgICAgICBpc09uOiBmYWxzZSxcbiAgICAgKiAgICAgICBmb29CYXo6IG5ldyBCYXpGb28oKVxuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiAnREVGSU5FX01BTllfTUVSR0VEJyxcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge29iamVjdH1cbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBnZXRDaGlsZENvbnRleHQ6ICdERUZJTkVfTUFOWV9NRVJHRUQnLFxuXG4gICAgLyoqXG4gICAgICogVXNlcyBwcm9wcyBmcm9tIGB0aGlzLnByb3BzYCBhbmQgc3RhdGUgZnJvbSBgdGhpcy5zdGF0ZWAgdG8gcmVuZGVyIHRoZVxuICAgICAqIHN0cnVjdHVyZSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogTm8gZ3VhcmFudGVlcyBhcmUgbWFkZSBhYm91dCB3aGVuIG9yIGhvdyBvZnRlbiB0aGlzIG1ldGhvZCBpcyBpbnZva2VkLCBzb1xuICAgICAqIGl0IG11c3Qgbm90IGhhdmUgc2lkZSBlZmZlY3RzLlxuICAgICAqXG4gICAgICogICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAqICAgICB2YXIgbmFtZSA9IHRoaXMucHJvcHMubmFtZTtcbiAgICAgKiAgICAgcmV0dXJuIDxkaXY+SGVsbG8sIHtuYW1lfSE8L2Rpdj47XG4gICAgICogICB9XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH1cbiAgICAgKiBAcmVxdWlyZWRcbiAgICAgKi9cbiAgICByZW5kZXI6ICdERUZJTkVfT05DRScsXG5cbiAgICAvLyA9PT09IERlbGVnYXRlIG1ldGhvZHMgPT09PVxuXG4gICAgLyoqXG4gICAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgaW5pdGlhbGx5IGNyZWF0ZWQgYW5kIGFib3V0IHRvIGJlIG1vdW50ZWQuXG4gICAgICogVGhpcyBtYXkgaGF2ZSBzaWRlIGVmZmVjdHMsIGJ1dCBhbnkgZXh0ZXJuYWwgc3Vic2NyaXB0aW9ucyBvciBkYXRhIGNyZWF0ZWRcbiAgICAgKiBieSB0aGlzIG1ldGhvZCBtdXN0IGJlIGNsZWFuZWQgdXAgaW4gYGNvbXBvbmVudFdpbGxVbm1vdW50YC5cbiAgICAgKlxuICAgICAqIEBvcHRpb25hbFxuICAgICAqL1xuICAgIGNvbXBvbmVudFdpbGxNb3VudDogJ0RFRklORV9NQU5ZJyxcblxuICAgIC8qKlxuICAgICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGhhcyBiZWVuIG1vdW50ZWQgYW5kIGhhcyBhIERPTSByZXByZXNlbnRhdGlvbi5cbiAgICAgKiBIb3dldmVyLCB0aGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCB0aGUgRE9NIG5vZGUgaXMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gb3BlcmF0ZSBvbiB0aGUgRE9NIHdoZW4gdGhlIGNvbXBvbmVudCBoYXNcbiAgICAgKiBiZWVuIG1vdW50ZWQgKGluaXRpYWxpemVkIGFuZCByZW5kZXJlZCkgZm9yIHRoZSBmaXJzdCB0aW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtET01FbGVtZW50fSByb290Tm9kZSBET00gZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIGNvbXBvbmVudC5cbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBjb21wb25lbnREaWRNb3VudDogJ0RFRklORV9NQU5ZJyxcblxuICAgIC8qKlxuICAgICAqIEludm9rZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgcmVjZWl2ZXMgbmV3IHByb3BzLlxuICAgICAqXG4gICAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gcmVhY3QgdG8gYSBwcm9wIHRyYW5zaXRpb24gYnkgdXBkYXRpbmcgdGhlXG4gICAgICogc3RhdGUgdXNpbmcgYHRoaXMuc2V0U3RhdGVgLiBDdXJyZW50IHByb3BzIGFyZSBhY2Nlc3NlZCB2aWEgYHRoaXMucHJvcHNgLlxuICAgICAqXG4gICAgICogICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihuZXh0UHJvcHMsIG5leHRDb250ZXh0KSB7XG4gICAgICogICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAqICAgICAgIGxpa2VzSW5jcmVhc2luZzogbmV4dFByb3BzLmxpa2VDb3VudCA+IHRoaXMucHJvcHMubGlrZUNvdW50XG4gICAgICogICAgIH0pO1xuICAgICAqICAgfVxuICAgICAqXG4gICAgICogTk9URTogVGhlcmUgaXMgbm8gZXF1aXZhbGVudCBgY29tcG9uZW50V2lsbFJlY2VpdmVTdGF0ZWAuIEFuIGluY29taW5nIHByb3BcbiAgICAgKiB0cmFuc2l0aW9uIG1heSBjYXVzZSBhIHN0YXRlIGNoYW5nZSwgYnV0IHRoZSBvcHBvc2l0ZSBpcyBub3QgdHJ1ZS4gSWYgeW91XG4gICAgICogbmVlZCBpdCwgeW91IGFyZSBwcm9iYWJseSBsb29raW5nIGZvciBgY29tcG9uZW50V2lsbFVwZGF0ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogJ0RFRklORV9NQU5ZJyxcblxuICAgIC8qKlxuICAgICAqIEludm9rZWQgd2hpbGUgZGVjaWRpbmcgaWYgdGhlIGNvbXBvbmVudCBzaG91bGQgYmUgdXBkYXRlZCBhcyBhIHJlc3VsdCBvZlxuICAgICAqIHJlY2VpdmluZyBuZXcgcHJvcHMsIHN0YXRlIGFuZC9vciBjb250ZXh0LlxuICAgICAqXG4gICAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gYHJldHVybiBmYWxzZWAgd2hlbiB5b3UncmUgY2VydGFpbiB0aGF0IHRoZVxuICAgICAqIHRyYW5zaXRpb24gdG8gdGhlIG5ldyBwcm9wcy9zdGF0ZS9jb250ZXh0IHdpbGwgbm90IHJlcXVpcmUgYSBjb21wb25lbnRcbiAgICAgKiB1cGRhdGUuXG4gICAgICpcbiAgICAgKiAgIHNob3VsZENvbXBvbmVudFVwZGF0ZTogZnVuY3Rpb24obmV4dFByb3BzLCBuZXh0U3RhdGUsIG5leHRDb250ZXh0KSB7XG4gICAgICogICAgIHJldHVybiAhZXF1YWwobmV4dFByb3BzLCB0aGlzLnByb3BzKSB8fFxuICAgICAqICAgICAgICFlcXVhbChuZXh0U3RhdGUsIHRoaXMuc3RhdGUpIHx8XG4gICAgICogICAgICAgIWVxdWFsKG5leHRDb250ZXh0LCB0aGlzLmNvbnRleHQpO1xuICAgICAqICAgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IG5leHRQcm9wc1xuICAgICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dFN0YXRlXG4gICAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0Q29udGV4dFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGNvbXBvbmVudCBzaG91bGQgdXBkYXRlLlxuICAgICAqIEBvcHRpb25hbFxuICAgICAqL1xuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZTogJ0RFRklORV9PTkNFJyxcblxuICAgIC8qKlxuICAgICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGFib3V0IHRvIHVwZGF0ZSBkdWUgdG8gYSB0cmFuc2l0aW9uIGZyb21cbiAgICAgKiBgdGhpcy5wcm9wc2AsIGB0aGlzLnN0YXRlYCBhbmQgYHRoaXMuY29udGV4dGAgdG8gYG5leHRQcm9wc2AsIGBuZXh0U3RhdGVgXG4gICAgICogYW5kIGBuZXh0Q29udGV4dGAuXG4gICAgICpcbiAgICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBwZXJmb3JtIHByZXBhcmF0aW9uIGJlZm9yZSBhbiB1cGRhdGUgb2NjdXJzLlxuICAgICAqXG4gICAgICogTk9URTogWW91ICoqY2Fubm90KiogdXNlIGB0aGlzLnNldFN0YXRlKClgIGluIHRoaXMgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IG5leHRQcm9wc1xuICAgICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dFN0YXRlXG4gICAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0Q29udGV4dFxuICAgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKi9cbiAgICBjb21wb25lbnRXaWxsVXBkYXRlOiAnREVGSU5FX01BTlknLFxuXG4gICAgLyoqXG4gICAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQncyBET00gcmVwcmVzZW50YXRpb24gaGFzIGJlZW4gdXBkYXRlZC5cbiAgICAgKlxuICAgICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIG9wZXJhdGUgb24gdGhlIERPTSB3aGVuIHRoZSBjb21wb25lbnQgaGFzXG4gICAgICogYmVlbiB1cGRhdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHByZXZQcm9wc1xuICAgICAqIEBwYXJhbSB7P29iamVjdH0gcHJldlN0YXRlXG4gICAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2Q29udGV4dFxuICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcm9vdE5vZGUgRE9NIGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSBjb21wb25lbnQuXG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgY29tcG9uZW50RGlkVXBkYXRlOiAnREVGSU5FX01BTlknLFxuXG4gICAgLyoqXG4gICAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZCBmcm9tIGl0cyBwYXJlbnQgYW5kIGhhdmVcbiAgICAgKiBpdHMgRE9NIHJlcHJlc2VudGF0aW9uIGRlc3Ryb3llZC5cbiAgICAgKlxuICAgICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIGRlYWxsb2NhdGUgYW55IGV4dGVybmFsIHJlc291cmNlcy5cbiAgICAgKlxuICAgICAqIE5PVEU6IFRoZXJlIGlzIG5vIGBjb21wb25lbnREaWRVbm1vdW50YCBzaW5jZSB5b3VyIGNvbXBvbmVudCB3aWxsIGhhdmUgYmVlblxuICAgICAqIGRlc3Ryb3llZCBieSB0aGF0IHBvaW50LlxuICAgICAqXG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQ6ICdERUZJTkVfTUFOWScsXG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlbWVudCBmb3IgKGRlcHJlY2F0ZWQpIGBjb21wb25lbnRXaWxsTW91bnRgLlxuICAgICAqXG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudDogJ0RFRklORV9NQU5ZJyxcblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2VtZW50IGZvciAoZGVwcmVjYXRlZCkgYGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNgLlxuICAgICAqXG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6ICdERUZJTkVfTUFOWScsXG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlbWVudCBmb3IgKGRlcHJlY2F0ZWQpIGBjb21wb25lbnRXaWxsVXBkYXRlYC5cbiAgICAgKlxuICAgICAqIEBvcHRpb25hbFxuICAgICAqL1xuICAgIFVOU0FGRV9jb21wb25lbnRXaWxsVXBkYXRlOiAnREVGSU5FX01BTlknLFxuXG4gICAgLy8gPT09PSBBZHZhbmNlZCBtZXRob2RzID09PT1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGNvbXBvbmVudCdzIGN1cnJlbnRseSBtb3VudGVkIERPTSByZXByZXNlbnRhdGlvbi5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIHRoaXMgaW1wbGVtZW50cyBSZWFjdCdzIHJlbmRlcmluZyBhbmQgcmVjb25jaWxpYXRpb24gYWxnb3JpdGhtLlxuICAgICAqIFNvcGhpc3RpY2F0ZWQgY2xpZW50cyBtYXkgd2lzaCB0byBvdmVycmlkZSB0aGlzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBvdmVycmlkYWJsZVxuICAgICAqL1xuICAgIHVwZGF0ZUNvbXBvbmVudDogJ09WRVJSSURFX0JBU0UnXG4gIH07XG5cbiAgLyoqXG4gICAqIFNpbWlsYXIgdG8gUmVhY3RDbGFzc0ludGVyZmFjZSBidXQgZm9yIHN0YXRpYyBtZXRob2RzLlxuICAgKi9cbiAgdmFyIFJlYWN0Q2xhc3NTdGF0aWNJbnRlcmZhY2UgPSB7XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgaW52b2tlZCBhZnRlciBhIGNvbXBvbmVudCBpcyBpbnN0YW50aWF0ZWQgYW5kIHdoZW4gaXRcbiAgICAgKiByZWNlaXZlcyBuZXcgcHJvcHMuIFJldHVybiBhbiBvYmplY3QgdG8gdXBkYXRlIHN0YXRlIGluIHJlc3BvbnNlIHRvXG4gICAgICogcHJvcCBjaGFuZ2VzLiBSZXR1cm4gbnVsbCB0byBpbmRpY2F0ZSBubyBjaGFuZ2UgdG8gc3RhdGUuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcmV0dXJuZWQsIGl0cyBrZXlzIHdpbGwgYmUgbWVyZ2VkIGludG8gdGhlIGV4aXN0aW5nIHN0YXRlLlxuICAgICAqXG4gICAgICogQHJldHVybiB7b2JqZWN0IHx8IG51bGx9XG4gICAgICogQG9wdGlvbmFsXG4gICAgICovXG4gICAgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzOiAnREVGSU5FX01BTllfTUVSR0VEJ1xuICB9O1xuXG4gIC8qKlxuICAgKiBNYXBwaW5nIGZyb20gY2xhc3Mgc3BlY2lmaWNhdGlvbiBrZXlzIHRvIHNwZWNpYWwgcHJvY2Vzc2luZyBmdW5jdGlvbnMuXG4gICAqXG4gICAqIEFsdGhvdWdoIHRoZXNlIGFyZSBkZWNsYXJlZCBsaWtlIGluc3RhbmNlIHByb3BlcnRpZXMgaW4gdGhlIHNwZWNpZmljYXRpb25cbiAgICogd2hlbiBkZWZpbmluZyBjbGFzc2VzIHVzaW5nIGBSZWFjdC5jcmVhdGVDbGFzc2AsIHRoZXkgYXJlIGFjdHVhbGx5IHN0YXRpY1xuICAgKiBhbmQgYXJlIGFjY2Vzc2libGUgb24gdGhlIGNvbnN0cnVjdG9yIGluc3RlYWQgb2YgdGhlIHByb3RvdHlwZS4gRGVzcGl0ZVxuICAgKiBiZWluZyBzdGF0aWMsIHRoZXkgbXVzdCBiZSBkZWZpbmVkIG91dHNpZGUgb2YgdGhlIFwic3RhdGljc1wiIGtleSB1bmRlclxuICAgKiB3aGljaCBhbGwgb3RoZXIgc3RhdGljIG1ldGhvZHMgYXJlIGRlZmluZWQuXG4gICAqL1xuICB2YXIgUkVTRVJWRURfU1BFQ19LRVlTID0ge1xuICAgIGRpc3BsYXlOYW1lOiBmdW5jdGlvbihDb25zdHJ1Y3RvciwgZGlzcGxheU5hbWUpIHtcbiAgICAgIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7XG4gICAgfSxcbiAgICBtaXhpbnM6IGZ1bmN0aW9uKENvbnN0cnVjdG9yLCBtaXhpbnMpIHtcbiAgICAgIGlmIChtaXhpbnMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtaXhpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3RvciwgbWl4aW5zW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgY2hpbGRDb250ZXh0VHlwZXM6IGZ1bmN0aW9uKENvbnN0cnVjdG9yLCBjaGlsZENvbnRleHRUeXBlcykge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgdmFsaWRhdGVUeXBlRGVmKENvbnN0cnVjdG9yLCBjaGlsZENvbnRleHRUeXBlcywgJ2NoaWxkQ29udGV4dCcpO1xuICAgICAgfVxuICAgICAgQ29uc3RydWN0b3IuY2hpbGRDb250ZXh0VHlwZXMgPSBfYXNzaWduKFxuICAgICAgICB7fSxcbiAgICAgICAgQ29uc3RydWN0b3IuY2hpbGRDb250ZXh0VHlwZXMsXG4gICAgICAgIGNoaWxkQ29udGV4dFR5cGVzXG4gICAgICApO1xuICAgIH0sXG4gICAgY29udGV4dFR5cGVzOiBmdW5jdGlvbihDb25zdHJ1Y3RvciwgY29udGV4dFR5cGVzKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YWxpZGF0ZVR5cGVEZWYoQ29uc3RydWN0b3IsIGNvbnRleHRUeXBlcywgJ2NvbnRleHQnKTtcbiAgICAgIH1cbiAgICAgIENvbnN0cnVjdG9yLmNvbnRleHRUeXBlcyA9IF9hc3NpZ24oXG4gICAgICAgIHt9LFxuICAgICAgICBDb25zdHJ1Y3Rvci5jb250ZXh0VHlwZXMsXG4gICAgICAgIGNvbnRleHRUeXBlc1xuICAgICAgKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFNwZWNpYWwgY2FzZSBnZXREZWZhdWx0UHJvcHMgd2hpY2ggc2hvdWxkIG1vdmUgaW50byBzdGF0aWNzIGJ1dCByZXF1aXJlc1xuICAgICAqIGF1dG9tYXRpYyBtZXJnaW5nLlxuICAgICAqL1xuICAgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24oQ29uc3RydWN0b3IsIGdldERlZmF1bHRQcm9wcykge1xuICAgICAgaWYgKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcykge1xuICAgICAgICBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMgPSBjcmVhdGVNZXJnZWRSZXN1bHRGdW5jdGlvbihcbiAgICAgICAgICBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMsXG4gICAgICAgICAgZ2V0RGVmYXVsdFByb3BzXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMgPSBnZXREZWZhdWx0UHJvcHM7XG4gICAgICB9XG4gICAgfSxcbiAgICBwcm9wVHlwZXM6IGZ1bmN0aW9uKENvbnN0cnVjdG9yLCBwcm9wVHlwZXMpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgcHJvcFR5cGVzLCAncHJvcCcpO1xuICAgICAgfVxuICAgICAgQ29uc3RydWN0b3IucHJvcFR5cGVzID0gX2Fzc2lnbih7fSwgQ29uc3RydWN0b3IucHJvcFR5cGVzLCBwcm9wVHlwZXMpO1xuICAgIH0sXG4gICAgc3RhdGljczogZnVuY3Rpb24oQ29uc3RydWN0b3IsIHN0YXRpY3MpIHtcbiAgICAgIG1peFN0YXRpY1NwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzdGF0aWNzKTtcbiAgICB9LFxuICAgIGF1dG9iaW5kOiBmdW5jdGlvbigpIHt9XG4gIH07XG5cbiAgZnVuY3Rpb24gdmFsaWRhdGVUeXBlRGVmKENvbnN0cnVjdG9yLCB0eXBlRGVmLCBsb2NhdGlvbikge1xuICAgIGZvciAodmFyIHByb3BOYW1lIGluIHR5cGVEZWYpIHtcbiAgICAgIGlmICh0eXBlRGVmLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICAvLyB1c2UgYSB3YXJuaW5nIGluc3RlYWQgb2YgYW4gX2ludmFyaWFudCBzbyBjb21wb25lbnRzXG4gICAgICAgIC8vIGRvbid0IHNob3cgdXAgaW4gcHJvZCBidXQgb25seSBpbiBfX0RFVl9fXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgd2FybmluZyhcbiAgICAgICAgICAgIHR5cGVvZiB0eXBlRGVmW3Byb3BOYW1lXSA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgICclczogJXMgdHlwZSBgJXNgIGlzIGludmFsaWQ7IGl0IG11c3QgYmUgYSBmdW5jdGlvbiwgdXN1YWxseSBmcm9tICcgK1xuICAgICAgICAgICAgICAnUmVhY3QuUHJvcFR5cGVzLicsXG4gICAgICAgICAgICBDb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCAnUmVhY3RDbGFzcycsXG4gICAgICAgICAgICBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl0sXG4gICAgICAgICAgICBwcm9wTmFtZVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB2YWxpZGF0ZU1ldGhvZE92ZXJyaWRlKGlzQWxyZWFkeURlZmluZWQsIG5hbWUpIHtcbiAgICB2YXIgc3BlY1BvbGljeSA9IFJlYWN0Q2xhc3NJbnRlcmZhY2UuaGFzT3duUHJvcGVydHkobmFtZSlcbiAgICAgID8gUmVhY3RDbGFzc0ludGVyZmFjZVtuYW1lXVxuICAgICAgOiBudWxsO1xuXG4gICAgLy8gRGlzYWxsb3cgb3ZlcnJpZGluZyBvZiBiYXNlIGNsYXNzIG1ldGhvZHMgdW5sZXNzIGV4cGxpY2l0bHkgYWxsb3dlZC5cbiAgICBpZiAoUmVhY3RDbGFzc01peGluLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICBfaW52YXJpYW50KFxuICAgICAgICBzcGVjUG9saWN5ID09PSAnT1ZFUlJJREVfQkFTRScsXG4gICAgICAgICdSZWFjdENsYXNzSW50ZXJmYWNlOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gb3ZlcnJpZGUgJyArXG4gICAgICAgICAgJ2Alc2AgZnJvbSB5b3VyIGNsYXNzIHNwZWNpZmljYXRpb24uIEVuc3VyZSB0aGF0IHlvdXIgbWV0aG9kIG5hbWVzICcgK1xuICAgICAgICAgICdkbyBub3Qgb3ZlcmxhcCB3aXRoIFJlYWN0IG1ldGhvZHMuJyxcbiAgICAgICAgbmFtZVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBEaXNhbGxvdyBkZWZpbmluZyBtZXRob2RzIG1vcmUgdGhhbiBvbmNlIHVubGVzcyBleHBsaWNpdGx5IGFsbG93ZWQuXG4gICAgaWYgKGlzQWxyZWFkeURlZmluZWQpIHtcbiAgICAgIF9pbnZhcmlhbnQoXG4gICAgICAgIHNwZWNQb2xpY3kgPT09ICdERUZJTkVfTUFOWScgfHwgc3BlY1BvbGljeSA9PT0gJ0RFRklORV9NQU5ZX01FUkdFRCcsXG4gICAgICAgICdSZWFjdENsYXNzSW50ZXJmYWNlOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gZGVmaW5lICcgK1xuICAgICAgICAgICdgJXNgIG9uIHlvdXIgY29tcG9uZW50IG1vcmUgdGhhbiBvbmNlLiBUaGlzIGNvbmZsaWN0IG1heSBiZSBkdWUgJyArXG4gICAgICAgICAgJ3RvIGEgbWl4aW4uJyxcbiAgICAgICAgbmFtZVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWl4aW4gaGVscGVyIHdoaWNoIGhhbmRsZXMgcG9saWN5IHZhbGlkYXRpb24gYW5kIHJlc2VydmVkXG4gICAqIHNwZWNpZmljYXRpb24ga2V5cyB3aGVuIGJ1aWxkaW5nIFJlYWN0IGNsYXNzZXMuXG4gICAqL1xuICBmdW5jdGlvbiBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3BlYykge1xuICAgIGlmICghc3BlYykge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgdmFyIHR5cGVvZlNwZWMgPSB0eXBlb2Ygc3BlYztcbiAgICAgICAgdmFyIGlzTWl4aW5WYWxpZCA9IHR5cGVvZlNwZWMgPT09ICdvYmplY3QnICYmIHNwZWMgIT09IG51bGw7XG5cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICB3YXJuaW5nKFxuICAgICAgICAgICAgaXNNaXhpblZhbGlkLFxuICAgICAgICAgICAgXCIlczogWW91J3JlIGF0dGVtcHRpbmcgdG8gaW5jbHVkZSBhIG1peGluIHRoYXQgaXMgZWl0aGVyIG51bGwgXCIgK1xuICAgICAgICAgICAgICAnb3Igbm90IGFuIG9iamVjdC4gQ2hlY2sgdGhlIG1peGlucyBpbmNsdWRlZCBieSB0aGUgY29tcG9uZW50LCAnICtcbiAgICAgICAgICAgICAgJ2FzIHdlbGwgYXMgYW55IG1peGlucyB0aGV5IGluY2x1ZGUgdGhlbXNlbHZlcy4gJyArXG4gICAgICAgICAgICAgICdFeHBlY3RlZCBvYmplY3QgYnV0IGdvdCAlcy4nLFxuICAgICAgICAgICAgQ29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgJ1JlYWN0Q2xhc3MnLFxuICAgICAgICAgICAgc3BlYyA9PT0gbnVsbCA/IG51bGwgOiB0eXBlb2ZTcGVjXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgX2ludmFyaWFudChcbiAgICAgIHR5cGVvZiBzcGVjICE9PSAnZnVuY3Rpb24nLFxuICAgICAgXCJSZWFjdENsYXNzOiBZb3UncmUgYXR0ZW1wdGluZyB0byBcIiArXG4gICAgICAgICd1c2UgYSBjb21wb25lbnQgY2xhc3Mgb3IgZnVuY3Rpb24gYXMgYSBtaXhpbi4gSW5zdGVhZCwganVzdCB1c2UgYSAnICtcbiAgICAgICAgJ3JlZ3VsYXIgb2JqZWN0LidcbiAgICApO1xuICAgIF9pbnZhcmlhbnQoXG4gICAgICAhaXNWYWxpZEVsZW1lbnQoc3BlYyksXG4gICAgICBcIlJlYWN0Q2xhc3M6IFlvdSdyZSBhdHRlbXB0aW5nIHRvIFwiICtcbiAgICAgICAgJ3VzZSBhIGNvbXBvbmVudCBhcyBhIG1peGluLiBJbnN0ZWFkLCBqdXN0IHVzZSBhIHJlZ3VsYXIgb2JqZWN0LidcbiAgICApO1xuXG4gICAgdmFyIHByb3RvID0gQ29uc3RydWN0b3IucHJvdG90eXBlO1xuICAgIHZhciBhdXRvQmluZFBhaXJzID0gcHJvdG8uX19yZWFjdEF1dG9CaW5kUGFpcnM7XG5cbiAgICAvLyBCeSBoYW5kbGluZyBtaXhpbnMgYmVmb3JlIGFueSBvdGhlciBwcm9wZXJ0aWVzLCB3ZSBlbnN1cmUgdGhlIHNhbWVcbiAgICAvLyBjaGFpbmluZyBvcmRlciBpcyBhcHBsaWVkIHRvIG1ldGhvZHMgd2l0aCBERUZJTkVfTUFOWSBwb2xpY3ksIHdoZXRoZXJcbiAgICAvLyBtaXhpbnMgYXJlIGxpc3RlZCBiZWZvcmUgb3IgYWZ0ZXIgdGhlc2UgbWV0aG9kcyBpbiB0aGUgc3BlYy5cbiAgICBpZiAoc3BlYy5oYXNPd25Qcm9wZXJ0eShNSVhJTlNfS0VZKSkge1xuICAgICAgUkVTRVJWRURfU1BFQ19LRVlTLm1peGlucyhDb25zdHJ1Y3Rvciwgc3BlYy5taXhpbnMpO1xuICAgIH1cblxuICAgIGZvciAodmFyIG5hbWUgaW4gc3BlYykge1xuICAgICAgaWYgKCFzcGVjLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAobmFtZSA9PT0gTUlYSU5TX0tFWSkge1xuICAgICAgICAvLyBXZSBoYXZlIGFscmVhZHkgaGFuZGxlZCBtaXhpbnMgaW4gYSBzcGVjaWFsIGNhc2UgYWJvdmUuXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJvcGVydHkgPSBzcGVjW25hbWVdO1xuICAgICAgdmFyIGlzQWxyZWFkeURlZmluZWQgPSBwcm90by5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcbiAgICAgIHZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUoaXNBbHJlYWR5RGVmaW5lZCwgbmFtZSk7XG5cbiAgICAgIGlmIChSRVNFUlZFRF9TUEVDX0tFWVMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgUkVTRVJWRURfU1BFQ19LRVlTW25hbWVdKENvbnN0cnVjdG9yLCBwcm9wZXJ0eSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTZXR1cCBtZXRob2RzIG9uIHByb3RvdHlwZTpcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBtZW1iZXIgbWV0aG9kcyBzaG91bGQgbm90IGJlIGF1dG9tYXRpY2FsbHkgYm91bmQ6XG4gICAgICAgIC8vIDEuIEV4cGVjdGVkIFJlYWN0Q2xhc3MgbWV0aG9kcyAoaW4gdGhlIFwiaW50ZXJmYWNlXCIpLlxuICAgICAgICAvLyAyLiBPdmVycmlkZGVuIG1ldGhvZHMgKHRoYXQgd2VyZSBtaXhlZCBpbikuXG4gICAgICAgIHZhciBpc1JlYWN0Q2xhc3NNZXRob2QgPSBSZWFjdENsYXNzSW50ZXJmYWNlLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgICAgICB2YXIgaXNGdW5jdGlvbiA9IHR5cGVvZiBwcm9wZXJ0eSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAgICAgdmFyIHNob3VsZEF1dG9CaW5kID1cbiAgICAgICAgICBpc0Z1bmN0aW9uICYmXG4gICAgICAgICAgIWlzUmVhY3RDbGFzc01ldGhvZCAmJlxuICAgICAgICAgICFpc0FscmVhZHlEZWZpbmVkICYmXG4gICAgICAgICAgc3BlYy5hdXRvYmluZCAhPT0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHNob3VsZEF1dG9CaW5kKSB7XG4gICAgICAgICAgYXV0b0JpbmRQYWlycy5wdXNoKG5hbWUsIHByb3BlcnR5KTtcbiAgICAgICAgICBwcm90b1tuYW1lXSA9IHByb3BlcnR5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChpc0FscmVhZHlEZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgc3BlY1BvbGljeSA9IFJlYWN0Q2xhc3NJbnRlcmZhY2VbbmFtZV07XG5cbiAgICAgICAgICAgIC8vIFRoZXNlIGNhc2VzIHNob3VsZCBhbHJlYWR5IGJlIGNhdWdodCBieSB2YWxpZGF0ZU1ldGhvZE92ZXJyaWRlLlxuICAgICAgICAgICAgX2ludmFyaWFudChcbiAgICAgICAgICAgICAgaXNSZWFjdENsYXNzTWV0aG9kICYmXG4gICAgICAgICAgICAgICAgKHNwZWNQb2xpY3kgPT09ICdERUZJTkVfTUFOWV9NRVJHRUQnIHx8XG4gICAgICAgICAgICAgICAgICBzcGVjUG9saWN5ID09PSAnREVGSU5FX01BTlknKSxcbiAgICAgICAgICAgICAgJ1JlYWN0Q2xhc3M6IFVuZXhwZWN0ZWQgc3BlYyBwb2xpY3kgJXMgZm9yIGtleSAlcyAnICtcbiAgICAgICAgICAgICAgICAnd2hlbiBtaXhpbmcgaW4gY29tcG9uZW50IHNwZWNzLicsXG4gICAgICAgICAgICAgIHNwZWNQb2xpY3ksXG4gICAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIEZvciBtZXRob2RzIHdoaWNoIGFyZSBkZWZpbmVkIG1vcmUgdGhhbiBvbmNlLCBjYWxsIHRoZSBleGlzdGluZ1xuICAgICAgICAgICAgLy8gbWV0aG9kcyBiZWZvcmUgY2FsbGluZyB0aGUgbmV3IHByb3BlcnR5LCBtZXJnaW5nIGlmIGFwcHJvcHJpYXRlLlxuICAgICAgICAgICAgaWYgKHNwZWNQb2xpY3kgPT09ICdERUZJTkVfTUFOWV9NRVJHRUQnKSB7XG4gICAgICAgICAgICAgIHByb3RvW25hbWVdID0gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24ocHJvdG9bbmFtZV0sIHByb3BlcnR5KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3BlY1BvbGljeSA9PT0gJ0RFRklORV9NQU5ZJykge1xuICAgICAgICAgICAgICBwcm90b1tuYW1lXSA9IGNyZWF0ZUNoYWluZWRGdW5jdGlvbihwcm90b1tuYW1lXSwgcHJvcGVydHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm90b1tuYW1lXSA9IHByb3BlcnR5O1xuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgICAgLy8gQWRkIHZlcmJvc2UgZGlzcGxheU5hbWUgdG8gdGhlIGZ1bmN0aW9uLCB3aGljaCBoZWxwcyB3aGVuIGxvb2tpbmdcbiAgICAgICAgICAgICAgLy8gYXQgcHJvZmlsaW5nIHRvb2xzLlxuICAgICAgICAgICAgICBpZiAodHlwZW9mIHByb3BlcnR5ID09PSAnZnVuY3Rpb24nICYmIHNwZWMuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICAgICAgICBwcm90b1tuYW1lXS5kaXNwbGF5TmFtZSA9IHNwZWMuZGlzcGxheU5hbWUgKyAnXycgKyBuYW1lO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbWl4U3RhdGljU3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIHN0YXRpY3MpIHtcbiAgICBpZiAoIXN0YXRpY3MpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBuYW1lIGluIHN0YXRpY3MpIHtcbiAgICAgIHZhciBwcm9wZXJ0eSA9IHN0YXRpY3NbbmFtZV07XG4gICAgICBpZiAoIXN0YXRpY3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBpc1Jlc2VydmVkID0gbmFtZSBpbiBSRVNFUlZFRF9TUEVDX0tFWVM7XG4gICAgICBfaW52YXJpYW50KFxuICAgICAgICAhaXNSZXNlcnZlZCxcbiAgICAgICAgJ1JlYWN0Q2xhc3M6IFlvdSBhcmUgYXR0ZW1wdGluZyB0byBkZWZpbmUgYSByZXNlcnZlZCAnICtcbiAgICAgICAgICAncHJvcGVydHksIGAlc2AsIHRoYXQgc2hvdWxkblxcJ3QgYmUgb24gdGhlIFwic3RhdGljc1wiIGtleS4gRGVmaW5lIGl0ICcgK1xuICAgICAgICAgICdhcyBhbiBpbnN0YW5jZSBwcm9wZXJ0eSBpbnN0ZWFkOyBpdCB3aWxsIHN0aWxsIGJlIGFjY2Vzc2libGUgb24gdGhlICcgK1xuICAgICAgICAgICdjb25zdHJ1Y3Rvci4nLFxuICAgICAgICBuYW1lXG4gICAgICApO1xuXG4gICAgICB2YXIgaXNBbHJlYWR5RGVmaW5lZCA9IG5hbWUgaW4gQ29uc3RydWN0b3I7XG4gICAgICBpZiAoaXNBbHJlYWR5RGVmaW5lZCkge1xuICAgICAgICB2YXIgc3BlY1BvbGljeSA9IFJlYWN0Q2xhc3NTdGF0aWNJbnRlcmZhY2UuaGFzT3duUHJvcGVydHkobmFtZSlcbiAgICAgICAgICA/IFJlYWN0Q2xhc3NTdGF0aWNJbnRlcmZhY2VbbmFtZV1cbiAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgX2ludmFyaWFudChcbiAgICAgICAgICBzcGVjUG9saWN5ID09PSAnREVGSU5FX01BTllfTUVSR0VEJyxcbiAgICAgICAgICAnUmVhY3RDbGFzczogWW91IGFyZSBhdHRlbXB0aW5nIHRvIGRlZmluZSAnICtcbiAgICAgICAgICAgICdgJXNgIG9uIHlvdXIgY29tcG9uZW50IG1vcmUgdGhhbiBvbmNlLiBUaGlzIGNvbmZsaWN0IG1heSBiZSAnICtcbiAgICAgICAgICAgICdkdWUgdG8gYSBtaXhpbi4nLFxuICAgICAgICAgIG5hbWVcbiAgICAgICAgKTtcblxuICAgICAgICBDb25zdHJ1Y3RvcltuYW1lXSA9IGNyZWF0ZU1lcmdlZFJlc3VsdEZ1bmN0aW9uKENvbnN0cnVjdG9yW25hbWVdLCBwcm9wZXJ0eSk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBDb25zdHJ1Y3RvcltuYW1lXSA9IHByb3BlcnR5O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNZXJnZSB0d28gb2JqZWN0cywgYnV0IHRocm93IGlmIGJvdGggY29udGFpbiB0aGUgc2FtZSBrZXkuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvbmUgVGhlIGZpcnN0IG9iamVjdCwgd2hpY2ggaXMgbXV0YXRlZC5cbiAgICogQHBhcmFtIHtvYmplY3R9IHR3byBUaGUgc2Vjb25kIG9iamVjdFxuICAgKiBAcmV0dXJuIHtvYmplY3R9IG9uZSBhZnRlciBpdCBoYXMgYmVlbiBtdXRhdGVkIHRvIGNvbnRhaW4gZXZlcnl0aGluZyBpbiB0d28uXG4gICAqL1xuICBmdW5jdGlvbiBtZXJnZUludG9XaXRoTm9EdXBsaWNhdGVLZXlzKG9uZSwgdHdvKSB7XG4gICAgX2ludmFyaWFudChcbiAgICAgIG9uZSAmJiB0d28gJiYgdHlwZW9mIG9uZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHR3byA9PT0gJ29iamVjdCcsXG4gICAgICAnbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cygpOiBDYW5ub3QgbWVyZ2Ugbm9uLW9iamVjdHMuJ1xuICAgICk7XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gdHdvKSB7XG4gICAgICBpZiAodHdvLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgX2ludmFyaWFudChcbiAgICAgICAgICBvbmVba2V5XSA9PT0gdW5kZWZpbmVkLFxuICAgICAgICAgICdtZXJnZUludG9XaXRoTm9EdXBsaWNhdGVLZXlzKCk6ICcgK1xuICAgICAgICAgICAgJ1RyaWVkIHRvIG1lcmdlIHR3byBvYmplY3RzIHdpdGggdGhlIHNhbWUga2V5OiBgJXNgLiBUaGlzIGNvbmZsaWN0ICcgK1xuICAgICAgICAgICAgJ21heSBiZSBkdWUgdG8gYSBtaXhpbjsgaW4gcGFydGljdWxhciwgdGhpcyBtYXkgYmUgY2F1c2VkIGJ5IHR3byAnICtcbiAgICAgICAgICAgICdnZXRJbml0aWFsU3RhdGUoKSBvciBnZXREZWZhdWx0UHJvcHMoKSBtZXRob2RzIHJldHVybmluZyBvYmplY3RzICcgK1xuICAgICAgICAgICAgJ3dpdGggY2xhc2hpbmcga2V5cy4nLFxuICAgICAgICAgIGtleVxuICAgICAgICApO1xuICAgICAgICBvbmVba2V5XSA9IHR3b1trZXldO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb25lO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgdHdvIGZ1bmN0aW9ucyBhbmQgbWVyZ2VzIHRoZWlyIHJldHVybiB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uZSBGdW5jdGlvbiB0byBpbnZva2UgZmlyc3QuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IHR3byBGdW5jdGlvbiB0byBpbnZva2Ugc2Vjb25kLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbn0gRnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSB0d28gYXJndW1lbnQgZnVuY3Rpb25zLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24ob25lLCB0d28pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkUmVzdWx0KCkge1xuICAgICAgdmFyIGEgPSBvbmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHZhciBiID0gdHdvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoYSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBiO1xuICAgICAgfSBlbHNlIGlmIChiID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgICB9XG4gICAgICB2YXIgYyA9IHt9O1xuICAgICAgbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cyhjLCBhKTtcbiAgICAgIG1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoYywgYik7XG4gICAgICByZXR1cm4gYztcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgdHdvIGZ1bmN0aW9ucyBhbmQgaWdub3JlcyB0aGVpciByZXR1cm4gdmFsZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uZSBGdW5jdGlvbiB0byBpbnZva2UgZmlyc3QuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IHR3byBGdW5jdGlvbiB0byBpbnZva2Ugc2Vjb25kLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbn0gRnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSB0d28gYXJndW1lbnQgZnVuY3Rpb25zLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlQ2hhaW5lZEZ1bmN0aW9uKG9uZSwgdHdvKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGNoYWluZWRGdW5jdGlvbigpIHtcbiAgICAgIG9uZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgdHdvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kcyBhIG1ldGhvZCB0byB0aGUgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29tcG9uZW50IENvbXBvbmVudCB3aG9zZSBtZXRob2QgaXMgZ29pbmcgdG8gYmUgYm91bmQuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG1ldGhvZCBNZXRob2QgdG8gYmUgYm91bmQuXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9ufSBUaGUgYm91bmQgbWV0aG9kLlxuICAgKi9cbiAgZnVuY3Rpb24gYmluZEF1dG9CaW5kTWV0aG9kKGNvbXBvbmVudCwgbWV0aG9kKSB7XG4gICAgdmFyIGJvdW5kTWV0aG9kID0gbWV0aG9kLmJpbmQoY29tcG9uZW50KTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQ29udGV4dCA9IGNvbXBvbmVudDtcbiAgICAgIGJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZE1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIGJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZEFyZ3VtZW50cyA9IG51bGw7XG4gICAgICB2YXIgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5jb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZTtcbiAgICAgIHZhciBfYmluZCA9IGJvdW5kTWV0aG9kLmJpbmQ7XG4gICAgICBib3VuZE1ldGhvZC5iaW5kID0gZnVuY3Rpb24obmV3VGhpcykge1xuICAgICAgICBmb3IgKFxuICAgICAgICAgIHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCxcbiAgICAgICAgICAgIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksXG4gICAgICAgICAgICBfa2V5ID0gMTtcbiAgICAgICAgICBfa2V5IDwgX2xlbjtcbiAgICAgICAgICBfa2V5KytcbiAgICAgICAgKSB7XG4gICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVc2VyIGlzIHRyeWluZyB0byBiaW5kKCkgYW4gYXV0b2JvdW5kIG1ldGhvZDsgd2UgZWZmZWN0aXZlbHkgd2lsbFxuICAgICAgICAvLyBpZ25vcmUgdGhlIHZhbHVlIG9mIFwidGhpc1wiIHRoYXQgdGhlIHVzZXIgaXMgdHJ5aW5nIHRvIHVzZSwgc29cbiAgICAgICAgLy8gbGV0J3Mgd2Fybi5cbiAgICAgICAgaWYgKG5ld1RoaXMgIT09IGNvbXBvbmVudCAmJiBuZXdUaGlzICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIHdhcm5pbmcoXG4gICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAnYmluZCgpOiBSZWFjdCBjb21wb25lbnQgbWV0aG9kcyBtYXkgb25seSBiZSBib3VuZCB0byB0aGUgJyArXG4gICAgICAgICAgICAgICAgJ2NvbXBvbmVudCBpbnN0YW5jZS4gU2VlICVzJyxcbiAgICAgICAgICAgICAgY29tcG9uZW50TmFtZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIWFyZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIHdhcm5pbmcoXG4gICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAnYmluZCgpOiBZb3UgYXJlIGJpbmRpbmcgYSBjb21wb25lbnQgbWV0aG9kIHRvIHRoZSBjb21wb25lbnQuICcgK1xuICAgICAgICAgICAgICAgICdSZWFjdCBkb2VzIHRoaXMgZm9yIHlvdSBhdXRvbWF0aWNhbGx5IGluIGEgaGlnaC1wZXJmb3JtYW5jZSAnICtcbiAgICAgICAgICAgICAgICAnd2F5LCBzbyB5b3UgY2FuIHNhZmVseSByZW1vdmUgdGhpcyBjYWxsLiBTZWUgJXMnLFxuICAgICAgICAgICAgICBjb21wb25lbnROYW1lXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gYm91bmRNZXRob2Q7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlYm91bmRNZXRob2QgPSBfYmluZC5hcHBseShib3VuZE1ldGhvZCwgYXJndW1lbnRzKTtcbiAgICAgICAgcmVib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRDb250ZXh0ID0gY29tcG9uZW50O1xuICAgICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZE1ldGhvZCA9IG1ldGhvZDtcbiAgICAgICAgcmVib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRBcmd1bWVudHMgPSBhcmdzO1xuICAgICAgICByZXR1cm4gcmVib3VuZE1ldGhvZDtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBib3VuZE1ldGhvZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kcyBhbGwgYXV0by1ib3VuZCBtZXRob2RzIGluIGEgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29tcG9uZW50IENvbXBvbmVudCB3aG9zZSBtZXRob2QgaXMgZ29pbmcgdG8gYmUgYm91bmQuXG4gICAqL1xuICBmdW5jdGlvbiBiaW5kQXV0b0JpbmRNZXRob2RzKGNvbXBvbmVudCkge1xuICAgIHZhciBwYWlycyA9IGNvbXBvbmVudC5fX3JlYWN0QXV0b0JpbmRQYWlycztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhaXJzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICB2YXIgYXV0b0JpbmRLZXkgPSBwYWlyc1tpXTtcbiAgICAgIHZhciBtZXRob2QgPSBwYWlyc1tpICsgMV07XG4gICAgICBjb21wb25lbnRbYXV0b0JpbmRLZXldID0gYmluZEF1dG9CaW5kTWV0aG9kKGNvbXBvbmVudCwgbWV0aG9kKTtcbiAgICB9XG4gIH1cblxuICB2YXIgSXNNb3VudGVkUHJlTWl4aW4gPSB7XG4gICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fX2lzTW91bnRlZCA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIHZhciBJc01vdW50ZWRQb3N0TWl4aW4gPSB7XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fX2lzTW91bnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQWRkIG1vcmUgdG8gdGhlIFJlYWN0Q2xhc3MgYmFzZSBjbGFzcy4gVGhlc2UgYXJlIGFsbCBsZWdhY3kgZmVhdHVyZXMgYW5kXG4gICAqIHRoZXJlZm9yZSBub3QgYWxyZWFkeSBwYXJ0IG9mIHRoZSBtb2Rlcm4gUmVhY3RDb21wb25lbnQuXG4gICAqL1xuICB2YXIgUmVhY3RDbGFzc01peGluID0ge1xuICAgIC8qKlxuICAgICAqIFRPRE86IFRoaXMgd2lsbCBiZSBkZXByZWNhdGVkIGJlY2F1c2Ugc3RhdGUgc2hvdWxkIGFsd2F5cyBrZWVwIGEgY29uc2lzdGVudFxuICAgICAqIHR5cGUgc2lnbmF0dXJlIGFuZCB0aGUgb25seSB1c2UgY2FzZSBmb3IgdGhpcywgaXMgdG8gYXZvaWQgdGhhdC5cbiAgICAgKi9cbiAgICByZXBsYWNlU3RhdGU6IGZ1bmN0aW9uKG5ld1N0YXRlLCBjYWxsYmFjaykge1xuICAgICAgdGhpcy51cGRhdGVyLmVucXVldWVSZXBsYWNlU3RhdGUodGhpcywgbmV3U3RhdGUsIGNhbGxiYWNrKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9zaXRlIGNvbXBvbmVudCBpcyBtb3VudGVkLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbW91bnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAZmluYWxcbiAgICAgKi9cbiAgICBpc01vdW50ZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FybmluZyhcbiAgICAgICAgICB0aGlzLl9fZGlkV2FybklzTW91bnRlZCxcbiAgICAgICAgICAnJXM6IGlzTW91bnRlZCBpcyBkZXByZWNhdGVkLiBJbnN0ZWFkLCBtYWtlIHN1cmUgdG8gY2xlYW4gdXAgJyArXG4gICAgICAgICAgICAnc3Vic2NyaXB0aW9ucyBhbmQgcGVuZGluZyByZXF1ZXN0cyBpbiBjb21wb25lbnRXaWxsVW5tb3VudCB0byAnICtcbiAgICAgICAgICAgICdwcmV2ZW50IG1lbW9yeSBsZWFrcy4nLFxuICAgICAgICAgICh0aGlzLmNvbnN0cnVjdG9yICYmIHRoaXMuY29uc3RydWN0b3IuZGlzcGxheU5hbWUpIHx8XG4gICAgICAgICAgICB0aGlzLm5hbWUgfHxcbiAgICAgICAgICAgICdDb21wb25lbnQnXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX19kaWRXYXJuSXNNb3VudGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAhIXRoaXMuX19pc01vdW50ZWQ7XG4gICAgfVxuICB9O1xuXG4gIHZhciBSZWFjdENsYXNzQ29tcG9uZW50ID0gZnVuY3Rpb24oKSB7fTtcbiAgX2Fzc2lnbihcbiAgICBSZWFjdENsYXNzQ29tcG9uZW50LnByb3RvdHlwZSxcbiAgICBSZWFjdENvbXBvbmVudC5wcm90b3R5cGUsXG4gICAgUmVhY3RDbGFzc01peGluXG4gICk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBjb21wb3NpdGUgY29tcG9uZW50IGNsYXNzIGdpdmVuIGEgY2xhc3Mgc3BlY2lmaWNhdGlvbi5cbiAgICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdG9wLWxldmVsLWFwaS5odG1sI3JlYWN0LmNyZWF0ZWNsYXNzXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBzcGVjIENsYXNzIHNwZWNpZmljYXRpb24gKHdoaWNoIG11c3QgZGVmaW5lIGByZW5kZXJgKS5cbiAgICogQHJldHVybiB7ZnVuY3Rpb259IENvbXBvbmVudCBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlQ2xhc3Moc3BlYykge1xuICAgIC8vIFRvIGtlZXAgb3VyIHdhcm5pbmdzIG1vcmUgdW5kZXJzdGFuZGFibGUsIHdlJ2xsIHVzZSBhIGxpdHRsZSBoYWNrIGhlcmUgdG9cbiAgICAvLyBlbnN1cmUgdGhhdCBDb25zdHJ1Y3Rvci5uYW1lICE9PSAnQ29uc3RydWN0b3InLiBUaGlzIG1ha2VzIHN1cmUgd2UgZG9uJ3RcbiAgICAvLyB1bm5lY2Vzc2FyaWx5IGlkZW50aWZ5IGEgY2xhc3Mgd2l0aG91dCBkaXNwbGF5TmFtZSBhcyAnQ29uc3RydWN0b3InLlxuICAgIHZhciBDb25zdHJ1Y3RvciA9IGlkZW50aXR5KGZ1bmN0aW9uKHByb3BzLCBjb250ZXh0LCB1cGRhdGVyKSB7XG4gICAgICAvLyBUaGlzIGNvbnN0cnVjdG9yIGdldHMgb3ZlcnJpZGRlbiBieSBtb2Nrcy4gVGhlIGFyZ3VtZW50IGlzIHVzZWRcbiAgICAgIC8vIGJ5IG1vY2tzIHRvIGFzc2VydCBvbiB3aGF0IGdldHMgbW91bnRlZC5cblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FybmluZyhcbiAgICAgICAgICB0aGlzIGluc3RhbmNlb2YgQ29uc3RydWN0b3IsXG4gICAgICAgICAgJ1NvbWV0aGluZyBpcyBjYWxsaW5nIGEgUmVhY3QgY29tcG9uZW50IGRpcmVjdGx5LiBVc2UgYSBmYWN0b3J5IG9yICcgK1xuICAgICAgICAgICAgJ0pTWCBpbnN0ZWFkLiBTZWU6IGh0dHBzOi8vZmIubWUvcmVhY3QtbGVnYWN5ZmFjdG9yeSdcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2lyZSB1cCBhdXRvLWJpbmRpbmdcbiAgICAgIGlmICh0aGlzLl9fcmVhY3RBdXRvQmluZFBhaXJzLmxlbmd0aCkge1xuICAgICAgICBiaW5kQXV0b0JpbmRNZXRob2RzKHRoaXMpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4gICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgdGhpcy5yZWZzID0gZW1wdHlPYmplY3Q7XG4gICAgICB0aGlzLnVwZGF0ZXIgPSB1cGRhdGVyIHx8IFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlO1xuXG4gICAgICB0aGlzLnN0YXRlID0gbnVsbDtcblxuICAgICAgLy8gUmVhY3RDbGFzc2VzIGRvZXNuJ3QgaGF2ZSBjb25zdHJ1Y3RvcnMuIEluc3RlYWQsIHRoZXkgdXNlIHRoZVxuICAgICAgLy8gZ2V0SW5pdGlhbFN0YXRlIGFuZCBjb21wb25lbnRXaWxsTW91bnQgbWV0aG9kcyBmb3IgaW5pdGlhbGl6YXRpb24uXG5cbiAgICAgIHZhciBpbml0aWFsU3RhdGUgPSB0aGlzLmdldEluaXRpYWxTdGF0ZSA/IHRoaXMuZ2V0SW5pdGlhbFN0YXRlKCkgOiBudWxsO1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgLy8gV2UgYWxsb3cgYXV0by1tb2NrcyB0byBwcm9jZWVkIGFzIGlmIHRoZXkncmUgcmV0dXJuaW5nIG51bGwuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBpbml0aWFsU3RhdGUgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgIHRoaXMuZ2V0SW5pdGlhbFN0YXRlLl9pc01vY2tGdW5jdGlvblxuICAgICAgICApIHtcbiAgICAgICAgICAvLyBUaGlzIGlzIHByb2JhYmx5IGJhZCBwcmFjdGljZS4gQ29uc2lkZXIgd2FybmluZyBoZXJlIGFuZFxuICAgICAgICAgIC8vIGRlcHJlY2F0aW5nIHRoaXMgY29udmVuaWVuY2UuXG4gICAgICAgICAgaW5pdGlhbFN0YXRlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgX2ludmFyaWFudChcbiAgICAgICAgdHlwZW9mIGluaXRpYWxTdGF0ZSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkoaW5pdGlhbFN0YXRlKSxcbiAgICAgICAgJyVzLmdldEluaXRpYWxTdGF0ZSgpOiBtdXN0IHJldHVybiBhbiBvYmplY3Qgb3IgbnVsbCcsXG4gICAgICAgIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCdcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuc3RhdGUgPSBpbml0aWFsU3RhdGU7XG4gICAgfSk7XG4gICAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gbmV3IFJlYWN0Q2xhc3NDb21wb25lbnQoKTtcbiAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcbiAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuX19yZWFjdEF1dG9CaW5kUGFpcnMgPSBbXTtcblxuICAgIGluamVjdGVkTWl4aW5zLmZvckVhY2gobWl4U3BlY0ludG9Db21wb25lbnQuYmluZChudWxsLCBDb25zdHJ1Y3RvcikpO1xuXG4gICAgbWl4U3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIElzTW91bnRlZFByZU1peGluKTtcbiAgICBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3BlYyk7XG4gICAgbWl4U3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIElzTW91bnRlZFBvc3RNaXhpbik7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBkZWZhdWx0UHJvcHMgcHJvcGVydHkgYWZ0ZXIgYWxsIG1peGlucyBoYXZlIGJlZW4gbWVyZ2VkLlxuICAgIGlmIChDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMpIHtcbiAgICAgIENvbnN0cnVjdG9yLmRlZmF1bHRQcm9wcyA9IENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcygpO1xuICAgIH1cblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBUaGlzIGlzIGEgdGFnIHRvIGluZGljYXRlIHRoYXQgdGhlIHVzZSBvZiB0aGVzZSBtZXRob2QgbmFtZXMgaXMgb2ssXG4gICAgICAvLyBzaW5jZSBpdCdzIHVzZWQgd2l0aCBjcmVhdGVDbGFzcy4gSWYgaXQncyBub3QsIHRoZW4gaXQncyBsaWtlbHkgYVxuICAgICAgLy8gbWlzdGFrZSBzbyB3ZSdsbCB3YXJuIHlvdSB0byB1c2UgdGhlIHN0YXRpYyBwcm9wZXJ0eSwgcHJvcGVydHlcbiAgICAgIC8vIGluaXRpYWxpemVyIG9yIGNvbnN0cnVjdG9yIHJlc3BlY3RpdmVseS5cbiAgICAgIGlmIChDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMpIHtcbiAgICAgICAgQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzLmlzUmVhY3RDbGFzc0FwcHJvdmVkID0ge307XG4gICAgICB9XG4gICAgICBpZiAoQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEluaXRpYWxTdGF0ZSkge1xuICAgICAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0SW5pdGlhbFN0YXRlLmlzUmVhY3RDbGFzc0FwcHJvdmVkID0ge307XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2ludmFyaWFudChcbiAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZS5yZW5kZXIsXG4gICAgICAnY3JlYXRlQ2xhc3MoLi4uKTogQ2xhc3Mgc3BlY2lmaWNhdGlvbiBtdXN0IGltcGxlbWVudCBhIGByZW5kZXJgIG1ldGhvZC4nXG4gICAgKTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB3YXJuaW5nKFxuICAgICAgICAhQ29uc3RydWN0b3IucHJvdG90eXBlLmNvbXBvbmVudFNob3VsZFVwZGF0ZSxcbiAgICAgICAgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArXG4gICAgICAgICAgJ2NvbXBvbmVudFNob3VsZFVwZGF0ZSgpLiBEaWQgeW91IG1lYW4gc2hvdWxkQ29tcG9uZW50VXBkYXRlKCk/ICcgK1xuICAgICAgICAgICdUaGUgbmFtZSBpcyBwaHJhc2VkIGFzIGEgcXVlc3Rpb24gYmVjYXVzZSB0aGUgZnVuY3Rpb24gaXMgJyArXG4gICAgICAgICAgJ2V4cGVjdGVkIHRvIHJldHVybiBhIHZhbHVlLicsXG4gICAgICAgIHNwZWMuZGlzcGxheU5hbWUgfHwgJ0EgY29tcG9uZW50J1xuICAgICAgKTtcbiAgICAgIHdhcm5pbmcoXG4gICAgICAgICFDb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcyxcbiAgICAgICAgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArXG4gICAgICAgICAgJ2NvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMoKS4gRGlkIHlvdSBtZWFuIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKT8nLFxuICAgICAgICBzcGVjLmRpc3BsYXlOYW1lIHx8ICdBIGNvbXBvbmVudCdcbiAgICAgICk7XG4gICAgICB3YXJuaW5nKFxuICAgICAgICAhQ29uc3RydWN0b3IucHJvdG90eXBlLlVOU0FGRV9jb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzLFxuICAgICAgICAnJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCBVTlNBRkVfY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcygpLiAnICtcbiAgICAgICAgICAnRGlkIHlvdSBtZWFuIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKCk/JyxcbiAgICAgICAgc3BlYy5kaXNwbGF5TmFtZSB8fCAnQSBjb21wb25lbnQnXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFJlZHVjZSB0aW1lIHNwZW50IGRvaW5nIGxvb2t1cHMgYnkgc2V0dGluZyB0aGVzZSBvbiB0aGUgcHJvdG90eXBlLlxuICAgIGZvciAodmFyIG1ldGhvZE5hbWUgaW4gUmVhY3RDbGFzc0ludGVyZmFjZSkge1xuICAgICAgaWYgKCFDb25zdHJ1Y3Rvci5wcm90b3R5cGVbbWV0aG9kTmFtZV0pIHtcbiAgICAgICAgQ29uc3RydWN0b3IucHJvdG90eXBlW21ldGhvZE5hbWVdID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gQ29uc3RydWN0b3I7XG4gIH1cblxuICByZXR1cm4gY3JlYXRlQ2xhc3M7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZmFjdG9yeTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/create-react-class/factory.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/create-react-class/index.js":
/*!**************************************************!*\
  !*** ./node_modules/create-react-class/index.js ***!
  \**************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n\nvar React = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\nvar factory = __webpack_require__(/*! ./factory */ \"(app-pages-browser)/./node_modules/create-react-class/factory.js\");\n\nif (typeof React === 'undefined') {\n  throw Error(\n    'create-react-class could not find the React object. If you are using script tags, ' +\n      'make sure that React is being loaded before create-react-class.'\n  );\n}\n\n// Hack to grab NoopUpdateQueue from isomorphic React\nvar ReactNoopUpdateQueue = new React.Component().updater;\n\nmodule.exports = factory(\n  React.Component,\n  React.isValidElement,\n  ReactNoopUpdateQueue\n);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7O0FBRWIsWUFBWSxtQkFBTyxDQUFDLG1GQUFPO0FBQzNCLGNBQWMsbUJBQU8sQ0FBQyxtRkFBVzs7QUFFakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvY3JlYXRlLXJlYWN0LWNsYXNzL2luZGV4LmpzPzI0ODYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIGZhY3RvcnkgPSByZXF1aXJlKCcuL2ZhY3RvcnknKTtcblxuaWYgKHR5cGVvZiBSZWFjdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgdGhyb3cgRXJyb3IoXG4gICAgJ2NyZWF0ZS1yZWFjdC1jbGFzcyBjb3VsZCBub3QgZmluZCB0aGUgUmVhY3Qgb2JqZWN0LiBJZiB5b3UgYXJlIHVzaW5nIHNjcmlwdCB0YWdzLCAnICtcbiAgICAgICdtYWtlIHN1cmUgdGhhdCBSZWFjdCBpcyBiZWluZyBsb2FkZWQgYmVmb3JlIGNyZWF0ZS1yZWFjdC1jbGFzcy4nXG4gICk7XG59XG5cbi8vIEhhY2sgdG8gZ3JhYiBOb29wVXBkYXRlUXVldWUgZnJvbSBpc29tb3JwaGljIFJlYWN0XG52YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSBuZXcgUmVhY3QuQ29tcG9uZW50KCkudXBkYXRlcjtcblxubW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFxuICBSZWFjdC5Db21wb25lbnQsXG4gIFJlYWN0LmlzVmFsaWRFbGVtZW50LFxuICBSZWFjdE5vb3BVcGRhdGVRdWV1ZVxuKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/create-react-class/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/date-now/index.js":
/*!****************************************!*\
  !*** ./node_modules/date-now/index.js ***!
  \****************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("module.exports = Date.now || now\n\nfunction now() {\n    return new Date().getTime()\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9kYXRlLW5vdy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2RhdGUtbm93L2luZGV4LmpzP2FkNmIiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBEYXRlLm5vdyB8fCBub3dcblxuZnVuY3Rpb24gbm93KCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/date-now/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/debounce/index.js":
/*!****************************************!*\
  !*** ./node_modules/debounce/index.js ***!
  \****************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("\n/**\n * Module dependencies.\n */\n\nvar now = __webpack_require__(/*! date-now */ \"(app-pages-browser)/./node_modules/date-now/index.js\");\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = now() - timestamp;\n\n    if (last < wait && last > 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n\n  return function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9kZWJvdW5jZS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFVBQVUsbUJBQU8sQ0FBQyxzRUFBVTs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsVUFBVTtBQUNyQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2RlYm91bmNlL2luZGV4LmpzPzIwNWMiXSwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIG5vdyA9IHJlcXVpcmUoJ2RhdGUtbm93Jyk7XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuICogYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuICogTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gKiBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLlxuICpcbiAqIEBzb3VyY2UgdW5kZXJzY29yZS5qc1xuICogQHNlZSBodHRwOi8vdW5zY3JpcHRhYmxlLmNvbS8yMDA5LzAzLzIwL2RlYm91bmNpbmctamF2YXNjcmlwdC1tZXRob2RzL1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY3Rpb24gdG8gd3JhcFxuICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVvdXQgaW4gbXMgKGAxMDBgKVxuICogQHBhcmFtIHtCb29sZWFufSB3aGV0aGVyIHRvIGV4ZWN1dGUgYXQgdGhlIGJlZ2lubmluZyAoYGZhbHNlYClcbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpe1xuICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG4gIGlmIChudWxsID09IHdhaXQpIHdhaXQgPSAxMDA7XG5cbiAgZnVuY3Rpb24gbGF0ZXIoKSB7XG4gICAgdmFyIGxhc3QgPSBub3coKSAtIHRpbWVzdGFtcDtcblxuICAgIGlmIChsYXN0IDwgd2FpdCAmJiBsYXN0ID4gMCkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBpZiAoIWltbWVkaWF0ZSkge1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICBjb250ZXh0ID0gdGhpcztcbiAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHRpbWVzdGFtcCA9IG5vdygpO1xuICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgIGlmICghdGltZW91dCkgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgIGlmIChjYWxsTm93KSB7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/debounce/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/hashlru/index.js":
/*!***************************************!*\
  !*** ./node_modules/hashlru/index.js ***!
  \***************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("module.exports = function (max) {\n\n  if (!max) throw Error('hashlru must have a max value, of type number, greater than 0')\n\n  var size = 0, cache = Object.create(null), _cache = Object.create(null)\n\n  function update (key, value) {\n    cache[key] = value\n    size ++\n    if(size >= max) {\n      size = 0\n      _cache = cache\n      cache = Object.create(null)\n    }\n  }\n\n  return {\n    has: function (key) {\n      return cache[key] !== undefined || _cache[key] !== undefined\n    },\n    remove: function (key) {\n      if(cache[key] !== undefined)\n        cache[key] = undefined\n      if(_cache[key] !== undefined)\n        _cache[key] = undefined\n    },\n    get: function (key) {\n      var v = cache[key]\n      if(v !== undefined) return v\n      if((v = _cache[key]) !== undefined) {\n        update(key, v)\n        return v\n      }\n    },\n    set: function (key, value) {\n      if(cache[key] !== undefined) cache[key] = value\n      else update(key, value)\n    },\n    clear: function () {\n      cache = Object.create(null)\n      _cache = Object.create(null)\n    }\n  }\n}\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9oYXNobHJ1L2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9oYXNobHJ1L2luZGV4LmpzPzUzYmIiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobWF4KSB7XG5cbiAgaWYgKCFtYXgpIHRocm93IEVycm9yKCdoYXNobHJ1IG11c3QgaGF2ZSBhIG1heCB2YWx1ZSwgb2YgdHlwZSBudW1iZXIsIGdyZWF0ZXIgdGhhbiAwJylcblxuICB2YXIgc2l6ZSA9IDAsIGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKSwgX2NhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSAoa2V5LCB2YWx1ZSkge1xuICAgIGNhY2hlW2tleV0gPSB2YWx1ZVxuICAgIHNpemUgKytcbiAgICBpZihzaXplID49IG1heCkge1xuICAgICAgc2l6ZSA9IDBcbiAgICAgIF9jYWNoZSA9IGNhY2hlXG4gICAgICBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbClcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGhhczogZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGNhY2hlW2tleV0gIT09IHVuZGVmaW5lZCB8fCBfY2FjaGVba2V5XSAhPT0gdW5kZWZpbmVkXG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGlmKGNhY2hlW2tleV0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgY2FjaGVba2V5XSA9IHVuZGVmaW5lZFxuICAgICAgaWYoX2NhY2hlW2tleV0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgX2NhY2hlW2tleV0gPSB1bmRlZmluZWRcbiAgICB9LFxuICAgIGdldDogZnVuY3Rpb24gKGtleSkge1xuICAgICAgdmFyIHYgPSBjYWNoZVtrZXldXG4gICAgICBpZih2ICE9PSB1bmRlZmluZWQpIHJldHVybiB2XG4gICAgICBpZigodiA9IF9jYWNoZVtrZXldKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHVwZGF0ZShrZXksIHYpXG4gICAgICAgIHJldHVybiB2XG4gICAgICB9XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICBpZihjYWNoZVtrZXldICE9PSB1bmRlZmluZWQpIGNhY2hlW2tleV0gPSB2YWx1ZVxuICAgICAgZWxzZSB1cGRhdGUoa2V5LCB2YWx1ZSlcbiAgICB9LFxuICAgIGNsZWFyOiBmdW5jdGlvbiAoKSB7XG4gICAgICBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbClcbiAgICAgIF9jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbClcbiAgICB9XG4gIH1cbn1cblxuXG5cblxuXG5cblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/hashlru/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/md5-o-matic/lib/md5omatic.js":
/*!***************************************************!*\
  !*** ./node_modules/md5-o-matic/lib/md5omatic.js ***!
  \***************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\n\n/**\n * Expose `md5omatic(str)`.\n */\n \nmodule.exports = md5omatic;\n\n/**\n * Hash any string using message digest.\n *\n * @param {String} str\n * @return {String}\n * @api public\n */\n \nfunction md5omatic(str) {\n    var x = str2blks_MD5(str);\n    var a =  1732584193;\n    var b = -271733879;\n    var c = -1732584194;\n    var d =  271733878;\n\n    for(var i=0; i<x.length; i += 16)\n    {\n        var olda = a;\n        var oldb = b;\n        var oldc = c;\n        var oldd = d;\n\n        a = ff(a, b, c, d, x[i+ 0], 7 , -680876936);\n        d = ff(d, a, b, c, x[i+ 1], 12, -389564586);\n        c = ff(c, d, a, b, x[i+ 2], 17,  606105819);\n        b = ff(b, c, d, a, x[i+ 3], 22, -1044525330);\n        a = ff(a, b, c, d, x[i+ 4], 7 , -176418897);\n        d = ff(d, a, b, c, x[i+ 5], 12,  1200080426);\n        c = ff(c, d, a, b, x[i+ 6], 17, -1473231341);\n        b = ff(b, c, d, a, x[i+ 7], 22, -45705983);\n        a = ff(a, b, c, d, x[i+ 8], 7 ,  1770035416);\n        d = ff(d, a, b, c, x[i+ 9], 12, -1958414417);\n        c = ff(c, d, a, b, x[i+10], 17, -42063);\n        b = ff(b, c, d, a, x[i+11], 22, -1990404162);\n        a = ff(a, b, c, d, x[i+12], 7 ,  1804603682);\n        d = ff(d, a, b, c, x[i+13], 12, -40341101);\n        c = ff(c, d, a, b, x[i+14], 17, -1502002290);\n        b = ff(b, c, d, a, x[i+15], 22,  1236535329);\n        a = gg(a, b, c, d, x[i+ 1], 5 , -165796510);\n        d = gg(d, a, b, c, x[i+ 6], 9 , -1069501632);\n        c = gg(c, d, a, b, x[i+11], 14,  643717713);\n        b = gg(b, c, d, a, x[i+ 0], 20, -373897302);\n        a = gg(a, b, c, d, x[i+ 5], 5 , -701558691);\n        d = gg(d, a, b, c, x[i+10], 9 ,  38016083);\n        c = gg(c, d, a, b, x[i+15], 14, -660478335);\n        b = gg(b, c, d, a, x[i+ 4], 20, -405537848);\n        a = gg(a, b, c, d, x[i+ 9], 5 ,  568446438);\n        d = gg(d, a, b, c, x[i+14], 9 , -1019803690);\n        c = gg(c, d, a, b, x[i+ 3], 14, -187363961);\n        b = gg(b, c, d, a, x[i+ 8], 20,  1163531501);\n        a = gg(a, b, c, d, x[i+13], 5 , -1444681467);\n        d = gg(d, a, b, c, x[i+ 2], 9 , -51403784);\n        c = gg(c, d, a, b, x[i+ 7], 14,  1735328473);\n        b = gg(b, c, d, a, x[i+12], 20, -1926607734);\n        a = hh(a, b, c, d, x[i+ 5], 4 , -378558);\n        d = hh(d, a, b, c, x[i+ 8], 11, -2022574463);\n        c = hh(c, d, a, b, x[i+11], 16,  1839030562);\n        b = hh(b, c, d, a, x[i+14], 23, -35309556);\n        a = hh(a, b, c, d, x[i+ 1], 4 , -1530992060);\n        d = hh(d, a, b, c, x[i+ 4], 11,  1272893353);\n        c = hh(c, d, a, b, x[i+ 7], 16, -155497632);\n        b = hh(b, c, d, a, x[i+10], 23, -1094730640);\n        a = hh(a, b, c, d, x[i+13], 4 ,  681279174);\n        d = hh(d, a, b, c, x[i+ 0], 11, -358537222);\n        c = hh(c, d, a, b, x[i+ 3], 16, -722521979);\n        b = hh(b, c, d, a, x[i+ 6], 23,  76029189);\n        a = hh(a, b, c, d, x[i+ 9], 4 , -640364487);\n        d = hh(d, a, b, c, x[i+12], 11, -421815835);\n        c = hh(c, d, a, b, x[i+15], 16,  530742520);\n        b = hh(b, c, d, a, x[i+ 2], 23, -995338651);\n        a = ii(a, b, c, d, x[i+ 0], 6 , -198630844);\n        d = ii(d, a, b, c, x[i+ 7], 10,  1126891415);\n        c = ii(c, d, a, b, x[i+14], 15, -1416354905);\n        b = ii(b, c, d, a, x[i+ 5], 21, -57434055);\n        a = ii(a, b, c, d, x[i+12], 6 ,  1700485571);\n        d = ii(d, a, b, c, x[i+ 3], 10, -1894986606);\n        c = ii(c, d, a, b, x[i+10], 15, -1051523);\n        b = ii(b, c, d, a, x[i+ 1], 21, -2054922799);\n        a = ii(a, b, c, d, x[i+ 8], 6 ,  1873313359);\n        d = ii(d, a, b, c, x[i+15], 10, -30611744);\n        c = ii(c, d, a, b, x[i+ 6], 15, -1560198380);\n        b = ii(b, c, d, a, x[i+13], 21,  1309151649);\n        a = ii(a, b, c, d, x[i+ 4], 6 , -145523070);\n        d = ii(d, a, b, c, x[i+11], 10, -1120210379);\n        c = ii(c, d, a, b, x[i+ 2], 15,  718787259);\n        b = ii(b, c, d, a, x[i+ 9], 21, -343485551);\n\n        a = addme(a, olda);\n        b = addme(b, oldb);\n        c = addme(c, oldc);\n        d = addme(d, oldd);\n    }\n\n    return rhex(a) + rhex(b) + rhex(c) + rhex(d);\n};\n\nvar hex_chr = \"0123456789abcdef\";\n\nfunction bitOR(a, b)\n{\n    var lsb = (a & 0x1) | (b & 0x1);\n    var msb31 = (a >>> 1) | (b >>> 1);\n\n    return (msb31 << 1) | lsb;\n}\n\nfunction bitXOR(a, b)\n{\n    var lsb = (a & 0x1) ^ (b & 0x1);\n    var msb31 = (a >>> 1) ^ (b >>> 1);\n\n    return (msb31 << 1) | lsb;\n}\n\nfunction bitAND(a, b)\n{\n    var lsb = (a & 0x1) & (b & 0x1);\n    var msb31 = (a >>> 1) & (b >>> 1);\n\n    return (msb31 << 1) | lsb;\n}\n\nfunction addme(x, y)\n{\n    var lsw = (x & 0xFFFF)+(y & 0xFFFF);\n    var msw = (x >> 16)+(y >> 16)+(lsw >> 16);\n\n    return (msw << 16) | (lsw & 0xFFFF);\n}\n\nfunction rhex(num)\n{\n    var str = \"\";\n    var j;\n\n    for(j=0; j<=3; j++)\n        str += hex_chr.charAt((num >> (j * 8 + 4)) & 0x0F) + hex_chr.charAt((num >> (j * 8)) & 0x0F);\n\n    return str;\n}\n\nfunction str2blks_MD5(str)\n{\n    var nblk = ((str.length + 8) >> 6) + 1;\n    var blks = new Array(nblk * 16);\n    var i;\n\n    for(i=0; i<nblk * 16; i++)\n        blks[i] = 0;\n\n    for(i=0; i<str.length; i++)\n        blks[i >> 2] |= str.charCodeAt(i) << (((str.length * 8 + i) % 4) * 8);\n\n    blks[i >> 2] |= 0x80 << (((str.length * 8 + i) % 4) * 8);\n\n    var l = str.length * 8;\n    blks[nblk * 16 - 2] = (l & 0xFF);\n    blks[nblk * 16 - 2] |= ((l >>> 8) & 0xFF) << 8;\n    blks[nblk * 16 - 2] |= ((l >>> 16) & 0xFF) << 16;\n    blks[nblk * 16 - 2] |= ((l >>> 24) & 0xFF) << 24;\n\n    return blks;\n}\n\nfunction rol(num, cnt)\n{\n    return (num << cnt) | (num >>> (32 - cnt));\n}\n\nfunction cmn(q, a, b, x, s, t)\n{\n    return addme(rol((addme(addme(a, q), addme(x, t))), s), b);\n}\n\nfunction ff(a, b, c, d, x, s, t)\n{\n    return cmn(bitOR(bitAND(b, c), bitAND((~b), d)), a, b, x, s, t);\n}\n\nfunction gg(a, b, c, d, x, s, t)\n{\n    return cmn(bitOR(bitAND(b, d), bitAND(c, (~d))), a, b, x, s, t);\n}\n\nfunction hh(a, b, c, d, x, s, t)\n{\n    return cmn(bitXOR(bitXOR(b, c), d), a, b, x, s, t);\n}\n\nfunction ii(a, b, c, d, x, s, t)\n{\n    return cmn(bitXOR(c, bitOR(b, (~d))), a, b, x, s, t);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZDUtby1tYXRpYy9saWIvbWQ1b21hdGljLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxhQUFhLE1BQU07QUFDbkI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGFBQWEsYUFBYTtBQUMxQjs7QUFFQSxhQUFhLGNBQWM7QUFDM0I7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZDUtby1tYXRpYy9saWIvbWQ1b21hdGljLmpzPzYwYzQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qKlxuICogRXhwb3NlIGBtZDVvbWF0aWMoc3RyKWAuXG4gKi9cbiBcbm1vZHVsZS5leHBvcnRzID0gbWQ1b21hdGljO1xuXG4vKipcbiAqIEhhc2ggYW55IHN0cmluZyB1c2luZyBtZXNzYWdlIGRpZ2VzdC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG4gXG5mdW5jdGlvbiBtZDVvbWF0aWMoc3RyKSB7XG4gICAgdmFyIHggPSBzdHIyYmxrc19NRDUoc3RyKTtcbiAgICB2YXIgYSA9ICAxNzMyNTg0MTkzO1xuICAgIHZhciBiID0gLTI3MTczMzg3OTtcbiAgICB2YXIgYyA9IC0xNzMyNTg0MTk0O1xuICAgIHZhciBkID0gIDI3MTczMzg3ODtcblxuICAgIGZvcih2YXIgaT0wOyBpPHgubGVuZ3RoOyBpICs9IDE2KVxuICAgIHtcbiAgICAgICAgdmFyIG9sZGEgPSBhO1xuICAgICAgICB2YXIgb2xkYiA9IGI7XG4gICAgICAgIHZhciBvbGRjID0gYztcbiAgICAgICAgdmFyIG9sZGQgPSBkO1xuXG4gICAgICAgIGEgPSBmZihhLCBiLCBjLCBkLCB4W2krIDBdLCA3ICwgLTY4MDg3NjkzNik7XG4gICAgICAgIGQgPSBmZihkLCBhLCBiLCBjLCB4W2krIDFdLCAxMiwgLTM4OTU2NDU4Nik7XG4gICAgICAgIGMgPSBmZihjLCBkLCBhLCBiLCB4W2krIDJdLCAxNywgIDYwNjEwNTgxOSk7XG4gICAgICAgIGIgPSBmZihiLCBjLCBkLCBhLCB4W2krIDNdLCAyMiwgLTEwNDQ1MjUzMzApO1xuICAgICAgICBhID0gZmYoYSwgYiwgYywgZCwgeFtpKyA0XSwgNyAsIC0xNzY0MTg4OTcpO1xuICAgICAgICBkID0gZmYoZCwgYSwgYiwgYywgeFtpKyA1XSwgMTIsICAxMjAwMDgwNDI2KTtcbiAgICAgICAgYyA9IGZmKGMsIGQsIGEsIGIsIHhbaSsgNl0sIDE3LCAtMTQ3MzIzMTM0MSk7XG4gICAgICAgIGIgPSBmZihiLCBjLCBkLCBhLCB4W2krIDddLCAyMiwgLTQ1NzA1OTgzKTtcbiAgICAgICAgYSA9IGZmKGEsIGIsIGMsIGQsIHhbaSsgOF0sIDcgLCAgMTc3MDAzNTQxNik7XG4gICAgICAgIGQgPSBmZihkLCBhLCBiLCBjLCB4W2krIDldLCAxMiwgLTE5NTg0MTQ0MTcpO1xuICAgICAgICBjID0gZmYoYywgZCwgYSwgYiwgeFtpKzEwXSwgMTcsIC00MjA2Myk7XG4gICAgICAgIGIgPSBmZihiLCBjLCBkLCBhLCB4W2krMTFdLCAyMiwgLTE5OTA0MDQxNjIpO1xuICAgICAgICBhID0gZmYoYSwgYiwgYywgZCwgeFtpKzEyXSwgNyAsICAxODA0NjAzNjgyKTtcbiAgICAgICAgZCA9IGZmKGQsIGEsIGIsIGMsIHhbaSsxM10sIDEyLCAtNDAzNDExMDEpO1xuICAgICAgICBjID0gZmYoYywgZCwgYSwgYiwgeFtpKzE0XSwgMTcsIC0xNTAyMDAyMjkwKTtcbiAgICAgICAgYiA9IGZmKGIsIGMsIGQsIGEsIHhbaSsxNV0sIDIyLCAgMTIzNjUzNTMyOSk7XG4gICAgICAgIGEgPSBnZyhhLCBiLCBjLCBkLCB4W2krIDFdLCA1ICwgLTE2NTc5NjUxMCk7XG4gICAgICAgIGQgPSBnZyhkLCBhLCBiLCBjLCB4W2krIDZdLCA5ICwgLTEwNjk1MDE2MzIpO1xuICAgICAgICBjID0gZ2coYywgZCwgYSwgYiwgeFtpKzExXSwgMTQsICA2NDM3MTc3MTMpO1xuICAgICAgICBiID0gZ2coYiwgYywgZCwgYSwgeFtpKyAwXSwgMjAsIC0zNzM4OTczMDIpO1xuICAgICAgICBhID0gZ2coYSwgYiwgYywgZCwgeFtpKyA1XSwgNSAsIC03MDE1NTg2OTEpO1xuICAgICAgICBkID0gZ2coZCwgYSwgYiwgYywgeFtpKzEwXSwgOSAsICAzODAxNjA4Myk7XG4gICAgICAgIGMgPSBnZyhjLCBkLCBhLCBiLCB4W2krMTVdLCAxNCwgLTY2MDQ3ODMzNSk7XG4gICAgICAgIGIgPSBnZyhiLCBjLCBkLCBhLCB4W2krIDRdLCAyMCwgLTQwNTUzNzg0OCk7XG4gICAgICAgIGEgPSBnZyhhLCBiLCBjLCBkLCB4W2krIDldLCA1ICwgIDU2ODQ0NjQzOCk7XG4gICAgICAgIGQgPSBnZyhkLCBhLCBiLCBjLCB4W2krMTRdLCA5ICwgLTEwMTk4MDM2OTApO1xuICAgICAgICBjID0gZ2coYywgZCwgYSwgYiwgeFtpKyAzXSwgMTQsIC0xODczNjM5NjEpO1xuICAgICAgICBiID0gZ2coYiwgYywgZCwgYSwgeFtpKyA4XSwgMjAsICAxMTYzNTMxNTAxKTtcbiAgICAgICAgYSA9IGdnKGEsIGIsIGMsIGQsIHhbaSsxM10sIDUgLCAtMTQ0NDY4MTQ2Nyk7XG4gICAgICAgIGQgPSBnZyhkLCBhLCBiLCBjLCB4W2krIDJdLCA5ICwgLTUxNDAzNzg0KTtcbiAgICAgICAgYyA9IGdnKGMsIGQsIGEsIGIsIHhbaSsgN10sIDE0LCAgMTczNTMyODQ3Myk7XG4gICAgICAgIGIgPSBnZyhiLCBjLCBkLCBhLCB4W2krMTJdLCAyMCwgLTE5MjY2MDc3MzQpO1xuICAgICAgICBhID0gaGgoYSwgYiwgYywgZCwgeFtpKyA1XSwgNCAsIC0zNzg1NTgpO1xuICAgICAgICBkID0gaGgoZCwgYSwgYiwgYywgeFtpKyA4XSwgMTEsIC0yMDIyNTc0NDYzKTtcbiAgICAgICAgYyA9IGhoKGMsIGQsIGEsIGIsIHhbaSsxMV0sIDE2LCAgMTgzOTAzMDU2Mik7XG4gICAgICAgIGIgPSBoaChiLCBjLCBkLCBhLCB4W2krMTRdLCAyMywgLTM1MzA5NTU2KTtcbiAgICAgICAgYSA9IGhoKGEsIGIsIGMsIGQsIHhbaSsgMV0sIDQgLCAtMTUzMDk5MjA2MCk7XG4gICAgICAgIGQgPSBoaChkLCBhLCBiLCBjLCB4W2krIDRdLCAxMSwgIDEyNzI4OTMzNTMpO1xuICAgICAgICBjID0gaGgoYywgZCwgYSwgYiwgeFtpKyA3XSwgMTYsIC0xNTU0OTc2MzIpO1xuICAgICAgICBiID0gaGgoYiwgYywgZCwgYSwgeFtpKzEwXSwgMjMsIC0xMDk0NzMwNjQwKTtcbiAgICAgICAgYSA9IGhoKGEsIGIsIGMsIGQsIHhbaSsxM10sIDQgLCAgNjgxMjc5MTc0KTtcbiAgICAgICAgZCA9IGhoKGQsIGEsIGIsIGMsIHhbaSsgMF0sIDExLCAtMzU4NTM3MjIyKTtcbiAgICAgICAgYyA9IGhoKGMsIGQsIGEsIGIsIHhbaSsgM10sIDE2LCAtNzIyNTIxOTc5KTtcbiAgICAgICAgYiA9IGhoKGIsIGMsIGQsIGEsIHhbaSsgNl0sIDIzLCAgNzYwMjkxODkpO1xuICAgICAgICBhID0gaGgoYSwgYiwgYywgZCwgeFtpKyA5XSwgNCAsIC02NDAzNjQ0ODcpO1xuICAgICAgICBkID0gaGgoZCwgYSwgYiwgYywgeFtpKzEyXSwgMTEsIC00MjE4MTU4MzUpO1xuICAgICAgICBjID0gaGgoYywgZCwgYSwgYiwgeFtpKzE1XSwgMTYsICA1MzA3NDI1MjApO1xuICAgICAgICBiID0gaGgoYiwgYywgZCwgYSwgeFtpKyAyXSwgMjMsIC05OTUzMzg2NTEpO1xuICAgICAgICBhID0gaWkoYSwgYiwgYywgZCwgeFtpKyAwXSwgNiAsIC0xOTg2MzA4NDQpO1xuICAgICAgICBkID0gaWkoZCwgYSwgYiwgYywgeFtpKyA3XSwgMTAsICAxMTI2ODkxNDE1KTtcbiAgICAgICAgYyA9IGlpKGMsIGQsIGEsIGIsIHhbaSsxNF0sIDE1LCAtMTQxNjM1NDkwNSk7XG4gICAgICAgIGIgPSBpaShiLCBjLCBkLCBhLCB4W2krIDVdLCAyMSwgLTU3NDM0MDU1KTtcbiAgICAgICAgYSA9IGlpKGEsIGIsIGMsIGQsIHhbaSsxMl0sIDYgLCAgMTcwMDQ4NTU3MSk7XG4gICAgICAgIGQgPSBpaShkLCBhLCBiLCBjLCB4W2krIDNdLCAxMCwgLTE4OTQ5ODY2MDYpO1xuICAgICAgICBjID0gaWkoYywgZCwgYSwgYiwgeFtpKzEwXSwgMTUsIC0xMDUxNTIzKTtcbiAgICAgICAgYiA9IGlpKGIsIGMsIGQsIGEsIHhbaSsgMV0sIDIxLCAtMjA1NDkyMjc5OSk7XG4gICAgICAgIGEgPSBpaShhLCBiLCBjLCBkLCB4W2krIDhdLCA2ICwgIDE4NzMzMTMzNTkpO1xuICAgICAgICBkID0gaWkoZCwgYSwgYiwgYywgeFtpKzE1XSwgMTAsIC0zMDYxMTc0NCk7XG4gICAgICAgIGMgPSBpaShjLCBkLCBhLCBiLCB4W2krIDZdLCAxNSwgLTE1NjAxOTgzODApO1xuICAgICAgICBiID0gaWkoYiwgYywgZCwgYSwgeFtpKzEzXSwgMjEsICAxMzA5MTUxNjQ5KTtcbiAgICAgICAgYSA9IGlpKGEsIGIsIGMsIGQsIHhbaSsgNF0sIDYgLCAtMTQ1NTIzMDcwKTtcbiAgICAgICAgZCA9IGlpKGQsIGEsIGIsIGMsIHhbaSsxMV0sIDEwLCAtMTEyMDIxMDM3OSk7XG4gICAgICAgIGMgPSBpaShjLCBkLCBhLCBiLCB4W2krIDJdLCAxNSwgIDcxODc4NzI1OSk7XG4gICAgICAgIGIgPSBpaShiLCBjLCBkLCBhLCB4W2krIDldLCAyMSwgLTM0MzQ4NTU1MSk7XG5cbiAgICAgICAgYSA9IGFkZG1lKGEsIG9sZGEpO1xuICAgICAgICBiID0gYWRkbWUoYiwgb2xkYik7XG4gICAgICAgIGMgPSBhZGRtZShjLCBvbGRjKTtcbiAgICAgICAgZCA9IGFkZG1lKGQsIG9sZGQpO1xuICAgIH1cblxuICAgIHJldHVybiByaGV4KGEpICsgcmhleChiKSArIHJoZXgoYykgKyByaGV4KGQpO1xufTtcblxudmFyIGhleF9jaHIgPSBcIjAxMjM0NTY3ODlhYmNkZWZcIjtcblxuZnVuY3Rpb24gYml0T1IoYSwgYilcbntcbiAgICB2YXIgbHNiID0gKGEgJiAweDEpIHwgKGIgJiAweDEpO1xuICAgIHZhciBtc2IzMSA9IChhID4+PiAxKSB8IChiID4+PiAxKTtcblxuICAgIHJldHVybiAobXNiMzEgPDwgMSkgfCBsc2I7XG59XG5cbmZ1bmN0aW9uIGJpdFhPUihhLCBiKVxue1xuICAgIHZhciBsc2IgPSAoYSAmIDB4MSkgXiAoYiAmIDB4MSk7XG4gICAgdmFyIG1zYjMxID0gKGEgPj4+IDEpIF4gKGIgPj4+IDEpO1xuXG4gICAgcmV0dXJuIChtc2IzMSA8PCAxKSB8IGxzYjtcbn1cblxuZnVuY3Rpb24gYml0QU5EKGEsIGIpXG57XG4gICAgdmFyIGxzYiA9IChhICYgMHgxKSAmIChiICYgMHgxKTtcbiAgICB2YXIgbXNiMzEgPSAoYSA+Pj4gMSkgJiAoYiA+Pj4gMSk7XG5cbiAgICByZXR1cm4gKG1zYjMxIDw8IDEpIHwgbHNiO1xufVxuXG5mdW5jdGlvbiBhZGRtZSh4LCB5KVxue1xuICAgIHZhciBsc3cgPSAoeCAmIDB4RkZGRikrKHkgJiAweEZGRkYpO1xuICAgIHZhciBtc3cgPSAoeCA+PiAxNikrKHkgPj4gMTYpKyhsc3cgPj4gMTYpO1xuXG4gICAgcmV0dXJuIChtc3cgPDwgMTYpIHwgKGxzdyAmIDB4RkZGRik7XG59XG5cbmZ1bmN0aW9uIHJoZXgobnVtKVxue1xuICAgIHZhciBzdHIgPSBcIlwiO1xuICAgIHZhciBqO1xuXG4gICAgZm9yKGo9MDsgajw9MzsgaisrKVxuICAgICAgICBzdHIgKz0gaGV4X2Noci5jaGFyQXQoKG51bSA+PiAoaiAqIDggKyA0KSkgJiAweDBGKSArIGhleF9jaHIuY2hhckF0KChudW0gPj4gKGogKiA4KSkgJiAweDBGKTtcblxuICAgIHJldHVybiBzdHI7XG59XG5cbmZ1bmN0aW9uIHN0cjJibGtzX01ENShzdHIpXG57XG4gICAgdmFyIG5ibGsgPSAoKHN0ci5sZW5ndGggKyA4KSA+PiA2KSArIDE7XG4gICAgdmFyIGJsa3MgPSBuZXcgQXJyYXkobmJsayAqIDE2KTtcbiAgICB2YXIgaTtcblxuICAgIGZvcihpPTA7IGk8bmJsayAqIDE2OyBpKyspXG4gICAgICAgIGJsa3NbaV0gPSAwO1xuXG4gICAgZm9yKGk9MDsgaTxzdHIubGVuZ3RoOyBpKyspXG4gICAgICAgIGJsa3NbaSA+PiAyXSB8PSBzdHIuY2hhckNvZGVBdChpKSA8PCAoKChzdHIubGVuZ3RoICogOCArIGkpICUgNCkgKiA4KTtcblxuICAgIGJsa3NbaSA+PiAyXSB8PSAweDgwIDw8ICgoKHN0ci5sZW5ndGggKiA4ICsgaSkgJSA0KSAqIDgpO1xuXG4gICAgdmFyIGwgPSBzdHIubGVuZ3RoICogODtcbiAgICBibGtzW25ibGsgKiAxNiAtIDJdID0gKGwgJiAweEZGKTtcbiAgICBibGtzW25ibGsgKiAxNiAtIDJdIHw9ICgobCA+Pj4gOCkgJiAweEZGKSA8PCA4O1xuICAgIGJsa3NbbmJsayAqIDE2IC0gMl0gfD0gKChsID4+PiAxNikgJiAweEZGKSA8PCAxNjtcbiAgICBibGtzW25ibGsgKiAxNiAtIDJdIHw9ICgobCA+Pj4gMjQpICYgMHhGRikgPDwgMjQ7XG5cbiAgICByZXR1cm4gYmxrcztcbn1cblxuZnVuY3Rpb24gcm9sKG51bSwgY250KVxue1xuICAgIHJldHVybiAobnVtIDw8IGNudCkgfCAobnVtID4+PiAoMzIgLSBjbnQpKTtcbn1cblxuZnVuY3Rpb24gY21uKHEsIGEsIGIsIHgsIHMsIHQpXG57XG4gICAgcmV0dXJuIGFkZG1lKHJvbCgoYWRkbWUoYWRkbWUoYSwgcSksIGFkZG1lKHgsIHQpKSksIHMpLCBiKTtcbn1cblxuZnVuY3Rpb24gZmYoYSwgYiwgYywgZCwgeCwgcywgdClcbntcbiAgICByZXR1cm4gY21uKGJpdE9SKGJpdEFORChiLCBjKSwgYml0QU5EKCh+YiksIGQpKSwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIGdnKGEsIGIsIGMsIGQsIHgsIHMsIHQpXG57XG4gICAgcmV0dXJuIGNtbihiaXRPUihiaXRBTkQoYiwgZCksIGJpdEFORChjLCAofmQpKSksIGEsIGIsIHgsIHMsIHQpO1xufVxuXG5mdW5jdGlvbiBoaChhLCBiLCBjLCBkLCB4LCBzLCB0KVxue1xuICAgIHJldHVybiBjbW4oYml0WE9SKGJpdFhPUihiLCBjKSwgZCksIGEsIGIsIHgsIHMsIHQpO1xufVxuXG5mdW5jdGlvbiBpaShhLCBiLCBjLCBkLCB4LCBzLCB0KVxue1xuICAgIHJldHVybiBjbW4oYml0WE9SKGMsIGJpdE9SKGIsICh+ZCkpKSwgYSwgYiwgeCwgcywgdCk7XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/md5-o-matic/lib/md5omatic.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js":
/*!********************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pairwise: function() { return /* binding */ pairwise; }\n/* harmony export */ });\n/* harmony import */ var _util_lift__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/lift */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/util/lift.js\");\n/* harmony import */ var _OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./OperatorSubscriber */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js\");\n\n\nfunction pairwise() {\n    return (0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.operate)(function (source, subscriber) {\n        var prev;\n        var hasPrev = false;\n        source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__.createOperatorSubscriber)(subscriber, function (value) {\n            var p = prev;\n            prev = value;\n            hasPrev && subscriber.next([p, value]);\n            hasPrev = true;\n        }));\n    });\n}\n//# sourceMappingURL=pairwise.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvcGFpcndpc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVDO0FBQ3lCO0FBQ3pEO0FBQ1AsV0FBVyxtREFBTztBQUNsQjtBQUNBO0FBQ0EseUJBQXlCLDZFQUF3QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvb3BlcmF0b3JzL3BhaXJ3aXNlLmpzPzI3NTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgb3BlcmF0ZSB9IGZyb20gJy4uL3V0aWwvbGlmdCc7XG5pbXBvcnQgeyBjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIgfSBmcm9tICcuL09wZXJhdG9yU3Vic2NyaWJlcic7XG5leHBvcnQgZnVuY3Rpb24gcGFpcndpc2UoKSB7XG4gICAgcmV0dXJuIG9wZXJhdGUoZnVuY3Rpb24gKHNvdXJjZSwgc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgcHJldjtcbiAgICAgICAgdmFyIGhhc1ByZXYgPSBmYWxzZTtcbiAgICAgICAgc291cmNlLnN1YnNjcmliZShjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIoc3Vic2NyaWJlciwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgcCA9IHByZXY7XG4gICAgICAgICAgICBwcmV2ID0gdmFsdWU7XG4gICAgICAgICAgICBoYXNQcmV2ICYmIHN1YnNjcmliZXIubmV4dChbcCwgdmFsdWVdKTtcbiAgICAgICAgICAgIGhhc1ByZXYgPSB0cnVlO1xuICAgICAgICB9KSk7XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWlyd2lzZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/sanity/lib/_chunks/index-ccbd3c57.js":
/*!***********************************************************!*\
  !*** ./node_modules/sanity/lib/_chunks/index-ccbd3c57.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DocumentPane: function() { return /* binding */ DocumentPane; },\n/* harmony export */   index: function() { return /* binding */ index; },\n/* harmony export */   useDeskToolSetting: function() { return /* binding */ useDeskToolSetting; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _sanity_ui__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @sanity/ui */ \"(app-pages-browser)/./node_modules/@sanity/ui/dist/index.esm.js\");\n/* harmony import */ var _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./desk-9ccee866.js */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks/desk-9ccee866.js\");\n/* harmony import */ var lodash_omit_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/omit.js */ \"(app-pages-browser)/./node_modules/lodash/omit.js\");\n/* harmony import */ var lodash_omit_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_omit_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/util/isObservable.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/from.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/concat.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/never.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/merge.js\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! nanoid */ \"(app-pages-browser)/./node_modules/nanoid/index.browser.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/publishReplay.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/refCount.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/startWith.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/scan.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/mapTo.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/delay.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/tap.js\");\n/* harmony import */ var sanity__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! sanity */ \"(app-pages-browser)/./node_modules/sanity/lib/index.esm.js\");\n/* harmony import */ var _sanity_generate_help_url__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @sanity/generate-help-url */ \"(app-pages-browser)/./node_modules/@sanity/generate-help-url/dist/generate-help-url.esm.js\");\n/* harmony import */ var lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/isEqual.js */ \"(app-pages-browser)/./node_modules/lodash/isEqual.js\");\n/* harmony import */ var lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var sanity_router__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! sanity/router */ \"(app-pages-browser)/./node_modules/sanity/lib/router.esm.js\");\n/* harmony import */ var _sanity_uuid__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! @sanity/uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/esm-browser/v4.js\");\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! styled-components */ \"(app-pages-browser)/./node_modules/styled-components/dist/styled-components.browser.esm.js\");\n/* harmony import */ var _sanity_icons__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! @sanity/icons */ \"(app-pages-browser)/./node_modules/@sanity/icons/dist/index.js\");\n/* harmony import */ var lodash_camelCase_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/camelCase.js */ \"(app-pages-browser)/./node_modules/lodash/camelCase.js\");\n/* harmony import */ var lodash_camelCase_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_camelCase_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var speakingurl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! speakingurl */ \"(app-pages-browser)/./node_modules/speakingurl/index.js\");\n/* harmony import */ var speakingurl__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(speakingurl__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var lodash_uniq_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash/uniq.js */ \"(app-pages-browser)/./node_modules/lodash/uniq.js\");\n/* harmony import */ var lodash_uniq_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash_uniq_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var lodash_kebabCase_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash/kebabCase.js */ \"(app-pages-browser)/./node_modules/lodash/kebabCase.js\");\n/* harmony import */ var lodash_kebabCase_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash_kebabCase_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var lodash_pickBy_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! lodash/pickBy.js */ \"(app-pages-browser)/./node_modules/lodash/pickBy.js\");\n/* harmony import */ var lodash_pickBy_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(lodash_pickBy_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var lodash_find_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! lodash/find.js */ \"(app-pages-browser)/./node_modules/lodash/find.js\");\n/* harmony import */ var lodash_find_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(lodash_find_js__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var lodash_uniqueId_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! lodash/uniqueId.js */ \"(app-pages-browser)/./node_modules/lodash/uniqueId.js\");\n/* harmony import */ var lodash_uniqueId_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(lodash_uniqueId_js__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var react_is__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-is */ \"(app-pages-browser)/./node_modules/react-is/index.js\");\n/* harmony import */ var lodash_startCase_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! lodash/startCase.js */ \"(app-pages-browser)/./node_modules/lodash/startCase.js\");\n/* harmony import */ var lodash_startCase_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(lodash_startCase_js__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var is_hotkey__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! is-hotkey */ \"(app-pages-browser)/./node_modules/is-hotkey/lib/index.js\");\n/* harmony import */ var _sanity_util_paths__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @sanity/util/paths */ \"(app-pages-browser)/./node_modules/@sanity/util/lib/paths.esm.js\");\n/* harmony import */ var lodash_isNumber_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! lodash/isNumber.js */ \"(app-pages-browser)/./node_modules/lodash/isNumber.js\");\n/* harmony import */ var lodash_isNumber_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(lodash_isNumber_js__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var lodash_isString_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! lodash/isString.js */ \"(app-pages-browser)/./node_modules/lodash/isString.js\");\n/* harmony import */ var lodash_isString_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(lodash_isString_js__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var react_rx__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! react-rx */ \"(app-pages-browser)/./node_modules/react-rx/dist/esm/index.js\");\n/* harmony import */ var _rexxars_react_json_inspector__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @rexxars/react-json-inspector */ \"(app-pages-browser)/./node_modules/@rexxars/react-json-inspector/json-inspector.js\");\n/* harmony import */ var _rexxars_react_json_inspector__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_rexxars_react_json_inspector__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var hashlru__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! hashlru */ \"(app-pages-browser)/./node_modules/hashlru/index.js\");\n/* harmony import */ var hashlru__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(hashlru__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var framer_motion__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! framer-motion */ \"(app-pages-browser)/./node_modules/framer-motion/dist/es/render/dom/motion.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst RenderActionCollectionState = props => {\n  const {\n    actions,\n    children,\n    actionProps,\n    onActionComplete\n  } = props;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_20__.GetHookCollectionState, {\n    onReset: onActionComplete,\n    hooks: actions,\n    args: actionProps,\n    children\n  });\n};\nconst RenderBadgeCollectionState = props => {\n  const {\n    badges,\n    children,\n    badgeProps,\n    ...rest\n  } = props;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_20__.GetHookCollectionState, {\n    ...rest,\n    hooks: badges,\n    args: badgeProps,\n    children\n  });\n};\nconst emptyArray = [];\nfunction PaneRouterProvider(props) {\n  const {\n    children,\n    flatIndex,\n    index,\n    params,\n    payload,\n    siblingIndex\n  } = props;\n  const {\n    navigate,\n    navigateIntent\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_21__.useRouter)();\n  const routerState = (0,sanity_router__WEBPACK_IMPORTED_MODULE_21__.useRouterState)();\n  const {\n    panes,\n    expand\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.usePaneLayout)();\n  const routerPaneGroups = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => (routerState == null ? void 0 : routerState.panes) || emptyArray, [routerState == null ? void 0 : routerState.panes]);\n  const lastPane = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => panes == null ? void 0 : panes[panes.length - 2], [panes]);\n  const groupIndex = index - 1;\n  const modifyCurrentGroup = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(modifier => {\n    const currentGroup = routerPaneGroups[groupIndex] || [];\n    const currentItem = currentGroup[siblingIndex];\n    const nextGroup = modifier(currentGroup, currentItem);\n    const nextPanes = [...routerPaneGroups.slice(0, groupIndex), nextGroup, ...routerPaneGroups.slice(groupIndex + 1)];\n    const nextRouterState = {\n      ...(routerState || {}),\n      panes: nextPanes\n    };\n    setTimeout(() => navigate(nextRouterState), 0);\n    return nextRouterState;\n  }, [groupIndex, navigate, routerPaneGroups, routerState, siblingIndex]);\n  const setPayload = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(nextPayload => {\n    modifyCurrentGroup((siblings, item) => [...siblings.slice(0, siblingIndex), {\n      ...item,\n      payload: nextPayload\n    }, ...siblings.slice(siblingIndex + 1)]);\n  }, [modifyCurrentGroup, siblingIndex]);\n  const setParams = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(nextParams => {\n    modifyCurrentGroup((siblings, item) => [...siblings.slice(0, siblingIndex), {\n      ...item,\n      params: nextParams\n    }, ...siblings.slice(siblingIndex + 1)]);\n  }, [modifyCurrentGroup, siblingIndex]);\n  const handleEditReference = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(_ref => {\n    let {\n      id,\n      parentRefPath,\n      type,\n      template\n    } = _ref;\n    navigate({\n      panes: [...routerPaneGroups.slice(0, groupIndex + 1), [{\n        id,\n        params: {\n          template: template.id,\n          parentRefPath: (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_14__.toString)(parentRefPath),\n          type\n        },\n        payload: template.params\n      }]]\n    });\n  }, [groupIndex, navigate, routerPaneGroups]);\n  const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => ({\n    // Zero-based index (position) of pane, visually\n    index: flatIndex,\n    // Zero-based index of pane group (within URL structure)\n    groupIndex,\n    // Zero-based index of pane within sibling group\n    siblingIndex,\n    // Payload of the current pane\n    payload,\n    // Params of the current pane\n    params,\n    // Whether or not the pane has any siblings (within the same group)\n    hasGroupSiblings: routerPaneGroups[groupIndex] ? routerPaneGroups[groupIndex].length > 1 : false,\n    // The length of the current group\n    groupLength: routerPaneGroups[groupIndex] ? routerPaneGroups[groupIndex].length : 0,\n    // Current router state for the \"panes\" property\n    routerPanesState: routerPaneGroups,\n    // Curried StateLink that passes the correct state automatically\n    ChildLink: _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.ChildLink,\n    // Curried StateLink that pops off the last pane group\n    BackLink: _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.BackLink,\n    // A specialized `ChildLink` that takes in the needed props to open a\n    // referenced document to the right\n    ReferenceChildLink: _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.ReferenceChildLink,\n    // Similar to `ReferenceChildLink` expect without the wrapping component\n    handleEditReference,\n    // Curried StateLink that passed the correct state, but merges params/payload\n    ParameterizedLink: _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.ParameterizedLink,\n    // Replaces the current pane with a new one\n    replaceCurrent: function () {\n      let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      modifyCurrentGroup(() => [{\n        id: opts.id || \"\",\n        payload: opts.payload,\n        params: opts.params || {}\n      }]);\n    },\n    // Removes the current pane from the group\n    closeCurrent: () => {\n      modifyCurrentGroup((siblings, item) => siblings.length > 1 ? siblings.filter(sibling => sibling !== item) : siblings);\n    },\n    // Removes all panes to the right including current\n    closeCurrentAndAfter: function () {\n      let expandLast = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (expandLast && lastPane) {\n        expand(lastPane.element);\n      }\n      navigate({\n        panes: [...routerPaneGroups.slice(0, groupIndex)]\n      }, {\n        replace: true\n      });\n    },\n    // Duplicate the current pane, with optional overrides for payload, parameters\n    duplicateCurrent: options => {\n      modifyCurrentGroup((siblings, item) => {\n        const duplicatedItem = {\n          ...item,\n          payload: (options == null ? void 0 : options.payload) || item.payload,\n          params: (options == null ? void 0 : options.params) || item.params\n        };\n        return [...siblings.slice(0, siblingIndex), duplicatedItem, ...siblings.slice(siblingIndex)];\n      });\n    },\n    // Set the view for the current pane\n    setView: viewId => {\n      const restParams = lodash_omit_js__WEBPACK_IMPORTED_MODULE_2___default()(params, \"view\");\n      return setParams(viewId ? {\n        ...restParams,\n        view: viewId\n      } : restParams);\n    },\n    // Set the parameters for the current pane\n    setParams,\n    // Set the payload for the current pane\n    setPayload,\n    // Proxied navigation to a given intent. Consider just exposing `router` instead?\n    navigateIntent\n  }), [flatIndex, groupIndex, siblingIndex, payload, params, routerPaneGroups, handleEditReference, setParams, setPayload, navigateIntent, modifyCurrentGroup, lastPane, navigate, expand]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PaneRouterContext.Provider, {\n    value: ctx,\n    children\n  });\n}\nfunction _calcPaneResize(cache, left, right, deltaX) {\n  var _a, _b;\n  const sum = {\n    flex: cache.left.flex + cache.right.flex,\n    width: cache.left.width + cache.right.width\n  };\n  const leftMinWidth = (_a = left.minWidth) != null ? _a : _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PANE_DEFAULT_MIN_WIDTH;\n  const rightMinWidth = (_b = right.minWidth) != null ? _b : _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PANE_DEFAULT_MIN_WIDTH;\n  const leftMaxWidth = Math.min(left.maxWidth || Infinity, sum.width - rightMinWidth);\n  const rightMaxWidth = Math.min(right.maxWidth || Infinity, sum.width - leftMinWidth);\n  let minDeltaX = leftMinWidth - cache.left.width;\n  const rightMinDeltaX = cache.right.width - rightMaxWidth;\n  if (minDeltaX < rightMinDeltaX) {\n    minDeltaX = rightMinDeltaX;\n  }\n  let maxDeltaX = cache.right.width - rightMinWidth;\n  const leftMaxDeltaX = leftMaxWidth - cache.left.width;\n  if (maxDeltaX > leftMaxDeltaX) {\n    maxDeltaX = leftMaxDeltaX;\n  }\n  const _deltaX = Math.min(Math.max(deltaX, minDeltaX), maxDeltaX);\n  const leftW = cache.left.width + _deltaX;\n  const rightW = cache.right.width - _deltaX;\n  const leftFlex = leftW / sum.width * sum.flex;\n  const rightFlex = rightW / sum.width * sum.flex;\n  return {\n    leftFlex,\n    leftW,\n    rightFlex,\n    rightW\n  };\n}\nfunction _getDOMPath(rootElement, el) {\n  const path = [];\n  let e = el;\n  while (e !== rootElement) {\n    const parentElement = e.parentElement;\n    if (!parentElement) return path;\n    const children = Array.from(parentElement.childNodes);\n    const index = children.indexOf(e);\n    path.unshift(index);\n    if (parentElement === rootElement) {\n      return path;\n    }\n    e = parentElement;\n  }\n  return path;\n}\nconst EMPTY_PATH = [];\nfunction _sortElements(rootElement, elements) {\n  const map = /* @__PURE__ */new WeakMap();\n  for (const element of elements) {\n    map.set(element, _getDOMPath(rootElement, element));\n  }\n  const _sortByElementPath = (a, b) => {\n    const _a = map.get(a) || EMPTY_PATH;\n    const _b = map.get(b) || EMPTY_PATH;\n    const len = Math.max(_a.length, _b.length);\n    for (let i = 0; i < len; i += 1) {\n      const aIndex = _a[i] || -1;\n      const bIndex = _b[i] || -1;\n      if (aIndex !== bIndex) {\n        return aIndex - bIndex;\n      }\n    }\n    return 0;\n  };\n  elements.sort(_sortByElementPath);\n}\nfunction createPaneLayoutController() {\n  const observers = [];\n  const elements = [];\n  const optionsMap = /* @__PURE__ */new WeakMap();\n  const userCollapsedElementSet = /* @__PURE__ */new Set();\n  const cache = {};\n  let rootElement = null;\n  let rootWidth = 0;\n  let expandedElement = null;\n  let resizeDataMap = /* @__PURE__ */new Map();\n  let resizing = false;\n  function collapse(element) {\n    userCollapsedElementSet.add(element);\n    if (expandedElement === element) {\n      expandedElement = null;\n    }\n    _notifyObservers();\n  }\n  function expand(element) {\n    userCollapsedElementSet.delete(element);\n    expandedElement = element;\n    _notifyObservers();\n  }\n  function mount(element, options) {\n    optionsMap.set(element, {\n      ...options,\n      original: options\n    });\n    elements.push(element);\n    if (rootElement) {\n      _sortElements(rootElement, elements);\n    }\n    expand(element);\n    return () => {\n      const idx = elements.indexOf(element);\n      if (idx > -1) {\n        elements.splice(idx, 1);\n      }\n      optionsMap.delete(element);\n      _notifyObservers();\n    };\n  }\n  function resize(type, leftElement, deltaX) {\n    var _a, _b, _c, _d;\n    const leftIndex = elements.indexOf(leftElement);\n    const leftOptions = optionsMap.get(leftElement);\n    if (!leftOptions) return;\n    const rightElement = elements[leftIndex + 1];\n    const rightOptions = optionsMap.get(rightElement);\n    if (!rightOptions) return;\n    if (type === \"start\") {\n      resizing = true;\n      cache.left = {\n        element: leftElement,\n        flex: leftOptions.flex || 1,\n        width: leftElement.offsetWidth\n      };\n      cache.right = {\n        element: rightElement,\n        flex: rightOptions.flex || 1,\n        width: rightElement.offsetWidth\n      };\n      _notifyObservers();\n    }\n    if (type === \"move\" && cache.left && cache.right) {\n      resizeDataMap = /* @__PURE__ */new Map();\n      const {\n        leftW,\n        rightW,\n        leftFlex,\n        rightFlex\n      } = _calcPaneResize(cache, leftOptions, rightOptions, deltaX);\n      resizeDataMap.set(leftElement, {\n        flex: leftFlex,\n        width: leftW\n      });\n      resizeDataMap.set(rightElement, {\n        flex: rightFlex,\n        width: rightW\n      });\n      _notifyObservers();\n    }\n    if (type === \"end\") {\n      resizing = false;\n      const leftResizeData = resizeDataMap.get(leftElement);\n      const rightResizeData = resizeDataMap.get(rightElement);\n      optionsMap.set(leftElement, {\n        ...leftOptions,\n        currentMinWidth: 0,\n        currentMaxWidth: (_a = leftOptions.maxWidth) != null ? _a : Infinity,\n        flex: (_b = leftResizeData == null ? void 0 : leftResizeData.flex) != null ? _b : leftOptions.flex\n      });\n      optionsMap.set(rightElement, {\n        ...rightOptions,\n        currentMinWidth: 0,\n        currentMaxWidth: (_c = leftOptions.maxWidth) != null ? _c : Infinity,\n        flex: (_d = rightResizeData == null ? void 0 : rightResizeData.flex) != null ? _d : rightOptions.flex\n      });\n      resizeDataMap = /* @__PURE__ */new Map();\n      delete cache.left;\n      delete cache.right;\n      _notifyObservers();\n    }\n  }\n  function setRootElement(nextRootElement) {\n    rootElement = nextRootElement;\n  }\n  function setRootWidth(nextRootWidth) {\n    rootWidth = nextRootWidth;\n    _notifyObservers();\n  }\n  function subscribe(observer) {\n    observers.push(observer);\n    return () => {\n      const idx = observers.push(observer);\n      if (idx > -1) {\n        observers.splice(idx, 1);\n      }\n    };\n  }\n  return {\n    collapse,\n    expand,\n    mount,\n    resize,\n    setRootElement,\n    setRootWidth,\n    subscribe\n  };\n  function _notifyObservers() {\n    var _a, _b, _c, _d;\n    if (!rootWidth) return;\n    const _elements = [];\n    for (const element of elements) {\n      if (element !== expandedElement) {\n        _elements.unshift(element);\n      }\n    }\n    if (expandedElement) {\n      _elements.unshift(expandedElement);\n    }\n    const dataMap = /* @__PURE__ */new WeakMap();\n    const len = _elements.length;\n    const lastElement = _elements[0];\n    const collapsedWidth = (len - 1) * _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PANE_COLLAPSED_WIDTH;\n    let remaingWidth = rootWidth - collapsedWidth;\n    for (const element of _elements) {\n      const options = optionsMap.get(element);\n      if (!options) {\n        continue;\n      }\n      const minWidth = options.currentMinWidth || options.minWidth || _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PANE_DEFAULT_MIN_WIDTH;\n      const isLast = element === lastElement;\n      const userCollapsed = userCollapsedElementSet.has(element);\n      const sizeCollapsed = minWidth > remaingWidth;\n      const collapsed = isLast ? false : userCollapsed || sizeCollapsed;\n      const resizeData = resizeDataMap.get(element);\n      dataMap.set(element, {\n        element,\n        collapsed,\n        currentMinWidth: (_a = resizeData == null ? void 0 : resizeData.width) != null ? _a : options.currentMinWidth,\n        currentMaxWidth: (_b = resizeData == null ? void 0 : resizeData.width) != null ? _b : options.currentMaxWidth,\n        flex: (_d = (_c = resizeData == null ? void 0 : resizeData.flex) != null ? _c : options.flex) != null ? _d : 1\n      });\n      if (collapsed) {\n        remaingWidth -= _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PANE_COLLAPSED_WIDTH;\n      } else {\n        remaingWidth -= minWidth - _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PANE_COLLAPSED_WIDTH;\n      }\n    }\n    const panes = [];\n    for (const element of elements) {\n      const data = dataMap.get(element);\n      if (data) panes.push(data);\n    }\n    for (const observer of observers) {\n      observer({\n        expandedElement: expandedElement || elements[elements.length - 1] || null,\n        panes,\n        resizing\n      });\n    }\n  }\n}\nfunction PaneLayout(props) {\n  const {\n    children,\n    minWidth,\n    onCollapse,\n    onExpand,\n    ...restProps\n  } = props;\n  const controller = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => createPaneLayoutController(), []);\n  const [rootElement, setRootElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const rootRect = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.useElementRect)(rootElement);\n  const width = (rootRect == null ? void 0 : rootRect.width) || 0;\n  const collapsed = width === void 0 || !minWidth ? void 0 : width < minWidth;\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n    expandedElement: null,\n    panes: [],\n    resizing: false\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => controller.setRootElement(rootElement), [controller, rootElement]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => controller.setRootWidth(width), [controller, width]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => controller.subscribe(setState), [controller]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (collapsed === void 0) return;\n    if (collapsed && onCollapse) onCollapse();\n    if (!collapsed && onExpand) onExpand();\n  }, [collapsed, onCollapse, onExpand]);\n  const paneLayout = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => ({\n    collapse: controller.collapse,\n    collapsed,\n    expand: controller.expand,\n    expandedElement: state.expandedElement,\n    mount: controller.mount,\n    panes: state.panes,\n    resize: controller.resize,\n    resizing: state.resizing\n  }), [collapsed, controller, state.expandedElement, state.panes, state.resizing]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PaneLayoutContext.Provider, {\n    value: paneLayout,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.Root, {\n      \"data-ui\": \"PaneLayout\",\n      ...restProps,\n      \"data-collapsed\": collapsed ? \"\" : void 0,\n      \"data-resizing\": state.resizing ? \"\" : void 0,\n      \"data-mounted\": width ? \"\" : void 0,\n      ref: setRootElement,\n      children\n    })\n  });\n}\nfunction DocumentInspectorPanel(props) {\n  const {\n    documentId,\n    documentType,\n    flex\n  } = props;\n  const {\n    collapsed\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.usePane)();\n  const {\n    closeInspector,\n    inspector\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const {\n    features\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDeskTool)();\n  const handleClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    if (inspector) closeInspector(inspector.name);\n  }, [closeInspector, inspector]);\n  if (collapsed || !inspector) return null;\n  const element = (0,react__WEBPACK_IMPORTED_MODULE_1__.createElement)(inspector.component, {\n    onClose: handleClose,\n    documentId,\n    documentType\n  });\n  if (features.resizablePanes) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.Resizable, {\n      as: \"aside\",\n      \"data-ui\": \"DocumentInspectorPanel\",\n      flex,\n      maxWidth: _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.DOCUMENT_INSPECTOR_MAX_WIDTH,\n      minWidth: _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.DOCUMENT_INSPECTOR_MIN_WIDTH,\n      children: element\n    });\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n    as: \"aside\",\n    \"data-ui\": \"DocumentInspectorPanel\",\n    flex,\n    children: element\n  });\n}\nvar __defProp$c = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp$c(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass PaneResolutionError extends Error {\n  constructor(_ref2) {\n    let {\n      message,\n      context,\n      helpId,\n      cause\n    } = _ref2;\n    super(message);\n    __publicField(this, \"cause\");\n    __publicField(this, \"context\");\n    __publicField(this, \"helpId\");\n    this.context = context;\n    this.helpId = helpId;\n    this.cause = cause;\n  }\n}\nconst randomIdCache = /* @__PURE__ */new WeakMap();\nfunction assignId(obj) {\n  const cachedValue = randomIdCache.get(obj);\n  if (cachedValue) return cachedValue;\n  const id = (0,nanoid__WEBPACK_IMPORTED_MODULE_24__.nanoid)();\n  randomIdCache.set(obj, id);\n  return id;\n}\nconst bindCache = /* @__PURE__ */new WeakMap();\nfunction memoBind(obj, methodKey) {\n  const boundMethods = bindCache.get(obj) || /* @__PURE__ */new Map();\n  if (boundMethods) {\n    const bound2 = boundMethods.get(methodKey);\n    if (bound2) return bound2;\n  }\n  const method = obj[methodKey];\n  if (typeof method !== \"function\") {\n    throw new Error(\"Expected property `\".concat(methodKey, \"` to be a function but got \").concat(typeof method, \" instead.\"));\n  }\n  const bound = method.bind(obj);\n  boundMethods.set(methodKey, bound);\n  bindCache.set(obj, boundMethods);\n  return bound;\n}\nconst isPromise = thing => {\n  return !!thing && typeof (thing == null ? void 0 : thing.then) === \"function\";\n};\nconst isSerializable = thing => {\n  if (!(0,sanity__WEBPACK_IMPORTED_MODULE_20__.isRecord)(thing)) return false;\n  return typeof thing.serialize === \"function\";\n};\nconst rethrowWithPaneResolutionErrors = next => (unresolvedPane, context, flatIndex) => {\n  try {\n    return next(unresolvedPane, context, flatIndex);\n  } catch (e) {\n    if (e instanceof PaneResolutionError) {\n      throw e;\n    }\n    throw new PaneResolutionError({\n      message: typeof (e == null ? void 0 : e.message) === \"string\" ? e.message : \"\",\n      context,\n      cause: e\n    });\n  }\n};\nconst wrapWithPublishReplay = next => function () {\n  return next(...arguments).pipe(\n  // need to add publishReplay + refCount to ensure new subscribers always\n  // get an emission. without this, memoized observables may get stuck\n  // waiting for their first emissions resulting in a loading pane\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_25__.publishReplay)(1), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.refCount)());\n};\nfunction createPaneResolver(middleware) {\n  const resolvePane = rethrowWithPaneResolutionErrors(wrapWithPublishReplay(middleware((unresolvedPane, context, flatIndex) => {\n    if (!unresolvedPane) {\n      throw new PaneResolutionError({\n        message: \"Pane returned no child\",\n        context,\n        helpId: \"structure-item-returned-no-child\"\n      });\n    }\n    if (isPromise(unresolvedPane) || (0,rxjs__WEBPACK_IMPORTED_MODULE_27__.isObservable)(unresolvedPane)) {\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_28__.from)(unresolvedPane).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_29__.switchMap)(result => resolvePane(result, context, flatIndex)));\n    }\n    if (isSerializable(unresolvedPane)) {\n      return resolvePane(unresolvedPane.serialize(context), context, flatIndex);\n    }\n    if (typeof unresolvedPane === \"function\") {\n      return resolvePane(unresolvedPane(context.id, context), context, flatIndex);\n    }\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_30__.of)(unresolvedPane);\n  })));\n  return resolvePane;\n}\nasync function resolveIntent(options) {\n  const resolvedPaneCache = /* @__PURE__ */new Map();\n  const memoize = nextFn => (unresolvedPane, context, flatIndex) => {\n    const key = unresolvedPane && \"\".concat(assignId(unresolvedPane), \"-\").concat(context.path.join(\"__\"));\n    const cachedResolvedPane = key && resolvedPaneCache.get(key);\n    if (cachedResolvedPane) return cachedResolvedPane;\n    const result = nextFn(unresolvedPane, context, flatIndex);\n    if (key) resolvedPaneCache.set(key, result);\n    return result;\n  };\n  const resolvePane = createPaneResolver(memoize);\n  const fallbackEditorPanes = [[{\n    id: \"__edit__\".concat(options.params.id),\n    params: {\n      ...lodash_omit_js__WEBPACK_IMPORTED_MODULE_2___default()(options.params, [\"id\"]),\n      type: options.params.type\n    },\n    payload: options.payload\n  }]];\n  async function traverse(_ref3) {\n    let {\n      currentId,\n      flatIndex,\n      intent,\n      params,\n      parent,\n      path,\n      payload,\n      unresolvedPane,\n      levelIndex,\n      structureContext\n    } = _ref3;\n    var _a;\n    if (!unresolvedPane) return [];\n    const {\n      id: targetId,\n      type: schemaTypeName,\n      ...otherParams\n    } = params;\n    const context = {\n      id: currentId,\n      splitIndex: 0,\n      parent,\n      path,\n      index: flatIndex,\n      params: {},\n      payload: void 0,\n      structureContext\n    };\n    const resolvedPane = await (0,rxjs__WEBPACK_IMPORTED_MODULE_31__.firstValueFrom)(resolvePane(unresolvedPane, context, flatIndex));\n    if (resolvedPane.type === \"document\" && resolvedPane.id === targetId) {\n      return [{\n        panes: [...path.slice(0, path.length - 1).map(i => [{\n          id: i\n        }]), [{\n          id: targetId,\n          params: otherParams,\n          payload\n        }]],\n        depthIndex: path.length,\n        levelIndex\n      }];\n    }\n    if (\n    // if the resolve pane's `canHandleIntent` returns true, then resolve\n    ((_a = resolvedPane.canHandleIntent) == null ? void 0 : _a.call(resolvedPane, intent, params, {\n      pane: resolvedPane,\n      index: flatIndex\n    })) ||\n    // if the pane's `canHandleIntent` did not return true, then match against\n    // this default case. we will resolve the intent if:\n    resolvedPane.type === \"documentList\" &&\n    // 1. the schema type matches (this required for the document to render)\n    resolvedPane.schemaTypeName === schemaTypeName &&\n    // 2. the filter is the default filter.\n    //\n    // NOTE: this case is to prevent false positive matches where the user\n    // has configured a more specific filter for a particular type. In that\n    // case, the user can implement their own `canHandleIntent` function\n    resolvedPane.options.filter === \"_type == $type\") {\n      return [{\n        panes: [\n        // map the current path to router panes\n        ...path.map(id => [{\n          id\n        }]),\n        // then augment with the intents IDs and params\n        [{\n          id: params.id,\n          params: otherParams,\n          payload\n        }]],\n        depthIndex: path.length,\n        levelIndex\n      }];\n    }\n    if (resolvedPane.type === \"list\" && resolvedPane.child && resolvedPane.items) {\n      return (await Promise.all(resolvedPane.items.map((item, nextLevelIndex) => {\n        if (item.type === \"divider\") return Promise.resolve([]);\n        return traverse({\n          currentId: item._id || item.id,\n          flatIndex: flatIndex + 1,\n          intent,\n          params,\n          parent: resolvedPane,\n          path: [...path, item.id],\n          payload,\n          unresolvedPane: typeof resolvedPane.child === \"function\" ? memoBind(resolvedPane, \"child\") : resolvedPane.child,\n          levelIndex: nextLevelIndex,\n          structureContext\n        });\n      }))).flat();\n    }\n    return [];\n  }\n  const matchingPanes = await traverse({\n    currentId: \"root\",\n    flatIndex: 0,\n    levelIndex: 0,\n    intent: options.intent,\n    params: options.params,\n    parent: null,\n    path: [],\n    payload: options.payload,\n    unresolvedPane: options.rootPaneNode,\n    structureContext: options.structureContext\n  });\n  const closestPaneToRoot = matchingPanes.sort((a, b) => {\n    if (a.depthIndex === b.depthIndex) return a.levelIndex - b.levelIndex;\n    return a.depthIndex - b.depthIndex;\n  })[0];\n  if (closestPaneToRoot) {\n    return closestPaneToRoot.panes;\n  }\n  return fallbackEditorPanes;\n}\nconst fallbackEditorChild = (nodeId, context) => {\n  const id = nodeId.replace(/^__edit__/, \"\");\n  const {\n    params,\n    payload,\n    structureContext: {\n      resolveDocumentNode\n    }\n  } = context;\n  const {\n    type,\n    template\n  } = params;\n  if (!type) {\n    throw new Error(\"Document type for document with ID \".concat(id, \" was not provided in the router params.\"));\n  }\n  let defaultDocumentBuilder = resolveDocumentNode({\n    schemaType: type,\n    documentId: id\n  }).id(\"editor\");\n  if (template) {\n    defaultDocumentBuilder = defaultDocumentBuilder.initialValueTemplate(template, payload);\n  }\n  return defaultDocumentBuilder.serialize();\n};\nfunction hashContext(context) {\n  var _a, _b;\n  return \"contextHash(\".concat(JSON.stringify({\n    id: context.id,\n    parentId: parent && assignId(parent),\n    path: context.path,\n    index: context.index,\n    splitIndex: context.splitIndex,\n    serializeOptionsIndex: (_a = context.serializeOptions) == null ? void 0 : _a.index,\n    serializeOptionsPath: (_b = context.serializeOptions) == null ? void 0 : _b.path\n  }), \")\");\n}\nconst hashResolvedPaneMeta = meta => {\n  const normalized = {\n    type: meta.type,\n    id: meta.routerPaneSibling.id,\n    params: meta.routerPaneSibling.params || {},\n    payload: meta.routerPaneSibling.payload || null,\n    flatIndex: meta.flatIndex,\n    groupIndex: meta.groupIndex,\n    siblingIndex: meta.siblingIndex,\n    path: meta.path,\n    paneNode: meta.type === \"resolvedMeta\" ? assignId(meta.paneNode) : null\n  };\n  return \"metaHash(\".concat(JSON.stringify(normalized), \")\");\n};\nfunction resolvePaneTree(_ref4) {\n  let {\n    unresolvedPane,\n    flattenedRouterPanes,\n    parent: parent2,\n    path,\n    resolvePane,\n    structureContext\n  } = _ref4;\n  const [current, ...rest] = flattenedRouterPanes;\n  const next = rest[0];\n  const context = {\n    id: current.routerPaneSibling.id,\n    splitIndex: current.siblingIndex,\n    parent: parent2,\n    path: [...path, current.routerPaneSibling.id],\n    index: current.flatIndex,\n    params: current.routerPaneSibling.params || {},\n    payload: current.routerPaneSibling.payload,\n    structureContext\n  };\n  try {\n    return resolvePane(unresolvedPane, context, current.flatIndex).pipe(\n    // this switch map receives a resolved pane\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_29__.switchMap)(paneNode => {\n      const resolvedPaneMeta = {\n        type: \"resolvedMeta\",\n        ...current,\n        paneNode,\n        path: context.path\n      };\n      const loadingPanes = rest.map((i, restIndex) => {\n        const loadingPanePath = [...context.path, ...rest.slice(restIndex).map((_, currentIndex) => \"[\".concat(i.flatIndex + currentIndex, \"]\"))];\n        const loadingPane = {\n          type: \"loading\",\n          path: loadingPanePath,\n          paneNode: null,\n          ...i\n        };\n        return loadingPane;\n      });\n      if (!rest.length) {\n        return (0,rxjs__WEBPACK_IMPORTED_MODULE_30__.of)([resolvedPaneMeta]);\n      }\n      let nextStream;\n      if (\n      // the fallback editor case\n      next == null ? void 0 : next.routerPaneSibling.id.startsWith(\"__edit__\")) {\n        nextStream = resolvePaneTree({\n          unresolvedPane: fallbackEditorChild,\n          flattenedRouterPanes: rest,\n          parent: parent2,\n          path: context.path,\n          resolvePane,\n          structureContext\n        });\n      } else if (current.groupIndex === (next == null ? void 0 : next.groupIndex)) {\n        nextStream = resolvePaneTree({\n          unresolvedPane,\n          flattenedRouterPanes: rest,\n          parent: parent2,\n          path,\n          resolvePane,\n          structureContext\n        });\n      } else {\n        nextStream = resolvePaneTree({\n          unresolvedPane: typeof paneNode.child === \"function\" ? memoBind(paneNode, \"child\") : paneNode.child,\n          flattenedRouterPanes: rest,\n          parent: paneNode,\n          path: context.path,\n          resolvePane,\n          structureContext\n        });\n      }\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_32__.concat)(\n      // we emit the loading panes first in a concat (this emits immediately)\n      (0,rxjs__WEBPACK_IMPORTED_MODULE_30__.of)([resolvedPaneMeta, ...loadingPanes]),\n      // then whenever the next stream is done, the results will be combined.\n      nextStream.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_33__.map)(nextResolvedPanes => [resolvedPaneMeta, ...nextResolvedPanes])));\n    }));\n  } catch (e) {\n    if (e instanceof PaneResolutionError) {\n      if (e.context) {\n        console.warn(\"Pane resolution error at index \".concat(e.context.index).concat(e.context.splitIndex > 0 ? \" for split pane index \".concat(e.context.splitIndex) : \"\", \": \").concat(e.message).concat(e.helpId ? \" - see \".concat((0,_sanity_generate_help_url__WEBPACK_IMPORTED_MODULE_34__.generateHelpUrl)(e.helpId)) : \"\"), e);\n      }\n      if (e.helpId === \"structure-item-returned-no-child\") {\n        return (0,rxjs__WEBPACK_IMPORTED_MODULE_30__.of)([]);\n      }\n    }\n    throw e;\n  }\n}\nfunction createResolvedPaneNodeStream(_ref5) {\n  let {\n    routerPanesStream,\n    rootPaneNode,\n    initialCacheState = {\n      cacheKeysByFlatIndex: [],\n      flattenedRouterPanes: [],\n      resolvedPaneCache: /* @__PURE__ */new Map(),\n      resolvePane: () => rxjs__WEBPACK_IMPORTED_MODULE_35__.NEVER\n    },\n    structureContext\n  } = _ref5;\n  const resolvedPanes$ = routerPanesStream.pipe(\n  // add in implicit \"root\" router pane\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_33__.map)(rawRouterPanes => [[{\n    id: \"root\"\n  }], ...rawRouterPanes]),\n  // create flattened router panes\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_33__.map)(routerPanes => {\n    const flattenedRouterPanes = routerPanes.flatMap((routerPaneGroup, groupIndex) => routerPaneGroup.map((routerPaneSibling, siblingIndex) => ({\n      routerPaneSibling,\n      groupIndex,\n      siblingIndex\n    }))).map((i, index) => ({\n      ...i,\n      flatIndex: index\n    }));\n    return flattenedRouterPanes;\n  }),\n  // calculate a \"diffIndex\" used for clearing the memo cache\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_36__.startWith)([]), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_37__.pairwise)(), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_33__.map)(_ref6 => {\n    let [prev, curr] = _ref6;\n    for (let i = 0; i < curr.length; i++) {\n      const prevValue = prev[i];\n      const currValue = curr[i];\n      if (!lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3___default()(prevValue, currValue)) {\n        return {\n          flattenedRouterPanes: curr,\n          diffIndex: i\n        };\n      }\n    }\n    return {\n      flattenedRouterPanes: curr,\n      diffIndex: curr.length\n    };\n  }),\n  // create the memoized `resolvePane` function and manage the memo cache\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_38__.scan)((acc, next) => {\n    const {\n      cacheKeysByFlatIndex,\n      resolvedPaneCache\n    } = acc;\n    const {\n      flattenedRouterPanes,\n      diffIndex\n    } = next;\n    const beforeDiffIndex = cacheKeysByFlatIndex.slice(0, diffIndex + 1);\n    const afterDiffIndex = cacheKeysByFlatIndex.slice(diffIndex + 1);\n    const keysToKeep = new Set(beforeDiffIndex.flatMap(keySet => Array.from(keySet)));\n    const keysToDelete = afterDiffIndex.flatMap(keySet => Array.from(keySet)).filter(key => !keysToKeep.has(key));\n    for (const key of keysToDelete) {\n      resolvedPaneCache.delete(key);\n    }\n    const memoize = nextFn => (unresolvedPane, context, flatIndex) => {\n      const key = unresolvedPane && \"\".concat(assignId(unresolvedPane), \"-\").concat(hashContext(context));\n      const cachedResolvedPane = key && resolvedPaneCache.get(key);\n      if (cachedResolvedPane) return cachedResolvedPane;\n      const result = nextFn(unresolvedPane, context, flatIndex);\n      if (!key) return result;\n      const cacheKeySet = cacheKeysByFlatIndex[flatIndex] || /* @__PURE__ */new Set();\n      cacheKeySet.add(key);\n      cacheKeysByFlatIndex[flatIndex] = cacheKeySet;\n      resolvedPaneCache.set(key, result);\n      return result;\n    };\n    return {\n      flattenedRouterPanes,\n      cacheKeysByFlatIndex,\n      resolvedPaneCache,\n      resolvePane: createPaneResolver(memoize)\n    };\n  }, initialCacheState),\n  // run the memoized, recursive resolving\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_29__.switchMap)(_ref7 => {\n    let {\n      flattenedRouterPanes,\n      resolvePane\n    } = _ref7;\n    return resolvePaneTree({\n      unresolvedPane: rootPaneNode,\n      flattenedRouterPanes,\n      parent: null,\n      path: [],\n      resolvePane,\n      structureContext\n    });\n  }));\n  return resolvedPanes$.pipe(\n  // this diffs the previous emission with the current one. if there is a new\n  // loading pane at the same position where a previous pane already had a\n  // resolved value (looking at the IDs to compare), then return the previous\n  // pane instead of the loading pane\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_38__.scan)((prev, next) => next.map((nextPane, index) => {\n    const prevPane = prev[index];\n    if (!prevPane) return nextPane;\n    if (nextPane.type !== \"loading\") return nextPane;\n    if (prevPane.routerPaneSibling.id === nextPane.routerPaneSibling.id) {\n      return prevPane;\n    }\n    return nextPane;\n  }), []),\n  // this prevents duplicate emissions\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_39__.distinctUntilChanged)((prev, next) => {\n    if (prev.length !== next.length) return false;\n    for (let i = 0; i < next.length; i++) {\n      const prevValue = prev[i];\n      const nextValue = next[i];\n      if (hashResolvedPaneMeta(prevValue) !== hashResolvedPaneMeta(nextValue)) {\n        return false;\n      }\n    }\n    return true;\n  }));\n}\nfunction useRouterPanesStream() {\n  const routerStateSubject = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => new rxjs__WEBPACK_IMPORTED_MODULE_40__.ReplaySubject(1), []);\n  const routerPanes$ = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => routerStateSubject.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_33__.map)(_routerState => (_routerState == null ? void 0 : _routerState.panes) || [])), [routerStateSubject]);\n  const {\n    state: routerState\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_21__.useRouter)();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    routerStateSubject.next(routerState);\n  }, [routerState, routerStateSubject]);\n  return routerPanes$;\n}\nfunction useResolvedPanes() {\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)();\n  if (error) throw error;\n  const {\n    structureContext,\n    rootPaneNode\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDeskTool)();\n  const [data, setData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n    paneDataItems: [],\n    resolvedPanes: [],\n    routerPanes: []\n  });\n  const routerPanesStream = useRouterPanesStream();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const resolvedPanes$ = createResolvedPaneNodeStream({\n      rootPaneNode,\n      routerPanesStream,\n      structureContext\n    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_33__.map)(resolvedPanes => {\n      const routerPanes = resolvedPanes.reduce((acc, next) => {\n        const currentGroup = acc[next.groupIndex] || [];\n        currentGroup[next.siblingIndex] = next.routerPaneSibling;\n        acc[next.groupIndex] = currentGroup;\n        return acc;\n      }, []);\n      const groupsLen = routerPanes.length;\n      const paneDataItems = resolvedPanes.map(pane => {\n        var _a;\n        const {\n          groupIndex,\n          flatIndex,\n          siblingIndex,\n          routerPaneSibling,\n          path\n        } = pane;\n        const itemId = routerPaneSibling.id;\n        const nextGroup = routerPanes[groupIndex + 1];\n        const paneDataItem = {\n          active: groupIndex === groupsLen - 2,\n          childItemId: (_a = nextGroup == null ? void 0 : nextGroup[0].id) != null ? _a : null,\n          index: flatIndex,\n          itemId: routerPaneSibling.id,\n          groupIndex,\n          key: \"\".concat(pane.type === \"loading\" ? \"unknown\" : pane.paneNode.id, \"-\").concat(itemId, \"-\").concat(siblingIndex),\n          pane: pane.type === \"loading\" ? _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.LOADING_PANE : pane.paneNode,\n          params: routerPaneSibling.params || {},\n          path: path.join(\";\"),\n          payload: routerPaneSibling.payload,\n          selected: flatIndex === resolvedPanes.length - 1,\n          siblingIndex\n        };\n        return paneDataItem;\n      });\n      return {\n        paneDataItems,\n        routerPanes,\n        resolvedPanes: paneDataItems.map(pane => pane.pane)\n      };\n    }));\n    const subscription = resolvedPanes$.subscribe({\n      next: result => setData(result),\n      error: e => setError(e)\n    });\n    return () => subscription.unsubscribe();\n  }, [rootPaneNode, routerPanesStream, structureContext]);\n  return data;\n}\nasync function ensureDocumentIdAndType(documentStore, id, type) {\n  if (id && type) return {\n    id,\n    type\n  };\n  if (!id && type) return {\n    id: (0,_sanity_uuid__WEBPACK_IMPORTED_MODULE_41__[\"default\"])(),\n    type\n  };\n  if (id && !type) {\n    const resolvedType = await (0,rxjs__WEBPACK_IMPORTED_MODULE_31__.firstValueFrom)(documentStore.resolveTypeForDocument(id));\n    return {\n      id,\n      type: resolvedType\n    };\n  }\n  throw new PaneResolutionError({\n    message: \"Neither document `id` or `type` was provided when trying to resolve intent.\"\n  });\n}\nconst EMPTY_RECORD = {};\nconst IntentResolver = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function IntentResolver2() {\n  const {\n    navigate\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_21__.useRouter)();\n  const maybeIntent = (0,sanity_router__WEBPACK_IMPORTED_MODULE_21__.useRouterState)((0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(routerState => {\n    const intentName = typeof routerState.intent === \"string\" ? routerState.intent : void 0;\n    return intentName ? {\n      intent: intentName,\n      params: (0,sanity__WEBPACK_IMPORTED_MODULE_20__.isRecord)(routerState.params) ? routerState.params : EMPTY_RECORD,\n      payload: routerState.payload\n    } : void 0;\n  }, []));\n  const {\n    rootPaneNode,\n    structureContext\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDeskTool)();\n  const documentStore = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useDocumentStore)();\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  if (error) throw error;\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (maybeIntent) {\n      const {\n        intent,\n        params,\n        payload\n      } = maybeIntent;\n      let cancelled = false;\n      async function effect() {\n        const {\n          id,\n          type\n        } = await ensureDocumentIdAndType(documentStore, typeof params.id === \"string\" ? params.id : void 0, typeof params.type === \"string\" ? params.type : void 0);\n        if (cancelled) return;\n        const panes = await resolveIntent({\n          intent,\n          params: {\n            ...params,\n            id,\n            type\n          },\n          payload,\n          rootPaneNode,\n          structureContext\n        });\n        if (cancelled) return;\n        navigate({\n          panes\n        }, {\n          replace: true\n        });\n      }\n      effect().catch(setError);\n      return () => {\n        cancelled = true;\n      };\n    }\n  }, [documentStore, maybeIntent, navigate, rootPaneNode, structureContext]);\n  return null;\n});\nvar __freeze$b = Object.freeze;\nvar __defProp$b = Object.defineProperty;\nvar __template$b = (cooked, raw) => __freeze$b(__defProp$b(cooked, \"raw\", {\n  value: __freeze$b(raw || cooked.slice())\n}));\nvar _a$b;\nconst PathSegment = styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"].span(_a$b || (_a$b = __template$b([\"\\n  &:not(:last-child)::after {\\n    content: ' \\u279D ';\\n    opacity: 0.5;\\n  }\\n\"])));\nfunction formatStack(stack) {\n  return stack.replace(/\\(\\.\\.\\.\\)\\./g, \"(...)\\n  .\").replace(/__WEBPACK_IMPORTED_MODULE_\\d+_+/g, \"\").replace(/___default\\./g, \".\").replace(new RegExp(\" \\\\(https?:\\\\/\\\\/\".concat(window.location.host), \"g\"), \" (\");\n}\nfunction StructureError(_ref8) {\n  let {\n    error\n  } = _ref8;\n  if (!(error instanceof PaneResolutionError)) {\n    throw error;\n  }\n  const {\n    cause\n  } = error;\n  const stack = (cause == null ? void 0 : cause.stack) || error.stack;\n  const showStack = stack && !(cause instanceof _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.SerializeError) && !error.message.includes(\"Module build failed:\");\n  const path = cause instanceof _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.SerializeError ? cause.path : [];\n  const helpId = cause instanceof _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.SerializeError && cause.helpId || error.helpId;\n  const handleReload = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    window.location.reload();\n  }, []);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Card, {\n    height: \"fill\",\n    overflow: \"auto\",\n    padding: 4,\n    sizing: \"border\",\n    tone: \"critical\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Container, {\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Heading, {\n        as: \"h2\",\n        children: \"Encountered an error while reading structure\"\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Card, {\n        marginTop: 4,\n        padding: 4,\n        radius: 2,\n        overflow: \"auto\",\n        shadow: 1,\n        tone: \"inherit\",\n        children: [path.length > 0 && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Stack, {\n          space: 2,\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Label, {\n            children: \"Structure path\"\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Code, {\n            children: path.slice(1).map((segment, i) =>\n            // eslint-disable-next-line react/no-array-index-key\n            /* @__PURE__ */\n            (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PathSegment, {\n              children: segment\n            }, \"\".concat(segment, \"-\").concat(i)))\n          })]\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Stack, {\n          marginTop: 4,\n          space: 2,\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Label, {\n            children: \"Error\"\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Code, {\n            children: showStack ? formatStack(stack) : error.message\n          })]\n        }), helpId && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n          marginTop: 4,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", {\n              href: (0,_sanity_generate_help_url__WEBPACK_IMPORTED_MODULE_34__.generateHelpUrl)(helpId),\n              rel: \"noopener noreferrer\",\n              target: \"_blank\",\n              children: \"View documentation\"\n            })\n          })\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n          marginTop: 4,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Button, {\n            text: \"Reload\",\n            icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_43__.SyncIcon,\n            tone: \"primary\",\n            onClick: handleReload\n          })\n        })]\n      })]\n    })\n  });\n}\nfunction UnknownPane(props) {\n  const {\n    isSelected,\n    pane,\n    paneKey\n  } = props;\n  const type = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.isRecord)(pane) && pane.type || null;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.Pane, {\n    id: paneKey,\n    selected: isSelected,\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PaneHeader, {\n      title: \"Unknown pane type\"\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PaneContent, {\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n        padding: 4,\n        children: typeof type === \"string\" ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n          as: \"p\",\n          muted: true,\n          children: [\"Structure item of type \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n            children: type\n          }), \" is not a known entity.\"]\n        }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n          as: \"p\",\n          muted: true,\n          children: [\"Structure item is missing required \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n            children: \"type\"\n          }), \" property.\"]\n        })\n      })\n    })]\n  });\n}\nfunction getWaitMessages(path) {\n  const thresholds = [{\n    ms: 300,\n    message: \"Loading\\u2026\"\n  }, {\n    ms: 5e3,\n    message: \"Still loading\\u2026\"\n  }];\n  if (sanity__WEBPACK_IMPORTED_MODULE_20__.isDev) {\n    const message = [\"Check console for errors?\", \"Is your observable/promise resolving?\", path.length > 0 ? \"Structure path: \".concat(path.join(\" \\u279D \")) : \"\"];\n    thresholds.push({\n      ms: 1e4,\n      message: message.join(\"\\n\")\n    });\n  }\n  const src = (0,rxjs__WEBPACK_IMPORTED_MODULE_30__.of)(null);\n  return (0,rxjs__WEBPACK_IMPORTED_MODULE_44__.merge)(...thresholds.map(_ref9 => {\n    let {\n      ms,\n      message\n    } = _ref9;\n    return src.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_45__.mapTo)(message), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_46__.delay)(ms));\n  }));\n}\nvar __freeze$a = Object.freeze;\nvar __defProp$a = Object.defineProperty;\nvar __template$a = (cooked, raw) => __freeze$a(__defProp$a(cooked, \"raw\", {\n  value: __freeze$a(raw || cooked.slice())\n}));\nvar _a$a;\nconst DEFAULT_MESSAGE = \"Loading\\u2026\";\nconst Content = (0,styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex)(_a$a || (_a$a = __template$a([\"\\n  opacity: 0;\\n  transition: opacity 200ms;\\n\\n  &[data-mounted] {\\n    opacity: 1;\\n  }\\n\"])));\nconst LoadingPane = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(props => {\n  const {\n    delay = 300,\n    flex,\n    message: messageProp = getWaitMessages,\n    minWidth,\n    paneKey,\n    path,\n    selected,\n    title,\n    tone\n  } = props;\n  const resolvedMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (typeof messageProp === \"function\") {\n      return messageProp(path ? path.split(\";\") : []);\n    }\n    return messageProp;\n  }, [messageProp, path]);\n  const [currentMessage, setCurrentMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(() => {\n    if (typeof resolvedMessage === \"string\") return resolvedMessage;\n    return DEFAULT_MESSAGE;\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (typeof resolvedMessage !== \"object\") return void 0;\n    if (typeof resolvedMessage.subscribe === \"function\") return void 0;\n    const sub = resolvedMessage.subscribe(setCurrentMessage);\n    return () => sub.unsubscribe();\n  }, [resolvedMessage]);\n  const [contentElement, setContentElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const [mounted, setMounted] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!contentElement) return void 0;\n    return (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__._raf2)(() => setMounted(true));\n  }, [contentElement]);\n  const content = /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(Content, {\n    align: \"center\",\n    \"data-mounted\": mounted ? \"\" : void 0,\n    direction: \"column\",\n    height: \"fill\",\n    justify: \"center\",\n    ref: setContentElement,\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Spinner, {\n      muted: true\n    }), (title || currentMessage) && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n      marginTop: 3,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n        align: \"center\",\n        muted: true,\n        size: 1,\n        children: title || currentMessage\n      })\n    })]\n  });\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.Pane, {\n    flex,\n    id: paneKey,\n    minWidth,\n    selected,\n    tone,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PaneContent, {\n      children: content\n    })\n  });\n});\nLoadingPane.displayName = \"LoadingPane\";\nconst paneMap = {\n  component: (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(() => __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_sanity_lib__chunks_index-7fa6141c_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./index-7fa6141c.js */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks/index-7fa6141c.js\"))),\n  document: (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(() => __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_sanity_lib__chunks_index-af9dd22a_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./index-af9dd22a.js */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks/index-af9dd22a.js\"))),\n  documentList: (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(() => __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_sanity_lib__chunks_index-2f00c2b7_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./index-2f00c2b7.js */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks/index-2f00c2b7.js\"))),\n  list: (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(() => __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_sanity_lib__chunks_index-22b48989_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./index-22b48989.js */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks/index-22b48989.js\")))\n};\nconst DeskToolPane = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function DeskToolPane2(props) {\n  const {\n    active,\n    childItemId,\n    groupIndex,\n    index,\n    itemId,\n    pane,\n    paneKey,\n    params,\n    payload,\n    path,\n    selected,\n    siblingIndex\n  } = props;\n  const PaneComponent = paneMap[pane.type] || UnknownPane;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PaneRouterProvider, {\n    flatIndex: index,\n    index: groupIndex,\n    params,\n    payload,\n    siblingIndex,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n      fallback: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingPane, {\n        paneKey,\n        path,\n        selected\n      }),\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PaneComponent, {\n        childItemId: childItemId || \"\",\n        index,\n        itemId,\n        isActive: active,\n        isSelected: selected,\n        paneKey,\n        pane\n      })\n    })\n  });\n}, (_ref10, _ref11) => {\n  let {\n    params: prevParams = {},\n    payload: prevPayload = null,\n    ...prev\n  } = _ref10;\n  let {\n    params: nextParams = {},\n    payload: nextPayload = null,\n    ...next\n  } = _ref11;\n  if (!lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3___default()(prevParams, nextParams)) return false;\n  if (!lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3___default()(prevPayload, nextPayload)) return false;\n  const keys = /* @__PURE__ */new Set([...Object.keys(prev), ...Object.keys(next)]);\n  for (const key of keys) {\n    if (prev[key] !== next[key]) return false;\n  }\n  return true;\n});\nfunction ErrorPane(props) {\n  const {\n    children,\n    currentMinWidth,\n    flex,\n    minWidth,\n    paneKey,\n    title = \"Error\",\n    tone = \"critical\"\n  } = props;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.Pane, {\n    currentMinWidth,\n    flex,\n    id: paneKey,\n    minWidth,\n    tone,\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PaneHeader, {\n      title\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PaneContent, {\n      overflow: \"auto\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n        paddingX: 4,\n        paddingY: 5,\n        children\n      })\n    })]\n  });\n}\nfunction getOpErrorTitle(op) {\n  if (op === \"delete\") {\n    return \"An error occurred while attempting to delete this document.\\n      This usually means that there are other documents that refers to it.\";\n  }\n  if (op === \"unpublish\") {\n    return \"An error occurred while attempting to unpublish this document.\\n      This usually means that there are other documents that refers to it.\";\n  }\n  return \"An error occurred during \".concat(op);\n}\nfunction getOpSuccessTitle(op) {\n  if (op === \"publish\") {\n    return \"The document was published\";\n  }\n  if (op === \"unpublish\") {\n    return \"The document was unpublished. A draft has been created from the latest published version.\";\n  }\n  if (op === \"discardChanges\") {\n    return \"All changes since last publish has now been discarded. The discarded draft can still be recovered from history\";\n  }\n  if (op === \"delete\") {\n    return \"The document was successfully deleted\";\n  }\n  return \"Successfully performed \".concat(op, \" on document\");\n}\nconst IGNORE_OPS = [\"patch\", \"commit\"];\nconst DocumentOperationResults = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function DocumentOperationResults2() {\n  const {\n    push: pushToast\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.useToast)();\n  const {\n    documentId,\n    documentType\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const event = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useDocumentOperationEvent)(documentId, documentType);\n  const prevEvent = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(event);\n  const paneRouter = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.usePaneRouter)();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!event || event === prevEvent.current) return;\n    let cleanupId;\n    if (event.type === \"error\") {\n      pushToast({\n        closable: true,\n        duration: 3e4,\n        // 30s\n        status: \"error\",\n        title: getOpErrorTitle(event.op),\n        description: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"details\", {\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"summary\", {\n            children: \"Details\"\n          }), event.error.message]\n        })\n      });\n    }\n    if (event.type === \"success\" && !IGNORE_OPS.includes(event.op)) {\n      pushToast({\n        closable: true,\n        status: \"success\",\n        title: getOpSuccessTitle(event.op)\n      });\n    }\n    if (event.type === \"success\" && event.op === \"delete\") {\n      cleanupId = setTimeout(() => paneRouter.closeCurrentAndAfter(), 0);\n    }\n    prevEvent.current = event;\n    return () => clearTimeout(cleanupId);\n  }, [event, paneRouter, pushToast]);\n  return null;\n});\nfunction useDeskToolSetting(namespace, key, defaultValue) {\n  const settingsStore = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useSettingsStore)();\n  const [value, setValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(defaultValue);\n  const deskToolSettings = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => settingsStore.forNamespace(\"desk-tool\"), [settingsStore]);\n  const settings = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (namespace) {\n      return deskToolSettings.forNamespace(namespace).forKey(key);\n    }\n    return deskToolSettings.forKey(key);\n  }, [deskToolSettings, namespace, key]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const sub = settings.listen(defaultValue).subscribe({\n      next: setValue\n    });\n    return () => sub == null ? void 0 : sub.unsubscribe();\n  }, [defaultValue, key, namespace, settings]);\n  const set = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(newValue => {\n    setValue(newValue);\n    settings.set(newValue);\n  }, [settings]);\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => [value, set], [set, value]);\n}\nconst VIEW_MODE_PARSED = {\n  id: \"parsed\",\n  title: \"Parsed\"\n};\nconst VIEW_MODE_RAW = {\n  id: \"raw\",\n  title: \"Raw JSON\"\n};\nconst VIEW_MODES = [VIEW_MODE_PARSED, VIEW_MODE_RAW];\nconst lru = hashlru__WEBPACK_IMPORTED_MODULE_19___default()(1e3);\nfunction isExpanded(keyPath, value) {\n  const cached = lru.get(keyPath);\n  if (cached === void 0) {\n    lru.set(keyPath, Array.isArray(value) || (0,sanity__WEBPACK_IMPORTED_MODULE_20__.isRecord)(value));\n    return isExpanded(keyPath, value);\n  }\n  return cached;\n}\nfunction toggleExpanded(event) {\n  const {\n    path\n  } = event;\n  const current = lru.get(path);\n  if (current === void 0) {\n    return;\n  }\n  lru.set(path, !current);\n}\nfunction selectElement(element) {\n  const sel = window.getSelection();\n  if (sel) {\n    const range = document.createRange();\n    sel.removeAllRanges();\n    range.selectNodeContents(element);\n    sel.addRange(range);\n  }\n}\nfunction select(event) {\n  selectElement(event.currentTarget);\n}\nfunction maybeSelectAll(event) {\n  const selectAll = event.keyCode === 65 && (event.metaKey || event.ctrlKey);\n  if (!selectAll) {\n    return;\n  }\n  event.preventDefault();\n  selectElement(event.currentTarget);\n}\nfunction isDocumentLike(value) {\n  return (0,sanity__WEBPACK_IMPORTED_MODULE_20__.isRecord)(value) && (0,sanity__WEBPACK_IMPORTED_MODULE_20__.isString)(value._id) && (0,sanity__WEBPACK_IMPORTED_MODULE_20__.isString)(value._type);\n}\nvar __freeze$9 = Object.freeze;\nvar __defProp$9 = Object.defineProperty;\nvar __template$9 = (cooked, raw) => __freeze$9(__defProp$9(cooked, \"raw\", {\n  value: __freeze$9(raw || cooked.slice())\n}));\nvar _a$9;\nconst JSONInspectorWrapper = styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"].div(_ref12 => {\n  let {\n    theme\n  } = _ref12;\n  const {\n    color,\n    fonts,\n    space\n  } = theme.sanity;\n  return (0,styled_components__WEBPACK_IMPORTED_MODULE_42__.css)(_a$9 || (_a$9 = __template$9([\"\\n    & .json-inspector,\\n    & .json-inspector .json-inspector__selection {\\n      font-family: \", \";\\n      font-size: \", \"px;\\n      line-height: \", \"px;\\n      color: var(--card-code-fg-color);\\n    }\\n\\n    & .json-inspector .json-inspector__leaf {\\n      padding-left: \", \";\\n    }\\n\\n    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {\\n      padding-top: \", \";\\n      padding-left: 0;\\n    }\\n\\n    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {\\n      display: none;\\n    }\\n\\n    & .json-inspector .json-inspector__line {\\n      display: block;\\n      position: relative;\\n      cursor: default;\\n    }\\n\\n    & .json-inspector .json-inspector__line::after {\\n      content: '';\\n      position: absolute;\\n      top: 0;\\n      left: -200px;\\n      right: -50px;\\n      bottom: 0;\\n      z-index: -1;\\n      pointer-events: none;\\n    }\\n\\n    & .json-inspector .json-inspector__line:hover::after {\\n      background: var(--card-code-bg-color);\\n    }\\n\\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {\\n      cursor: pointer;\\n    }\\n\\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {\\n      content: '\\u25B8 ';\\n      margin-left: calc(0 - \", \" + 3px);\\n      font-size: \", \"px;\\n      line-height: \", \"px;\\n    }\\n\\n    &\\n      .json-inspector\\n      .json-inspector__leaf_expanded.json-inspector__leaf_composite\\n      > .json-inspector__line::before {\\n      content: '\\u25BE ';\\n      font-size: \", \"px;\\n      line-height: \", \"px;\\n    }\\n\\n    & .json-inspector .json-inspector__radio,\\n    & .json-inspector .json-inspector__flatpath {\\n      display: none;\\n    }\\n\\n    & .json-inspector .json-inspector__value {\\n      margin-left: \", \";\\n    }\\n\\n    &\\n      .json-inspector\\n      > .json-inspector__leaf_root\\n      > .json-inspector__line\\n      > .json-inspector__key\\n      + .json-inspector__value {\\n      margin: 0;\\n    }\\n\\n    & .json-inspector .json-inspector__key {\\n      color: \", \";\\n    }\\n\\n    & .json-inspector .json-inspector__value_helper,\\n    & .json-inspector .json-inspector__value_null {\\n      color: \", \";\\n    }\\n\\n    & .json-inspector .json-inspector__not-found {\\n      padding-top: \", \";\\n    }\\n\\n    & .json-inspector .json-inspector__value_string {\\n      color: \", \";\\n    }\\n\\n    & .json-inspector .json-inspector__value_boolean {\\n      color: \", \";\\n    }\\n\\n    & .json-inspector .json-inspector__value_number {\\n      color: \", \";\\n    }\\n\\n    & .json-inspector .json-inspector__show-original {\\n      display: inline-block;\\n      padding: 0 6px;\\n      cursor: pointer;\\n    }\\n\\n    & .json-inspector .json-inspector__show-original:hover {\\n      color: inherit;\\n    }\\n\\n    & .json-inspector .json-inspector__show-original::before {\\n      content: '\\u2194';\\n    }\\n\\n    & .json-inspector .json-inspector__show-original:hover::after {\\n      content: ' expand';\\n    }\\n  \"])), fonts.code.family, fonts.code.sizes[2].fontSize, fonts.code.sizes[2].lineHeight, (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.rem)(space[4]), (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.rem)(space[3]), (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.rem)(space[4]), fonts.code.sizes[2].fontSize, fonts.code.sizes[2].lineHeight, fonts.code.sizes[2].fontSize, fonts.code.sizes[2].lineHeight, (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.rem)(space[4] / 2), color.syntax.property, color.syntax.constant, (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.rem)(space[3]), color.syntax.string, color.syntax.boolean, color.syntax.number);\n});\nfunction Search(props) {\n  const {\n    onChange,\n    query\n  } = props;\n  const handleChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(event => onChange(event.target.value), [onChange]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.TextInput, {\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_43__.SearchIcon,\n    onChange: handleChange,\n    placeholder: \"Search\",\n    radius: 2,\n    value: query || \"\"\n  });\n}\nfunction InspectDialog(props) {\n  const {\n    value\n  } = props;\n  const {\n    onInspectClose,\n    paneKey\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const dialogIdPrefix = \"\".concat(paneKey, \"_inspect_\");\n  const [viewModeId, onViewModeChange] = useDeskToolSetting(\"desk-tool\", \"inspect-view-preferred-view-mode-\".concat(paneKey), \"parsed\");\n  const viewMode = VIEW_MODES.find(mode => mode.id === viewModeId);\n  const setParsedViewMode = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    onViewModeChange(VIEW_MODE_PARSED.id);\n  }, [onViewModeChange]);\n  const setRawViewMode = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    onViewModeChange(VIEW_MODE_RAW.id);\n  }, [onViewModeChange]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Dialog, {\n    id: \"\".concat(dialogIdPrefix, \"dialog\"),\n    header: isDocumentLike(value) ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      children: [\"Inspecting\", \" \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"em\", {\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.DocTitle, {\n          document: value\n        })\n      })]\n    }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"em\", {\n      children: \"No value\"\n    }),\n    onClose: onInspectClose,\n    onClickOutside: onInspectClose,\n    width: 3,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n      direction: \"column\",\n      height: \"fill\",\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Card, {\n        padding: 3,\n        shadow: 1,\n        style: {\n          position: \"sticky\",\n          bottom: 0,\n          zIndex: 3\n        },\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.TabList, {\n          space: 1,\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Tab, {\n            \"aria-controls\": \"\".concat(dialogIdPrefix, \"tabpanel\"),\n            fontSize: 1,\n            id: \"\".concat(dialogIdPrefix, \"tab-\").concat(VIEW_MODE_PARSED.id),\n            label: VIEW_MODE_PARSED.title,\n            onClick: setParsedViewMode,\n            selected: viewMode === VIEW_MODE_PARSED\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Tab, {\n            \"aria-controls\": \"\".concat(dialogIdPrefix, \"tabpanel\"),\n            fontSize: 1,\n            id: \"\".concat(dialogIdPrefix, \"tab-\").concat(VIEW_MODE_RAW.id),\n            label: VIEW_MODE_RAW.title,\n            onClick: setRawViewMode,\n            selected: viewMode === VIEW_MODE_RAW\n          })]\n        })\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.TabPanel, {\n        \"aria-labelledby\": \"\".concat(dialogIdPrefix, \"tab-\").concat(viewModeId),\n        flex: 1,\n        id: \"\".concat(dialogIdPrefix, \"tabpanel\"),\n        overflow: \"auto\",\n        padding: 4,\n        style: {\n          outline: \"none\"\n        },\n        children: [viewMode === VIEW_MODE_PARSED && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JSONInspectorWrapper, {\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)((_rexxars_react_json_inspector__WEBPACK_IMPORTED_MODULE_18___default()), {\n            data: value,\n            isExpanded,\n            onClick: toggleExpanded,\n            search: Search\n          })\n        }), viewMode === VIEW_MODE_RAW && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Code, {\n          language: \"json\",\n          tabIndex: 0,\n          onKeyDown: maybeSelectAll,\n          onDoubleClick: select,\n          onFocus: select,\n          children: JSON.stringify(value, null, 2)\n        })]\n      })]\n    })\n  });\n}\nvar __freeze$8 = Object.freeze;\nvar __defProp$8 = Object.defineProperty;\nvar __template$8 = (cooked, raw) => __freeze$8(__defProp$8(cooked, \"raw\", {\n  value: __freeze$8(raw || cooked.slice())\n}));\nvar _a$8;\nconst Root$3 = (0,styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Card)(_a$8 || (_a$8 = __template$8([\"\\n  position: relative;\\n  z-index: 50;\\n\"])));\nfunction DeletedDocumentBanner(_ref13) {\n  let {\n    revisionId\n  } = _ref13;\n  const {\n    documentId,\n    documentType\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const {\n    restore\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useDocumentOperation)(documentId, documentType);\n  const {\n    navigateIntent\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_21__.useRouter)();\n  const handleRestore = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    if (revisionId) {\n      restore.execute(revisionId);\n      navigateIntent(\"edit\", {\n        id: documentId,\n        type: documentType\n      });\n    }\n  }, [documentId, documentType, navigateIntent, restore, revisionId]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root$3, {\n    \"data-testid\": \"deleted-document-banner\",\n    shadow: 1,\n    tone: \"transparent\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Container, {\n      paddingX: 4,\n      paddingY: revisionId ? 2 : 3,\n      sizing: \"border\",\n      width: 1,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n        align: \"center\",\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n          size: 1,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_43__.ReadOnlyIcon, {})\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n          align: \"center\",\n          gap: 2,\n          flex: 1,\n          marginLeft: 3,\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n            size: 1,\n            children: \"This document has been deleted.\"\n          }), revisionId && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Button, {\n            fontSize: 1,\n            padding: 2,\n            mode: \"bleed\",\n            tone: \"primary\",\n            onClick: handleRestore,\n            text: \"Restore most recent version\"\n          })]\n        })]\n      })\n    })\n  });\n}\nvar __freeze$7 = Object.freeze;\nvar __defProp$7 = Object.defineProperty;\nvar __template$7 = (cooked, raw) => __freeze$7(__defProp$7(cooked, \"raw\", {\n  value: __freeze$7(raw || cooked.slice())\n}));\nvar _a$7, _b$1;\nconst Root$2 = (0,styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Card)(_a$7 || (_a$7 = __template$7([\"\\n  position: relative;\\n  z-index: 50;\\n\"])));\nconst TextOneLine = (0,styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text)(_b$1 || (_b$1 = __template$7([\"\\n  & > * {\\n    overflow: hidden;\\n    overflow: clip;\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n  }\\n\"])));\nconst ReferenceChangedBanner = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(() => {\n  var _a2, _b2, _c, _d, _e, _f;\n  const documentPreviewStore = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useDocumentPreviewStore)();\n  const {\n    params,\n    groupIndex,\n    routerPanesState,\n    replaceCurrent,\n    BackLink\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.usePaneRouter)();\n  const routerReferenceId = (_a2 = routerPanesState[groupIndex]) == null ? void 0 : _a2[0].id;\n  const parentGroup = routerPanesState[groupIndex - 1];\n  const parentSibling = parentGroup == null ? void 0 : parentGroup[0];\n  const parentId = parentSibling == null ? void 0 : parentSibling.id;\n  const hasHistoryOpen = Boolean((_b2 = parentSibling == null ? void 0 : parentSibling.params) == null ? void 0 : _b2.rev);\n  const parentRefPath = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    return (params == null ? void 0 : params.parentRefPath) && (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_14__.fromString)(params.parentRefPath) || null;\n  }, [params == null ? void 0 : params.parentRefPath]);\n  const referenceInfo = (0,react_rx__WEBPACK_IMPORTED_MODULE_17__.useMemoObservable)(() => {\n    const parentRefPathSegment = parentRefPath == null ? void 0 : parentRefPath[0];\n    if (!parentId || !parentRefPathSegment || !parentRefPath) {\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_30__.of)({\n        loading: false\n      });\n    }\n    const publishedId = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.getPublishedId)(parentId);\n    const path = (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_14__.fromString)(parentRefPathSegment);\n    const keyedSegmentIndex = path.findIndex(p => typeof p == \"object\" && \"_key\" in p);\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_32__.concat)(\n    // emit a loading state instantly\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_30__.of)({\n      loading: true\n    }),\n    // then emit the values from watching the published ID's path\n    documentPreviewStore.unstable_observePathsDocumentPair(publishedId, keyedSegmentIndex === -1 ? path : path.slice(0, keyedSegmentIndex)).pipe(\n    // this debounce time is needed to prevent flashing banners due to\n    // the router state updating faster than the content-lake state. we\n    // debounce to wait for more emissions because the value pulled\n    // initially could be stale.\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_47__.debounceTime)(750), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_33__.map)(_ref14 => {\n      let {\n        draft,\n        published\n      } = _ref14;\n      var _a3;\n      return {\n        loading: false,\n        result: {\n          availability: {\n            draft: draft.availability,\n            published: published.availability\n          },\n          refValue: (_a3 = (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_14__.get)(draft.snapshot || published.snapshot, parentRefPath)) == null ? void 0 : _a3._ref\n        }\n      };\n    })));\n  }, [documentPreviewStore, parentId, parentRefPath], {\n    loading: true\n  });\n  const handleReloadReference = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    var _a3;\n    if (referenceInfo.loading) return;\n    if ((_a3 = referenceInfo.result) == null ? void 0 : _a3.refValue) {\n      replaceCurrent({\n        id: referenceInfo.result.refValue,\n        params\n      });\n    }\n  }, [referenceInfo.loading, referenceInfo.result, replaceCurrent, params]);\n  const shouldHide =\n  // if `parentId` or `parentRefPath` is not present then this banner is n/a\n  !parentId || !parentRefPath ||\n  // if viewing this pane via history, then hide\n  hasHistoryOpen ||\n  // if loading, hide\n  referenceInfo.loading ||\n  // if the parent document is not available (e.g. due to permission denied or\n  // not found) we don't want to display a warning here, but instead rely on the\n  // parent view to display the appropriate message\n  !((_c = referenceInfo.result) == null ? void 0 : _c.availability.draft.available) && !((_d = referenceInfo.result) == null ? void 0 : _d.availability.published.available) ||\n  // if the references are the same, then hide the reference changed banner\n  ((_e = referenceInfo.result) == null ? void 0 : _e.refValue) === routerReferenceId;\n  if (shouldHide) return null;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root$2, {\n    shadow: 1,\n    tone: \"caution\",\n    \"data-testid\": \"reference-changed-banner\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Container, {\n      paddingX: 4,\n      paddingY: 2,\n      sizing: \"border\",\n      width: 1,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n        align: \"center\",\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n          size: 1,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_43__.WarningOutlineIcon, {})\n        }), ((_f = referenceInfo.result) == null ? void 0 : _f.refValue) ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n            flex: 1,\n            marginLeft: 3,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TextOneLine, {\n              title: \"This reference has changed since you opened it.\",\n              size: 1,\n              children: \"This reference has changed since you opened it.\"\n            })\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n            marginLeft: 3,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Button, {\n              onClick: handleReloadReference,\n              icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_43__.SyncIcon,\n              fontSize: 1,\n              mode: \"ghost\",\n              padding: 2,\n              space: 2,\n              text: \"Reload reference\"\n            })\n          })]\n        }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n            flex: 1,\n            marginLeft: 3,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TextOneLine, {\n              title: \"This reference has been removed since you opened it.\",\n              size: 1,\n              children: \"This reference has been removed since you opened it.\"\n            })\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n            marginLeft: 3,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Button, {\n              as: BackLink,\n              icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_43__.CloseIcon,\n              fontSize: 1,\n              mode: \"ghost\",\n              padding: 2,\n              space: 2,\n              text: \"Close reference\"\n            })\n          })]\n        })]\n      })\n    })\n  });\n});\nReferenceChangedBanner.displayName = \"ReferenceChangedBanner\";\nvar __freeze$6 = Object.freeze;\nvar __defProp$6 = Object.defineProperty;\nvar __template$6 = (cooked, raw) => __freeze$6(__defProp$6(cooked, \"raw\", {\n  value: __freeze$6(raw || cooked.slice())\n}));\nvar _a$6;\nconst Root$1 = (0,styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Card)(_a$6 || (_a$6 = __template$6([\"\\n  position: relative;\\n  z-index: 50;\\n\"])));\nfunction PermissionCheckBanner(_ref15) {\n  let {\n    granted,\n    requiredPermission\n  } = _ref15;\n  var _a2, _b;\n  const currentUser = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useCurrentUser)();\n  const plural = ((_a2 = currentUser == null ? void 0 : currentUser.roles) == null ? void 0 : _a2.length) !== 1;\n  const roles = join(((_b = currentUser == null ? void 0 : currentUser.roles) == null ? void 0 : _b.map(r => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n    children: r.title\n  }, r.name))) || [], \", \");\n  if (granted) return null;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root$1, {\n    \"data-testid\": \"permission-check-banner\",\n    shadow: 1,\n    tone: \"transparent\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Container, {\n      paddingX: 4,\n      paddingY: 3,\n      sizing: \"border\",\n      width: 1,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n        align: \"flex-start\",\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n          size: 1,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_43__.ReadOnlyIcon, {})\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n          flex: 1,\n          marginLeft: 3,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n            size: 1,\n            children: [\"Your role\", plural && \"s\", \" \", roles, \" \", plural ? \"do\" : \"does\", \" not have permissions to\", \" \", requiredPermission, \" this document.\"]\n          })\n        })]\n      })\n    })\n  });\n}\nfunction join(array, sep) {\n  return array.reduce((result, item) => {\n    if (result === null) {\n      return [item];\n    }\n    return result.concat([sep, item]);\n  }, null);\n}\nfunction usePrevious(value) {\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\nconst LONG_ENOUGH_BUT_NOT_TOO_LONG = 1e3 * 60 * 60 * 24 * 24;\nfunction useConditionalToast(params) {\n  const toast = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.useToast)();\n  const wasEnabled = usePrevious(params.enabled);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!wasEnabled && params.enabled) {\n      toast.push({\n        ...params,\n        duration: LONG_ENOUGH_BUT_NOT_TOO_LONG\n      });\n    }\n    if (wasEnabled && !params.enabled) {\n      toast.push({\n        ...params,\n        // Note: @sanity/ui fallbacks to the default duration of 4s in case of falsey values\n        duration: 0.01\n      });\n    }\n  }, [params, toast, wasEnabled]);\n}\nconst preventDefault = ev => ev.preventDefault();\nconst FormView = (0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function FormView2(props, ref) {\n  var _a;\n  const {\n    hidden,\n    margins\n  } = props;\n  const {\n    collapsedFieldSets,\n    collapsedPaths,\n    displayed: value,\n    editState,\n    documentId,\n    documentType,\n    fieldActions,\n    onChange,\n    validation,\n    ready,\n    formState,\n    onFocus,\n    onBlur,\n    onSetCollapsedPath,\n    onPathOpen,\n    onSetCollapsedFieldSet,\n    onSetActiveFieldGroup\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const documentStore = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useDocumentStore)();\n  const presence = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useDocumentPresence)(documentId);\n  const patchChannel = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => (0,sanity__WEBPACK_IMPORTED_MODULE_20__.createPatchChannel)(), []);\n  const isLocked = (_a = editState == null ? void 0 : editState.transactionSyncLock) == null ? void 0 : _a.enabled;\n  useConditionalToast({\n    id: \"sync-lock-\".concat(documentId),\n    status: \"warning\",\n    enabled: isLocked,\n    title: \"Syncing document\\u2026\",\n    description: \"Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn't take more than a few seconds\"\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const sub = documentStore.pair.documentEvents(documentId, documentType).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_48__.tap)(event => {\n      if (event.type === \"mutation\") {\n        patchChannel.publish(prepareMutationEvent(event));\n      }\n      if (event.type === \"rebase\") {\n        patchChannel.publish(prepareRebaseEvent(event));\n      }\n    })).subscribe();\n    return () => {\n      sub.unsubscribe();\n    };\n  }, [documentId, documentStore, documentType, patchChannel]);\n  const hasRev = Boolean(value == null ? void 0 : value._rev);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (hasRev) {\n      patchChannel.publish({\n        type: \"mutation\",\n        patches: [],\n        snapshot: value\n      });\n    }\n  }, [hasRev]);\n  const [formRef, setFormRef] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (ready && !(formState == null ? void 0 : formState.focusPath.length) && formRef) {\n      (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.focusFirstDescendant)(formRef);\n    }\n  }, [ready]);\n  const setRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(node => {\n    setFormRef(node);\n    if (typeof ref === \"function\") {\n      ref(node);\n    } else if (ref) {\n      ref.current = node;\n    }\n  }, [ref]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Container, {\n    hidden,\n    paddingX: 4,\n    paddingTop: 5,\n    paddingBottom: 9,\n    sizing: \"border\",\n    width: 1,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_20__.PresenceOverlay, {\n      margins,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n        as: \"form\",\n        onSubmit: preventDefault,\n        ref: setRef,\n        children: ready ? formState === null ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n          padding: 2,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n            children: \"This form is hidden\"\n          })\n        }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_20__.FormBuilder, {\n          __internal_fieldActions: fieldActions,\n          __internal_patchChannel: patchChannel,\n          collapsedFieldSets,\n          collapsedPaths,\n          focusPath: formState.focusPath,\n          changed: formState.changed,\n          focused: formState.focused,\n          groups: formState.groups,\n          id: \"root\",\n          members: formState.members,\n          onChange,\n          onFieldGroupSelect: onSetActiveFieldGroup,\n          onPathBlur: onBlur,\n          onPathFocus: onFocus,\n          onPathOpen,\n          onSetFieldSetCollapsed: onSetCollapsedFieldSet,\n          onSetPathCollapsed: onSetCollapsedPath,\n          presence,\n          readOnly: formState.readOnly,\n          schemaType: formState.schemaType,\n          validation,\n          value: formState.value\n        }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.Delay, {\n          ms: 300,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n            align: \"center\",\n            direction: \"column\",\n            height: \"fill\",\n            justify: \"center\",\n            children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Spinner, {\n              muted: true\n            }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n              marginTop: 3,\n              children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n                align: \"center\",\n                muted: true,\n                size: 1,\n                children: \"Loading document\"\n              })\n            })]\n          })\n        })\n      })\n    })\n  });\n});\nfunction prepareMutationEvent(event) {\n  const patches = event.mutations.map(mut => mut.patch).filter(Boolean);\n  return {\n    type: \"mutation\",\n    snapshot: event.document,\n    patches: (0,sanity__WEBPACK_IMPORTED_MODULE_20__.fromMutationPatches)(event.origin, patches)\n  };\n}\nfunction prepareRebaseEvent(event) {\n  const remotePatches = event.remoteMutations.map(mut => mut.patch).filter(Boolean);\n  const localPatches = event.localMutations.map(mut => mut.patch).filter(Boolean);\n  return {\n    type: \"rebase\",\n    snapshot: event.document,\n    patches: (0,sanity__WEBPACK_IMPORTED_MODULE_20__.fromMutationPatches)(\"remote\", remotePatches).concat((0,sanity__WEBPACK_IMPORTED_MODULE_20__.fromMutationPatches)(\"local\", localPatches))\n  };\n}\nfunction DocumentHeaderTabs() {\n  const {\n    activeViewId,\n    paneKey,\n    views\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const tabPanelId = \"\".concat(paneKey, \"tabpanel\");\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.TabList, {\n    space: 1,\n    children: views.map((view, index) => {\n      var _a;\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentHeaderTab, {\n        icon: view.icon,\n        id: \"\".concat(paneKey, \"tab-\").concat(view.id),\n        isActive: activeViewId === view.id,\n        label: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n          children: view.title\n        }),\n        tabPanelId,\n        viewId: index === 0 ? null : (_a = view.id) != null ? _a : null\n      }, view.id);\n    })\n  });\n}\nfunction DocumentHeaderTab(props) {\n  const {\n    isActive,\n    tabPanelId,\n    viewId\n  } = props;\n  const {\n    ready\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const {\n    setView\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.usePaneRouter)();\n  const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => setView(viewId), [setView, viewId]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Tab, {\n    ...props,\n    \"aria-controls\": tabPanelId,\n    disabled: !ready,\n    fontSize: 1,\n    selected: isActive,\n    onClick: handleClick\n  });\n}\nfunction DocumentHeaderTitle() {\n  const {\n    connectionState,\n    schemaType,\n    title,\n    value: documentValue\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const subscribed = Boolean(documentValue) && connectionState === \"connected\";\n  const {\n    error,\n    value\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.unstable_useValuePreview)({\n    enabled: subscribed,\n    schemaType,\n    value: documentValue\n  });\n  if (connectionState !== \"connected\") {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {});\n  }\n  if (title) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      children: title\n    });\n  }\n  if (!documentValue) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      children: [\"New \", (schemaType == null ? void 0 : schemaType.title) || (schemaType == null ? void 0 : schemaType.name)]\n    });\n  }\n  if (error) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      children: [\"Error: \", error.message]\n    });\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n    children: (value == null ? void 0 : value.title) || /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", {\n      style: {\n        color: \"var(--card-muted-fg-color)\"\n      },\n      children: \"Untitled\"\n    })\n  });\n}\nconst DocumentPanelHeader = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)((0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function DocumentPanelHeader2(_props, ref) {\n  const {\n    onMenuAction,\n    onPaneClose,\n    onPaneSplit,\n    menuItems,\n    menuItemGroups,\n    schemaType,\n    timelineStore,\n    ready,\n    views,\n    unstable_languageFilter\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const {\n    features\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDeskTool)();\n  const {\n    index,\n    BackLink,\n    hasGroupSiblings\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.usePaneRouter)();\n  const {\n    actions: fieldActions\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useFieldActions)();\n  const menuNodes = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.resolveMenuNodes)({\n    actionHandler: onMenuAction,\n    fieldActions,\n    menuItems,\n    menuItemGroups\n  }), [onMenuAction, fieldActions, menuItemGroups, menuItems]);\n  const menuButtonNodes = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => menuNodes.filter(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.isMenuNodeButton), [menuNodes]);\n  const contextMenuNodes = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => menuNodes.filter(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.isNotMenuNodeButton), [menuNodes]);\n  const showTabs = views.length > 1;\n  const rev = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTimelineSelector)(timelineStore, state => state.revTime);\n  const {\n    collapsed,\n    isLast\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.usePane)();\n  const tabIndex = isLast && !collapsed ? -1 : 0;\n  const showSplitPaneButton = features.splitViews && onPaneSplit && views.length > 1;\n  const showSplitPaneCloseButton = showSplitPaneButton && hasGroupSiblings;\n  const showPaneGroupCloseButton = !showSplitPaneCloseButton && !features.backButton;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PaneHeader, {\n    ref,\n    loading: !ready,\n    title: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentHeaderTitle, {}),\n    tabs: showTabs && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentHeaderTabs, {}),\n    tabIndex,\n    backButton: features.backButton && index > 0 && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Button, {\n      as: BackLink,\n      \"data-as\": \"a\",\n      icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_43__.ArrowLeftIcon,\n      mode: \"bleed\",\n      padding: 2\n    }),\n    subActions: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.TimelineMenu, {\n      chunk: rev,\n      mode: \"rev\",\n      placement: \"bottom-end\"\n    }),\n    actions: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n      align: \"center\",\n      gap: 1,\n      children: [unstable_languageFilter.length > 0 && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: unstable_languageFilter.map((languageFilterComponent, idx) => {\n          return (0,react__WEBPACK_IMPORTED_MODULE_1__.createElement)(languageFilterComponent, {\n            // eslint-disable-next-line react/no-array-index-key\n            key: \"language-filter-\".concat(idx),\n            schemaType\n          });\n        })\n      }), menuButtonNodes.map(item => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PaneHeaderActionButton, {\n        node: item\n      }, item.key)), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PaneContextMenuButton, {\n        nodes: contextMenuNodes\n      }, \"context-menu\"), showSplitPaneButton && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Tooltip, {\n        content: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n          size: 1,\n          style: {\n            whiteSpace: \"nowrap\"\n          },\n          children: \"Split pane right\"\n        }),\n        padding: 2,\n        placement: \"bottom\",\n        portal: true,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Button, {\n          \"aria-label\": \"Split pane right\",\n          icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_43__.SplitVerticalIcon,\n          mode: \"bleed\",\n          onClick: onPaneSplit\n        }, \"split-pane-button\")\n      }), showSplitPaneCloseButton && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Button, {\n        icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_43__.CloseIcon,\n        mode: \"bleed\",\n        onClick: onPaneClose,\n        title: \"Close split pane\"\n      }, \"close-view-button\"), showPaneGroupCloseButton && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Button, {\n        icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_43__.CloseIcon,\n        mode: \"bleed\",\n        title: \"Close pane group\",\n        as: BackLink\n      }, \"close-view-button\")]\n    })\n  });\n}));\nvar __freeze$5 = Object.freeze;\nvar __defProp$5 = Object.defineProperty;\nvar __template$5 = (cooked, raw) => __freeze$5(__defProp$5(cooked, \"raw\", {\n  value: __freeze$5(raw || cooked.slice())\n}));\nvar _a$5;\nconst DocumentBox = (0,styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box)({\n  position: \"relative\"\n});\nconst Scroller = (0,styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"])(sanity__WEBPACK_IMPORTED_MODULE_20__.ScrollContainer)(_ref16 => {\n  let {\n    $disabled\n  } = _ref16;\n  if ($disabled) {\n    return {\n      height: \"100%\"\n    };\n  }\n  return (0,styled_components__WEBPACK_IMPORTED_MODULE_42__.css)(_a$5 || (_a$5 = __template$5([\"\\n    height: 100%;\\n    overflow: auto;\\n    position: relative;\\n    scroll-behavior: smooth;\\n    outline: none;\\n  \"])));\n});\nconst DocumentPanel = function DocumentPanel2(props) {\n  const {\n    footerHeight,\n    isInspectOpen,\n    rootElement,\n    setDocumentPanelPortalElement\n  } = props;\n  const {\n    activeViewId,\n    displayed,\n    documentId,\n    editState,\n    inspector,\n    value,\n    views,\n    ready,\n    schemaType,\n    permissions,\n    isPermissionsLoading,\n    isDeleting,\n    isDeleted,\n    timelineStore,\n    formState\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const {\n    collapsed: layoutCollapsed\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.usePaneLayout)();\n  const {\n    collapsed\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.usePane)();\n  const parentPortal = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.usePortal)();\n  const {\n    features\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDeskTool)();\n  const [headerElement, setHeaderElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const headerRect = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.useElementRect)(headerElement);\n  const portalRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  const [documentScrollElement, setDocumentScrollElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const formContainerElement = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  const requiredPermission = value._createdAt ? \"update\" : \"create\";\n  const selectedGroup = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (!formState) return void 0;\n    return formState.groups.find(group => group.selected);\n  }, [formState]);\n  const activeView = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => views.find(view => view.id === activeViewId) || views[0] || {\n    type: \"form\"\n  }, [activeViewId, views]);\n  const portalElement = features.splitPanes ? portalRef.current || parentPortal.element : parentPortal.element;\n  const margins = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (layoutCollapsed) {\n      return [(headerRect == null ? void 0 : headerRect.height) || 0, 0, footerHeight ? footerHeight + 2 : 2, 0];\n    }\n    return [0, 0, 2, 0];\n  }, [layoutCollapsed, footerHeight, headerRect]);\n  const formViewHidden = activeView.type !== \"form\";\n  const activeViewNode = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => activeView.type === \"component\" && activeView.component && (0,react__WEBPACK_IMPORTED_MODULE_1__.createElement)(activeView.component, {\n    document: {\n      draft: (editState == null ? void 0 : editState.draft) || null,\n      displayed: displayed || value,\n      historical: displayed,\n      published: (editState == null ? void 0 : editState.published) || null\n    },\n    documentId,\n    options: activeView.options,\n    schemaType\n  }), [activeView, displayed, documentId, editState == null ? void 0 : editState.draft, editState == null ? void 0 : editState.published, schemaType, value]);\n  const lastNonDeletedRevId = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTimelineSelector)(timelineStore, state => state.lastNonDeletedRevId);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!(documentScrollElement == null ? void 0 : documentScrollElement.scrollTo)) return;\n    documentScrollElement.scrollTo(0, 0);\n  }, [documentId, documentScrollElement]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (portalElement) {\n      setDocumentPanelPortalElement(portalElement);\n    }\n  }, [portalElement, setDocumentPanelPortalElement]);\n  const inspectDialog = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    return isInspectOpen ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InspectDialog, {\n      value: displayed || value\n    }) : null;\n  }, [isInspectOpen, displayed, value]);\n  const showInspector = Boolean(!collapsed && inspector);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentPanelHeader, {\n      ref: setHeaderElement\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PaneContent, {\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n        height: \"fill\",\n        children: [(features.resizablePanes || !showInspector) && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentBox, {\n          flex: 2,\n          overflow: \"hidden\",\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.PortalProvider, {\n            element: portalElement,\n            __unstable_elements: {\n              documentScrollElement\n            },\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.BoundaryElementProvider, {\n              element: documentScrollElement,\n              children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(sanity__WEBPACK_IMPORTED_MODULE_20__.VirtualizerScrollInstanceProvider, {\n                scrollElement: documentScrollElement,\n                containerElement: formContainerElement,\n                children: [activeView.type === \"form\" && !isPermissionsLoading && ready && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                  children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PermissionCheckBanner, {\n                    granted: Boolean(permissions == null ? void 0 : permissions.granted),\n                    requiredPermission\n                  }), !isDeleting && isDeleted && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DeletedDocumentBanner, {\n                    revisionId: lastNonDeletedRevId\n                  }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ReferenceChangedBanner, {})]\n                }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(Scroller, {\n                  $disabled: layoutCollapsed || false,\n                  \"data-testid\": \"document-panel-scroller\",\n                  ref: setDocumentScrollElement,\n                  children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(FormView, {\n                    hidden: formViewHidden,\n                    margins,\n                    ref: formContainerElement\n                  }, documentId + (ready ? \"_ready\" : \"_pending\")), activeViewNode]\n                }, \"\".concat(selectedGroup == null ? void 0 : selectedGroup.name, \"-\").concat(documentId, \"}\")), inspectDialog, /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                  \"data-testid\": \"document-panel-portal\",\n                  ref: portalRef\n                })]\n              })\n            })\n          })\n        }), showInspector && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.BoundaryElementProvider, {\n          element: rootElement,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentInspectorPanel, {\n            documentId,\n            documentType: schemaType.name,\n            flex: 1\n          })\n        })]\n      })\n    })]\n  });\n};\nconst POPOVER_FALLBACK_PLACEMENTS = [\"left\", \"bottom\"];\nconst DIALOG_WIDTH_TO_UI_WIDTH = {\n  small: 0,\n  medium: 1,\n  large: 2,\n  full: \"auto\"\n};\nfunction ConfirmDialog(props) {\n  const {\n    dialog,\n    referenceElement\n  } = props;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Popover, {\n    content: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ConfirmDialogContent, {\n      dialog\n    }),\n    fallbackPlacements: POPOVER_FALLBACK_PLACEMENTS,\n    open: true,\n    placement: \"top\",\n    portal: true,\n    preventOverflow: true,\n    referenceElement\n  });\n}\nfunction ConfirmDialogContent(props) {\n  const {\n    dialog\n  } = props;\n  const {\n    cancelButtonIcon,\n    cancelButtonText,\n    confirmButtonIcon,\n    confirmButtonText,\n    // color,\n    message,\n    onCancel,\n    onConfirm,\n    tone\n  } = dialog;\n  const {\n    isTopLayer\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.useLayer)();\n  const [element, setElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const handleClickOutside = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    if (isTopLayer) onCancel();\n  }, [isTopLayer, onCancel]);\n  const handleGlobalKeyDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(event => {\n    if (event.key === \"Escape\" && isTopLayer) onCancel();\n  }, [isTopLayer, onCancel]);\n  (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.useClickOutside)(handleClickOutside, [element]);\n  (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.useGlobalKeyDown)(handleGlobalKeyDown);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n    direction: \"column\",\n    ref: setElement,\n    style: {\n      minWidth: 320 - 16,\n      maxWidth: 400\n    },\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n      flex: 1,\n      overflow: \"auto\",\n      padding: 4,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n        children: message\n      })\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n      paddingX: 4,\n      paddingY: 3,\n      style: {\n        borderTop: \"1px solid var(--card-border-color)\"\n      },\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Grid, {\n        columns: 2,\n        gap: 2,\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Button, {\n          icon: cancelButtonIcon,\n          onClick: onCancel,\n          mode: \"ghost\",\n          text: cancelButtonText || \"Cancel\"\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Button, {\n          icon: confirmButtonIcon,\n          onClick: onConfirm,\n          text: confirmButtonText || \"Confirm\",\n          tone\n        })]\n      })\n    })]\n  });\n}\nfunction ModalDialog(props) {\n  const {\n    dialog\n  } = props;\n  const dialogId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useId)();\n  const footer = dialog.footer && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n    paddingX: 4,\n    paddingY: 3,\n    children: dialog.footer\n  });\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_20__.LegacyLayerProvider, {\n    zOffset: \"fullscreen\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Dialog, {\n      __unstable_hideCloseButton: dialog.showCloseButton === false,\n      footer,\n      header: dialog.header,\n      id: dialogId,\n      onClose: dialog.onClose,\n      onClickOutside: dialog.onClose,\n      width: dialog.width === void 0 ? 1 : DIALOG_WIDTH_TO_UI_WIDTH[dialog.width],\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n        padding: 4,\n        children: dialog.content\n      })\n    })\n  });\n}\nfunction PopoverDialog(props) {\n  const {\n    dialog,\n    referenceElement\n  } = props;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Popover, {\n    content: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PopoverDialogContent, {\n      dialog\n    }),\n    fallbackPlacements: POPOVER_FALLBACK_PLACEMENTS,\n    open: true,\n    placement: \"top\",\n    portal: true,\n    preventOverflow: true,\n    referenceElement\n  });\n}\nfunction PopoverDialogContent(props) {\n  const {\n    dialog\n  } = props;\n  const {\n    content,\n    onClose\n  } = dialog;\n  const {\n    isTopLayer\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.useLayer)();\n  const [element, setElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const handleClickOutside = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    if (isTopLayer) onClose();\n  }, [isTopLayer, onClose]);\n  const handleGlobalKeyDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(event => {\n    if (event.key === \"Escape\" && isTopLayer) onClose();\n  }, [isTopLayer, onClose]);\n  (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.useClickOutside)(handleClickOutside, [element]);\n  (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.useGlobalKeyDown)(handleGlobalKeyDown);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n    ref: setElement,\n    children: content\n  });\n}\nfunction DocumentActionPortalProvider(props) {\n  const {\n    children\n  } = props;\n  const {\n    element,\n    elements\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.usePortal)();\n  const portalElement = (elements == null ? void 0 : elements[_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.DOCUMENT_PANEL_PORTAL_ELEMENT]) || element;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.PortalProvider, {\n    element: portalElement,\n    children\n  });\n}\nfunction ActionStateDialog(props) {\n  const {\n    dialog,\n    referenceElement = null\n  } = props;\n  const modalId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useId)();\n  if (dialog.type === \"confirm\") {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ConfirmDialog, {\n      dialog,\n      referenceElement\n    });\n  }\n  if (dialog.type === \"popover\") {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PopoverDialog, {\n      dialog,\n      referenceElement\n    });\n  }\n  if (dialog.type === \"dialog\" || !dialog.type) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentActionPortalProvider, {\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ModalDialog, {\n        dialog\n      })\n    });\n  }\n  if (dialog.type === \"custom\") {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentActionPortalProvider, {\n      children: dialog == null ? void 0 : dialog.component\n    });\n  }\n  const unknownModal = dialog;\n  console.warn(\"Unsupported modal type \".concat(unknownModal.type));\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Dialog, {\n    id: modalId,\n    onClose: unknownModal.onClose,\n    onClickOutside: unknownModal.onClose,\n    width: 2,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n      padding: 4,\n      children: unknownModal.content || /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\"Unexpected modal type (\", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n          children: unknownModal.type\n        }), \")\"]\n      })\n    })\n  });\n}\nfunction ActionMenuButton(props) {\n  const {\n    actionStates,\n    disabled\n  } = props;\n  const idPrefix = (0,react__WEBPACK_IMPORTED_MODULE_1__.useId)();\n  const buttonRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  const [actionIndex, setActionIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(-1);\n  const [referenceElement, setReferenceElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const handleAction = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(idx => {\n    setActionIndex(idx);\n  }, []);\n  const popoverProps = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => ({\n    placement: \"top-end\",\n    portal: true,\n    preventOverflow: true\n  }), []);\n  const currentAction = actionStates[actionIndex];\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.MenuButton, {\n      id: \"\".concat(idPrefix, \"-action-menu\"),\n      button: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Button, {\n        \"data-testid\": \"action-menu-button\",\n        \"aria-label\": \"Open document actions\",\n        disabled,\n        icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_43__.ChevronDownIcon,\n        mode: \"ghost\",\n        ref: buttonRef\n      }),\n      menu: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Menu, {\n        padding: 1,\n        children: actionStates.map((actionState, idx) => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ActionMenuListItem, {\n          actionState,\n          disabled,\n          index: idx,\n          onAction: handleAction\n        }, idx))\n      }),\n      popover: popoverProps,\n      ref: setReferenceElement\n    }), currentAction && currentAction.dialog && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_20__.LegacyLayerProvider, {\n      zOffset: \"paneFooter\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ActionStateDialog, {\n        dialog: currentAction.dialog,\n        referenceElement\n      })\n    })]\n  });\n}\nfunction ActionMenuListItem(props) {\n  const {\n    actionState,\n    disabled,\n    index,\n    onAction\n  } = props;\n  const {\n    onHandle\n  } = actionState;\n  const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    onAction(index);\n    if (onHandle) onHandle();\n  }, [index, onAction, onHandle]);\n  const tooltipContent = actionState.title && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n    padding: 2,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n      size: 1,\n      children: actionState.title\n    })\n  });\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.MenuItem, {\n    \"data-testid\": \"action-\".concat(actionState.label.replace(\" \", \"\")),\n    disabled: disabled || Boolean(actionState.disabled),\n    onClick: handleClick,\n    padding: 0,\n    tone: actionState.tone,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Tooltip, {\n      content: tooltipContent,\n      disabled: !tooltipContent,\n      fallbackPlacements: [\"left\", \"bottom\"],\n      placement: \"top\",\n      portal: true,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n        align: \"center\",\n        paddingX: 3,\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n          flex: 1,\n          paddingY: 3,\n          children: [actionState.icon && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n            marginRight: 3,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n              children: [(0,react__WEBPACK_IMPORTED_MODULE_1__.isValidElement)(actionState.icon) && actionState.icon, (0,react_is__WEBPACK_IMPORTED_MODULE_11__.isValidElementType)(actionState.icon) && (0,react__WEBPACK_IMPORTED_MODULE_1__.createElement)(actionState.icon)]\n            })\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n            children: actionState.label\n          })]\n        }), actionState.shortcut && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n          marginLeft: 3,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Hotkeys, {\n            keys: String(actionState.shortcut).split(\"+\").map(s => s.slice(0, 1).toUpperCase() + s.slice(1))\n          })\n        })]\n      })\n    })\n  });\n}\nfunction DocumentStatusBarActionsInner(props) {\n  const {\n    disabled,\n    showMenu,\n    states\n  } = props;\n  const [firstActionState, ...menuActionStates] = states;\n  const [buttonElement, setButtonElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const tooltipContent = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (!firstActionState || !firstActionState.title && !firstActionState.shortcut) return null;\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n      padding: 2,\n      style: {\n        maxWidth: 300\n      },\n      align: \"center\",\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n        size: 1,\n        children: firstActionState.title\n      }), firstActionState.shortcut && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n        marginLeft: firstActionState.title ? 2 : 0,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Hotkeys, {\n          keys: String(firstActionState.shortcut).split(\"+\").map(s => s.slice(0, 1).toUpperCase() + s.slice(1).toLowerCase())\n        })\n      })]\n    });\n  }, [firstActionState]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n    children: [firstActionState && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.LayerProvider, {\n      zOffset: 200,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Tooltip, {\n        disabled: !tooltipContent,\n        content: tooltipContent,\n        portal: true,\n        placement: \"top\",\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Stack, {\n          flex: 1,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Button, {\n            \"data-testid\": \"action-\".concat(firstActionState.label),\n            disabled: disabled || Boolean(firstActionState.disabled),\n            icon: firstActionState.icon,\n            onClick: firstActionState.onHandle,\n            ref: setButtonElement,\n            text: firstActionState.label,\n            tone: firstActionState.tone || \"primary\"\n          })\n        })\n      })\n    }), showMenu && menuActionStates.length > 0 && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n      marginLeft: 1,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ActionMenuButton, {\n        actionStates: menuActionStates,\n        disabled\n      })\n    }), firstActionState && firstActionState.dialog && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ActionStateDialog, {\n      dialog: firstActionState.dialog,\n      referenceElement: buttonElement\n    })]\n  });\n}\nconst DocumentStatusBarActions = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function DocumentStatusBarActions2() {\n  const {\n    actions,\n    connectionState,\n    documentId,\n    editState\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  if (!actions || !editState) {\n    return null;\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RenderActionCollectionState, {\n    actions,\n    actionProps: editState,\n    children: _ref17 => {\n      let {\n        states\n      } = _ref17;\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentStatusBarActionsInner, {\n        disabled: connectionState !== \"connected\",\n        showMenu: actions.length > 1,\n        states\n      }, documentId);\n    }\n  });\n});\nconst HistoryStatusBarActions = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function HistoryStatusBarActions2() {\n  const {\n    connectionState,\n    editState,\n    timelineStore\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const revTime = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTimelineSelector)(timelineStore, state => state.revTime);\n  const revision = (revTime == null ? void 0 : revTime.id) || \"\";\n  const disabled = ((editState == null ? void 0 : editState.draft) || (editState == null ? void 0 : editState.published) || {})._rev === revision;\n  const actionProps = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => ({\n    ...(editState || {}),\n    revision\n  }), [editState, revision]);\n  const historyActions = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => [_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.HistoryRestoreAction], []);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RenderActionCollectionState, {\n    actions: historyActions,\n    actionProps,\n    children: _ref18 => {\n      let {\n        states\n      } = _ref18;\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentStatusBarActionsInner, {\n        disabled: connectionState !== \"connected\" || Boolean(disabled),\n        showMenu: false,\n        states\n      });\n    }\n  });\n});\nconst BADGE_TONES = {\n  primary: \"primary\",\n  success: \"positive\",\n  warning: \"caution\",\n  danger: \"critical\"\n};\nfunction DocumentBadgesInner(_ref19) {\n  let {\n    states\n  } = _ref19;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Inline, {\n    space: 1,\n    children: states.map((badge, index) => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Tooltip, {\n      content: badge.title && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n        padding: 2,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n          size: 1,\n          children: badge.title\n        })\n      }),\n      disabled: !badge.title,\n      placement: \"top\",\n      portal: true,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Badge, {\n        fontSize: 1,\n        mode: \"outline\",\n        paddingX: 2,\n        paddingY: 1,\n        radius: 4,\n        tone: badge.color ? BADGE_TONES[badge.color] : void 0,\n        style: {\n          whiteSpace: \"nowrap\"\n        },\n        children: badge.label\n      })\n    }, String(index)))\n  });\n}\nfunction DocumentBadges() {\n  const {\n    badges,\n    editState\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  if (!editState || !badges) return null;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RenderBadgeCollectionState, {\n    badges,\n    badgeProps: editState,\n    children: _ref20 => {\n      let {\n        states\n      } = _ref20;\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentBadgesInner, {\n        states\n      });\n    }\n  });\n}\nvar __freeze$4 = Object.freeze;\nvar __defProp$4 = Object.defineProperty;\nvar __template$4 = (cooked, raw) => __freeze$4(__defProp$4(cooked, \"raw\", {\n  value: __freeze$4(raw || cooked.slice())\n}));\nvar _a$4;\nconst Root = (0,styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex)(_a$4 || (_a$4 = __template$4([\"\\n  cursor: default;\\n\"])));\nfunction PublishStatus(props) {\n  const {\n    collapsed,\n    disabled,\n    lastPublished,\n    lastUpdated,\n    liveEdit\n  } = props;\n  const lastPublishedTimeAgo = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTimeAgo)(lastPublished || \"\", {\n    minimal: true,\n    agoSuffix: true\n  });\n  const lastPublishedTime = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTimeAgo)(lastPublished || \"\", {\n    minimal: true\n  });\n  const lastUpdatedTimeAgo = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTimeAgo)(lastUpdated || \"\", {\n    minimal: true,\n    agoSuffix: true\n  });\n  const lastUpdatedTime = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTimeAgo)(lastUpdated || \"\", {\n    minimal: true\n  });\n  const a11yUpdatedAgo = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTimeAgo)(lastUpdated || \"\", {\n    minimal: false,\n    agoSuffix: true\n  });\n  const a11yPublishedAgo = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTimeAgo)(lastPublished || \"\", {\n    minimal: false,\n    agoSuffix: true\n  });\n  const a11yLabel = liveEdit ? \"Last updated \".concat(a11yUpdatedAgo) : \"Last published \".concat(a11yPublishedAgo);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root, {\n    align: \"center\",\n    \"data-ui\": \"SessionLayout\",\n    sizing: \"border\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Tooltip, {\n      placement: \"top\",\n      portal: true,\n      content: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Stack, {\n        padding: 3,\n        space: 3,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n          size: 1,\n          children: liveEdit ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\"Last updated\", \" \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"abbr\", {\n              \"aria-label\": lastUpdated ? a11yUpdatedAgo : a11yPublishedAgo,\n              children: lastUpdated ? lastUpdatedTimeAgo : lastPublishedTimeAgo\n            })]\n          }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\"Last published \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"abbr\", {\n              \"aria-label\": a11yPublishedAgo,\n              children: lastPublishedTimeAgo\n            })]\n          })\n        })\n      }),\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Button, {\n        mode: \"bleed\",\n        tone: liveEdit ? \"critical\" : \"positive\",\n        tabIndex: -1,\n        disabled,\n        \"aria-label\": a11yLabel,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n          align: \"center\",\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n            marginRight: collapsed ? 0 : 3,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n              size: 2,\n              \"aria-hidden\": \"true\",\n              children: liveEdit ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_43__.PlayIcon, {}) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_43__.PublishIcon, {})\n            })\n          }), !collapsed && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n            size: 1,\n            weight: \"medium\",\n            children: liveEdit ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"abbr\", {\n              \"aria-label\": a11yLabel,\n              children: lastUpdated ? lastUpdatedTime : lastPublishedTime\n            }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"abbr\", {\n              \"aria-label\": a11yLabel,\n              children: lastPublishedTime\n            })\n          })]\n        })\n      })\n    })\n  });\n}\nvar __freeze$3 = Object.freeze;\nvar __defProp$3 = Object.defineProperty;\nvar __template$3 = (cooked, raw) => __freeze$3(__defProp$3(cooked, \"raw\", {\n  value: __freeze$3(raw || cooked.slice())\n}));\nvar _a$3, _b, _c;\nconst StyledMotionPath = (0,styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"])(framer_motion__WEBPACK_IMPORTED_MODULE_49__.motion.path)(_a$3 || (_a$3 = __template$3([\"\\n  transform-origin: center;\\n\"])));\nconst Circle = props => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_49__.motion.circle, {\n  fill: \"none\",\n  r: \"8\",\n  cx: \"12.5\",\n  cy: \"12.5\",\n  strokeWidth: \"1.2\",\n  ...props\n});\nconst Arrows = props => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StyledMotionPath, {\n  fill: \"none\",\n  d: \"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811\",\n  ...props\n});\nconst Checkmark = props => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_49__.motion.path, {\n  d: \"M9.5 12.1316L11.7414 14.5L16 10\",\n  ...props\n});\nconst Edit = props => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_49__.motion.path, {\n  d: \"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z\",\n  ...props\n});\nconst rotateAnimation = (0,styled_components__WEBPACK_IMPORTED_MODULE_42__.keyframes)(_b || (_b = __template$3([\"\\n  0% {\\n    transform: rotate(0);\\n  }\\n  100% {\\n    transform: rotate(360deg);\\n  }\\n\"])));\nconst RotateGroup = styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"].g(_c || (_c = __template$3([\"\\n  transform-origin: center;\\n\\n  &[data-rotate] {\\n    animation: \", \" 1s ease-in-out infinite;\\n  }\\n\"])), rotateAnimation);\nconst root = {\n  syncing: {\n    scale: 1,\n    transition: {\n      duration: 0\n    }\n  },\n  saved: {\n    scale: [1, 0.8, 1.2, 0.9, 1.1, 0.95, 1.05, 0.99, 1],\n    transition: {\n      duration: 0.5,\n      delay: 0.2\n    }\n  },\n  changes: {\n    transition: {\n      duration: 0\n    }\n  }\n};\nconst circle = {\n  syncing: {\n    strokeDasharray: \"0, 0, 23, 3, 23, 3\",\n    strokeDashoffset: 10,\n    opacity: 1,\n    transition: {\n      duration: 0\n    }\n  },\n  saved: {\n    strokeDasharray: \"0, 0, 23, 0, 23, 0\",\n    strokeDashoffset: 10,\n    opacity: 1,\n    transition: {\n      duration: 0.2\n    }\n  },\n  changes: {\n    strokeDasharray: \"0, 60, 23, 0, 23, 0\",\n    strokeDashoffset: 0,\n    opacity: 0,\n    transition: {\n      duration: 0.5\n    }\n  }\n};\nconst arrows = {\n  syncing: {\n    opacity: 1,\n    transition: {\n      duration: 0\n    }\n  },\n  saved: {\n    opacity: 0,\n    transition: {\n      duration: 0.2\n    }\n  },\n  changes: {\n    opacity: 0\n  }\n};\nconst checkmark = {\n  syncing: {\n    pathLength: 0,\n    transition: {\n      duration: 0\n    }\n  },\n  saved: {\n    pathLength: 1,\n    transition: {\n      delay: 0.4,\n      duration: 0.3\n    }\n  },\n  changes: {\n    pathLength: 0,\n    transition: {\n      duration: 0.2\n    }\n  }\n};\nconst edit = {\n  syncing: {\n    pathLength: 0,\n    transition: {\n      duration: 0\n    }\n  },\n  saved: {\n    pathLength: 0,\n    transition: {\n      duration: 0\n    }\n  },\n  changes: {\n    pathLength: 1,\n    transition: {\n      duration: 0.4,\n      delay: 0.5\n    }\n  }\n};\nfunction AnimatedStatusIcon(props) {\n  const {\n    status\n  } = props;\n  if (!status) {\n    return null;\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 25 25\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"1.2\",\n    \"data-sanity-icon\": \"\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(framer_motion__WEBPACK_IMPORTED_MODULE_49__.motion.g, {\n      variants: root,\n      initial: status,\n      animate: status,\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(RotateGroup, {\n        \"data-rotate\": status === \"changes\" ? void 0 : \"\",\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Arrows, {\n          variants: arrows,\n          initial: status,\n          animate: status\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Circle, {\n          variants: circle,\n          initial: status,\n          animate: status\n        })]\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Checkmark, {\n        variants: checkmark,\n        initial: status,\n        animate: status\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Edit, {\n        variants: edit,\n        initial: status,\n        animate: status\n      })]\n    })\n  });\n}\nconst ReviewButton = react__WEBPACK_IMPORTED_MODULE_1___default().forwardRef(function ReviewButton2(props, ref) {\n  const {\n    collapsed,\n    status,\n    lastUpdated,\n    ...rest\n  } = props;\n  const lastUpdatedTime = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTimeAgo)(lastUpdated || \"\", {\n    minimal: true\n  });\n  const lastUpdatedTimeAgo = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTimeAgo)(lastUpdated || \"\", {\n    minimal: true,\n    agoSuffix: true\n  });\n  const a11yUpdatedAgo = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTimeAgo)(lastUpdated || \"\", {\n    minimal: false,\n    agoSuffix: true\n  });\n  const buttonProps = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (status === \"syncing\") {\n      return {\n        text: \"Saving...\",\n        tone: void 0\n      };\n    }\n    if (status === \"changes\") {\n      return {\n        text: lastUpdatedTime,\n        tone: \"caution\"\n      };\n    }\n    if (status === \"saved\") {\n      return {\n        text: \"Saved!\",\n        tone: \"positive\"\n      };\n    }\n    return {};\n  }, [status, lastUpdatedTime]);\n  if (!status) {\n    return null;\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Tooltip, {\n    placement: \"top\",\n    portal: true,\n    disabled: status !== \"changes\",\n    content: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Stack, {\n      padding: 3,\n      space: 3,\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n        size: 1,\n        weight: \"semibold\",\n        children: \"Review changes\"\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n        size: 1,\n        muted: true,\n        children: [\"Changes saved \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"abbr\", {\n          \"aria-label\": a11yUpdatedAgo,\n          children: lastUpdatedTimeAgo\n        })]\n      })]\n    }),\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Button, {\n      mode: \"bleed\",\n      justify: \"flex-start\",\n      tone: buttonProps == null ? void 0 : buttonProps.tone,\n      ...rest,\n      \"data-testid\": \"review-changes-button\",\n      ref,\n      \"aria-label\": \"Review changes\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n        align: \"center\",\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n          marginRight: collapsed ? 0 : 3,\n          \"aria-hidden\": \"true\",\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(AnimatedStatusIcon, {\n              status\n            })\n          })\n        }), !collapsed && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n          size: 1,\n          weight: \"medium\",\n          children: buttonProps == null ? void 0 : buttonProps.text\n        })]\n      })\n    })\n  });\n});\nconst ReviewChangesButton = react__WEBPACK_IMPORTED_MODULE_1___default().memo(ReviewButton);\nconst SYNCING_TIMEOUT = 1e3;\nconst SAVED_TIMEOUT = 3e3;\nconst DocumentSparkline = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function DocumentSparkline2() {\n  var _a;\n  const {\n    changesOpen,\n    documentId,\n    documentType,\n    editState,\n    onHistoryClose,\n    onHistoryOpen,\n    timelineStore,\n    value\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const syncState = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useSyncState)(documentId, documentType);\n  const lastUpdated = value == null ? void 0 : value._updatedAt;\n  const lastPublished = (_a = editState == null ? void 0 : editState.published) == null ? void 0 : _a._updatedAt;\n  const liveEdit = Boolean(editState == null ? void 0 : editState.liveEdit);\n  const published = Boolean(editState == null ? void 0 : editState.published);\n  const changed = Boolean(editState == null ? void 0 : editState.draft);\n  const [rootFlexElement, setRootFlexElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const rootFlexRect = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.useElementRect)(rootFlexElement);\n  const collapsed = !rootFlexRect || (rootFlexRect == null ? void 0 : rootFlexRect.width) < 300;\n  const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const showingRevision = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTimelineSelector)(timelineStore, state => state.onOlderRevision);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (status === \"syncing\" && !syncState.isSyncing) {\n      const timerId = setTimeout(() => setStatus(\"saved\"), SYNCING_TIMEOUT);\n      return () => clearTimeout(timerId);\n    }\n    if (status === \"saved\") {\n      const timerId = setTimeout(() => setStatus(null), SAVED_TIMEOUT);\n      return () => clearTimeout(timerId);\n    }\n  }, [status, lastUpdated, syncState.isSyncing]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(() => {\n    setStatus(null);\n  }, [documentId]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(() => {\n    if (syncState.isSyncing) {\n      setStatus(\"syncing\");\n    }\n  }, [syncState.isSyncing, lastUpdated]);\n  const reviewButton = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ReviewChangesButton, {\n    lastUpdated,\n    status: status || (changed ? \"changes\" : void 0),\n    onClick: changesOpen ? onHistoryClose : onHistoryOpen,\n    disabled: showingRevision,\n    selected: changesOpen,\n    collapsed\n  }), [changed, changesOpen, onHistoryClose, onHistoryOpen, lastUpdated, showingRevision, status, collapsed]);\n  const publishStatus = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => (liveEdit || published) && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n    marginRight: 1,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PublishStatus, {\n      disabled: showingRevision,\n      lastPublished,\n      lastUpdated,\n      liveEdit,\n      collapsed\n    })\n  }), [collapsed, lastPublished, lastUpdated, liveEdit, published, showingRevision]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n    align: \"center\",\n    \"data-ui\": \"DocumentSparkline\",\n    ref: setRootFlexElement,\n    children: [publishStatus, /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n      align: \"center\",\n      flex: 1,\n      children: [reviewButton, !collapsed && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n        marginLeft: 3,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentBadges, {})\n      })]\n    })]\n  });\n});\nvar __freeze$2 = Object.freeze;\nvar __defProp$2 = Object.defineProperty;\nvar __template$2 = (cooked, raw) => __freeze$2(__defProp$2(cooked, \"raw\", {\n  value: __freeze$2(raw || cooked.slice())\n}));\nvar _a$2;\nconst DocumentActionsBox = (0,styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box)(_a$2 || (_a$2 = __template$2([\"\\n  min-width: 10em;\\n  max-width: 16em;\\n\"])));\nfunction DocumentStatusBar(props) {\n  const {\n    actionsBoxRef\n  } = props;\n  const {\n    badges,\n    timelineStore\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const showingRevision = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTimelineSelector)(timelineStore, state => state.onOlderRevision);\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n    paddingLeft: 2,\n    paddingRight: [2, 3],\n    paddingY: 2,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n      align: \"center\",\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n        flex: [1, 2],\n        children: badges && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentSparkline, {})\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentActionsBox, {\n        flex: 1,\n        marginLeft: [1, 3],\n        ref: actionsBoxRef,\n        children: showingRevision ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(HistoryStatusBarActions, {}) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentStatusBarActions, {})\n      })]\n    })\n  }), [actionsBoxRef, badges, showingRevision]);\n}\nfunction KeyboardShortcutResponder(props) {\n  const {\n    actionsBoxElement,\n    activeIndex,\n    as = \"div\",\n    children,\n    id,\n    onActionStart,\n    onKeyDown,\n    rootRef,\n    states,\n    ...rest\n  } = props;\n  const activeAction = states[activeIndex];\n  const handleKeyDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(event => {\n    const matchingStates = states.filter(state => state.shortcut && (0,is_hotkey__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(state.shortcut, event));\n    const matchingState = matchingStates[0];\n    if (matchingStates.length > 1) {\n      console.warn('Keyboard shortcut conflict: More than one document action matches the shortcut \"'.concat(matchingState.shortcut, '\"'));\n    }\n    if (matchingState && !matchingState.disabled && matchingState.onHandle) {\n      event.preventDefault();\n      matchingState.onHandle();\n      onActionStart(states.indexOf(matchingState));\n      return;\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [onActionStart, onKeyDown, states]);\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.createElement)(as, {\n    id,\n    onKeyDown: handleKeyDown,\n    tabIndex: -1,\n    ...rest,\n    ref: rootRef\n  }, [children, activeAction && activeAction.dialog && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_20__.LegacyLayerProvider, {\n    zOffset: \"paneFooter\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ActionStateDialog, {\n      dialog: activeAction.dialog,\n      referenceElement: actionsBoxElement\n    })\n  })]);\n}\nconst DocumentActionShortcuts = react__WEBPACK_IMPORTED_MODULE_1___default().memo(props => {\n  const {\n    actionsBoxElement,\n    as = \"div\",\n    children,\n    ...rest\n  } = props;\n  const {\n    actions,\n    editState\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const [activeIndex, setActiveIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(-1);\n  const onActionStart = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(idx => {\n    setActiveIndex(idx);\n  }, []);\n  const actionProps = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => editState && {\n    ...editState,\n    // @todo: what to call here?\n    onComplete: () => void 0,\n    // @todo: get revision string\n    revision: void 0\n  }, [editState]);\n  if (!actionProps || !actions) return null;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RenderActionCollectionState, {\n    actionProps,\n    actions,\n    children: _ref21 => {\n      let {\n        states\n      } = _ref21;\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(KeyboardShortcutResponder, {\n        ...rest,\n        activeIndex,\n        actionsBoxElement,\n        as,\n        onActionStart,\n        states,\n        children\n      });\n    }\n  });\n});\nDocumentActionShortcuts.displayName = \"DocumentActionShortcuts\";\nvar __freeze$1 = Object.freeze;\nvar __defProp$1 = Object.defineProperty;\nvar __template$1 = (cooked, raw) => __freeze$1(__defProp$1(cooked, \"raw\", {\n  value: __freeze$1(raw || cooked.slice())\n}));\nvar _a$1;\nconst DIALOG_PROVIDER_POSITION = [\n// We use the `position: fixed` for dialogs on narrower screens (first two media breakpoints).\n\"fixed\", \"fixed\",\n// And we use the `position: absolute` strategy (within panes) on wide screens.\n\"absolute\"];\nconst StyledChangeConnectorRoot = (0,styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"])(sanity__WEBPACK_IMPORTED_MODULE_20__.ChangeConnectorRoot)(_a$1 || (_a$1 = __template$1([\"\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n  min-height: 0;\\n  min-width: 0;\\n\"])));\nconst DocumentPane = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function DocumentPane2(props) {\n  const {\n    name: parentSourceName\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useSource)();\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_20__.SourceProvider, {\n    name: props.pane.source || parentSourceName,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentPaneInner, {\n      ...props\n    })\n  });\n});\nfunction DocumentPaneInner(props) {\n  var _a2;\n  const {\n    pane,\n    paneKey\n  } = props;\n  const {\n    resolveNewDocumentOptions\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useSource)().document;\n  const paneRouter = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.usePaneRouter)();\n  const options = usePaneOptions(pane.options, paneRouter.params);\n  const {\n    documentType,\n    isLoaded: isDocumentLoaded\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useDocumentType)(options.id, options.type);\n  const templateItems = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    return resolveNewDocumentOptions({\n      type: \"document\",\n      documentId: options.id,\n      schemaType: options.type\n    });\n  }, [options.id, options.type, resolveNewDocumentOptions]);\n  const [templatePermissions, isTemplatePermissionsLoading] = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTemplatePermissions)({\n    templateItems\n  });\n  const isLoaded = isDocumentLoaded && !isTemplatePermissionsLoading;\n  const providerProps = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    return isLoaded && documentType && options.type !== documentType ? mergeDocumentType(props, options, documentType) : props;\n  }, [props, documentType, isLoaded, options]);\n  const {\n    ReferenceChildLink,\n    handleEditReference,\n    groupIndex,\n    routerPanesState\n  } = paneRouter;\n  const childParams = ((_a2 = routerPanesState[groupIndex + 1]) == null ? void 0 : _a2[0].params) || {};\n  const routerPanesStateLength = routerPanesState.length;\n  const {\n    parentRefPath\n  } = childParams;\n  const activePath = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    return parentRefPath ? {\n      path: (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_14__.fromString)(parentRefPath),\n      state:\n      // eslint-disable-next-line no-nested-ternary\n      groupIndex >= routerPanesStateLength - 1 ? \"none\" : groupIndex >= routerPanesStateLength - 2 ? \"selected\" : \"pressed\"\n    } : {\n      path: [],\n      state: \"none\"\n    };\n  }, [parentRefPath, groupIndex, routerPanesStateLength]);\n  if (options.type === \"*\" && !isLoaded) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingPane, {\n      flex: 2.5,\n      minWidth: 320,\n      paneKey,\n      title: \"Loading document\\u2026\"\n    });\n  }\n  if (!documentType) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ErrorPane, {\n      flex: 2.5,\n      minWidth: 320,\n      paneKey,\n      title: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: \"The document was not found\"\n      }),\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Stack, {\n        space: 4,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n          as: \"p\",\n          children: [\"The document type is not defined, and a document with the \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n            children: options.id\n          }), \" \", \"identifier could not be found.\"]\n        })\n      })\n    });\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.DocumentPaneProvider, {\n    ...providerProps,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_20__.ReferenceInputOptionsProvider, {\n      EditReferenceLinkComponent: ReferenceChildLink,\n      onEditReference: handleEditReference,\n      initialValueTemplateItems: templatePermissions,\n      activePath,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InnerDocumentPane, {})\n    })\n  }, \"\".concat(documentType, \"-\").concat(options.id));\n}\nfunction usePaneOptions(options) {\n  let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const templates = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useTemplates)();\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (options.type && options.type !== \"*\") {\n      return options;\n    }\n    const templateName = options.template || params.template;\n    const template = templateName ? templates.find(t => t.id === templateName) : void 0;\n    const documentType = template == null ? void 0 : template.schemaType;\n    if (!documentType) {\n      return options;\n    }\n    return {\n      ...options,\n      type: documentType\n    };\n  }, [options, params.template, templates]);\n}\nfunction mergeDocumentType(props, options, documentType) {\n  return {\n    ...props,\n    pane: {\n      ...props.pane,\n      options: {\n        ...options,\n        type: documentType\n      }\n    }\n  };\n}\nfunction InnerDocumentPane() {\n  const {\n    changesOpen,\n    documentType,\n    inspector,\n    inspectOpen,\n    onFocus,\n    onPathOpen,\n    onHistoryOpen,\n    onKeyUp,\n    paneKey,\n    schemaType,\n    value\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDocumentPane)();\n  const {\n    collapsed: layoutCollapsed\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.usePaneLayout)();\n  const zOffsets = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useZIndex)();\n  const [rootElement, setRootElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const [footerElement, setFooterElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const [actionsBoxElement, setActionsBoxElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const [documentPanelPortalElement, setDocumentPanelPortalElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const footerRect = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.useElementRect)(footerElement);\n  const footerH = footerRect == null ? void 0 : footerRect.height;\n  const onConnectorSetFocus = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(path => {\n    onPathOpen(path);\n    onFocus(path);\n  }, [onPathOpen, onFocus]);\n  const currentMinWidth = _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.DOCUMENT_PANEL_INITIAL_MIN_WIDTH + (inspector ? _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.DOCUMENT_INSPECTOR_MIN_WIDTH : 0);\n  const minWidth = _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.DOCUMENT_PANEL_MIN_WIDTH + (inspector ? _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.DOCUMENT_INSPECTOR_MIN_WIDTH : 0);\n  if (!schemaType) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ErrorPane, {\n      currentMinWidth,\n      flex: 2.5,\n      minWidth,\n      paneKey,\n      title: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\"Unknown document type: \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n          children: documentType\n        })]\n      }),\n      tone: \"caution\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Stack, {\n        space: 4,\n        children: [documentType && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n          as: \"p\",\n          children: [\"This document has the schema type \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n            children: documentType\n          }), \", which is not defined as a type in the local content studio schema.\"]\n        }), !documentType && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n          as: \"p\",\n          children: \"This document does not exist, and no schema type was specified for it.\"\n        }), sanity__WEBPACK_IMPORTED_MODULE_20__.isDev && value && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n            as: \"p\",\n            children: \"Here is the JSON representation of the document:\"\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Card, {\n            padding: 3,\n            overflow: \"auto\",\n            radius: 2,\n            shadow: 1,\n            tone: \"inherit\",\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Code, {\n              language: \"json\",\n              size: [1, 1, 2],\n              children: JSON.stringify(value, null, 2)\n            })\n          })]\n        })]\n      })\n    });\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(DocumentActionShortcuts, {\n    actionsBoxElement,\n    as: _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.Pane,\n    currentMinWidth,\n    \"data-testid\": \"document-pane\",\n    flex: 2.5,\n    id: paneKey,\n    minWidth,\n    onKeyUp,\n    rootRef: setRootElement,\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.DialogProvider, {\n      position: DIALOG_PROVIDER_POSITION,\n      zOffset: zOffsets.portal,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n        direction: \"column\",\n        flex: 1,\n        height: layoutCollapsed ? void 0 : \"fill\",\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StyledChangeConnectorRoot, {\n          \"data-testid\": \"change-connector-root\",\n          isReviewChangesOpen: changesOpen,\n          onOpenReviewChanges: onHistoryOpen,\n          onSetFocus: onConnectorSetFocus,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentPanel, {\n            footerHeight: footerH || null,\n            isInspectOpen: inspectOpen,\n            rootElement,\n            setDocumentPanelPortalElement\n          })\n        })\n      })\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.PortalProvider, {\n      __unstable_elements: {\n        [_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.DOCUMENT_PANEL_PORTAL_ELEMENT]: documentPanelPortalElement\n      },\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.DialogProvider, {\n        position: DIALOG_PROVIDER_POSITION,\n        zOffset: zOffsets.portal,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.PaneFooter, {\n          ref: setFooterElement,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentStatusBar, {\n            actionsBoxRef: setActionsBoxElement\n          })\n        })\n      })\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentOperationResults, {})]\n  });\n}\nfunction NoDocumentTypesScreen() {\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Card, {\n    height: \"fill\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n      align: \"center\",\n      height: \"fill\",\n      justify: \"center\",\n      padding: 4,\n      sizing: \"border\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Container, {\n        width: 0,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Card, {\n          padding: 4,\n          radius: 2,\n          shadow: 1,\n          tone: \"caution\",\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Flex, {\n            children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Box, {\n              children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n                size: 1,\n                children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_43__.WarningOutlineIcon, {})\n              })\n            }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Stack, {\n              flex: 1,\n              marginLeft: 3,\n              space: 3,\n              children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n                as: \"h1\",\n                size: 1,\n                weight: \"bold\",\n                children: \"No document types\"\n              }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n                as: \"p\",\n                muted: true,\n                size: 1,\n                children: \"Please define at least one document type in your schema.\"\n              }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.Text, {\n                as: \"p\",\n                muted: true,\n                size: 1,\n                children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", {\n                  href: \"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio\",\n                  target: \"_blank\",\n                  rel: \"noreferrer\",\n                  children: \"Learn how to add a document type \\u2192\"\n                })\n              })]\n            })]\n          })\n        })\n      })\n    })\n  });\n}\nconst DocumentTitle = props => {\n  const {\n    documentId,\n    documentType\n  } = props;\n  const editState = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useEditState)(documentId, documentType);\n  const schema = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useSchema)();\n  const isNewDocument = !(editState == null ? void 0 : editState.published) && !(editState == null ? void 0 : editState.draft);\n  const documentValue = (editState == null ? void 0 : editState.draft) || (editState == null ? void 0 : editState.published);\n  const schemaType = schema.get(documentType);\n  const {\n    value,\n    isLoading: previewValueIsLoading\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.unstable_useValuePreview)({\n    enabled: true,\n    schemaType,\n    value: documentValue\n  });\n  const documentTitle = isNewDocument ? \"New \".concat((schemaType == null ? void 0 : schemaType.title) || (schemaType == null ? void 0 : schemaType.name)) : (value == null ? void 0 : value.title) || \"Untitled\";\n  const settled = editState.ready && !previewValueIsLoading;\n  const newTitle = useConstructDocumentTitle(documentTitle);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!settled) return;\n    document.title = newTitle;\n  }, [documentTitle, settled, newTitle]);\n  return null;\n};\nconst PassthroughTitle = props => {\n  const {\n    title\n  } = props;\n  const newTitle = useConstructDocumentTitle(title);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    document.title = newTitle;\n  }, [newTitle, title]);\n  return null;\n};\nconst DeskTitle = props => {\n  const {\n    resolvedPanes\n  } = props;\n  if (!(resolvedPanes == null ? void 0 : resolvedPanes.length)) return null;\n  const lastPane = resolvedPanes[resolvedPanes.length - 1];\n  if (isLoadingPane(lastPane)) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PassthroughTitle, {});\n  }\n  if (isDocumentPane(lastPane)) {\n    if (lastPane == null ? void 0 : lastPane.title) {\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PassthroughTitle, {\n        title: lastPane.title\n      });\n    }\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentTitle, {\n      documentId: lastPane.options.id,\n      documentType: lastPane.options.type\n    });\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PassthroughTitle, {\n    title: lastPane == null ? void 0 : lastPane.title\n  });\n};\nfunction useConstructDocumentTitle(activeTitle) {\n  const deskToolBaseTitle = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDeskTool)().structureContext.title;\n  return [activeTitle, deskToolBaseTitle].filter(title => title).join(\" | \");\n}\nfunction isDocumentPane(pane) {\n  return pane !== _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.LOADING_PANE && pane.type === \"document\";\n}\nfunction isLoadingPane(pane) {\n  return pane === _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.LOADING_PANE;\n}\nvar __freeze = Object.freeze;\nvar __defProp = Object.defineProperty;\nvar __template = (cooked, raw) => __freeze(__defProp(cooked, \"raw\", {\n  value: __freeze(raw || cooked.slice())\n}));\nvar _a;\nconst StyledPaneLayout = (0,styled_components__WEBPACK_IMPORTED_MODULE_42__[\"default\"])(PaneLayout)(_a || (_a = __template([\"\\n  min-height: 100%;\\n  min-width: 320px;\\n\"])));\nconst isSaveHotkey = (0,is_hotkey__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(\"mod+s\");\nconst DeskTool = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function DeskTool2(_ref22) {\n  let {\n    onPaneChange\n  } = _ref22;\n  var _a2;\n  const {\n    push: pushToast\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.useToast)();\n  const schema = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useSchema)();\n  const {\n    layoutCollapsed,\n    setLayoutCollapsed\n  } = (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.useDeskTool)();\n  const {\n    paneDataItems,\n    resolvedPanes\n  } = useResolvedPanes();\n  const isResolvingIntent = (0,sanity_router__WEBPACK_IMPORTED_MODULE_21__.useRouterState)((0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(routerState => typeof routerState.intent === \"string\", []));\n  const {\n    sanity: {\n      media\n    }\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.useTheme)();\n  const [portalElement, setPortalElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const handleRootCollapse = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => setLayoutCollapsed(true), [setLayoutCollapsed]);\n  const handleRootExpand = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => setLayoutCollapsed(false), [setLayoutCollapsed]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (resolvedPanes.length) {\n      onPaneChange(resolvedPanes);\n    }\n  }, [onPaneChange, resolvedPanes]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const handleGlobalKeyDown = event => {\n      if (isSaveHotkey(event)) {\n        event.preventDefault();\n        pushToast({\n          closable: true,\n          id: \"auto-save-message\",\n          status: \"info\",\n          title: \"Your work is automatically saved!\",\n          duration: 4e3\n        });\n      }\n    };\n    window.addEventListener(\"keydown\", handleGlobalKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleGlobalKeyDown);\n  }, [pushToast]);\n  const hasDefinedDocumentTypes = (_a2 = schema._original) == null ? void 0 : _a2.types.some(sanity__WEBPACK_IMPORTED_MODULE_20__._isCustomDocumentTypeDefinition);\n  if (!hasDefinedDocumentTypes) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NoDocumentTypesScreen, {});\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.PortalProvider, {\n    element: portalElement || null,\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(StyledPaneLayout, {\n      flex: 1,\n      height: layoutCollapsed ? void 0 : \"fill\",\n      minWidth: media[1],\n      onCollapse: handleRootCollapse,\n      onExpand: handleRootExpand,\n      children: [paneDataItems.map(_ref23 => {\n        let {\n          active,\n          childItemId,\n          groupIndex,\n          itemId,\n          key: paneKey,\n          pane,\n          index: paneIndex,\n          params: paneParams,\n          path,\n          payload,\n          siblingIndex,\n          selected\n        } = _ref23;\n        return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {\n          children: pane === _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.LOADING_PANE ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingPane, {\n            paneKey,\n            path,\n            selected\n          }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DeskToolPane, {\n            active,\n            groupIndex,\n            index: paneIndex,\n            pane,\n            childItemId,\n            itemId,\n            paneKey,\n            params: paneParams,\n            payload,\n            path,\n            selected,\n            siblingIndex\n          })\n        }, \"\".concat(pane === _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.LOADING_PANE ? \"loading\" : pane.type, \"-\").concat(paneIndex));\n      }), paneDataItems.length <= 1 && isResolvingIntent && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingPane, {\n        paneKey: \"intent-resolver\"\n      })]\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DeskTitle, {\n      resolvedPanes\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n      \"data-portal\": \"\",\n      ref: setPortalElement\n    })]\n  });\n});\nfunction DeskToolBoundary(_ref24) {\n  let {\n    tool: {\n      options\n    }\n  } = _ref24;\n  const {\n    unstable_sources: sources\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_20__.useWorkspace)();\n  const [firstSource] = sources;\n  const {\n    source,\n    defaultDocumentNode,\n    structure\n  } = options || {};\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.setActivePanes)([]);\n    return () => (0,_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.setActivePanes)([]);\n  }, []);\n  const [{\n    error\n  }, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n    error: null\n  });\n  if (error) return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StructureError, {\n    error\n  });\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_23__.ErrorBoundary, {\n    onCatch: setError,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_20__.SourceProvider, {\n      name: source || firstSource.name,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.DeskToolProvider, {\n        defaultDocumentNode,\n        structure,\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DeskTool, {\n          onPaneChange: _desk_9ccee866_js__WEBPACK_IMPORTED_MODULE_22__.setActivePanes\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(IntentResolver, {})]\n      })\n    })\n  });\n}\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  default: DeskToolBoundary\n});\n\n//# sourceMappingURL=index-ccbd3c57.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9zYW5pdHkvbGliL19jaHVua3MvaW5kZXgtY2NiZDNjNTcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDMEk7QUFDc1A7QUFDaVI7QUFDdnFCO0FBQ2lFO0FBQ25FO0FBQzJIO0FBQ3NoQjtBQUNybkI7QUFDcEI7QUFDa0I7QUFDdEI7QUFDdUI7QUFDaUg7QUFDL0k7QUFDUjtBQUNHO0FBQ0s7QUFDSDtBQUNGO0FBQ0k7QUFDa0I7QUFDakI7QUFDSTtBQUM4QjtBQUN4QztBQUNLO0FBQ0E7QUFDaUI7QUFDYTtBQUMvQjtBQUNZO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSix3QkFBd0Isc0RBQUcsQ0FBQywyREFBc0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osd0JBQXdCLHNEQUFHLENBQUMsMkRBQXNCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUksRUFBRSx5REFBUztBQUNmLHNCQUFzQiw4REFBYztBQUNwQztBQUNBO0FBQ0E7QUFDQSxJQUFJLEVBQUUsaUVBQWE7QUFDbkIsMkJBQTJCLDhDQUFPO0FBQ2xDLG1CQUFtQiw4Q0FBTztBQUMxQjtBQUNBLDZCQUE2QixrREFBVztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHFCQUFxQixrREFBVztBQUNoQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILG9CQUFvQixrREFBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILDhCQUE4QixrREFBVztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNkRBQVE7QUFDakM7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSCxjQUFjLDhDQUFPO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSx5QkFBeUIscURBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsd0JBQXdCLHNEQUFHLENBQUMsaUVBQWlCO0FBQzdDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsc0VBQXNCO0FBQ2pGLDZEQUE2RCxzRUFBc0I7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDLHNEQUFhO0FBQ3pDO0FBQ0EsNkJBQTZCLHNEQUFHLENBQUMsbURBQWM7QUFDL0M7QUFDQSwrQkFBK0IsdURBQUksQ0FBQyxnRUFBZ0I7QUFDcEQ7QUFDQTtBQUNBLGtDQUFrQyxzREFBRztBQUNyQyx3QkFBd0IsOERBQWM7QUFDdEMsU0FBUyxrQkFBa0Isc0RBQUcsbUJBQW1CO0FBQ2pELE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNrRDtBQUNuRCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvc2FuaXR5L2xpYi9fY2h1bmtzL2luZGV4LWNjYmQzYzU3LmpzPzNjMzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4LCBqc3hzLCBGcmFnbWVudCB9IGZyb20gJ3JlYWN0L2pzeC1ydW50aW1lJztcbmltcG9ydCBSZWFjdCwgeyB1c2VNZW1vLCB1c2VDYWxsYmFjaywgdXNlU3RhdGUsIHVzZUVmZmVjdCwgY3JlYXRlRWxlbWVudCwgbWVtbywgbGF6eSwgU3VzcGVuc2UsIHVzZVJlZiwgZm9yd2FyZFJlZiwgdXNlSWQsIGlzVmFsaWRFbGVtZW50LCB1c2VMYXlvdXRFZmZlY3QsIEZyYWdtZW50IGFzIEZyYWdtZW50JDEgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VFbGVtZW50UmVjdCwgQm94LCBDYXJkLCBDb250YWluZXIsIEhlYWRpbmcsIFN0YWNrLCBMYWJlbCwgQ29kZSwgVGV4dCwgQnV0dG9uLCBGbGV4LCBfcmFmMiwgU3Bpbm5lciwgdXNlVG9hc3QsIHJlbSwgVGV4dElucHV0LCBEaWFsb2csIFRhYkxpc3QsIFRhYiwgVGFiUGFuZWwsIGZvY3VzRmlyc3REZXNjZW5kYW50LCBUb29sdGlwLCB1c2VQb3J0YWwsIFBvcnRhbFByb3ZpZGVyLCBCb3VuZGFyeUVsZW1lbnRQcm92aWRlciwgUG9wb3ZlciwgdXNlTGF5ZXIsIHVzZUNsaWNrT3V0c2lkZSwgdXNlR2xvYmFsS2V5RG93biwgR3JpZCwgTWVudUJ1dHRvbiwgTWVudSwgTWVudUl0ZW0sIEhvdGtleXMsIExheWVyUHJvdmlkZXIsIElubGluZSwgQmFkZ2UsIERpYWxvZ1Byb3ZpZGVyLCB1c2VUaGVtZSwgRXJyb3JCb3VuZGFyeSB9IGZyb20gJ0BzYW5pdHkvdWknO1xuaW1wb3J0IHsgdXNlUGFuZUxheW91dCwgQ2hpbGRMaW5rLCBCYWNrTGluaywgUmVmZXJlbmNlQ2hpbGRMaW5rLCBQYXJhbWV0ZXJpemVkTGluaywgUGFuZVJvdXRlckNvbnRleHQsIFBBTkVfREVGQVVMVF9NSU5fV0lEVEgsIFBBTkVfQ09MTEFQU0VEX1dJRFRILCBQYW5lTGF5b3V0Q29udGV4dCwgUm9vdCBhcyBSb290JDQsIHVzZVBhbmUsIHVzZURvY3VtZW50UGFuZSwgdXNlRGVza1Rvb2wsIFJlc2l6YWJsZSwgRE9DVU1FTlRfSU5TUEVDVE9SX01BWF9XSURUSCwgRE9DVU1FTlRfSU5TUEVDVE9SX01JTl9XSURUSCwgTE9BRElOR19QQU5FLCBTZXJpYWxpemVFcnJvciwgUGFuZSwgUGFuZUhlYWRlciwgUGFuZUNvbnRlbnQsIHVzZVBhbmVSb3V0ZXIsIERvY1RpdGxlLCBEZWxheSwgcmVzb2x2ZU1lbnVOb2RlcywgaXNNZW51Tm9kZUJ1dHRvbiwgaXNOb3RNZW51Tm9kZUJ1dHRvbiwgVGltZWxpbmVNZW51LCBQYW5lSGVhZGVyQWN0aW9uQnV0dG9uLCBQYW5lQ29udGV4dE1lbnVCdXR0b24sIERPQ1VNRU5UX1BBTkVMX1BPUlRBTF9FTEVNRU5ULCBIaXN0b3J5UmVzdG9yZUFjdGlvbiwgRG9jdW1lbnRQYW5lUHJvdmlkZXIsIFBhbmVGb290ZXIsIERPQ1VNRU5UX1BBTkVMX0lOSVRJQUxfTUlOX1dJRFRILCBET0NVTUVOVF9QQU5FTF9NSU5fV0lEVEgsIHNldEFjdGl2ZVBhbmVzLCBEZXNrVG9vbFByb3ZpZGVyIH0gZnJvbSAnLi9kZXNrLTljY2VlODY2LmpzJztcbmltcG9ydCBvbWl0IGZyb20gJ2xvZGFzaC9vbWl0LmpzJztcbmltcG9ydCB7IGlzT2JzZXJ2YWJsZSwgZnJvbSwgb2YsIGZpcnN0VmFsdWVGcm9tLCBORVZFUiwgY29uY2F0LCBSZXBsYXlTdWJqZWN0LCBtZXJnZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbmFub2lkIH0gZnJvbSAnbmFub2lkJztcbmltcG9ydCB7IHN3aXRjaE1hcCwgcHVibGlzaFJlcGxheSwgcmVmQ291bnQsIG1hcCwgc3RhcnRXaXRoLCBwYWlyd2lzZSwgc2NhbiwgZGlzdGluY3RVbnRpbENoYW5nZWQsIG1hcFRvLCBkZWxheSwgZGVib3VuY2VUaW1lLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBHZXRIb29rQ29sbGVjdGlvblN0YXRlLCBpc1JlY29yZCwgdXNlRG9jdW1lbnRTdG9yZSwgaXNEZXYsIHVzZURvY3VtZW50T3BlcmF0aW9uRXZlbnQsIHVzZVNldHRpbmdzU3RvcmUsIGlzU3RyaW5nLCB1c2VEb2N1bWVudE9wZXJhdGlvbiwgdXNlRG9jdW1lbnRQcmV2aWV3U3RvcmUsIGdldFB1Ymxpc2hlZElkLCB1c2VDdXJyZW50VXNlciwgdXNlRG9jdW1lbnRQcmVzZW5jZSwgY3JlYXRlUGF0Y2hDaGFubmVsLCBQcmVzZW5jZU92ZXJsYXksIEZvcm1CdWlsZGVyLCBmcm9tTXV0YXRpb25QYXRjaGVzLCB1bnN0YWJsZV91c2VWYWx1ZVByZXZpZXcsIHVzZUZpZWxkQWN0aW9ucywgdXNlVGltZWxpbmVTZWxlY3RvciwgU2Nyb2xsQ29udGFpbmVyLCBWaXJ0dWFsaXplclNjcm9sbEluc3RhbmNlUHJvdmlkZXIsIExlZ2FjeUxheWVyUHJvdmlkZXIsIHVzZVRpbWVBZ28sIHVzZVN5bmNTdGF0ZSwgQ2hhbmdlQ29ubmVjdG9yUm9vdCwgdXNlU291cmNlLCBTb3VyY2VQcm92aWRlciwgdXNlRG9jdW1lbnRUeXBlLCB1c2VUZW1wbGF0ZVBlcm1pc3Npb25zLCBSZWZlcmVuY2VJbnB1dE9wdGlvbnNQcm92aWRlciwgdXNlVGVtcGxhdGVzLCB1c2VaSW5kZXgsIHVzZUVkaXRTdGF0ZSwgdXNlU2NoZW1hLCBfaXNDdXN0b21Eb2N1bWVudFR5cGVEZWZpbml0aW9uLCB1c2VXb3Jrc3BhY2UgfSBmcm9tICdzYW5pdHknO1xuaW1wb3J0IHsgZ2VuZXJhdGVIZWxwVXJsIH0gZnJvbSAnQHNhbml0eS9nZW5lcmF0ZS1oZWxwLXVybCc7XG5pbXBvcnQgaXNFcXVhbCBmcm9tICdsb2Rhc2gvaXNFcXVhbC5qcyc7XG5pbXBvcnQgeyB1c2VSb3V0ZXIsIHVzZVJvdXRlclN0YXRlIH0gZnJvbSAnc2FuaXR5L3JvdXRlcic7XG5pbXBvcnQgeyB1dWlkIH0gZnJvbSAnQHNhbml0eS91dWlkJztcbmltcG9ydCBzdHlsZWQsIHsgY3NzLCBrZXlmcmFtZXMgfSBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBTeW5jSWNvbiwgU2VhcmNoSWNvbiwgUmVhZE9ubHlJY29uLCBXYXJuaW5nT3V0bGluZUljb24sIENsb3NlSWNvbiwgQXJyb3dMZWZ0SWNvbiwgU3BsaXRWZXJ0aWNhbEljb24sIENoZXZyb25Eb3duSWNvbiwgUGxheUljb24sIFB1Ymxpc2hJY29uIH0gZnJvbSAnQHNhbml0eS9pY29ucyc7XG5pbXBvcnQgJ2xvZGFzaC9jYW1lbENhc2UuanMnO1xuaW1wb3J0ICdzcGVha2luZ3VybCc7XG5pbXBvcnQgJ2xvZGFzaC91bmlxLmpzJztcbmltcG9ydCAnbG9kYXNoL2tlYmFiQ2FzZS5qcyc7XG5pbXBvcnQgJ2xvZGFzaC9waWNrQnkuanMnO1xuaW1wb3J0ICdsb2Rhc2gvZmluZC5qcyc7XG5pbXBvcnQgJ2xvZGFzaC91bmlxdWVJZC5qcyc7XG5pbXBvcnQgeyBpc1ZhbGlkRWxlbWVudFR5cGUgfSBmcm9tICdyZWFjdC1pcyc7XG5pbXBvcnQgJ2xvZGFzaC9zdGFydENhc2UuanMnO1xuaW1wb3J0IGlzSG90a2V5IGZyb20gJ2lzLWhvdGtleSc7XG5pbXBvcnQgeyB0b1N0cmluZywgZnJvbVN0cmluZywgZ2V0IH0gZnJvbSAnQHNhbml0eS91dGlsL3BhdGhzJztcbmltcG9ydCAnQHNhbml0eS90eXBlcyc7XG5pbXBvcnQgJ2xvZGFzaC9pc051bWJlci5qcyc7XG5pbXBvcnQgJ2xvZGFzaC9pc1N0cmluZy5qcyc7XG5pbXBvcnQgeyB1c2VNZW1vT2JzZXJ2YWJsZSB9IGZyb20gJ3JlYWN0LXJ4JztcbmltcG9ydCBKU09OSW5zcGVjdG9yIGZyb20gJ0ByZXh4YXJzL3JlYWN0LWpzb24taW5zcGVjdG9yJztcbmltcG9ydCBITFJVIGZyb20gJ2hhc2hscnUnO1xuaW1wb3J0IHsgbW90aW9uIH0gZnJvbSAnZnJhbWVyLW1vdGlvbic7XG5jb25zdCBSZW5kZXJBY3Rpb25Db2xsZWN0aW9uU3RhdGUgPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHtcbiAgICBhY3Rpb25zLFxuICAgIGNoaWxkcmVuLFxuICAgIGFjdGlvblByb3BzLFxuICAgIG9uQWN0aW9uQ29tcGxldGVcbiAgfSA9IHByb3BzO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KEdldEhvb2tDb2xsZWN0aW9uU3RhdGUsIHtcbiAgICBvblJlc2V0OiBvbkFjdGlvbkNvbXBsZXRlLFxuICAgIGhvb2tzOiBhY3Rpb25zLFxuICAgIGFyZ3M6IGFjdGlvblByb3BzLFxuICAgIGNoaWxkcmVuXG4gIH0pO1xufTtcbmNvbnN0IFJlbmRlckJhZGdlQ29sbGVjdGlvblN0YXRlID0gcHJvcHMgPT4ge1xuICBjb25zdCB7XG4gICAgYmFkZ2VzLFxuICAgIGNoaWxkcmVuLFxuICAgIGJhZGdlUHJvcHMsXG4gICAgLi4ucmVzdFxuICB9ID0gcHJvcHM7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goR2V0SG9va0NvbGxlY3Rpb25TdGF0ZSwge1xuICAgIC4uLnJlc3QsXG4gICAgaG9va3M6IGJhZGdlcyxcbiAgICBhcmdzOiBiYWRnZVByb3BzLFxuICAgIGNoaWxkcmVuXG4gIH0pO1xufTtcbmNvbnN0IGVtcHR5QXJyYXkgPSBbXTtcbmZ1bmN0aW9uIFBhbmVSb3V0ZXJQcm92aWRlcihwcm9wcykge1xuICBjb25zdCB7XG4gICAgY2hpbGRyZW4sXG4gICAgZmxhdEluZGV4LFxuICAgIGluZGV4LFxuICAgIHBhcmFtcyxcbiAgICBwYXlsb2FkLFxuICAgIHNpYmxpbmdJbmRleFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBuYXZpZ2F0ZSxcbiAgICBuYXZpZ2F0ZUludGVudFxuICB9ID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IHJvdXRlclN0YXRlID0gdXNlUm91dGVyU3RhdGUoKTtcbiAgY29uc3Qge1xuICAgIHBhbmVzLFxuICAgIGV4cGFuZFxuICB9ID0gdXNlUGFuZUxheW91dCgpO1xuICBjb25zdCByb3V0ZXJQYW5lR3JvdXBzID0gdXNlTWVtbygoKSA9PiAocm91dGVyU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclN0YXRlLnBhbmVzKSB8fCBlbXB0eUFycmF5LCBbcm91dGVyU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclN0YXRlLnBhbmVzXSk7XG4gIGNvbnN0IGxhc3RQYW5lID0gdXNlTWVtbygoKSA9PiBwYW5lcyA9PSBudWxsID8gdm9pZCAwIDogcGFuZXNbcGFuZXMubGVuZ3RoIC0gMl0sIFtwYW5lc10pO1xuICBjb25zdCBncm91cEluZGV4ID0gaW5kZXggLSAxO1xuICBjb25zdCBtb2RpZnlDdXJyZW50R3JvdXAgPSB1c2VDYWxsYmFjayhtb2RpZmllciA9PiB7XG4gICAgY29uc3QgY3VycmVudEdyb3VwID0gcm91dGVyUGFuZUdyb3Vwc1tncm91cEluZGV4XSB8fCBbXTtcbiAgICBjb25zdCBjdXJyZW50SXRlbSA9IGN1cnJlbnRHcm91cFtzaWJsaW5nSW5kZXhdO1xuICAgIGNvbnN0IG5leHRHcm91cCA9IG1vZGlmaWVyKGN1cnJlbnRHcm91cCwgY3VycmVudEl0ZW0pO1xuICAgIGNvbnN0IG5leHRQYW5lcyA9IFsuLi5yb3V0ZXJQYW5lR3JvdXBzLnNsaWNlKDAsIGdyb3VwSW5kZXgpLCBuZXh0R3JvdXAsIC4uLnJvdXRlclBhbmVHcm91cHMuc2xpY2UoZ3JvdXBJbmRleCArIDEpXTtcbiAgICBjb25zdCBuZXh0Um91dGVyU3RhdGUgPSB7XG4gICAgICAuLi4ocm91dGVyU3RhdGUgfHwge30pLFxuICAgICAgcGFuZXM6IG5leHRQYW5lc1xuICAgIH07XG4gICAgc2V0VGltZW91dCgoKSA9PiBuYXZpZ2F0ZShuZXh0Um91dGVyU3RhdGUpLCAwKTtcbiAgICByZXR1cm4gbmV4dFJvdXRlclN0YXRlO1xuICB9LCBbZ3JvdXBJbmRleCwgbmF2aWdhdGUsIHJvdXRlclBhbmVHcm91cHMsIHJvdXRlclN0YXRlLCBzaWJsaW5nSW5kZXhdKTtcbiAgY29uc3Qgc2V0UGF5bG9hZCA9IHVzZUNhbGxiYWNrKG5leHRQYXlsb2FkID0+IHtcbiAgICBtb2RpZnlDdXJyZW50R3JvdXAoKHNpYmxpbmdzLCBpdGVtKSA9PiBbLi4uc2libGluZ3Muc2xpY2UoMCwgc2libGluZ0luZGV4KSwge1xuICAgICAgLi4uaXRlbSxcbiAgICAgIHBheWxvYWQ6IG5leHRQYXlsb2FkXG4gICAgfSwgLi4uc2libGluZ3Muc2xpY2Uoc2libGluZ0luZGV4ICsgMSldKTtcbiAgfSwgW21vZGlmeUN1cnJlbnRHcm91cCwgc2libGluZ0luZGV4XSk7XG4gIGNvbnN0IHNldFBhcmFtcyA9IHVzZUNhbGxiYWNrKG5leHRQYXJhbXMgPT4ge1xuICAgIG1vZGlmeUN1cnJlbnRHcm91cCgoc2libGluZ3MsIGl0ZW0pID0+IFsuLi5zaWJsaW5ncy5zbGljZSgwLCBzaWJsaW5nSW5kZXgpLCB7XG4gICAgICAuLi5pdGVtLFxuICAgICAgcGFyYW1zOiBuZXh0UGFyYW1zXG4gICAgfSwgLi4uc2libGluZ3Muc2xpY2Uoc2libGluZ0luZGV4ICsgMSldKTtcbiAgfSwgW21vZGlmeUN1cnJlbnRHcm91cCwgc2libGluZ0luZGV4XSk7XG4gIGNvbnN0IGhhbmRsZUVkaXRSZWZlcmVuY2UgPSB1c2VDYWxsYmFjayhfcmVmID0+IHtcbiAgICBsZXQge1xuICAgICAgaWQsXG4gICAgICBwYXJlbnRSZWZQYXRoLFxuICAgICAgdHlwZSxcbiAgICAgIHRlbXBsYXRlXG4gICAgfSA9IF9yZWY7XG4gICAgbmF2aWdhdGUoe1xuICAgICAgcGFuZXM6IFsuLi5yb3V0ZXJQYW5lR3JvdXBzLnNsaWNlKDAsIGdyb3VwSW5kZXggKyAxKSwgW3tcbiAgICAgICAgaWQsXG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZS5pZCxcbiAgICAgICAgICBwYXJlbnRSZWZQYXRoOiB0b1N0cmluZyhwYXJlbnRSZWZQYXRoKSxcbiAgICAgICAgICB0eXBlXG4gICAgICAgIH0sXG4gICAgICAgIHBheWxvYWQ6IHRlbXBsYXRlLnBhcmFtc1xuICAgICAgfV1dXG4gICAgfSk7XG4gIH0sIFtncm91cEluZGV4LCBuYXZpZ2F0ZSwgcm91dGVyUGFuZUdyb3Vwc10pO1xuICBjb25zdCBjdHggPSB1c2VNZW1vKCgpID0+ICh7XG4gICAgLy8gWmVyby1iYXNlZCBpbmRleCAocG9zaXRpb24pIG9mIHBhbmUsIHZpc3VhbGx5XG4gICAgaW5kZXg6IGZsYXRJbmRleCxcbiAgICAvLyBaZXJvLWJhc2VkIGluZGV4IG9mIHBhbmUgZ3JvdXAgKHdpdGhpbiBVUkwgc3RydWN0dXJlKVxuICAgIGdyb3VwSW5kZXgsXG4gICAgLy8gWmVyby1iYXNlZCBpbmRleCBvZiBwYW5lIHdpdGhpbiBzaWJsaW5nIGdyb3VwXG4gICAgc2libGluZ0luZGV4LFxuICAgIC8vIFBheWxvYWQgb2YgdGhlIGN1cnJlbnQgcGFuZVxuICAgIHBheWxvYWQsXG4gICAgLy8gUGFyYW1zIG9mIHRoZSBjdXJyZW50IHBhbmVcbiAgICBwYXJhbXMsXG4gICAgLy8gV2hldGhlciBvciBub3QgdGhlIHBhbmUgaGFzIGFueSBzaWJsaW5ncyAod2l0aGluIHRoZSBzYW1lIGdyb3VwKVxuICAgIGhhc0dyb3VwU2libGluZ3M6IHJvdXRlclBhbmVHcm91cHNbZ3JvdXBJbmRleF0gPyByb3V0ZXJQYW5lR3JvdXBzW2dyb3VwSW5kZXhdLmxlbmd0aCA+IDEgOiBmYWxzZSxcbiAgICAvLyBUaGUgbGVuZ3RoIG9mIHRoZSBjdXJyZW50IGdyb3VwXG4gICAgZ3JvdXBMZW5ndGg6IHJvdXRlclBhbmVHcm91cHNbZ3JvdXBJbmRleF0gPyByb3V0ZXJQYW5lR3JvdXBzW2dyb3VwSW5kZXhdLmxlbmd0aCA6IDAsXG4gICAgLy8gQ3VycmVudCByb3V0ZXIgc3RhdGUgZm9yIHRoZSBcInBhbmVzXCIgcHJvcGVydHlcbiAgICByb3V0ZXJQYW5lc1N0YXRlOiByb3V0ZXJQYW5lR3JvdXBzLFxuICAgIC8vIEN1cnJpZWQgU3RhdGVMaW5rIHRoYXQgcGFzc2VzIHRoZSBjb3JyZWN0IHN0YXRlIGF1dG9tYXRpY2FsbHlcbiAgICBDaGlsZExpbmssXG4gICAgLy8gQ3VycmllZCBTdGF0ZUxpbmsgdGhhdCBwb3BzIG9mZiB0aGUgbGFzdCBwYW5lIGdyb3VwXG4gICAgQmFja0xpbmssXG4gICAgLy8gQSBzcGVjaWFsaXplZCBgQ2hpbGRMaW5rYCB0aGF0IHRha2VzIGluIHRoZSBuZWVkZWQgcHJvcHMgdG8gb3BlbiBhXG4gICAgLy8gcmVmZXJlbmNlZCBkb2N1bWVudCB0byB0aGUgcmlnaHRcbiAgICBSZWZlcmVuY2VDaGlsZExpbmssXG4gICAgLy8gU2ltaWxhciB0byBgUmVmZXJlbmNlQ2hpbGRMaW5rYCBleHBlY3Qgd2l0aG91dCB0aGUgd3JhcHBpbmcgY29tcG9uZW50XG4gICAgaGFuZGxlRWRpdFJlZmVyZW5jZSxcbiAgICAvLyBDdXJyaWVkIFN0YXRlTGluayB0aGF0IHBhc3NlZCB0aGUgY29ycmVjdCBzdGF0ZSwgYnV0IG1lcmdlcyBwYXJhbXMvcGF5bG9hZFxuICAgIFBhcmFtZXRlcml6ZWRMaW5rLFxuICAgIC8vIFJlcGxhY2VzIHRoZSBjdXJyZW50IHBhbmUgd2l0aCBhIG5ldyBvbmVcbiAgICByZXBsYWNlQ3VycmVudDogZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgICAgbW9kaWZ5Q3VycmVudEdyb3VwKCgpID0+IFt7XG4gICAgICAgIGlkOiBvcHRzLmlkIHx8IFwiXCIsXG4gICAgICAgIHBheWxvYWQ6IG9wdHMucGF5bG9hZCxcbiAgICAgICAgcGFyYW1zOiBvcHRzLnBhcmFtcyB8fCB7fVxuICAgICAgfV0pO1xuICAgIH0sXG4gICAgLy8gUmVtb3ZlcyB0aGUgY3VycmVudCBwYW5lIGZyb20gdGhlIGdyb3VwXG4gICAgY2xvc2VDdXJyZW50OiAoKSA9PiB7XG4gICAgICBtb2RpZnlDdXJyZW50R3JvdXAoKHNpYmxpbmdzLCBpdGVtKSA9PiBzaWJsaW5ncy5sZW5ndGggPiAxID8gc2libGluZ3MuZmlsdGVyKHNpYmxpbmcgPT4gc2libGluZyAhPT0gaXRlbSkgOiBzaWJsaW5ncyk7XG4gICAgfSxcbiAgICAvLyBSZW1vdmVzIGFsbCBwYW5lcyB0byB0aGUgcmlnaHQgaW5jbHVkaW5nIGN1cnJlbnRcbiAgICBjbG9zZUN1cnJlbnRBbmRBZnRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGV4cGFuZExhc3QgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRydWU7XG4gICAgICBpZiAoZXhwYW5kTGFzdCAmJiBsYXN0UGFuZSkge1xuICAgICAgICBleHBhbmQobGFzdFBhbmUuZWxlbWVudCk7XG4gICAgICB9XG4gICAgICBuYXZpZ2F0ZSh7XG4gICAgICAgIHBhbmVzOiBbLi4ucm91dGVyUGFuZUdyb3Vwcy5zbGljZSgwLCBncm91cEluZGV4KV1cbiAgICAgIH0sIHtcbiAgICAgICAgcmVwbGFjZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBEdXBsaWNhdGUgdGhlIGN1cnJlbnQgcGFuZSwgd2l0aCBvcHRpb25hbCBvdmVycmlkZXMgZm9yIHBheWxvYWQsIHBhcmFtZXRlcnNcbiAgICBkdXBsaWNhdGVDdXJyZW50OiBvcHRpb25zID0+IHtcbiAgICAgIG1vZGlmeUN1cnJlbnRHcm91cCgoc2libGluZ3MsIGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgZHVwbGljYXRlZEl0ZW0gPSB7XG4gICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICBwYXlsb2FkOiAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5wYXlsb2FkKSB8fCBpdGVtLnBheWxvYWQsXG4gICAgICAgICAgcGFyYW1zOiAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5wYXJhbXMpIHx8IGl0ZW0ucGFyYW1zXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBbLi4uc2libGluZ3Muc2xpY2UoMCwgc2libGluZ0luZGV4KSwgZHVwbGljYXRlZEl0ZW0sIC4uLnNpYmxpbmdzLnNsaWNlKHNpYmxpbmdJbmRleCldO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBTZXQgdGhlIHZpZXcgZm9yIHRoZSBjdXJyZW50IHBhbmVcbiAgICBzZXRWaWV3OiB2aWV3SWQgPT4ge1xuICAgICAgY29uc3QgcmVzdFBhcmFtcyA9IG9taXQocGFyYW1zLCBcInZpZXdcIik7XG4gICAgICByZXR1cm4gc2V0UGFyYW1zKHZpZXdJZCA/IHtcbiAgICAgICAgLi4ucmVzdFBhcmFtcyxcbiAgICAgICAgdmlldzogdmlld0lkXG4gICAgICB9IDogcmVzdFBhcmFtcyk7XG4gICAgfSxcbiAgICAvLyBTZXQgdGhlIHBhcmFtZXRlcnMgZm9yIHRoZSBjdXJyZW50IHBhbmVcbiAgICBzZXRQYXJhbXMsXG4gICAgLy8gU2V0IHRoZSBwYXlsb2FkIGZvciB0aGUgY3VycmVudCBwYW5lXG4gICAgc2V0UGF5bG9hZCxcbiAgICAvLyBQcm94aWVkIG5hdmlnYXRpb24gdG8gYSBnaXZlbiBpbnRlbnQuIENvbnNpZGVyIGp1c3QgZXhwb3NpbmcgYHJvdXRlcmAgaW5zdGVhZD9cbiAgICBuYXZpZ2F0ZUludGVudFxuICB9KSwgW2ZsYXRJbmRleCwgZ3JvdXBJbmRleCwgc2libGluZ0luZGV4LCBwYXlsb2FkLCBwYXJhbXMsIHJvdXRlclBhbmVHcm91cHMsIGhhbmRsZUVkaXRSZWZlcmVuY2UsIHNldFBhcmFtcywgc2V0UGF5bG9hZCwgbmF2aWdhdGVJbnRlbnQsIG1vZGlmeUN1cnJlbnRHcm91cCwgbGFzdFBhbmUsIG5hdmlnYXRlLCBleHBhbmRdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChQYW5lUm91dGVyQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBjdHgsXG4gICAgY2hpbGRyZW5cbiAgfSk7XG59XG5mdW5jdGlvbiBfY2FsY1BhbmVSZXNpemUoY2FjaGUsIGxlZnQsIHJpZ2h0LCBkZWx0YVgpIHtcbiAgdmFyIF9hLCBfYjtcbiAgY29uc3Qgc3VtID0ge1xuICAgIGZsZXg6IGNhY2hlLmxlZnQuZmxleCArIGNhY2hlLnJpZ2h0LmZsZXgsXG4gICAgd2lkdGg6IGNhY2hlLmxlZnQud2lkdGggKyBjYWNoZS5yaWdodC53aWR0aFxuICB9O1xuICBjb25zdCBsZWZ0TWluV2lkdGggPSAoX2EgPSBsZWZ0Lm1pbldpZHRoKSAhPSBudWxsID8gX2EgOiBQQU5FX0RFRkFVTFRfTUlOX1dJRFRIO1xuICBjb25zdCByaWdodE1pbldpZHRoID0gKF9iID0gcmlnaHQubWluV2lkdGgpICE9IG51bGwgPyBfYiA6IFBBTkVfREVGQVVMVF9NSU5fV0lEVEg7XG4gIGNvbnN0IGxlZnRNYXhXaWR0aCA9IE1hdGgubWluKGxlZnQubWF4V2lkdGggfHwgSW5maW5pdHksIHN1bS53aWR0aCAtIHJpZ2h0TWluV2lkdGgpO1xuICBjb25zdCByaWdodE1heFdpZHRoID0gTWF0aC5taW4ocmlnaHQubWF4V2lkdGggfHwgSW5maW5pdHksIHN1bS53aWR0aCAtIGxlZnRNaW5XaWR0aCk7XG4gIGxldCBtaW5EZWx0YVggPSBsZWZ0TWluV2lkdGggLSBjYWNoZS5sZWZ0LndpZHRoO1xuICBjb25zdCByaWdodE1pbkRlbHRhWCA9IGNhY2hlLnJpZ2h0LndpZHRoIC0gcmlnaHRNYXhXaWR0aDtcbiAgaWYgKG1pbkRlbHRhWCA8IHJpZ2h0TWluRGVsdGFYKSB7XG4gICAgbWluRGVsdGFYID0gcmlnaHRNaW5EZWx0YVg7XG4gIH1cbiAgbGV0IG1heERlbHRhWCA9IGNhY2hlLnJpZ2h0LndpZHRoIC0gcmlnaHRNaW5XaWR0aDtcbiAgY29uc3QgbGVmdE1heERlbHRhWCA9IGxlZnRNYXhXaWR0aCAtIGNhY2hlLmxlZnQud2lkdGg7XG4gIGlmIChtYXhEZWx0YVggPiBsZWZ0TWF4RGVsdGFYKSB7XG4gICAgbWF4RGVsdGFYID0gbGVmdE1heERlbHRhWDtcbiAgfVxuICBjb25zdCBfZGVsdGFYID0gTWF0aC5taW4oTWF0aC5tYXgoZGVsdGFYLCBtaW5EZWx0YVgpLCBtYXhEZWx0YVgpO1xuICBjb25zdCBsZWZ0VyA9IGNhY2hlLmxlZnQud2lkdGggKyBfZGVsdGFYO1xuICBjb25zdCByaWdodFcgPSBjYWNoZS5yaWdodC53aWR0aCAtIF9kZWx0YVg7XG4gIGNvbnN0IGxlZnRGbGV4ID0gbGVmdFcgLyBzdW0ud2lkdGggKiBzdW0uZmxleDtcbiAgY29uc3QgcmlnaHRGbGV4ID0gcmlnaHRXIC8gc3VtLndpZHRoICogc3VtLmZsZXg7XG4gIHJldHVybiB7XG4gICAgbGVmdEZsZXgsXG4gICAgbGVmdFcsXG4gICAgcmlnaHRGbGV4LFxuICAgIHJpZ2h0V1xuICB9O1xufVxuZnVuY3Rpb24gX2dldERPTVBhdGgocm9vdEVsZW1lbnQsIGVsKSB7XG4gIGNvbnN0IHBhdGggPSBbXTtcbiAgbGV0IGUgPSBlbDtcbiAgd2hpbGUgKGUgIT09IHJvb3RFbGVtZW50KSB7XG4gICAgY29uc3QgcGFyZW50RWxlbWVudCA9IGUucGFyZW50RWxlbWVudDtcbiAgICBpZiAoIXBhcmVudEVsZW1lbnQpIHJldHVybiBwYXRoO1xuICAgIGNvbnN0IGNoaWxkcmVuID0gQXJyYXkuZnJvbShwYXJlbnRFbGVtZW50LmNoaWxkTm9kZXMpO1xuICAgIGNvbnN0IGluZGV4ID0gY2hpbGRyZW4uaW5kZXhPZihlKTtcbiAgICBwYXRoLnVuc2hpZnQoaW5kZXgpO1xuICAgIGlmIChwYXJlbnRFbGVtZW50ID09PSByb290RWxlbWVudCkge1xuICAgICAgcmV0dXJuIHBhdGg7XG4gICAgfVxuICAgIGUgPSBwYXJlbnRFbGVtZW50O1xuICB9XG4gIHJldHVybiBwYXRoO1xufVxuY29uc3QgRU1QVFlfUEFUSCA9IFtdO1xuZnVuY3Rpb24gX3NvcnRFbGVtZW50cyhyb290RWxlbWVudCwgZWxlbWVudHMpIHtcbiAgY29uc3QgbWFwID0gLyogQF9fUFVSRV9fICovbmV3IFdlYWtNYXAoKTtcbiAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG4gICAgbWFwLnNldChlbGVtZW50LCBfZ2V0RE9NUGF0aChyb290RWxlbWVudCwgZWxlbWVudCkpO1xuICB9XG4gIGNvbnN0IF9zb3J0QnlFbGVtZW50UGF0aCA9IChhLCBiKSA9PiB7XG4gICAgY29uc3QgX2EgPSBtYXAuZ2V0KGEpIHx8IEVNUFRZX1BBVEg7XG4gICAgY29uc3QgX2IgPSBtYXAuZ2V0KGIpIHx8IEVNUFRZX1BBVEg7XG4gICAgY29uc3QgbGVuID0gTWF0aC5tYXgoX2EubGVuZ3RoLCBfYi5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IGFJbmRleCA9IF9hW2ldIHx8IC0xO1xuICAgICAgY29uc3QgYkluZGV4ID0gX2JbaV0gfHwgLTE7XG4gICAgICBpZiAoYUluZGV4ICE9PSBiSW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGFJbmRleCAtIGJJbmRleDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH07XG4gIGVsZW1lbnRzLnNvcnQoX3NvcnRCeUVsZW1lbnRQYXRoKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVBhbmVMYXlvdXRDb250cm9sbGVyKCkge1xuICBjb25zdCBvYnNlcnZlcnMgPSBbXTtcbiAgY29uc3QgZWxlbWVudHMgPSBbXTtcbiAgY29uc3Qgb3B0aW9uc01hcCA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrTWFwKCk7XG4gIGNvbnN0IHVzZXJDb2xsYXBzZWRFbGVtZW50U2V0ID0gLyogQF9fUFVSRV9fICovbmV3IFNldCgpO1xuICBjb25zdCBjYWNoZSA9IHt9O1xuICBsZXQgcm9vdEVsZW1lbnQgPSBudWxsO1xuICBsZXQgcm9vdFdpZHRoID0gMDtcbiAgbGV0IGV4cGFuZGVkRWxlbWVudCA9IG51bGw7XG4gIGxldCByZXNpemVEYXRhTWFwID0gLyogQF9fUFVSRV9fICovbmV3IE1hcCgpO1xuICBsZXQgcmVzaXppbmcgPSBmYWxzZTtcbiAgZnVuY3Rpb24gY29sbGFwc2UoZWxlbWVudCkge1xuICAgIHVzZXJDb2xsYXBzZWRFbGVtZW50U2V0LmFkZChlbGVtZW50KTtcbiAgICBpZiAoZXhwYW5kZWRFbGVtZW50ID09PSBlbGVtZW50KSB7XG4gICAgICBleHBhbmRlZEVsZW1lbnQgPSBudWxsO1xuICAgIH1cbiAgICBfbm90aWZ5T2JzZXJ2ZXJzKCk7XG4gIH1cbiAgZnVuY3Rpb24gZXhwYW5kKGVsZW1lbnQpIHtcbiAgICB1c2VyQ29sbGFwc2VkRWxlbWVudFNldC5kZWxldGUoZWxlbWVudCk7XG4gICAgZXhwYW5kZWRFbGVtZW50ID0gZWxlbWVudDtcbiAgICBfbm90aWZ5T2JzZXJ2ZXJzKCk7XG4gIH1cbiAgZnVuY3Rpb24gbW91bnQoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnNNYXAuc2V0KGVsZW1lbnQsIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBvcmlnaW5hbDogb3B0aW9uc1xuICAgIH0pO1xuICAgIGVsZW1lbnRzLnB1c2goZWxlbWVudCk7XG4gICAgaWYgKHJvb3RFbGVtZW50KSB7XG4gICAgICBfc29ydEVsZW1lbnRzKHJvb3RFbGVtZW50LCBlbGVtZW50cyk7XG4gICAgfVxuICAgIGV4cGFuZChlbGVtZW50KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgaWR4ID0gZWxlbWVudHMuaW5kZXhPZihlbGVtZW50KTtcbiAgICAgIGlmIChpZHggPiAtMSkge1xuICAgICAgICBlbGVtZW50cy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnNNYXAuZGVsZXRlKGVsZW1lbnQpO1xuICAgICAgX25vdGlmeU9ic2VydmVycygpO1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gcmVzaXplKHR5cGUsIGxlZnRFbGVtZW50LCBkZWx0YVgpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgY29uc3QgbGVmdEluZGV4ID0gZWxlbWVudHMuaW5kZXhPZihsZWZ0RWxlbWVudCk7XG4gICAgY29uc3QgbGVmdE9wdGlvbnMgPSBvcHRpb25zTWFwLmdldChsZWZ0RWxlbWVudCk7XG4gICAgaWYgKCFsZWZ0T3B0aW9ucykgcmV0dXJuO1xuICAgIGNvbnN0IHJpZ2h0RWxlbWVudCA9IGVsZW1lbnRzW2xlZnRJbmRleCArIDFdO1xuICAgIGNvbnN0IHJpZ2h0T3B0aW9ucyA9IG9wdGlvbnNNYXAuZ2V0KHJpZ2h0RWxlbWVudCk7XG4gICAgaWYgKCFyaWdodE9wdGlvbnMpIHJldHVybjtcbiAgICBpZiAodHlwZSA9PT0gXCJzdGFydFwiKSB7XG4gICAgICByZXNpemluZyA9IHRydWU7XG4gICAgICBjYWNoZS5sZWZ0ID0ge1xuICAgICAgICBlbGVtZW50OiBsZWZ0RWxlbWVudCxcbiAgICAgICAgZmxleDogbGVmdE9wdGlvbnMuZmxleCB8fCAxLFxuICAgICAgICB3aWR0aDogbGVmdEVsZW1lbnQub2Zmc2V0V2lkdGhcbiAgICAgIH07XG4gICAgICBjYWNoZS5yaWdodCA9IHtcbiAgICAgICAgZWxlbWVudDogcmlnaHRFbGVtZW50LFxuICAgICAgICBmbGV4OiByaWdodE9wdGlvbnMuZmxleCB8fCAxLFxuICAgICAgICB3aWR0aDogcmlnaHRFbGVtZW50Lm9mZnNldFdpZHRoXG4gICAgICB9O1xuICAgICAgX25vdGlmeU9ic2VydmVycygpO1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gXCJtb3ZlXCIgJiYgY2FjaGUubGVmdCAmJiBjYWNoZS5yaWdodCkge1xuICAgICAgcmVzaXplRGF0YU1hcCA9IC8qIEBfX1BVUkVfXyAqL25ldyBNYXAoKTtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgbGVmdFcsXG4gICAgICAgIHJpZ2h0VyxcbiAgICAgICAgbGVmdEZsZXgsXG4gICAgICAgIHJpZ2h0RmxleFxuICAgICAgfSA9IF9jYWxjUGFuZVJlc2l6ZShjYWNoZSwgbGVmdE9wdGlvbnMsIHJpZ2h0T3B0aW9ucywgZGVsdGFYKTtcbiAgICAgIHJlc2l6ZURhdGFNYXAuc2V0KGxlZnRFbGVtZW50LCB7XG4gICAgICAgIGZsZXg6IGxlZnRGbGV4LFxuICAgICAgICB3aWR0aDogbGVmdFdcbiAgICAgIH0pO1xuICAgICAgcmVzaXplRGF0YU1hcC5zZXQocmlnaHRFbGVtZW50LCB7XG4gICAgICAgIGZsZXg6IHJpZ2h0RmxleCxcbiAgICAgICAgd2lkdGg6IHJpZ2h0V1xuICAgICAgfSk7XG4gICAgICBfbm90aWZ5T2JzZXJ2ZXJzKCk7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSBcImVuZFwiKSB7XG4gICAgICByZXNpemluZyA9IGZhbHNlO1xuICAgICAgY29uc3QgbGVmdFJlc2l6ZURhdGEgPSByZXNpemVEYXRhTWFwLmdldChsZWZ0RWxlbWVudCk7XG4gICAgICBjb25zdCByaWdodFJlc2l6ZURhdGEgPSByZXNpemVEYXRhTWFwLmdldChyaWdodEVsZW1lbnQpO1xuICAgICAgb3B0aW9uc01hcC5zZXQobGVmdEVsZW1lbnQsIHtcbiAgICAgICAgLi4ubGVmdE9wdGlvbnMsXG4gICAgICAgIGN1cnJlbnRNaW5XaWR0aDogMCxcbiAgICAgICAgY3VycmVudE1heFdpZHRoOiAoX2EgPSBsZWZ0T3B0aW9ucy5tYXhXaWR0aCkgIT0gbnVsbCA/IF9hIDogSW5maW5pdHksXG4gICAgICAgIGZsZXg6IChfYiA9IGxlZnRSZXNpemVEYXRhID09IG51bGwgPyB2b2lkIDAgOiBsZWZ0UmVzaXplRGF0YS5mbGV4KSAhPSBudWxsID8gX2IgOiBsZWZ0T3B0aW9ucy5mbGV4XG4gICAgICB9KTtcbiAgICAgIG9wdGlvbnNNYXAuc2V0KHJpZ2h0RWxlbWVudCwge1xuICAgICAgICAuLi5yaWdodE9wdGlvbnMsXG4gICAgICAgIGN1cnJlbnRNaW5XaWR0aDogMCxcbiAgICAgICAgY3VycmVudE1heFdpZHRoOiAoX2MgPSBsZWZ0T3B0aW9ucy5tYXhXaWR0aCkgIT0gbnVsbCA/IF9jIDogSW5maW5pdHksXG4gICAgICAgIGZsZXg6IChfZCA9IHJpZ2h0UmVzaXplRGF0YSA9PSBudWxsID8gdm9pZCAwIDogcmlnaHRSZXNpemVEYXRhLmZsZXgpICE9IG51bGwgPyBfZCA6IHJpZ2h0T3B0aW9ucy5mbGV4XG4gICAgICB9KTtcbiAgICAgIHJlc2l6ZURhdGFNYXAgPSAvKiBAX19QVVJFX18gKi9uZXcgTWFwKCk7XG4gICAgICBkZWxldGUgY2FjaGUubGVmdDtcbiAgICAgIGRlbGV0ZSBjYWNoZS5yaWdodDtcbiAgICAgIF9ub3RpZnlPYnNlcnZlcnMoKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gc2V0Um9vdEVsZW1lbnQobmV4dFJvb3RFbGVtZW50KSB7XG4gICAgcm9vdEVsZW1lbnQgPSBuZXh0Um9vdEVsZW1lbnQ7XG4gIH1cbiAgZnVuY3Rpb24gc2V0Um9vdFdpZHRoKG5leHRSb290V2lkdGgpIHtcbiAgICByb290V2lkdGggPSBuZXh0Um9vdFdpZHRoO1xuICAgIF9ub3RpZnlPYnNlcnZlcnMoKTtcbiAgfVxuICBmdW5jdGlvbiBzdWJzY3JpYmUob2JzZXJ2ZXIpIHtcbiAgICBvYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IGlkeCA9IG9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcbiAgICAgIGlmIChpZHggPiAtMSkge1xuICAgICAgICBvYnNlcnZlcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGNvbGxhcHNlLFxuICAgIGV4cGFuZCxcbiAgICBtb3VudCxcbiAgICByZXNpemUsXG4gICAgc2V0Um9vdEVsZW1lbnQsXG4gICAgc2V0Um9vdFdpZHRoLFxuICAgIHN1YnNjcmliZVxuICB9O1xuICBmdW5jdGlvbiBfbm90aWZ5T2JzZXJ2ZXJzKCkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICBpZiAoIXJvb3RXaWR0aCkgcmV0dXJuO1xuICAgIGNvbnN0IF9lbGVtZW50cyA9IFtdO1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xuICAgICAgaWYgKGVsZW1lbnQgIT09IGV4cGFuZGVkRWxlbWVudCkge1xuICAgICAgICBfZWxlbWVudHMudW5zaGlmdChlbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGV4cGFuZGVkRWxlbWVudCkge1xuICAgICAgX2VsZW1lbnRzLnVuc2hpZnQoZXhwYW5kZWRFbGVtZW50KTtcbiAgICB9XG4gICAgY29uc3QgZGF0YU1hcCA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrTWFwKCk7XG4gICAgY29uc3QgbGVuID0gX2VsZW1lbnRzLmxlbmd0aDtcbiAgICBjb25zdCBsYXN0RWxlbWVudCA9IF9lbGVtZW50c1swXTtcbiAgICBjb25zdCBjb2xsYXBzZWRXaWR0aCA9IChsZW4gLSAxKSAqIFBBTkVfQ09MTEFQU0VEX1dJRFRIO1xuICAgIGxldCByZW1haW5nV2lkdGggPSByb290V2lkdGggLSBjb2xsYXBzZWRXaWR0aDtcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgX2VsZW1lbnRzKSB7XG4gICAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uc01hcC5nZXQoZWxlbWVudCk7XG4gICAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBtaW5XaWR0aCA9IG9wdGlvbnMuY3VycmVudE1pbldpZHRoIHx8IG9wdGlvbnMubWluV2lkdGggfHwgUEFORV9ERUZBVUxUX01JTl9XSURUSDtcbiAgICAgIGNvbnN0IGlzTGFzdCA9IGVsZW1lbnQgPT09IGxhc3RFbGVtZW50O1xuICAgICAgY29uc3QgdXNlckNvbGxhcHNlZCA9IHVzZXJDb2xsYXBzZWRFbGVtZW50U2V0LmhhcyhlbGVtZW50KTtcbiAgICAgIGNvbnN0IHNpemVDb2xsYXBzZWQgPSBtaW5XaWR0aCA+IHJlbWFpbmdXaWR0aDtcbiAgICAgIGNvbnN0IGNvbGxhcHNlZCA9IGlzTGFzdCA/IGZhbHNlIDogdXNlckNvbGxhcHNlZCB8fCBzaXplQ29sbGFwc2VkO1xuICAgICAgY29uc3QgcmVzaXplRGF0YSA9IHJlc2l6ZURhdGFNYXAuZ2V0KGVsZW1lbnQpO1xuICAgICAgZGF0YU1hcC5zZXQoZWxlbWVudCwge1xuICAgICAgICBlbGVtZW50LFxuICAgICAgICBjb2xsYXBzZWQsXG4gICAgICAgIGN1cnJlbnRNaW5XaWR0aDogKF9hID0gcmVzaXplRGF0YSA9PSBudWxsID8gdm9pZCAwIDogcmVzaXplRGF0YS53aWR0aCkgIT0gbnVsbCA/IF9hIDogb3B0aW9ucy5jdXJyZW50TWluV2lkdGgsXG4gICAgICAgIGN1cnJlbnRNYXhXaWR0aDogKF9iID0gcmVzaXplRGF0YSA9PSBudWxsID8gdm9pZCAwIDogcmVzaXplRGF0YS53aWR0aCkgIT0gbnVsbCA/IF9iIDogb3B0aW9ucy5jdXJyZW50TWF4V2lkdGgsXG4gICAgICAgIGZsZXg6IChfZCA9IChfYyA9IHJlc2l6ZURhdGEgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc2l6ZURhdGEuZmxleCkgIT0gbnVsbCA/IF9jIDogb3B0aW9ucy5mbGV4KSAhPSBudWxsID8gX2QgOiAxXG4gICAgICB9KTtcbiAgICAgIGlmIChjb2xsYXBzZWQpIHtcbiAgICAgICAgcmVtYWluZ1dpZHRoIC09IFBBTkVfQ09MTEFQU0VEX1dJRFRIO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVtYWluZ1dpZHRoIC09IG1pbldpZHRoIC0gUEFORV9DT0xMQVBTRURfV0lEVEg7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHBhbmVzID0gW107XG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG4gICAgICBjb25zdCBkYXRhID0gZGF0YU1hcC5nZXQoZWxlbWVudCk7XG4gICAgICBpZiAoZGF0YSkgcGFuZXMucHVzaChkYXRhKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBvYnNlcnZlciBvZiBvYnNlcnZlcnMpIHtcbiAgICAgIG9ic2VydmVyKHtcbiAgICAgICAgZXhwYW5kZWRFbGVtZW50OiBleHBhbmRlZEVsZW1lbnQgfHwgZWxlbWVudHNbZWxlbWVudHMubGVuZ3RoIC0gMV0gfHwgbnVsbCxcbiAgICAgICAgcGFuZXMsXG4gICAgICAgIHJlc2l6aW5nXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIFBhbmVMYXlvdXQocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGNoaWxkcmVuLFxuICAgIG1pbldpZHRoLFxuICAgIG9uQ29sbGFwc2UsXG4gICAgb25FeHBhbmQsXG4gICAgLi4ucmVzdFByb3BzXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgY29udHJvbGxlciA9IHVzZU1lbW8oKCkgPT4gY3JlYXRlUGFuZUxheW91dENvbnRyb2xsZXIoKSwgW10pO1xuICBjb25zdCBbcm9vdEVsZW1lbnQsIHNldFJvb3RFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCByb290UmVjdCA9IHVzZUVsZW1lbnRSZWN0KHJvb3RFbGVtZW50KTtcbiAgY29uc3Qgd2lkdGggPSAocm9vdFJlY3QgPT0gbnVsbCA/IHZvaWQgMCA6IHJvb3RSZWN0LndpZHRoKSB8fCAwO1xuICBjb25zdCBjb2xsYXBzZWQgPSB3aWR0aCA9PT0gdm9pZCAwIHx8ICFtaW5XaWR0aCA/IHZvaWQgMCA6IHdpZHRoIDwgbWluV2lkdGg7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoe1xuICAgIGV4cGFuZGVkRWxlbWVudDogbnVsbCxcbiAgICBwYW5lczogW10sXG4gICAgcmVzaXppbmc6IGZhbHNlXG4gIH0pO1xuICB1c2VFZmZlY3QoKCkgPT4gY29udHJvbGxlci5zZXRSb290RWxlbWVudChyb290RWxlbWVudCksIFtjb250cm9sbGVyLCByb290RWxlbWVudF0pO1xuICB1c2VFZmZlY3QoKCkgPT4gY29udHJvbGxlci5zZXRSb290V2lkdGgod2lkdGgpLCBbY29udHJvbGxlciwgd2lkdGhdKTtcbiAgdXNlRWZmZWN0KCgpID0+IGNvbnRyb2xsZXIuc3Vic2NyaWJlKHNldFN0YXRlKSwgW2NvbnRyb2xsZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY29sbGFwc2VkID09PSB2b2lkIDApIHJldHVybjtcbiAgICBpZiAoY29sbGFwc2VkICYmIG9uQ29sbGFwc2UpIG9uQ29sbGFwc2UoKTtcbiAgICBpZiAoIWNvbGxhcHNlZCAmJiBvbkV4cGFuZCkgb25FeHBhbmQoKTtcbiAgfSwgW2NvbGxhcHNlZCwgb25Db2xsYXBzZSwgb25FeHBhbmRdKTtcbiAgY29uc3QgcGFuZUxheW91dCA9IHVzZU1lbW8oKCkgPT4gKHtcbiAgICBjb2xsYXBzZTogY29udHJvbGxlci5jb2xsYXBzZSxcbiAgICBjb2xsYXBzZWQsXG4gICAgZXhwYW5kOiBjb250cm9sbGVyLmV4cGFuZCxcbiAgICBleHBhbmRlZEVsZW1lbnQ6IHN0YXRlLmV4cGFuZGVkRWxlbWVudCxcbiAgICBtb3VudDogY29udHJvbGxlci5tb3VudCxcbiAgICBwYW5lczogc3RhdGUucGFuZXMsXG4gICAgcmVzaXplOiBjb250cm9sbGVyLnJlc2l6ZSxcbiAgICByZXNpemluZzogc3RhdGUucmVzaXppbmdcbiAgfSksIFtjb2xsYXBzZWQsIGNvbnRyb2xsZXIsIHN0YXRlLmV4cGFuZGVkRWxlbWVudCwgc3RhdGUucGFuZXMsIHN0YXRlLnJlc2l6aW5nXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUGFuZUxheW91dENvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogcGFuZUxheW91dCxcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFJvb3QkNCwge1xuICAgICAgXCJkYXRhLXVpXCI6IFwiUGFuZUxheW91dFwiLFxuICAgICAgLi4ucmVzdFByb3BzLFxuICAgICAgXCJkYXRhLWNvbGxhcHNlZFwiOiBjb2xsYXBzZWQgPyBcIlwiIDogdm9pZCAwLFxuICAgICAgXCJkYXRhLXJlc2l6aW5nXCI6IHN0YXRlLnJlc2l6aW5nID8gXCJcIiA6IHZvaWQgMCxcbiAgICAgIFwiZGF0YS1tb3VudGVkXCI6IHdpZHRoID8gXCJcIiA6IHZvaWQgMCxcbiAgICAgIHJlZjogc2V0Um9vdEVsZW1lbnQsXG4gICAgICBjaGlsZHJlblxuICAgIH0pXG4gIH0pO1xufVxuZnVuY3Rpb24gRG9jdW1lbnRJbnNwZWN0b3JQYW5lbChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZG9jdW1lbnRJZCxcbiAgICBkb2N1bWVudFR5cGUsXG4gICAgZmxleFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBjb2xsYXBzZWRcbiAgfSA9IHVzZVBhbmUoKTtcbiAgY29uc3Qge1xuICAgIGNsb3NlSW5zcGVjdG9yLFxuICAgIGluc3BlY3RvclxuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGNvbnN0IHtcbiAgICBmZWF0dXJlc1xuICB9ID0gdXNlRGVza1Rvb2woKTtcbiAgY29uc3QgaGFuZGxlQ2xvc2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGluc3BlY3RvcikgY2xvc2VJbnNwZWN0b3IoaW5zcGVjdG9yLm5hbWUpO1xuICB9LCBbY2xvc2VJbnNwZWN0b3IsIGluc3BlY3Rvcl0pO1xuICBpZiAoY29sbGFwc2VkIHx8ICFpbnNwZWN0b3IpIHJldHVybiBudWxsO1xuICBjb25zdCBlbGVtZW50ID0gY3JlYXRlRWxlbWVudChpbnNwZWN0b3IuY29tcG9uZW50LCB7XG4gICAgb25DbG9zZTogaGFuZGxlQ2xvc2UsXG4gICAgZG9jdW1lbnRJZCxcbiAgICBkb2N1bWVudFR5cGVcbiAgfSk7XG4gIGlmIChmZWF0dXJlcy5yZXNpemFibGVQYW5lcykge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUmVzaXphYmxlLCB7XG4gICAgICBhczogXCJhc2lkZVwiLFxuICAgICAgXCJkYXRhLXVpXCI6IFwiRG9jdW1lbnRJbnNwZWN0b3JQYW5lbFwiLFxuICAgICAgZmxleCxcbiAgICAgIG1heFdpZHRoOiBET0NVTUVOVF9JTlNQRUNUT1JfTUFYX1dJRFRILFxuICAgICAgbWluV2lkdGg6IERPQ1VNRU5UX0lOU1BFQ1RPUl9NSU5fV0lEVEgsXG4gICAgICBjaGlsZHJlbjogZWxlbWVudFxuICAgIH0pO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgYXM6IFwiYXNpZGVcIixcbiAgICBcImRhdGEtdWlcIjogXCJEb2N1bWVudEluc3BlY3RvclBhbmVsXCIsXG4gICAgZmxleCxcbiAgICBjaGlsZHJlbjogZWxlbWVudFxuICB9KTtcbn1cbnZhciBfX2RlZlByb3AkYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wJGMob2JqLCBrZXksIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgY29uZmlndXJhYmxlOiB0cnVlLFxuICB3cml0YWJsZTogdHJ1ZSxcbiAgdmFsdWVcbn0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3B1YmxpY0ZpZWxkID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ge1xuICBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xuICByZXR1cm4gdmFsdWU7XG59O1xuY2xhc3MgUGFuZVJlc29sdXRpb25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoX3JlZjIpIHtcbiAgICBsZXQge1xuICAgICAgbWVzc2FnZSxcbiAgICAgIGNvbnRleHQsXG4gICAgICBoZWxwSWQsXG4gICAgICBjYXVzZVxuICAgIH0gPSBfcmVmMjtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiY2F1c2VcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImNvbnRleHRcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImhlbHBJZFwiKTtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMuaGVscElkID0gaGVscElkO1xuICAgIHRoaXMuY2F1c2UgPSBjYXVzZTtcbiAgfVxufVxuY29uc3QgcmFuZG9tSWRDYWNoZSA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBhc3NpZ25JZChvYmopIHtcbiAgY29uc3QgY2FjaGVkVmFsdWUgPSByYW5kb21JZENhY2hlLmdldChvYmopO1xuICBpZiAoY2FjaGVkVmFsdWUpIHJldHVybiBjYWNoZWRWYWx1ZTtcbiAgY29uc3QgaWQgPSBuYW5vaWQoKTtcbiAgcmFuZG9tSWRDYWNoZS5zZXQob2JqLCBpZCk7XG4gIHJldHVybiBpZDtcbn1cbmNvbnN0IGJpbmRDYWNoZSA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBtZW1vQmluZChvYmosIG1ldGhvZEtleSkge1xuICBjb25zdCBib3VuZE1ldGhvZHMgPSBiaW5kQ2FjaGUuZ2V0KG9iaikgfHwgLyogQF9fUFVSRV9fICovbmV3IE1hcCgpO1xuICBpZiAoYm91bmRNZXRob2RzKSB7XG4gICAgY29uc3QgYm91bmQyID0gYm91bmRNZXRob2RzLmdldChtZXRob2RLZXkpO1xuICAgIGlmIChib3VuZDIpIHJldHVybiBib3VuZDI7XG4gIH1cbiAgY29uc3QgbWV0aG9kID0gb2JqW21ldGhvZEtleV07XG4gIGlmICh0eXBlb2YgbWV0aG9kICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3RlZCBwcm9wZXJ0eSBgXCIuY29uY2F0KG1ldGhvZEtleSwgXCJgIHRvIGJlIGEgZnVuY3Rpb24gYnV0IGdvdCBcIikuY29uY2F0KHR5cGVvZiBtZXRob2QsIFwiIGluc3RlYWQuXCIpKTtcbiAgfVxuICBjb25zdCBib3VuZCA9IG1ldGhvZC5iaW5kKG9iaik7XG4gIGJvdW5kTWV0aG9kcy5zZXQobWV0aG9kS2V5LCBib3VuZCk7XG4gIGJpbmRDYWNoZS5zZXQob2JqLCBib3VuZE1ldGhvZHMpO1xuICByZXR1cm4gYm91bmQ7XG59XG5jb25zdCBpc1Byb21pc2UgPSB0aGluZyA9PiB7XG4gIHJldHVybiAhIXRoaW5nICYmIHR5cGVvZiAodGhpbmcgPT0gbnVsbCA/IHZvaWQgMCA6IHRoaW5nLnRoZW4pID09PSBcImZ1bmN0aW9uXCI7XG59O1xuY29uc3QgaXNTZXJpYWxpemFibGUgPSB0aGluZyA9PiB7XG4gIGlmICghaXNSZWNvcmQodGhpbmcpKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0eXBlb2YgdGhpbmcuc2VyaWFsaXplID09PSBcImZ1bmN0aW9uXCI7XG59O1xuY29uc3QgcmV0aHJvd1dpdGhQYW5lUmVzb2x1dGlvbkVycm9ycyA9IG5leHQgPT4gKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gbmV4dCh1bnJlc29sdmVkUGFuZSwgY29udGV4dCwgZmxhdEluZGV4KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChlIGluc3RhbmNlb2YgUGFuZVJlc29sdXRpb25FcnJvcikge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBhbmVSZXNvbHV0aW9uRXJyb3Ioe1xuICAgICAgbWVzc2FnZTogdHlwZW9mIChlID09IG51bGwgPyB2b2lkIDAgOiBlLm1lc3NhZ2UpID09PSBcInN0cmluZ1wiID8gZS5tZXNzYWdlIDogXCJcIixcbiAgICAgIGNvbnRleHQsXG4gICAgICBjYXVzZTogZVxuICAgIH0pO1xuICB9XG59O1xuY29uc3Qgd3JhcFdpdGhQdWJsaXNoUmVwbGF5ID0gbmV4dCA9PiBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBuZXh0KC4uLmFyZ3VtZW50cykucGlwZShcbiAgLy8gbmVlZCB0byBhZGQgcHVibGlzaFJlcGxheSArIHJlZkNvdW50IHRvIGVuc3VyZSBuZXcgc3Vic2NyaWJlcnMgYWx3YXlzXG4gIC8vIGdldCBhbiBlbWlzc2lvbi4gd2l0aG91dCB0aGlzLCBtZW1vaXplZCBvYnNlcnZhYmxlcyBtYXkgZ2V0IHN0dWNrXG4gIC8vIHdhaXRpbmcgZm9yIHRoZWlyIGZpcnN0IGVtaXNzaW9ucyByZXN1bHRpbmcgaW4gYSBsb2FkaW5nIHBhbmVcbiAgcHVibGlzaFJlcGxheSgxKSwgcmVmQ291bnQoKSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlUGFuZVJlc29sdmVyKG1pZGRsZXdhcmUpIHtcbiAgY29uc3QgcmVzb2x2ZVBhbmUgPSByZXRocm93V2l0aFBhbmVSZXNvbHV0aW9uRXJyb3JzKHdyYXBXaXRoUHVibGlzaFJlcGxheShtaWRkbGV3YXJlKCh1bnJlc29sdmVkUGFuZSwgY29udGV4dCwgZmxhdEluZGV4KSA9PiB7XG4gICAgaWYgKCF1bnJlc29sdmVkUGFuZSkge1xuICAgICAgdGhyb3cgbmV3IFBhbmVSZXNvbHV0aW9uRXJyb3Ioe1xuICAgICAgICBtZXNzYWdlOiBcIlBhbmUgcmV0dXJuZWQgbm8gY2hpbGRcIixcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgaGVscElkOiBcInN0cnVjdHVyZS1pdGVtLXJldHVybmVkLW5vLWNoaWxkXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaXNQcm9taXNlKHVucmVzb2x2ZWRQYW5lKSB8fCBpc09ic2VydmFibGUodW5yZXNvbHZlZFBhbmUpKSB7XG4gICAgICByZXR1cm4gZnJvbSh1bnJlc29sdmVkUGFuZSkucGlwZShzd2l0Y2hNYXAocmVzdWx0ID0+IHJlc29sdmVQYW5lKHJlc3VsdCwgY29udGV4dCwgZmxhdEluZGV4KSkpO1xuICAgIH1cbiAgICBpZiAoaXNTZXJpYWxpemFibGUodW5yZXNvbHZlZFBhbmUpKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZVBhbmUodW5yZXNvbHZlZFBhbmUuc2VyaWFsaXplKGNvbnRleHQpLCBjb250ZXh0LCBmbGF0SW5kZXgpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHVucmVzb2x2ZWRQYW5lID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiByZXNvbHZlUGFuZSh1bnJlc29sdmVkUGFuZShjb250ZXh0LmlkLCBjb250ZXh0KSwgY29udGV4dCwgZmxhdEluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIG9mKHVucmVzb2x2ZWRQYW5lKTtcbiAgfSkpKTtcbiAgcmV0dXJuIHJlc29sdmVQYW5lO1xufVxuYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZUludGVudChvcHRpb25zKSB7XG4gIGNvbnN0IHJlc29sdmVkUGFuZUNhY2hlID0gLyogQF9fUFVSRV9fICovbmV3IE1hcCgpO1xuICBjb25zdCBtZW1vaXplID0gbmV4dEZuID0+ICh1bnJlc29sdmVkUGFuZSwgY29udGV4dCwgZmxhdEluZGV4KSA9PiB7XG4gICAgY29uc3Qga2V5ID0gdW5yZXNvbHZlZFBhbmUgJiYgXCJcIi5jb25jYXQoYXNzaWduSWQodW5yZXNvbHZlZFBhbmUpLCBcIi1cIikuY29uY2F0KGNvbnRleHQucGF0aC5qb2luKFwiX19cIikpO1xuICAgIGNvbnN0IGNhY2hlZFJlc29sdmVkUGFuZSA9IGtleSAmJiByZXNvbHZlZFBhbmVDYWNoZS5nZXQoa2V5KTtcbiAgICBpZiAoY2FjaGVkUmVzb2x2ZWRQYW5lKSByZXR1cm4gY2FjaGVkUmVzb2x2ZWRQYW5lO1xuICAgIGNvbnN0IHJlc3VsdCA9IG5leHRGbih1bnJlc29sdmVkUGFuZSwgY29udGV4dCwgZmxhdEluZGV4KTtcbiAgICBpZiAoa2V5KSByZXNvbHZlZFBhbmVDYWNoZS5zZXQoa2V5LCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIGNvbnN0IHJlc29sdmVQYW5lID0gY3JlYXRlUGFuZVJlc29sdmVyKG1lbW9pemUpO1xuICBjb25zdCBmYWxsYmFja0VkaXRvclBhbmVzID0gW1t7XG4gICAgaWQ6IFwiX19lZGl0X19cIi5jb25jYXQob3B0aW9ucy5wYXJhbXMuaWQpLFxuICAgIHBhcmFtczoge1xuICAgICAgLi4ub21pdChvcHRpb25zLnBhcmFtcywgW1wiaWRcIl0pLFxuICAgICAgdHlwZTogb3B0aW9ucy5wYXJhbXMudHlwZVxuICAgIH0sXG4gICAgcGF5bG9hZDogb3B0aW9ucy5wYXlsb2FkXG4gIH1dXTtcbiAgYXN5bmMgZnVuY3Rpb24gdHJhdmVyc2UoX3JlZjMpIHtcbiAgICBsZXQge1xuICAgICAgY3VycmVudElkLFxuICAgICAgZmxhdEluZGV4LFxuICAgICAgaW50ZW50LFxuICAgICAgcGFyYW1zLFxuICAgICAgcGFyZW50LFxuICAgICAgcGF0aCxcbiAgICAgIHBheWxvYWQsXG4gICAgICB1bnJlc29sdmVkUGFuZSxcbiAgICAgIGxldmVsSW5kZXgsXG4gICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgfSA9IF9yZWYzO1xuICAgIHZhciBfYTtcbiAgICBpZiAoIXVucmVzb2x2ZWRQYW5lKSByZXR1cm4gW107XG4gICAgY29uc3Qge1xuICAgICAgaWQ6IHRhcmdldElkLFxuICAgICAgdHlwZTogc2NoZW1hVHlwZU5hbWUsXG4gICAgICAuLi5vdGhlclBhcmFtc1xuICAgIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgIGlkOiBjdXJyZW50SWQsXG4gICAgICBzcGxpdEluZGV4OiAwLFxuICAgICAgcGFyZW50LFxuICAgICAgcGF0aCxcbiAgICAgIGluZGV4OiBmbGF0SW5kZXgsXG4gICAgICBwYXJhbXM6IHt9LFxuICAgICAgcGF5bG9hZDogdm9pZCAwLFxuICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgIH07XG4gICAgY29uc3QgcmVzb2x2ZWRQYW5lID0gYXdhaXQgZmlyc3RWYWx1ZUZyb20ocmVzb2x2ZVBhbmUodW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCkpO1xuICAgIGlmIChyZXNvbHZlZFBhbmUudHlwZSA9PT0gXCJkb2N1bWVudFwiICYmIHJlc29sdmVkUGFuZS5pZCA9PT0gdGFyZ2V0SWQpIHtcbiAgICAgIHJldHVybiBbe1xuICAgICAgICBwYW5lczogWy4uLnBhdGguc2xpY2UoMCwgcGF0aC5sZW5ndGggLSAxKS5tYXAoaSA9PiBbe1xuICAgICAgICAgIGlkOiBpXG4gICAgICAgIH1dKSwgW3tcbiAgICAgICAgICBpZDogdGFyZ2V0SWQsXG4gICAgICAgICAgcGFyYW1zOiBvdGhlclBhcmFtcyxcbiAgICAgICAgICBwYXlsb2FkXG4gICAgICAgIH1dXSxcbiAgICAgICAgZGVwdGhJbmRleDogcGF0aC5sZW5ndGgsXG4gICAgICAgIGxldmVsSW5kZXhcbiAgICAgIH1dO1xuICAgIH1cbiAgICBpZiAoXG4gICAgLy8gaWYgdGhlIHJlc29sdmUgcGFuZSdzIGBjYW5IYW5kbGVJbnRlbnRgIHJldHVybnMgdHJ1ZSwgdGhlbiByZXNvbHZlXG4gICAgKChfYSA9IHJlc29sdmVkUGFuZS5jYW5IYW5kbGVJbnRlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKHJlc29sdmVkUGFuZSwgaW50ZW50LCBwYXJhbXMsIHtcbiAgICAgIHBhbmU6IHJlc29sdmVkUGFuZSxcbiAgICAgIGluZGV4OiBmbGF0SW5kZXhcbiAgICB9KSkgfHxcbiAgICAvLyBpZiB0aGUgcGFuZSdzIGBjYW5IYW5kbGVJbnRlbnRgIGRpZCBub3QgcmV0dXJuIHRydWUsIHRoZW4gbWF0Y2ggYWdhaW5zdFxuICAgIC8vIHRoaXMgZGVmYXVsdCBjYXNlLiB3ZSB3aWxsIHJlc29sdmUgdGhlIGludGVudCBpZjpcbiAgICByZXNvbHZlZFBhbmUudHlwZSA9PT0gXCJkb2N1bWVudExpc3RcIiAmJlxuICAgIC8vIDEuIHRoZSBzY2hlbWEgdHlwZSBtYXRjaGVzICh0aGlzIHJlcXVpcmVkIGZvciB0aGUgZG9jdW1lbnQgdG8gcmVuZGVyKVxuICAgIHJlc29sdmVkUGFuZS5zY2hlbWFUeXBlTmFtZSA9PT0gc2NoZW1hVHlwZU5hbWUgJiZcbiAgICAvLyAyLiB0aGUgZmlsdGVyIGlzIHRoZSBkZWZhdWx0IGZpbHRlci5cbiAgICAvL1xuICAgIC8vIE5PVEU6IHRoaXMgY2FzZSBpcyB0byBwcmV2ZW50IGZhbHNlIHBvc2l0aXZlIG1hdGNoZXMgd2hlcmUgdGhlIHVzZXJcbiAgICAvLyBoYXMgY29uZmlndXJlZCBhIG1vcmUgc3BlY2lmaWMgZmlsdGVyIGZvciBhIHBhcnRpY3VsYXIgdHlwZS4gSW4gdGhhdFxuICAgIC8vIGNhc2UsIHRoZSB1c2VyIGNhbiBpbXBsZW1lbnQgdGhlaXIgb3duIGBjYW5IYW5kbGVJbnRlbnRgIGZ1bmN0aW9uXG4gICAgcmVzb2x2ZWRQYW5lLm9wdGlvbnMuZmlsdGVyID09PSBcIl90eXBlID09ICR0eXBlXCIpIHtcbiAgICAgIHJldHVybiBbe1xuICAgICAgICBwYW5lczogW1xuICAgICAgICAvLyBtYXAgdGhlIGN1cnJlbnQgcGF0aCB0byByb3V0ZXIgcGFuZXNcbiAgICAgICAgLi4ucGF0aC5tYXAoaWQgPT4gW3tcbiAgICAgICAgICBpZFxuICAgICAgICB9XSksXG4gICAgICAgIC8vIHRoZW4gYXVnbWVudCB3aXRoIHRoZSBpbnRlbnRzIElEcyBhbmQgcGFyYW1zXG4gICAgICAgIFt7XG4gICAgICAgICAgaWQ6IHBhcmFtcy5pZCxcbiAgICAgICAgICBwYXJhbXM6IG90aGVyUGFyYW1zLFxuICAgICAgICAgIHBheWxvYWRcbiAgICAgICAgfV1dLFxuICAgICAgICBkZXB0aEluZGV4OiBwYXRoLmxlbmd0aCxcbiAgICAgICAgbGV2ZWxJbmRleFxuICAgICAgfV07XG4gICAgfVxuICAgIGlmIChyZXNvbHZlZFBhbmUudHlwZSA9PT0gXCJsaXN0XCIgJiYgcmVzb2x2ZWRQYW5lLmNoaWxkICYmIHJlc29sdmVkUGFuZS5pdGVtcykge1xuICAgICAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChyZXNvbHZlZFBhbmUuaXRlbXMubWFwKChpdGVtLCBuZXh0TGV2ZWxJbmRleCkgPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSBcImRpdmlkZXJcIikgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XG4gICAgICAgIHJldHVybiB0cmF2ZXJzZSh7XG4gICAgICAgICAgY3VycmVudElkOiBpdGVtLl9pZCB8fCBpdGVtLmlkLFxuICAgICAgICAgIGZsYXRJbmRleDogZmxhdEluZGV4ICsgMSxcbiAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgIHBhcmVudDogcmVzb2x2ZWRQYW5lLFxuICAgICAgICAgIHBhdGg6IFsuLi5wYXRoLCBpdGVtLmlkXSxcbiAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgIHVucmVzb2x2ZWRQYW5lOiB0eXBlb2YgcmVzb2x2ZWRQYW5lLmNoaWxkID09PSBcImZ1bmN0aW9uXCIgPyBtZW1vQmluZChyZXNvbHZlZFBhbmUsIFwiY2hpbGRcIikgOiByZXNvbHZlZFBhbmUuY2hpbGQsXG4gICAgICAgICAgbGV2ZWxJbmRleDogbmV4dExldmVsSW5kZXgsXG4gICAgICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgICAgICB9KTtcbiAgICAgIH0pKSkuZmxhdCgpO1xuICAgIH1cbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgbWF0Y2hpbmdQYW5lcyA9IGF3YWl0IHRyYXZlcnNlKHtcbiAgICBjdXJyZW50SWQ6IFwicm9vdFwiLFxuICAgIGZsYXRJbmRleDogMCxcbiAgICBsZXZlbEluZGV4OiAwLFxuICAgIGludGVudDogb3B0aW9ucy5pbnRlbnQsXG4gICAgcGFyYW1zOiBvcHRpb25zLnBhcmFtcyxcbiAgICBwYXJlbnQ6IG51bGwsXG4gICAgcGF0aDogW10sXG4gICAgcGF5bG9hZDogb3B0aW9ucy5wYXlsb2FkLFxuICAgIHVucmVzb2x2ZWRQYW5lOiBvcHRpb25zLnJvb3RQYW5lTm9kZSxcbiAgICBzdHJ1Y3R1cmVDb250ZXh0OiBvcHRpb25zLnN0cnVjdHVyZUNvbnRleHRcbiAgfSk7XG4gIGNvbnN0IGNsb3Nlc3RQYW5lVG9Sb290ID0gbWF0Y2hpbmdQYW5lcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgaWYgKGEuZGVwdGhJbmRleCA9PT0gYi5kZXB0aEluZGV4KSByZXR1cm4gYS5sZXZlbEluZGV4IC0gYi5sZXZlbEluZGV4O1xuICAgIHJldHVybiBhLmRlcHRoSW5kZXggLSBiLmRlcHRoSW5kZXg7XG4gIH0pWzBdO1xuICBpZiAoY2xvc2VzdFBhbmVUb1Jvb3QpIHtcbiAgICByZXR1cm4gY2xvc2VzdFBhbmVUb1Jvb3QucGFuZXM7XG4gIH1cbiAgcmV0dXJuIGZhbGxiYWNrRWRpdG9yUGFuZXM7XG59XG5jb25zdCBmYWxsYmFja0VkaXRvckNoaWxkID0gKG5vZGVJZCwgY29udGV4dCkgPT4ge1xuICBjb25zdCBpZCA9IG5vZGVJZC5yZXBsYWNlKC9eX19lZGl0X18vLCBcIlwiKTtcbiAgY29uc3Qge1xuICAgIHBhcmFtcyxcbiAgICBwYXlsb2FkLFxuICAgIHN0cnVjdHVyZUNvbnRleHQ6IHtcbiAgICAgIHJlc29sdmVEb2N1bWVudE5vZGVcbiAgICB9XG4gIH0gPSBjb250ZXh0O1xuICBjb25zdCB7XG4gICAgdHlwZSxcbiAgICB0ZW1wbGF0ZVxuICB9ID0gcGFyYW1zO1xuICBpZiAoIXR5cGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJEb2N1bWVudCB0eXBlIGZvciBkb2N1bWVudCB3aXRoIElEIFwiLmNvbmNhdChpZCwgXCIgd2FzIG5vdCBwcm92aWRlZCBpbiB0aGUgcm91dGVyIHBhcmFtcy5cIikpO1xuICB9XG4gIGxldCBkZWZhdWx0RG9jdW1lbnRCdWlsZGVyID0gcmVzb2x2ZURvY3VtZW50Tm9kZSh7XG4gICAgc2NoZW1hVHlwZTogdHlwZSxcbiAgICBkb2N1bWVudElkOiBpZFxuICB9KS5pZChcImVkaXRvclwiKTtcbiAgaWYgKHRlbXBsYXRlKSB7XG4gICAgZGVmYXVsdERvY3VtZW50QnVpbGRlciA9IGRlZmF1bHREb2N1bWVudEJ1aWxkZXIuaW5pdGlhbFZhbHVlVGVtcGxhdGUodGVtcGxhdGUsIHBheWxvYWQpO1xuICB9XG4gIHJldHVybiBkZWZhdWx0RG9jdW1lbnRCdWlsZGVyLnNlcmlhbGl6ZSgpO1xufTtcbmZ1bmN0aW9uIGhhc2hDb250ZXh0KGNvbnRleHQpIHtcbiAgdmFyIF9hLCBfYjtcbiAgcmV0dXJuIFwiY29udGV4dEhhc2goXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KHtcbiAgICBpZDogY29udGV4dC5pZCxcbiAgICBwYXJlbnRJZDogcGFyZW50ICYmIGFzc2lnbklkKHBhcmVudCksXG4gICAgcGF0aDogY29udGV4dC5wYXRoLFxuICAgIGluZGV4OiBjb250ZXh0LmluZGV4LFxuICAgIHNwbGl0SW5kZXg6IGNvbnRleHQuc3BsaXRJbmRleCxcbiAgICBzZXJpYWxpemVPcHRpb25zSW5kZXg6IChfYSA9IGNvbnRleHQuc2VyaWFsaXplT3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmluZGV4LFxuICAgIHNlcmlhbGl6ZU9wdGlvbnNQYXRoOiAoX2IgPSBjb250ZXh0LnNlcmlhbGl6ZU9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYi5wYXRoXG4gIH0pLCBcIilcIik7XG59XG5jb25zdCBoYXNoUmVzb2x2ZWRQYW5lTWV0YSA9IG1ldGEgPT4ge1xuICBjb25zdCBub3JtYWxpemVkID0ge1xuICAgIHR5cGU6IG1ldGEudHlwZSxcbiAgICBpZDogbWV0YS5yb3V0ZXJQYW5lU2libGluZy5pZCxcbiAgICBwYXJhbXM6IG1ldGEucm91dGVyUGFuZVNpYmxpbmcucGFyYW1zIHx8IHt9LFxuICAgIHBheWxvYWQ6IG1ldGEucm91dGVyUGFuZVNpYmxpbmcucGF5bG9hZCB8fCBudWxsLFxuICAgIGZsYXRJbmRleDogbWV0YS5mbGF0SW5kZXgsXG4gICAgZ3JvdXBJbmRleDogbWV0YS5ncm91cEluZGV4LFxuICAgIHNpYmxpbmdJbmRleDogbWV0YS5zaWJsaW5nSW5kZXgsXG4gICAgcGF0aDogbWV0YS5wYXRoLFxuICAgIHBhbmVOb2RlOiBtZXRhLnR5cGUgPT09IFwicmVzb2x2ZWRNZXRhXCIgPyBhc3NpZ25JZChtZXRhLnBhbmVOb2RlKSA6IG51bGxcbiAgfTtcbiAgcmV0dXJuIFwibWV0YUhhc2goXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KG5vcm1hbGl6ZWQpLCBcIilcIik7XG59O1xuZnVuY3Rpb24gcmVzb2x2ZVBhbmVUcmVlKF9yZWY0KSB7XG4gIGxldCB7XG4gICAgdW5yZXNvbHZlZFBhbmUsXG4gICAgZmxhdHRlbmVkUm91dGVyUGFuZXMsXG4gICAgcGFyZW50OiBwYXJlbnQyLFxuICAgIHBhdGgsXG4gICAgcmVzb2x2ZVBhbmUsXG4gICAgc3RydWN0dXJlQ29udGV4dFxuICB9ID0gX3JlZjQ7XG4gIGNvbnN0IFtjdXJyZW50LCAuLi5yZXN0XSA9IGZsYXR0ZW5lZFJvdXRlclBhbmVzO1xuICBjb25zdCBuZXh0ID0gcmVzdFswXTtcbiAgY29uc3QgY29udGV4dCA9IHtcbiAgICBpZDogY3VycmVudC5yb3V0ZXJQYW5lU2libGluZy5pZCxcbiAgICBzcGxpdEluZGV4OiBjdXJyZW50LnNpYmxpbmdJbmRleCxcbiAgICBwYXJlbnQ6IHBhcmVudDIsXG4gICAgcGF0aDogWy4uLnBhdGgsIGN1cnJlbnQucm91dGVyUGFuZVNpYmxpbmcuaWRdLFxuICAgIGluZGV4OiBjdXJyZW50LmZsYXRJbmRleCxcbiAgICBwYXJhbXM6IGN1cnJlbnQucm91dGVyUGFuZVNpYmxpbmcucGFyYW1zIHx8IHt9LFxuICAgIHBheWxvYWQ6IGN1cnJlbnQucm91dGVyUGFuZVNpYmxpbmcucGF5bG9hZCxcbiAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gIH07XG4gIHRyeSB7XG4gICAgcmV0dXJuIHJlc29sdmVQYW5lKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBjdXJyZW50LmZsYXRJbmRleCkucGlwZShcbiAgICAvLyB0aGlzIHN3aXRjaCBtYXAgcmVjZWl2ZXMgYSByZXNvbHZlZCBwYW5lXG4gICAgc3dpdGNoTWFwKHBhbmVOb2RlID0+IHtcbiAgICAgIGNvbnN0IHJlc29sdmVkUGFuZU1ldGEgPSB7XG4gICAgICAgIHR5cGU6IFwicmVzb2x2ZWRNZXRhXCIsXG4gICAgICAgIC4uLmN1cnJlbnQsXG4gICAgICAgIHBhbmVOb2RlLFxuICAgICAgICBwYXRoOiBjb250ZXh0LnBhdGhcbiAgICAgIH07XG4gICAgICBjb25zdCBsb2FkaW5nUGFuZXMgPSByZXN0Lm1hcCgoaSwgcmVzdEluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGxvYWRpbmdQYW5lUGF0aCA9IFsuLi5jb250ZXh0LnBhdGgsIC4uLnJlc3Quc2xpY2UocmVzdEluZGV4KS5tYXAoKF8sIGN1cnJlbnRJbmRleCkgPT4gXCJbXCIuY29uY2F0KGkuZmxhdEluZGV4ICsgY3VycmVudEluZGV4LCBcIl1cIikpXTtcbiAgICAgICAgY29uc3QgbG9hZGluZ1BhbmUgPSB7XG4gICAgICAgICAgdHlwZTogXCJsb2FkaW5nXCIsXG4gICAgICAgICAgcGF0aDogbG9hZGluZ1BhbmVQYXRoLFxuICAgICAgICAgIHBhbmVOb2RlOiBudWxsLFxuICAgICAgICAgIC4uLmlcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGxvYWRpbmdQYW5lO1xuICAgICAgfSk7XG4gICAgICBpZiAoIXJlc3QubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBvZihbcmVzb2x2ZWRQYW5lTWV0YV0pO1xuICAgICAgfVxuICAgICAgbGV0IG5leHRTdHJlYW07XG4gICAgICBpZiAoXG4gICAgICAvLyB0aGUgZmFsbGJhY2sgZWRpdG9yIGNhc2VcbiAgICAgIG5leHQgPT0gbnVsbCA/IHZvaWQgMCA6IG5leHQucm91dGVyUGFuZVNpYmxpbmcuaWQuc3RhcnRzV2l0aChcIl9fZWRpdF9fXCIpKSB7XG4gICAgICAgIG5leHRTdHJlYW0gPSByZXNvbHZlUGFuZVRyZWUoe1xuICAgICAgICAgIHVucmVzb2x2ZWRQYW5lOiBmYWxsYmFja0VkaXRvckNoaWxkLFxuICAgICAgICAgIGZsYXR0ZW5lZFJvdXRlclBhbmVzOiByZXN0LFxuICAgICAgICAgIHBhcmVudDogcGFyZW50MixcbiAgICAgICAgICBwYXRoOiBjb250ZXh0LnBhdGgsXG4gICAgICAgICAgcmVzb2x2ZVBhbmUsXG4gICAgICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoY3VycmVudC5ncm91cEluZGV4ID09PSAobmV4dCA9PSBudWxsID8gdm9pZCAwIDogbmV4dC5ncm91cEluZGV4KSkge1xuICAgICAgICBuZXh0U3RyZWFtID0gcmVzb2x2ZVBhbmVUcmVlKHtcbiAgICAgICAgICB1bnJlc29sdmVkUGFuZSxcbiAgICAgICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lczogcmVzdCxcbiAgICAgICAgICBwYXJlbnQ6IHBhcmVudDIsXG4gICAgICAgICAgcGF0aCxcbiAgICAgICAgICByZXNvbHZlUGFuZSxcbiAgICAgICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dFN0cmVhbSA9IHJlc29sdmVQYW5lVHJlZSh7XG4gICAgICAgICAgdW5yZXNvbHZlZFBhbmU6IHR5cGVvZiBwYW5lTm9kZS5jaGlsZCA9PT0gXCJmdW5jdGlvblwiID8gbWVtb0JpbmQocGFuZU5vZGUsIFwiY2hpbGRcIikgOiBwYW5lTm9kZS5jaGlsZCxcbiAgICAgICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lczogcmVzdCxcbiAgICAgICAgICBwYXJlbnQ6IHBhbmVOb2RlLFxuICAgICAgICAgIHBhdGg6IGNvbnRleHQucGF0aCxcbiAgICAgICAgICByZXNvbHZlUGFuZSxcbiAgICAgICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbmNhdChcbiAgICAgIC8vIHdlIGVtaXQgdGhlIGxvYWRpbmcgcGFuZXMgZmlyc3QgaW4gYSBjb25jYXQgKHRoaXMgZW1pdHMgaW1tZWRpYXRlbHkpXG4gICAgICBvZihbcmVzb2x2ZWRQYW5lTWV0YSwgLi4ubG9hZGluZ1BhbmVzXSksXG4gICAgICAvLyB0aGVuIHdoZW5ldmVyIHRoZSBuZXh0IHN0cmVhbSBpcyBkb25lLCB0aGUgcmVzdWx0cyB3aWxsIGJlIGNvbWJpbmVkLlxuICAgICAgbmV4dFN0cmVhbS5waXBlKG1hcChuZXh0UmVzb2x2ZWRQYW5lcyA9PiBbcmVzb2x2ZWRQYW5lTWV0YSwgLi4ubmV4dFJlc29sdmVkUGFuZXNdKSkpO1xuICAgIH0pKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChlIGluc3RhbmNlb2YgUGFuZVJlc29sdXRpb25FcnJvcikge1xuICAgICAgaWYgKGUuY29udGV4dCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJQYW5lIHJlc29sdXRpb24gZXJyb3IgYXQgaW5kZXggXCIuY29uY2F0KGUuY29udGV4dC5pbmRleCkuY29uY2F0KGUuY29udGV4dC5zcGxpdEluZGV4ID4gMCA/IFwiIGZvciBzcGxpdCBwYW5lIGluZGV4IFwiLmNvbmNhdChlLmNvbnRleHQuc3BsaXRJbmRleCkgOiBcIlwiLCBcIjogXCIpLmNvbmNhdChlLm1lc3NhZ2UpLmNvbmNhdChlLmhlbHBJZCA/IFwiIC0gc2VlIFwiLmNvbmNhdChnZW5lcmF0ZUhlbHBVcmwoZS5oZWxwSWQpKSA6IFwiXCIpLCBlKTtcbiAgICAgIH1cbiAgICAgIGlmIChlLmhlbHBJZCA9PT0gXCJzdHJ1Y3R1cmUtaXRlbS1yZXR1cm5lZC1uby1jaGlsZFwiKSB7XG4gICAgICAgIHJldHVybiBvZihbXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IGU7XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlc29sdmVkUGFuZU5vZGVTdHJlYW0oX3JlZjUpIHtcbiAgbGV0IHtcbiAgICByb3V0ZXJQYW5lc1N0cmVhbSxcbiAgICByb290UGFuZU5vZGUsXG4gICAgaW5pdGlhbENhY2hlU3RhdGUgPSB7XG4gICAgICBjYWNoZUtleXNCeUZsYXRJbmRleDogW10sXG4gICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lczogW10sXG4gICAgICByZXNvbHZlZFBhbmVDYWNoZTogLyogQF9fUFVSRV9fICovbmV3IE1hcCgpLFxuICAgICAgcmVzb2x2ZVBhbmU6ICgpID0+IE5FVkVSXG4gICAgfSxcbiAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gIH0gPSBfcmVmNTtcbiAgY29uc3QgcmVzb2x2ZWRQYW5lcyQgPSByb3V0ZXJQYW5lc1N0cmVhbS5waXBlKFxuICAvLyBhZGQgaW4gaW1wbGljaXQgXCJyb290XCIgcm91dGVyIHBhbmVcbiAgbWFwKHJhd1JvdXRlclBhbmVzID0+IFtbe1xuICAgIGlkOiBcInJvb3RcIlxuICB9XSwgLi4ucmF3Um91dGVyUGFuZXNdKSxcbiAgLy8gY3JlYXRlIGZsYXR0ZW5lZCByb3V0ZXIgcGFuZXNcbiAgbWFwKHJvdXRlclBhbmVzID0+IHtcbiAgICBjb25zdCBmbGF0dGVuZWRSb3V0ZXJQYW5lcyA9IHJvdXRlclBhbmVzLmZsYXRNYXAoKHJvdXRlclBhbmVHcm91cCwgZ3JvdXBJbmRleCkgPT4gcm91dGVyUGFuZUdyb3VwLm1hcCgocm91dGVyUGFuZVNpYmxpbmcsIHNpYmxpbmdJbmRleCkgPT4gKHtcbiAgICAgIHJvdXRlclBhbmVTaWJsaW5nLFxuICAgICAgZ3JvdXBJbmRleCxcbiAgICAgIHNpYmxpbmdJbmRleFxuICAgIH0pKSkubWFwKChpLCBpbmRleCkgPT4gKHtcbiAgICAgIC4uLmksXG4gICAgICBmbGF0SW5kZXg6IGluZGV4XG4gICAgfSkpO1xuICAgIHJldHVybiBmbGF0dGVuZWRSb3V0ZXJQYW5lcztcbiAgfSksXG4gIC8vIGNhbGN1bGF0ZSBhIFwiZGlmZkluZGV4XCIgdXNlZCBmb3IgY2xlYXJpbmcgdGhlIG1lbW8gY2FjaGVcbiAgc3RhcnRXaXRoKFtdKSwgcGFpcndpc2UoKSwgbWFwKF9yZWY2ID0+IHtcbiAgICBsZXQgW3ByZXYsIGN1cnJdID0gX3JlZjY7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwcmV2VmFsdWUgPSBwcmV2W2ldO1xuICAgICAgY29uc3QgY3VyclZhbHVlID0gY3VycltpXTtcbiAgICAgIGlmICghaXNFcXVhbChwcmV2VmFsdWUsIGN1cnJWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lczogY3VycixcbiAgICAgICAgICBkaWZmSW5kZXg6IGlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGZsYXR0ZW5lZFJvdXRlclBhbmVzOiBjdXJyLFxuICAgICAgZGlmZkluZGV4OiBjdXJyLmxlbmd0aFxuICAgIH07XG4gIH0pLFxuICAvLyBjcmVhdGUgdGhlIG1lbW9pemVkIGByZXNvbHZlUGFuZWAgZnVuY3Rpb24gYW5kIG1hbmFnZSB0aGUgbWVtbyBjYWNoZVxuICBzY2FuKChhY2MsIG5leHQpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBjYWNoZUtleXNCeUZsYXRJbmRleCxcbiAgICAgIHJlc29sdmVkUGFuZUNhY2hlXG4gICAgfSA9IGFjYztcbiAgICBjb25zdCB7XG4gICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lcyxcbiAgICAgIGRpZmZJbmRleFxuICAgIH0gPSBuZXh0O1xuICAgIGNvbnN0IGJlZm9yZURpZmZJbmRleCA9IGNhY2hlS2V5c0J5RmxhdEluZGV4LnNsaWNlKDAsIGRpZmZJbmRleCArIDEpO1xuICAgIGNvbnN0IGFmdGVyRGlmZkluZGV4ID0gY2FjaGVLZXlzQnlGbGF0SW5kZXguc2xpY2UoZGlmZkluZGV4ICsgMSk7XG4gICAgY29uc3Qga2V5c1RvS2VlcCA9IG5ldyBTZXQoYmVmb3JlRGlmZkluZGV4LmZsYXRNYXAoa2V5U2V0ID0+IEFycmF5LmZyb20oa2V5U2V0KSkpO1xuICAgIGNvbnN0IGtleXNUb0RlbGV0ZSA9IGFmdGVyRGlmZkluZGV4LmZsYXRNYXAoa2V5U2V0ID0+IEFycmF5LmZyb20oa2V5U2V0KSkuZmlsdGVyKGtleSA9PiAha2V5c1RvS2VlcC5oYXMoa2V5KSk7XG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5c1RvRGVsZXRlKSB7XG4gICAgICByZXNvbHZlZFBhbmVDYWNoZS5kZWxldGUoa2V5KTtcbiAgICB9XG4gICAgY29uc3QgbWVtb2l6ZSA9IG5leHRGbiA9PiAodW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCkgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gdW5yZXNvbHZlZFBhbmUgJiYgXCJcIi5jb25jYXQoYXNzaWduSWQodW5yZXNvbHZlZFBhbmUpLCBcIi1cIikuY29uY2F0KGhhc2hDb250ZXh0KGNvbnRleHQpKTtcbiAgICAgIGNvbnN0IGNhY2hlZFJlc29sdmVkUGFuZSA9IGtleSAmJiByZXNvbHZlZFBhbmVDYWNoZS5nZXQoa2V5KTtcbiAgICAgIGlmIChjYWNoZWRSZXNvbHZlZFBhbmUpIHJldHVybiBjYWNoZWRSZXNvbHZlZFBhbmU7XG4gICAgICBjb25zdCByZXN1bHQgPSBuZXh0Rm4odW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCk7XG4gICAgICBpZiAoIWtleSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgIGNvbnN0IGNhY2hlS2V5U2V0ID0gY2FjaGVLZXlzQnlGbGF0SW5kZXhbZmxhdEluZGV4XSB8fCAvKiBAX19QVVJFX18gKi9uZXcgU2V0KCk7XG4gICAgICBjYWNoZUtleVNldC5hZGQoa2V5KTtcbiAgICAgIGNhY2hlS2V5c0J5RmxhdEluZGV4W2ZsYXRJbmRleF0gPSBjYWNoZUtleVNldDtcbiAgICAgIHJlc29sdmVkUGFuZUNhY2hlLnNldChrZXksIHJlc3VsdCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgIGZsYXR0ZW5lZFJvdXRlclBhbmVzLFxuICAgICAgY2FjaGVLZXlzQnlGbGF0SW5kZXgsXG4gICAgICByZXNvbHZlZFBhbmVDYWNoZSxcbiAgICAgIHJlc29sdmVQYW5lOiBjcmVhdGVQYW5lUmVzb2x2ZXIobWVtb2l6ZSlcbiAgICB9O1xuICB9LCBpbml0aWFsQ2FjaGVTdGF0ZSksXG4gIC8vIHJ1biB0aGUgbWVtb2l6ZWQsIHJlY3Vyc2l2ZSByZXNvbHZpbmdcbiAgc3dpdGNoTWFwKF9yZWY3ID0+IHtcbiAgICBsZXQge1xuICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXMsXG4gICAgICByZXNvbHZlUGFuZVxuICAgIH0gPSBfcmVmNztcbiAgICByZXR1cm4gcmVzb2x2ZVBhbmVUcmVlKHtcbiAgICAgIHVucmVzb2x2ZWRQYW5lOiByb290UGFuZU5vZGUsXG4gICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lcyxcbiAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgIHBhdGg6IFtdLFxuICAgICAgcmVzb2x2ZVBhbmUsXG4gICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgfSk7XG4gIH0pKTtcbiAgcmV0dXJuIHJlc29sdmVkUGFuZXMkLnBpcGUoXG4gIC8vIHRoaXMgZGlmZnMgdGhlIHByZXZpb3VzIGVtaXNzaW9uIHdpdGggdGhlIGN1cnJlbnQgb25lLiBpZiB0aGVyZSBpcyBhIG5ld1xuICAvLyBsb2FkaW5nIHBhbmUgYXQgdGhlIHNhbWUgcG9zaXRpb24gd2hlcmUgYSBwcmV2aW91cyBwYW5lIGFscmVhZHkgaGFkIGFcbiAgLy8gcmVzb2x2ZWQgdmFsdWUgKGxvb2tpbmcgYXQgdGhlIElEcyB0byBjb21wYXJlKSwgdGhlbiByZXR1cm4gdGhlIHByZXZpb3VzXG4gIC8vIHBhbmUgaW5zdGVhZCBvZiB0aGUgbG9hZGluZyBwYW5lXG4gIHNjYW4oKHByZXYsIG5leHQpID0+IG5leHQubWFwKChuZXh0UGFuZSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBwcmV2UGFuZSA9IHByZXZbaW5kZXhdO1xuICAgIGlmICghcHJldlBhbmUpIHJldHVybiBuZXh0UGFuZTtcbiAgICBpZiAobmV4dFBhbmUudHlwZSAhPT0gXCJsb2FkaW5nXCIpIHJldHVybiBuZXh0UGFuZTtcbiAgICBpZiAocHJldlBhbmUucm91dGVyUGFuZVNpYmxpbmcuaWQgPT09IG5leHRQYW5lLnJvdXRlclBhbmVTaWJsaW5nLmlkKSB7XG4gICAgICByZXR1cm4gcHJldlBhbmU7XG4gICAgfVxuICAgIHJldHVybiBuZXh0UGFuZTtcbiAgfSksIFtdKSxcbiAgLy8gdGhpcyBwcmV2ZW50cyBkdXBsaWNhdGUgZW1pc3Npb25zXG4gIGRpc3RpbmN0VW50aWxDaGFuZ2VkKChwcmV2LCBuZXh0KSA9PiB7XG4gICAgaWYgKHByZXYubGVuZ3RoICE9PSBuZXh0Lmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcHJldlZhbHVlID0gcHJldltpXTtcbiAgICAgIGNvbnN0IG5leHRWYWx1ZSA9IG5leHRbaV07XG4gICAgICBpZiAoaGFzaFJlc29sdmVkUGFuZU1ldGEocHJldlZhbHVlKSAhPT0gaGFzaFJlc29sdmVkUGFuZU1ldGEobmV4dFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9KSk7XG59XG5mdW5jdGlvbiB1c2VSb3V0ZXJQYW5lc1N0cmVhbSgpIHtcbiAgY29uc3Qgcm91dGVyU3RhdGVTdWJqZWN0ID0gdXNlTWVtbygoKSA9PiBuZXcgUmVwbGF5U3ViamVjdCgxKSwgW10pO1xuICBjb25zdCByb3V0ZXJQYW5lcyQgPSB1c2VNZW1vKCgpID0+IHJvdXRlclN0YXRlU3ViamVjdC5hc09ic2VydmFibGUoKS5waXBlKG1hcChfcm91dGVyU3RhdGUgPT4gKF9yb3V0ZXJTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogX3JvdXRlclN0YXRlLnBhbmVzKSB8fCBbXSkpLCBbcm91dGVyU3RhdGVTdWJqZWN0XSk7XG4gIGNvbnN0IHtcbiAgICBzdGF0ZTogcm91dGVyU3RhdGVcbiAgfSA9IHVzZVJvdXRlcigpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJvdXRlclN0YXRlU3ViamVjdC5uZXh0KHJvdXRlclN0YXRlKTtcbiAgfSwgW3JvdXRlclN0YXRlLCByb3V0ZXJTdGF0ZVN1YmplY3RdKTtcbiAgcmV0dXJuIHJvdXRlclBhbmVzJDtcbn1cbmZ1bmN0aW9uIHVzZVJlc29sdmVkUGFuZXMoKSB7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoKTtcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgY29uc3Qge1xuICAgIHN0cnVjdHVyZUNvbnRleHQsXG4gICAgcm9vdFBhbmVOb2RlXG4gIH0gPSB1c2VEZXNrVG9vbCgpO1xuICBjb25zdCBbZGF0YSwgc2V0RGF0YV0gPSB1c2VTdGF0ZSh7XG4gICAgcGFuZURhdGFJdGVtczogW10sXG4gICAgcmVzb2x2ZWRQYW5lczogW10sXG4gICAgcm91dGVyUGFuZXM6IFtdXG4gIH0pO1xuICBjb25zdCByb3V0ZXJQYW5lc1N0cmVhbSA9IHVzZVJvdXRlclBhbmVzU3RyZWFtKCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgcmVzb2x2ZWRQYW5lcyQgPSBjcmVhdGVSZXNvbHZlZFBhbmVOb2RlU3RyZWFtKHtcbiAgICAgIHJvb3RQYW5lTm9kZSxcbiAgICAgIHJvdXRlclBhbmVzU3RyZWFtLFxuICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgIH0pLnBpcGUobWFwKHJlc29sdmVkUGFuZXMgPT4ge1xuICAgICAgY29uc3Qgcm91dGVyUGFuZXMgPSByZXNvbHZlZFBhbmVzLnJlZHVjZSgoYWNjLCBuZXh0KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRHcm91cCA9IGFjY1tuZXh0Lmdyb3VwSW5kZXhdIHx8IFtdO1xuICAgICAgICBjdXJyZW50R3JvdXBbbmV4dC5zaWJsaW5nSW5kZXhdID0gbmV4dC5yb3V0ZXJQYW5lU2libGluZztcbiAgICAgICAgYWNjW25leHQuZ3JvdXBJbmRleF0gPSBjdXJyZW50R3JvdXA7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LCBbXSk7XG4gICAgICBjb25zdCBncm91cHNMZW4gPSByb3V0ZXJQYW5lcy5sZW5ndGg7XG4gICAgICBjb25zdCBwYW5lRGF0YUl0ZW1zID0gcmVzb2x2ZWRQYW5lcy5tYXAocGFuZSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGdyb3VwSW5kZXgsXG4gICAgICAgICAgZmxhdEluZGV4LFxuICAgICAgICAgIHNpYmxpbmdJbmRleCxcbiAgICAgICAgICByb3V0ZXJQYW5lU2libGluZyxcbiAgICAgICAgICBwYXRoXG4gICAgICAgIH0gPSBwYW5lO1xuICAgICAgICBjb25zdCBpdGVtSWQgPSByb3V0ZXJQYW5lU2libGluZy5pZDtcbiAgICAgICAgY29uc3QgbmV4dEdyb3VwID0gcm91dGVyUGFuZXNbZ3JvdXBJbmRleCArIDFdO1xuICAgICAgICBjb25zdCBwYW5lRGF0YUl0ZW0gPSB7XG4gICAgICAgICAgYWN0aXZlOiBncm91cEluZGV4ID09PSBncm91cHNMZW4gLSAyLFxuICAgICAgICAgIGNoaWxkSXRlbUlkOiAoX2EgPSBuZXh0R3JvdXAgPT0gbnVsbCA/IHZvaWQgMCA6IG5leHRHcm91cFswXS5pZCkgIT0gbnVsbCA/IF9hIDogbnVsbCxcbiAgICAgICAgICBpbmRleDogZmxhdEluZGV4LFxuICAgICAgICAgIGl0ZW1JZDogcm91dGVyUGFuZVNpYmxpbmcuaWQsXG4gICAgICAgICAgZ3JvdXBJbmRleCxcbiAgICAgICAgICBrZXk6IFwiXCIuY29uY2F0KHBhbmUudHlwZSA9PT0gXCJsb2FkaW5nXCIgPyBcInVua25vd25cIiA6IHBhbmUucGFuZU5vZGUuaWQsIFwiLVwiKS5jb25jYXQoaXRlbUlkLCBcIi1cIikuY29uY2F0KHNpYmxpbmdJbmRleCksXG4gICAgICAgICAgcGFuZTogcGFuZS50eXBlID09PSBcImxvYWRpbmdcIiA/IExPQURJTkdfUEFORSA6IHBhbmUucGFuZU5vZGUsXG4gICAgICAgICAgcGFyYW1zOiByb3V0ZXJQYW5lU2libGluZy5wYXJhbXMgfHwge30sXG4gICAgICAgICAgcGF0aDogcGF0aC5qb2luKFwiO1wiKSxcbiAgICAgICAgICBwYXlsb2FkOiByb3V0ZXJQYW5lU2libGluZy5wYXlsb2FkLFxuICAgICAgICAgIHNlbGVjdGVkOiBmbGF0SW5kZXggPT09IHJlc29sdmVkUGFuZXMubGVuZ3RoIC0gMSxcbiAgICAgICAgICBzaWJsaW5nSW5kZXhcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHBhbmVEYXRhSXRlbTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGFuZURhdGFJdGVtcyxcbiAgICAgICAgcm91dGVyUGFuZXMsXG4gICAgICAgIHJlc29sdmVkUGFuZXM6IHBhbmVEYXRhSXRlbXMubWFwKHBhbmUgPT4gcGFuZS5wYW5lKVxuICAgICAgfTtcbiAgICB9KSk7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gcmVzb2x2ZWRQYW5lcyQuc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6IHJlc3VsdCA9PiBzZXREYXRhKHJlc3VsdCksXG4gICAgICBlcnJvcjogZSA9PiBzZXRFcnJvcihlKVxuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgfSwgW3Jvb3RQYW5lTm9kZSwgcm91dGVyUGFuZXNTdHJlYW0sIHN0cnVjdHVyZUNvbnRleHRdKTtcbiAgcmV0dXJuIGRhdGE7XG59XG5hc3luYyBmdW5jdGlvbiBlbnN1cmVEb2N1bWVudElkQW5kVHlwZShkb2N1bWVudFN0b3JlLCBpZCwgdHlwZSkge1xuICBpZiAoaWQgJiYgdHlwZSkgcmV0dXJuIHtcbiAgICBpZCxcbiAgICB0eXBlXG4gIH07XG4gIGlmICghaWQgJiYgdHlwZSkgcmV0dXJuIHtcbiAgICBpZDogdXVpZCgpLFxuICAgIHR5cGVcbiAgfTtcbiAgaWYgKGlkICYmICF0eXBlKSB7XG4gICAgY29uc3QgcmVzb2x2ZWRUeXBlID0gYXdhaXQgZmlyc3RWYWx1ZUZyb20oZG9jdW1lbnRTdG9yZS5yZXNvbHZlVHlwZUZvckRvY3VtZW50KGlkKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkLFxuICAgICAgdHlwZTogcmVzb2x2ZWRUeXBlXG4gICAgfTtcbiAgfVxuICB0aHJvdyBuZXcgUGFuZVJlc29sdXRpb25FcnJvcih7XG4gICAgbWVzc2FnZTogXCJOZWl0aGVyIGRvY3VtZW50IGBpZGAgb3IgYHR5cGVgIHdhcyBwcm92aWRlZCB3aGVuIHRyeWluZyB0byByZXNvbHZlIGludGVudC5cIlxuICB9KTtcbn1cbmNvbnN0IEVNUFRZX1JFQ09SRCA9IHt9O1xuY29uc3QgSW50ZW50UmVzb2x2ZXIgPSBtZW1vKGZ1bmN0aW9uIEludGVudFJlc29sdmVyMigpIHtcbiAgY29uc3Qge1xuICAgIG5hdmlnYXRlXG4gIH0gPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgbWF5YmVJbnRlbnQgPSB1c2VSb3V0ZXJTdGF0ZSh1c2VDYWxsYmFjayhyb3V0ZXJTdGF0ZSA9PiB7XG4gICAgY29uc3QgaW50ZW50TmFtZSA9IHR5cGVvZiByb3V0ZXJTdGF0ZS5pbnRlbnQgPT09IFwic3RyaW5nXCIgPyByb3V0ZXJTdGF0ZS5pbnRlbnQgOiB2b2lkIDA7XG4gICAgcmV0dXJuIGludGVudE5hbWUgPyB7XG4gICAgICBpbnRlbnQ6IGludGVudE5hbWUsXG4gICAgICBwYXJhbXM6IGlzUmVjb3JkKHJvdXRlclN0YXRlLnBhcmFtcykgPyByb3V0ZXJTdGF0ZS5wYXJhbXMgOiBFTVBUWV9SRUNPUkQsXG4gICAgICBwYXlsb2FkOiByb3V0ZXJTdGF0ZS5wYXlsb2FkXG4gICAgfSA6IHZvaWQgMDtcbiAgfSwgW10pKTtcbiAgY29uc3Qge1xuICAgIHJvb3RQYW5lTm9kZSxcbiAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gIH0gPSB1c2VEZXNrVG9vbCgpO1xuICBjb25zdCBkb2N1bWVudFN0b3JlID0gdXNlRG9jdW1lbnRTdG9yZSgpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChtYXliZUludGVudCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBpbnRlbnQsXG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcGF5bG9hZFxuICAgICAgfSA9IG1heWJlSW50ZW50O1xuICAgICAgbGV0IGNhbmNlbGxlZCA9IGZhbHNlO1xuICAgICAgYXN5bmMgZnVuY3Rpb24gZWZmZWN0KCkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgdHlwZVxuICAgICAgICB9ID0gYXdhaXQgZW5zdXJlRG9jdW1lbnRJZEFuZFR5cGUoZG9jdW1lbnRTdG9yZSwgdHlwZW9mIHBhcmFtcy5pZCA9PT0gXCJzdHJpbmdcIiA/IHBhcmFtcy5pZCA6IHZvaWQgMCwgdHlwZW9mIHBhcmFtcy50eXBlID09PSBcInN0cmluZ1wiID8gcGFyYW1zLnR5cGUgOiB2b2lkIDApO1xuICAgICAgICBpZiAoY2FuY2VsbGVkKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHBhbmVzID0gYXdhaXQgcmVzb2x2ZUludGVudCh7XG4gICAgICAgICAgaW50ZW50LFxuICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICB0eXBlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgIHJvb3RQYW5lTm9kZSxcbiAgICAgICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY2FuY2VsbGVkKSByZXR1cm47XG4gICAgICAgIG5hdmlnYXRlKHtcbiAgICAgICAgICBwYW5lc1xuICAgICAgICB9LCB7XG4gICAgICAgICAgcmVwbGFjZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGVmZmVjdCgpLmNhdGNoKHNldEVycm9yKTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGNhbmNlbGxlZCA9IHRydWU7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW2RvY3VtZW50U3RvcmUsIG1heWJlSW50ZW50LCBuYXZpZ2F0ZSwgcm9vdFBhbmVOb2RlLCBzdHJ1Y3R1cmVDb250ZXh0XSk7XG4gIHJldHVybiBudWxsO1xufSk7XG52YXIgX19mcmVlemUkYiA9IE9iamVjdC5mcmVlemU7XG52YXIgX19kZWZQcm9wJGIgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX190ZW1wbGF0ZSRiID0gKGNvb2tlZCwgcmF3KSA9PiBfX2ZyZWV6ZSRiKF9fZGVmUHJvcCRiKGNvb2tlZCwgXCJyYXdcIiwge1xuICB2YWx1ZTogX19mcmVlemUkYihyYXcgfHwgY29va2VkLnNsaWNlKCkpXG59KSk7XG52YXIgX2EkYjtcbmNvbnN0IFBhdGhTZWdtZW50ID0gc3R5bGVkLnNwYW4oX2EkYiB8fCAoX2EkYiA9IF9fdGVtcGxhdGUkYihbXCJcXG4gICY6bm90KDpsYXN0LWNoaWxkKTo6YWZ0ZXIge1xcbiAgICBjb250ZW50OiAnIFxcdTI3OUQgJztcXG4gICAgb3BhY2l0eTogMC41O1xcbiAgfVxcblwiXSkpKTtcbmZ1bmN0aW9uIGZvcm1hdFN0YWNrKHN0YWNrKSB7XG4gIHJldHVybiBzdGFjay5yZXBsYWNlKC9cXChcXC5cXC5cXC5cXClcXC4vZywgXCIoLi4uKVxcbiAgLlwiKS5yZXBsYWNlKC9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFX1xcZCtfKy9nLCBcIlwiKS5yZXBsYWNlKC9fX19kZWZhdWx0XFwuL2csIFwiLlwiKS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIgXFxcXChodHRwcz86XFxcXC9cXFxcL1wiLmNvbmNhdCh3aW5kb3cubG9jYXRpb24uaG9zdCksIFwiZ1wiKSwgXCIgKFwiKTtcbn1cbmZ1bmN0aW9uIFN0cnVjdHVyZUVycm9yKF9yZWY4KSB7XG4gIGxldCB7XG4gICAgZXJyb3JcbiAgfSA9IF9yZWY4O1xuICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIFBhbmVSZXNvbHV0aW9uRXJyb3IpKSB7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgY29uc3Qge1xuICAgIGNhdXNlXG4gIH0gPSBlcnJvcjtcbiAgY29uc3Qgc3RhY2sgPSAoY2F1c2UgPT0gbnVsbCA/IHZvaWQgMCA6IGNhdXNlLnN0YWNrKSB8fCBlcnJvci5zdGFjaztcbiAgY29uc3Qgc2hvd1N0YWNrID0gc3RhY2sgJiYgIShjYXVzZSBpbnN0YW5jZW9mIFNlcmlhbGl6ZUVycm9yKSAmJiAhZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcIk1vZHVsZSBidWlsZCBmYWlsZWQ6XCIpO1xuICBjb25zdCBwYXRoID0gY2F1c2UgaW5zdGFuY2VvZiBTZXJpYWxpemVFcnJvciA/IGNhdXNlLnBhdGggOiBbXTtcbiAgY29uc3QgaGVscElkID0gY2F1c2UgaW5zdGFuY2VvZiBTZXJpYWxpemVFcnJvciAmJiBjYXVzZS5oZWxwSWQgfHwgZXJyb3IuaGVscElkO1xuICBjb25zdCBoYW5kbGVSZWxvYWQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICB9LCBbXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goQ2FyZCwge1xuICAgIGhlaWdodDogXCJmaWxsXCIsXG4gICAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxuICAgIHBhZGRpbmc6IDQsXG4gICAgc2l6aW5nOiBcImJvcmRlclwiLFxuICAgIHRvbmU6IFwiY3JpdGljYWxcIixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhDb250YWluZXIsIHtcbiAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KEhlYWRpbmcsIHtcbiAgICAgICAgYXM6IFwiaDJcIixcbiAgICAgICAgY2hpbGRyZW46IFwiRW5jb3VudGVyZWQgYW4gZXJyb3Igd2hpbGUgcmVhZGluZyBzdHJ1Y3R1cmVcIlxuICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeHMoQ2FyZCwge1xuICAgICAgICBtYXJnaW5Ub3A6IDQsXG4gICAgICAgIHBhZGRpbmc6IDQsXG4gICAgICAgIHJhZGl1czogMixcbiAgICAgICAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxuICAgICAgICBzaGFkb3c6IDEsXG4gICAgICAgIHRvbmU6IFwiaW5oZXJpdFwiLFxuICAgICAgICBjaGlsZHJlbjogW3BhdGgubGVuZ3RoID4gMCAmJiAvKiBAX19QVVJFX18gKi9qc3hzKFN0YWNrLCB7XG4gICAgICAgICAgc3BhY2U6IDIsXG4gICAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goTGFiZWwsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBcIlN0cnVjdHVyZSBwYXRoXCJcbiAgICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KENvZGUsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBwYXRoLnNsaWNlKDEpLm1hcCgoc2VnbWVudCwgaSkgPT5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9uby1hcnJheS1pbmRleC1rZXlcbiAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqL1xuICAgICAgICAgICAganN4KFBhdGhTZWdtZW50LCB7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBzZWdtZW50XG4gICAgICAgICAgICB9LCBcIlwiLmNvbmNhdChzZWdtZW50LCBcIi1cIikuY29uY2F0KGkpKSlcbiAgICAgICAgICB9KV1cbiAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeHMoU3RhY2ssIHtcbiAgICAgICAgICBtYXJnaW5Ub3A6IDQsXG4gICAgICAgICAgc3BhY2U6IDIsXG4gICAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goTGFiZWwsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBcIkVycm9yXCJcbiAgICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KENvZGUsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBzaG93U3RhY2sgPyBmb3JtYXRTdGFjayhzdGFjaykgOiBlcnJvci5tZXNzYWdlXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pLCBoZWxwSWQgJiYgLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICAgIG1hcmdpblRvcDogNCxcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goXCJhXCIsIHtcbiAgICAgICAgICAgICAgaHJlZjogZ2VuZXJhdGVIZWxwVXJsKGhlbHBJZCksXG4gICAgICAgICAgICAgIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCIsXG4gICAgICAgICAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFwiVmlldyBkb2N1bWVudGF0aW9uXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgICBtYXJnaW5Ub3A6IDQsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChCdXR0b24sIHtcbiAgICAgICAgICAgIHRleHQ6IFwiUmVsb2FkXCIsXG4gICAgICAgICAgICBpY29uOiBTeW5jSWNvbixcbiAgICAgICAgICAgIHRvbmU6IFwicHJpbWFyeVwiLFxuICAgICAgICAgICAgb25DbGljazogaGFuZGxlUmVsb2FkXG4gICAgICAgICAgfSlcbiAgICAgICAgfSldXG4gICAgICB9KV1cbiAgICB9KVxuICB9KTtcbn1cbmZ1bmN0aW9uIFVua25vd25QYW5lKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBpc1NlbGVjdGVkLFxuICAgIHBhbmUsXG4gICAgcGFuZUtleVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHR5cGUgPSBpc1JlY29yZChwYW5lKSAmJiBwYW5lLnR5cGUgfHwgbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoUGFuZSwge1xuICAgIGlkOiBwYW5lS2V5LFxuICAgIHNlbGVjdGVkOiBpc1NlbGVjdGVkLFxuICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFBhbmVIZWFkZXIsIHtcbiAgICAgIHRpdGxlOiBcIlVua25vd24gcGFuZSB0eXBlXCJcbiAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KFBhbmVDb250ZW50LCB7XG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICBwYWRkaW5nOiA0LFxuICAgICAgICBjaGlsZHJlbjogdHlwZW9mIHR5cGUgPT09IFwic3RyaW5nXCIgPyAvKiBAX19QVVJFX18gKi9qc3hzKFRleHQsIHtcbiAgICAgICAgICBhczogXCJwXCIsXG4gICAgICAgICAgbXV0ZWQ6IHRydWUsXG4gICAgICAgICAgY2hpbGRyZW46IFtcIlN0cnVjdHVyZSBpdGVtIG9mIHR5cGUgXCIsIC8qIEBfX1BVUkVfXyAqL2pzeChcImNvZGVcIiwge1xuICAgICAgICAgICAgY2hpbGRyZW46IHR5cGVcbiAgICAgICAgICB9KSwgXCIgaXMgbm90IGEga25vd24gZW50aXR5LlwiXVxuICAgICAgICB9KSA6IC8qIEBfX1BVUkVfXyAqL2pzeHMoVGV4dCwge1xuICAgICAgICAgIGFzOiBcInBcIixcbiAgICAgICAgICBtdXRlZDogdHJ1ZSxcbiAgICAgICAgICBjaGlsZHJlbjogW1wiU3RydWN0dXJlIGl0ZW0gaXMgbWlzc2luZyByZXF1aXJlZCBcIiwgLyogQF9fUFVSRV9fICovanN4KFwiY29kZVwiLCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogXCJ0eXBlXCJcbiAgICAgICAgICB9KSwgXCIgcHJvcGVydHkuXCJdXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldFdhaXRNZXNzYWdlcyhwYXRoKSB7XG4gIGNvbnN0IHRocmVzaG9sZHMgPSBbe1xuICAgIG1zOiAzMDAsXG4gICAgbWVzc2FnZTogXCJMb2FkaW5nXFx1MjAyNlwiXG4gIH0sIHtcbiAgICBtczogNWUzLFxuICAgIG1lc3NhZ2U6IFwiU3RpbGwgbG9hZGluZ1xcdTIwMjZcIlxuICB9XTtcbiAgaWYgKGlzRGV2KSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IFtcIkNoZWNrIGNvbnNvbGUgZm9yIGVycm9ycz9cIiwgXCJJcyB5b3VyIG9ic2VydmFibGUvcHJvbWlzZSByZXNvbHZpbmc/XCIsIHBhdGgubGVuZ3RoID4gMCA/IFwiU3RydWN0dXJlIHBhdGg6IFwiLmNvbmNhdChwYXRoLmpvaW4oXCIgXFx1Mjc5RCBcIikpIDogXCJcIl07XG4gICAgdGhyZXNob2xkcy5wdXNoKHtcbiAgICAgIG1zOiAxZTQsXG4gICAgICBtZXNzYWdlOiBtZXNzYWdlLmpvaW4oXCJcXG5cIilcbiAgICB9KTtcbiAgfVxuICBjb25zdCBzcmMgPSBvZihudWxsKTtcbiAgcmV0dXJuIG1lcmdlKC4uLnRocmVzaG9sZHMubWFwKF9yZWY5ID0+IHtcbiAgICBsZXQge1xuICAgICAgbXMsXG4gICAgICBtZXNzYWdlXG4gICAgfSA9IF9yZWY5O1xuICAgIHJldHVybiBzcmMucGlwZShtYXBUbyhtZXNzYWdlKSwgZGVsYXkobXMpKTtcbiAgfSkpO1xufVxudmFyIF9fZnJlZXplJGEgPSBPYmplY3QuZnJlZXplO1xudmFyIF9fZGVmUHJvcCRhID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fdGVtcGxhdGUkYSA9IChjb29rZWQsIHJhdykgPT4gX19mcmVlemUkYShfX2RlZlByb3AkYShjb29rZWQsIFwicmF3XCIsIHtcbiAgdmFsdWU6IF9fZnJlZXplJGEocmF3IHx8IGNvb2tlZC5zbGljZSgpKVxufSkpO1xudmFyIF9hJGE7XG5jb25zdCBERUZBVUxUX01FU1NBR0UgPSBcIkxvYWRpbmdcXHUyMDI2XCI7XG5jb25zdCBDb250ZW50ID0gc3R5bGVkKEZsZXgpKF9hJGEgfHwgKF9hJGEgPSBfX3RlbXBsYXRlJGEoW1wiXFxuICBvcGFjaXR5OiAwO1xcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAyMDBtcztcXG5cXG4gICZbZGF0YS1tb3VudGVkXSB7XFxuICAgIG9wYWNpdHk6IDE7XFxuICB9XFxuXCJdKSkpO1xuY29uc3QgTG9hZGluZ1BhbmUgPSBtZW1vKHByb3BzID0+IHtcbiAgY29uc3Qge1xuICAgIGRlbGF5ID0gMzAwLFxuICAgIGZsZXgsXG4gICAgbWVzc2FnZTogbWVzc2FnZVByb3AgPSBnZXRXYWl0TWVzc2FnZXMsXG4gICAgbWluV2lkdGgsXG4gICAgcGFuZUtleSxcbiAgICBwYXRoLFxuICAgIHNlbGVjdGVkLFxuICAgIHRpdGxlLFxuICAgIHRvbmVcbiAgfSA9IHByb3BzO1xuICBjb25zdCByZXNvbHZlZE1lc3NhZ2UgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2VQcm9wID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiBtZXNzYWdlUHJvcChwYXRoID8gcGF0aC5zcGxpdChcIjtcIikgOiBbXSk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlUHJvcDtcbiAgfSwgW21lc3NhZ2VQcm9wLCBwYXRoXSk7XG4gIGNvbnN0IFtjdXJyZW50TWVzc2FnZSwgc2V0Q3VycmVudE1lc3NhZ2VdID0gdXNlU3RhdGUoKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgcmVzb2x2ZWRNZXNzYWdlID09PSBcInN0cmluZ1wiKSByZXR1cm4gcmVzb2x2ZWRNZXNzYWdlO1xuICAgIHJldHVybiBERUZBVUxUX01FU1NBR0U7XG4gIH0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgcmVzb2x2ZWRNZXNzYWdlICE9PSBcIm9iamVjdFwiKSByZXR1cm4gdm9pZCAwO1xuICAgIGlmICh0eXBlb2YgcmVzb2x2ZWRNZXNzYWdlLnN1YnNjcmliZSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdm9pZCAwO1xuICAgIGNvbnN0IHN1YiA9IHJlc29sdmVkTWVzc2FnZS5zdWJzY3JpYmUoc2V0Q3VycmVudE1lc3NhZ2UpO1xuICAgIHJldHVybiAoKSA9PiBzdWIudW5zdWJzY3JpYmUoKTtcbiAgfSwgW3Jlc29sdmVkTWVzc2FnZV0pO1xuICBjb25zdCBbY29udGVudEVsZW1lbnQsIHNldENvbnRlbnRFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbbW91bnRlZCwgc2V0TW91bnRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjb250ZW50RWxlbWVudCkgcmV0dXJuIHZvaWQgMDtcbiAgICByZXR1cm4gX3JhZjIoKCkgPT4gc2V0TW91bnRlZCh0cnVlKSk7XG4gIH0sIFtjb250ZW50RWxlbWVudF0pO1xuICBjb25zdCBjb250ZW50ID0gLyogQF9fUFVSRV9fICovanN4cyhDb250ZW50LCB7XG4gICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgXCJkYXRhLW1vdW50ZWRcIjogbW91bnRlZCA/IFwiXCIgOiB2b2lkIDAsXG4gICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgIGhlaWdodDogXCJmaWxsXCIsXG4gICAganVzdGlmeTogXCJjZW50ZXJcIixcbiAgICByZWY6IHNldENvbnRlbnRFbGVtZW50LFxuICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFNwaW5uZXIsIHtcbiAgICAgIG11dGVkOiB0cnVlXG4gICAgfSksICh0aXRsZSB8fCBjdXJyZW50TWVzc2FnZSkgJiYgLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgbWFyZ2luVG9wOiAzLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBtdXRlZDogdHJ1ZSxcbiAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgY2hpbGRyZW46IHRpdGxlIHx8IGN1cnJlbnRNZXNzYWdlXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChQYW5lLCB7XG4gICAgZmxleCxcbiAgICBpZDogcGFuZUtleSxcbiAgICBtaW5XaWR0aCxcbiAgICBzZWxlY3RlZCxcbiAgICB0b25lLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goUGFuZUNvbnRlbnQsIHtcbiAgICAgIGNoaWxkcmVuOiBjb250ZW50XG4gICAgfSlcbiAgfSk7XG59KTtcbkxvYWRpbmdQYW5lLmRpc3BsYXlOYW1lID0gXCJMb2FkaW5nUGFuZVwiO1xuY29uc3QgcGFuZU1hcCA9IHtcbiAgY29tcG9uZW50OiBsYXp5KCgpID0+IGltcG9ydCgnLi9pbmRleC03ZmE2MTQxYy5qcycpKSxcbiAgZG9jdW1lbnQ6IGxhenkoKCkgPT4gaW1wb3J0KCcuL2luZGV4LWFmOWRkMjJhLmpzJykpLFxuICBkb2N1bWVudExpc3Q6IGxhenkoKCkgPT4gaW1wb3J0KCcuL2luZGV4LTJmMDBjMmI3LmpzJykpLFxuICBsaXN0OiBsYXp5KCgpID0+IGltcG9ydCgnLi9pbmRleC0yMmI0ODk4OS5qcycpKVxufTtcbmNvbnN0IERlc2tUb29sUGFuZSA9IG1lbW8oZnVuY3Rpb24gRGVza1Rvb2xQYW5lMihwcm9wcykge1xuICBjb25zdCB7XG4gICAgYWN0aXZlLFxuICAgIGNoaWxkSXRlbUlkLFxuICAgIGdyb3VwSW5kZXgsXG4gICAgaW5kZXgsXG4gICAgaXRlbUlkLFxuICAgIHBhbmUsXG4gICAgcGFuZUtleSxcbiAgICBwYXJhbXMsXG4gICAgcGF5bG9hZCxcbiAgICBwYXRoLFxuICAgIHNlbGVjdGVkLFxuICAgIHNpYmxpbmdJbmRleFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IFBhbmVDb21wb25lbnQgPSBwYW5lTWFwW3BhbmUudHlwZV0gfHwgVW5rbm93blBhbmU7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUGFuZVJvdXRlclByb3ZpZGVyLCB7XG4gICAgZmxhdEluZGV4OiBpbmRleCxcbiAgICBpbmRleDogZ3JvdXBJbmRleCxcbiAgICBwYXJhbXMsXG4gICAgcGF5bG9hZCxcbiAgICBzaWJsaW5nSW5kZXgsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChTdXNwZW5zZSwge1xuICAgICAgZmFsbGJhY2s6IC8qIEBfX1BVUkVfXyAqL2pzeChMb2FkaW5nUGFuZSwge1xuICAgICAgICBwYW5lS2V5LFxuICAgICAgICBwYXRoLFxuICAgICAgICBzZWxlY3RlZFxuICAgICAgfSksXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFBhbmVDb21wb25lbnQsIHtcbiAgICAgICAgY2hpbGRJdGVtSWQ6IGNoaWxkSXRlbUlkIHx8IFwiXCIsXG4gICAgICAgIGluZGV4LFxuICAgICAgICBpdGVtSWQsXG4gICAgICAgIGlzQWN0aXZlOiBhY3RpdmUsXG4gICAgICAgIGlzU2VsZWN0ZWQ6IHNlbGVjdGVkLFxuICAgICAgICBwYW5lS2V5LFxuICAgICAgICBwYW5lXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufSwgKF9yZWYxMCwgX3JlZjExKSA9PiB7XG4gIGxldCB7XG4gICAgcGFyYW1zOiBwcmV2UGFyYW1zID0ge30sXG4gICAgcGF5bG9hZDogcHJldlBheWxvYWQgPSBudWxsLFxuICAgIC4uLnByZXZcbiAgfSA9IF9yZWYxMDtcbiAgbGV0IHtcbiAgICBwYXJhbXM6IG5leHRQYXJhbXMgPSB7fSxcbiAgICBwYXlsb2FkOiBuZXh0UGF5bG9hZCA9IG51bGwsXG4gICAgLi4ubmV4dFxuICB9ID0gX3JlZjExO1xuICBpZiAoIWlzRXF1YWwocHJldlBhcmFtcywgbmV4dFBhcmFtcykpIHJldHVybiBmYWxzZTtcbiAgaWYgKCFpc0VxdWFsKHByZXZQYXlsb2FkLCBuZXh0UGF5bG9hZCkpIHJldHVybiBmYWxzZTtcbiAgY29uc3Qga2V5cyA9IC8qIEBfX1BVUkVfXyAqL25ldyBTZXQoWy4uLk9iamVjdC5rZXlzKHByZXYpLCAuLi5PYmplY3Qua2V5cyhuZXh0KV0pO1xuICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgaWYgKHByZXZba2V5XSAhPT0gbmV4dFtrZXldKSByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59KTtcbmZ1bmN0aW9uIEVycm9yUGFuZShwcm9wcykge1xuICBjb25zdCB7XG4gICAgY2hpbGRyZW4sXG4gICAgY3VycmVudE1pbldpZHRoLFxuICAgIGZsZXgsXG4gICAgbWluV2lkdGgsXG4gICAgcGFuZUtleSxcbiAgICB0aXRsZSA9IFwiRXJyb3JcIixcbiAgICB0b25lID0gXCJjcml0aWNhbFwiXG4gIH0gPSBwcm9wcztcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoUGFuZSwge1xuICAgIGN1cnJlbnRNaW5XaWR0aCxcbiAgICBmbGV4LFxuICAgIGlkOiBwYW5lS2V5LFxuICAgIG1pbldpZHRoLFxuICAgIHRvbmUsXG4gICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goUGFuZUhlYWRlciwge1xuICAgICAgdGl0bGVcbiAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KFBhbmVDb250ZW50LCB7XG4gICAgICBvdmVyZmxvdzogXCJhdXRvXCIsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICBwYWRkaW5nWDogNCxcbiAgICAgICAgcGFkZGluZ1k6IDUsXG4gICAgICAgIGNoaWxkcmVuXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldE9wRXJyb3JUaXRsZShvcCkge1xuICBpZiAob3AgPT09IFwiZGVsZXRlXCIpIHtcbiAgICByZXR1cm4gXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBhdHRlbXB0aW5nIHRvIGRlbGV0ZSB0aGlzIGRvY3VtZW50LlxcbiAgICAgIFRoaXMgdXN1YWxseSBtZWFucyB0aGF0IHRoZXJlIGFyZSBvdGhlciBkb2N1bWVudHMgdGhhdCByZWZlcnMgdG8gaXQuXCI7XG4gIH1cbiAgaWYgKG9wID09PSBcInVucHVibGlzaFwiKSB7XG4gICAgcmV0dXJuIFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgYXR0ZW1wdGluZyB0byB1bnB1Ymxpc2ggdGhpcyBkb2N1bWVudC5cXG4gICAgICBUaGlzIHVzdWFsbHkgbWVhbnMgdGhhdCB0aGVyZSBhcmUgb3RoZXIgZG9jdW1lbnRzIHRoYXQgcmVmZXJzIHRvIGl0LlwiO1xuICB9XG4gIHJldHVybiBcIkFuIGVycm9yIG9jY3VycmVkIGR1cmluZyBcIi5jb25jYXQob3ApO1xufVxuZnVuY3Rpb24gZ2V0T3BTdWNjZXNzVGl0bGUob3ApIHtcbiAgaWYgKG9wID09PSBcInB1Ymxpc2hcIikge1xuICAgIHJldHVybiBcIlRoZSBkb2N1bWVudCB3YXMgcHVibGlzaGVkXCI7XG4gIH1cbiAgaWYgKG9wID09PSBcInVucHVibGlzaFwiKSB7XG4gICAgcmV0dXJuIFwiVGhlIGRvY3VtZW50IHdhcyB1bnB1Ymxpc2hlZC4gQSBkcmFmdCBoYXMgYmVlbiBjcmVhdGVkIGZyb20gdGhlIGxhdGVzdCBwdWJsaXNoZWQgdmVyc2lvbi5cIjtcbiAgfVxuICBpZiAob3AgPT09IFwiZGlzY2FyZENoYW5nZXNcIikge1xuICAgIHJldHVybiBcIkFsbCBjaGFuZ2VzIHNpbmNlIGxhc3QgcHVibGlzaCBoYXMgbm93IGJlZW4gZGlzY2FyZGVkLiBUaGUgZGlzY2FyZGVkIGRyYWZ0IGNhbiBzdGlsbCBiZSByZWNvdmVyZWQgZnJvbSBoaXN0b3J5XCI7XG4gIH1cbiAgaWYgKG9wID09PSBcImRlbGV0ZVwiKSB7XG4gICAgcmV0dXJuIFwiVGhlIGRvY3VtZW50IHdhcyBzdWNjZXNzZnVsbHkgZGVsZXRlZFwiO1xuICB9XG4gIHJldHVybiBcIlN1Y2Nlc3NmdWxseSBwZXJmb3JtZWQgXCIuY29uY2F0KG9wLCBcIiBvbiBkb2N1bWVudFwiKTtcbn1cbmNvbnN0IElHTk9SRV9PUFMgPSBbXCJwYXRjaFwiLCBcImNvbW1pdFwiXTtcbmNvbnN0IERvY3VtZW50T3BlcmF0aW9uUmVzdWx0cyA9IG1lbW8oZnVuY3Rpb24gRG9jdW1lbnRPcGVyYXRpb25SZXN1bHRzMigpIHtcbiAgY29uc3Qge1xuICAgIHB1c2g6IHB1c2hUb2FzdFxuICB9ID0gdXNlVG9hc3QoKTtcbiAgY29uc3Qge1xuICAgIGRvY3VtZW50SWQsXG4gICAgZG9jdW1lbnRUeXBlXG4gIH0gPSB1c2VEb2N1bWVudFBhbmUoKTtcbiAgY29uc3QgZXZlbnQgPSB1c2VEb2N1bWVudE9wZXJhdGlvbkV2ZW50KGRvY3VtZW50SWQsIGRvY3VtZW50VHlwZSk7XG4gIGNvbnN0IHByZXZFdmVudCA9IHVzZVJlZihldmVudCk7XG4gIGNvbnN0IHBhbmVSb3V0ZXIgPSB1c2VQYW5lUm91dGVyKCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFldmVudCB8fCBldmVudCA9PT0gcHJldkV2ZW50LmN1cnJlbnQpIHJldHVybjtcbiAgICBsZXQgY2xlYW51cElkO1xuICAgIGlmIChldmVudC50eXBlID09PSBcImVycm9yXCIpIHtcbiAgICAgIHB1c2hUb2FzdCh7XG4gICAgICAgIGNsb3NhYmxlOiB0cnVlLFxuICAgICAgICBkdXJhdGlvbjogM2U0LFxuICAgICAgICAvLyAzMHNcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIHRpdGxlOiBnZXRPcEVycm9yVGl0bGUoZXZlbnQub3ApLFxuICAgICAgICBkZXNjcmlwdGlvbjogLyogQF9fUFVSRV9fICovanN4cyhcImRldGFpbHNcIiwge1xuICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFwic3VtbWFyeVwiLCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogXCJEZXRhaWxzXCJcbiAgICAgICAgICB9KSwgZXZlbnQuZXJyb3IubWVzc2FnZV1cbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gXCJzdWNjZXNzXCIgJiYgIUlHTk9SRV9PUFMuaW5jbHVkZXMoZXZlbnQub3ApKSB7XG4gICAgICBwdXNoVG9hc3Qoe1xuICAgICAgICBjbG9zYWJsZTogdHJ1ZSxcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgdGl0bGU6IGdldE9wU3VjY2Vzc1RpdGxlKGV2ZW50Lm9wKVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChldmVudC50eXBlID09PSBcInN1Y2Nlc3NcIiAmJiBldmVudC5vcCA9PT0gXCJkZWxldGVcIikge1xuICAgICAgY2xlYW51cElkID0gc2V0VGltZW91dCgoKSA9PiBwYW5lUm91dGVyLmNsb3NlQ3VycmVudEFuZEFmdGVyKCksIDApO1xuICAgIH1cbiAgICBwcmV2RXZlbnQuY3VycmVudCA9IGV2ZW50O1xuICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQoY2xlYW51cElkKTtcbiAgfSwgW2V2ZW50LCBwYW5lUm91dGVyLCBwdXNoVG9hc3RdKTtcbiAgcmV0dXJuIG51bGw7XG59KTtcbmZ1bmN0aW9uIHVzZURlc2tUb29sU2V0dGluZyhuYW1lc3BhY2UsIGtleSwgZGVmYXVsdFZhbHVlKSB7XG4gIGNvbnN0IHNldHRpbmdzU3RvcmUgPSB1c2VTZXR0aW5nc1N0b3JlKCk7XG4gIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gdXNlU3RhdGUoZGVmYXVsdFZhbHVlKTtcbiAgY29uc3QgZGVza1Rvb2xTZXR0aW5ncyA9IHVzZU1lbW8oKCkgPT4gc2V0dGluZ3NTdG9yZS5mb3JOYW1lc3BhY2UoXCJkZXNrLXRvb2xcIiksIFtzZXR0aW5nc1N0b3JlXSk7XG4gIGNvbnN0IHNldHRpbmdzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKG5hbWVzcGFjZSkge1xuICAgICAgcmV0dXJuIGRlc2tUb29sU2V0dGluZ3MuZm9yTmFtZXNwYWNlKG5hbWVzcGFjZSkuZm9yS2V5KGtleSk7XG4gICAgfVxuICAgIHJldHVybiBkZXNrVG9vbFNldHRpbmdzLmZvcktleShrZXkpO1xuICB9LCBbZGVza1Rvb2xTZXR0aW5ncywgbmFtZXNwYWNlLCBrZXldKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzdWIgPSBzZXR0aW5ncy5saXN0ZW4oZGVmYXVsdFZhbHVlKS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogc2V0VmFsdWVcbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4gc3ViID09IG51bGwgPyB2b2lkIDAgOiBzdWIudW5zdWJzY3JpYmUoKTtcbiAgfSwgW2RlZmF1bHRWYWx1ZSwga2V5LCBuYW1lc3BhY2UsIHNldHRpbmdzXSk7XG4gIGNvbnN0IHNldCA9IHVzZUNhbGxiYWNrKG5ld1ZhbHVlID0+IHtcbiAgICBzZXRWYWx1ZShuZXdWYWx1ZSk7XG4gICAgc2V0dGluZ3Muc2V0KG5ld1ZhbHVlKTtcbiAgfSwgW3NldHRpbmdzXSk7XG4gIHJldHVybiB1c2VNZW1vKCgpID0+IFt2YWx1ZSwgc2V0XSwgW3NldCwgdmFsdWVdKTtcbn1cbmNvbnN0IFZJRVdfTU9ERV9QQVJTRUQgPSB7XG4gIGlkOiBcInBhcnNlZFwiLFxuICB0aXRsZTogXCJQYXJzZWRcIlxufTtcbmNvbnN0IFZJRVdfTU9ERV9SQVcgPSB7XG4gIGlkOiBcInJhd1wiLFxuICB0aXRsZTogXCJSYXcgSlNPTlwiXG59O1xuY29uc3QgVklFV19NT0RFUyA9IFtWSUVXX01PREVfUEFSU0VELCBWSUVXX01PREVfUkFXXTtcbmNvbnN0IGxydSA9IEhMUlUoMWUzKTtcbmZ1bmN0aW9uIGlzRXhwYW5kZWQoa2V5UGF0aCwgdmFsdWUpIHtcbiAgY29uc3QgY2FjaGVkID0gbHJ1LmdldChrZXlQYXRoKTtcbiAgaWYgKGNhY2hlZCA9PT0gdm9pZCAwKSB7XG4gICAgbHJ1LnNldChrZXlQYXRoLCBBcnJheS5pc0FycmF5KHZhbHVlKSB8fCBpc1JlY29yZCh2YWx1ZSkpO1xuICAgIHJldHVybiBpc0V4cGFuZGVkKGtleVBhdGgsIHZhbHVlKTtcbiAgfVxuICByZXR1cm4gY2FjaGVkO1xufVxuZnVuY3Rpb24gdG9nZ2xlRXhwYW5kZWQoZXZlbnQpIHtcbiAgY29uc3Qge1xuICAgIHBhdGhcbiAgfSA9IGV2ZW50O1xuICBjb25zdCBjdXJyZW50ID0gbHJ1LmdldChwYXRoKTtcbiAgaWYgKGN1cnJlbnQgPT09IHZvaWQgMCkge1xuICAgIHJldHVybjtcbiAgfVxuICBscnUuc2V0KHBhdGgsICFjdXJyZW50KTtcbn1cbmZ1bmN0aW9uIHNlbGVjdEVsZW1lbnQoZWxlbWVudCkge1xuICBjb25zdCBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gIGlmIChzZWwpIHtcbiAgICBjb25zdCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhlbGVtZW50KTtcbiAgICBzZWwuYWRkUmFuZ2UocmFuZ2UpO1xuICB9XG59XG5mdW5jdGlvbiBzZWxlY3QoZXZlbnQpIHtcbiAgc2VsZWN0RWxlbWVudChldmVudC5jdXJyZW50VGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIG1heWJlU2VsZWN0QWxsKGV2ZW50KSB7XG4gIGNvbnN0IHNlbGVjdEFsbCA9IGV2ZW50LmtleUNvZGUgPT09IDY1ICYmIChldmVudC5tZXRhS2V5IHx8IGV2ZW50LmN0cmxLZXkpO1xuICBpZiAoIXNlbGVjdEFsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBzZWxlY3RFbGVtZW50KGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xufVxuZnVuY3Rpb24gaXNEb2N1bWVudExpa2UodmFsdWUpIHtcbiAgcmV0dXJuIGlzUmVjb3JkKHZhbHVlKSAmJiBpc1N0cmluZyh2YWx1ZS5faWQpICYmIGlzU3RyaW5nKHZhbHVlLl90eXBlKTtcbn1cbnZhciBfX2ZyZWV6ZSQ5ID0gT2JqZWN0LmZyZWV6ZTtcbnZhciBfX2RlZlByb3AkOSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX3RlbXBsYXRlJDkgPSAoY29va2VkLCByYXcpID0+IF9fZnJlZXplJDkoX19kZWZQcm9wJDkoY29va2VkLCBcInJhd1wiLCB7XG4gIHZhbHVlOiBfX2ZyZWV6ZSQ5KHJhdyB8fCBjb29rZWQuc2xpY2UoKSlcbn0pKTtcbnZhciBfYSQ5O1xuY29uc3QgSlNPTkluc3BlY3RvcldyYXBwZXIgPSBzdHlsZWQuZGl2KF9yZWYxMiA9PiB7XG4gIGxldCB7XG4gICAgdGhlbWVcbiAgfSA9IF9yZWYxMjtcbiAgY29uc3Qge1xuICAgIGNvbG9yLFxuICAgIGZvbnRzLFxuICAgIHNwYWNlXG4gIH0gPSB0aGVtZS5zYW5pdHk7XG4gIHJldHVybiBjc3MoX2EkOSB8fCAoX2EkOSA9IF9fdGVtcGxhdGUkOShbXCJcXG4gICAgJiAuanNvbi1pbnNwZWN0b3IsXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fc2VsZWN0aW9uIHtcXG4gICAgICBmb250LWZhbWlseTogXCIsIFwiO1xcbiAgICAgIGZvbnQtc2l6ZTogXCIsIFwicHg7XFxuICAgICAgbGluZS1oZWlnaHQ6IFwiLCBcInB4O1xcbiAgICAgIGNvbG9yOiB2YXIoLS1jYXJkLWNvZGUtZmctY29sb3IpO1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fbGVhZiB7XFxuICAgICAgcGFkZGluZy1sZWZ0OiBcIiwgXCI7XFxuICAgIH1cXG5cXG4gICAgJiAuanNvbi1pbnNwZWN0b3IgLmpzb24taW5zcGVjdG9yX19sZWFmLmpzb24taW5zcGVjdG9yX19sZWFmX3Jvb3Qge1xcbiAgICAgIHBhZGRpbmctdG9wOiBcIiwgXCI7XFxuICAgICAgcGFkZGluZy1sZWZ0OiAwO1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yID4gLmpzb24taW5zcGVjdG9yX19sZWFmX3Jvb3QgPiAuanNvbi1pbnNwZWN0b3JfX2xpbmUgPiAuanNvbi1pbnNwZWN0b3JfX2tleSB7XFxuICAgICAgZGlzcGxheTogbm9uZTtcXG4gICAgfVxcblxcbiAgICAmIC5qc29uLWluc3BlY3RvciAuanNvbi1pbnNwZWN0b3JfX2xpbmUge1xcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgICBjdXJzb3I6IGRlZmF1bHQ7XFxuICAgIH1cXG5cXG4gICAgJiAuanNvbi1pbnNwZWN0b3IgLmpzb24taW5zcGVjdG9yX19saW5lOjphZnRlciB7XFxuICAgICAgY29udGVudDogJyc7XFxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICAgIHRvcDogMDtcXG4gICAgICBsZWZ0OiAtMjAwcHg7XFxuICAgICAgcmlnaHQ6IC01MHB4O1xcbiAgICAgIGJvdHRvbTogMDtcXG4gICAgICB6LWluZGV4OiAtMTtcXG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG4gICAgfVxcblxcbiAgICAmIC5qc29uLWluc3BlY3RvciAuanNvbi1pbnNwZWN0b3JfX2xpbmU6aG92ZXI6OmFmdGVyIHtcXG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jYXJkLWNvZGUtYmctY29sb3IpO1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fbGVhZl9jb21wb3NpdGUgPiAuanNvbi1pbnNwZWN0b3JfX2xpbmUge1xcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgfVxcblxcbiAgICAmIC5qc29uLWluc3BlY3RvciAuanNvbi1pbnNwZWN0b3JfX2xlYWZfY29tcG9zaXRlID4gLmpzb24taW5zcGVjdG9yX19saW5lOjpiZWZvcmUge1xcbiAgICAgIGNvbnRlbnQ6ICdcXHUyNUI4ICc7XFxuICAgICAgbWFyZ2luLWxlZnQ6IGNhbGMoMCAtIFwiLCBcIiArIDNweCk7XFxuICAgICAgZm9udC1zaXplOiBcIiwgXCJweDtcXG4gICAgICBsaW5lLWhlaWdodDogXCIsIFwicHg7XFxuICAgIH1cXG5cXG4gICAgJlxcbiAgICAgIC5qc29uLWluc3BlY3RvclxcbiAgICAgIC5qc29uLWluc3BlY3Rvcl9fbGVhZl9leHBhbmRlZC5qc29uLWluc3BlY3Rvcl9fbGVhZl9jb21wb3NpdGVcXG4gICAgICA+IC5qc29uLWluc3BlY3Rvcl9fbGluZTo6YmVmb3JlIHtcXG4gICAgICBjb250ZW50OiAnXFx1MjVCRSAnO1xcbiAgICAgIGZvbnQtc2l6ZTogXCIsIFwicHg7XFxuICAgICAgbGluZS1oZWlnaHQ6IFwiLCBcInB4O1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fcmFkaW8sXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fZmxhdHBhdGgge1xcbiAgICAgIGRpc3BsYXk6IG5vbmU7XFxuICAgIH1cXG5cXG4gICAgJiAuanNvbi1pbnNwZWN0b3IgLmpzb24taW5zcGVjdG9yX192YWx1ZSB7XFxuICAgICAgbWFyZ2luLWxlZnQ6IFwiLCBcIjtcXG4gICAgfVxcblxcbiAgICAmXFxuICAgICAgLmpzb24taW5zcGVjdG9yXFxuICAgICAgPiAuanNvbi1pbnNwZWN0b3JfX2xlYWZfcm9vdFxcbiAgICAgID4gLmpzb24taW5zcGVjdG9yX19saW5lXFxuICAgICAgPiAuanNvbi1pbnNwZWN0b3JfX2tleVxcbiAgICAgICsgLmpzb24taW5zcGVjdG9yX192YWx1ZSB7XFxuICAgICAgbWFyZ2luOiAwO1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fa2V5IHtcXG4gICAgICBjb2xvcjogXCIsIFwiO1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fdmFsdWVfaGVscGVyLFxcbiAgICAmIC5qc29uLWluc3BlY3RvciAuanNvbi1pbnNwZWN0b3JfX3ZhbHVlX251bGwge1xcbiAgICAgIGNvbG9yOiBcIiwgXCI7XFxuICAgIH1cXG5cXG4gICAgJiAuanNvbi1pbnNwZWN0b3IgLmpzb24taW5zcGVjdG9yX19ub3QtZm91bmQge1xcbiAgICAgIHBhZGRpbmctdG9wOiBcIiwgXCI7XFxuICAgIH1cXG5cXG4gICAgJiAuanNvbi1pbnNwZWN0b3IgLmpzb24taW5zcGVjdG9yX192YWx1ZV9zdHJpbmcge1xcbiAgICAgIGNvbG9yOiBcIiwgXCI7XFxuICAgIH1cXG5cXG4gICAgJiAuanNvbi1pbnNwZWN0b3IgLmpzb24taW5zcGVjdG9yX192YWx1ZV9ib29sZWFuIHtcXG4gICAgICBjb2xvcjogXCIsIFwiO1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fdmFsdWVfbnVtYmVyIHtcXG4gICAgICBjb2xvcjogXCIsIFwiO1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fc2hvdy1vcmlnaW5hbCB7XFxuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgICAgIHBhZGRpbmc6IDAgNnB4O1xcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgfVxcblxcbiAgICAmIC5qc29uLWluc3BlY3RvciAuanNvbi1pbnNwZWN0b3JfX3Nob3ctb3JpZ2luYWw6aG92ZXIge1xcbiAgICAgIGNvbG9yOiBpbmhlcml0O1xcbiAgICB9XFxuXFxuICAgICYgLmpzb24taW5zcGVjdG9yIC5qc29uLWluc3BlY3Rvcl9fc2hvdy1vcmlnaW5hbDo6YmVmb3JlIHtcXG4gICAgICBjb250ZW50OiAnXFx1MjE5NCc7XFxuICAgIH1cXG5cXG4gICAgJiAuanNvbi1pbnNwZWN0b3IgLmpzb24taW5zcGVjdG9yX19zaG93LW9yaWdpbmFsOmhvdmVyOjphZnRlciB7XFxuICAgICAgY29udGVudDogJyBleHBhbmQnO1xcbiAgICB9XFxuICBcIl0pKSwgZm9udHMuY29kZS5mYW1pbHksIGZvbnRzLmNvZGUuc2l6ZXNbMl0uZm9udFNpemUsIGZvbnRzLmNvZGUuc2l6ZXNbMl0ubGluZUhlaWdodCwgcmVtKHNwYWNlWzRdKSwgcmVtKHNwYWNlWzNdKSwgcmVtKHNwYWNlWzRdKSwgZm9udHMuY29kZS5zaXplc1syXS5mb250U2l6ZSwgZm9udHMuY29kZS5zaXplc1syXS5saW5lSGVpZ2h0LCBmb250cy5jb2RlLnNpemVzWzJdLmZvbnRTaXplLCBmb250cy5jb2RlLnNpemVzWzJdLmxpbmVIZWlnaHQsIHJlbShzcGFjZVs0XSAvIDIpLCBjb2xvci5zeW50YXgucHJvcGVydHksIGNvbG9yLnN5bnRheC5jb25zdGFudCwgcmVtKHNwYWNlWzNdKSwgY29sb3Iuc3ludGF4LnN0cmluZywgY29sb3Iuc3ludGF4LmJvb2xlYW4sIGNvbG9yLnN5bnRheC5udW1iZXIpO1xufSk7XG5mdW5jdGlvbiBTZWFyY2gocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIG9uQ2hhbmdlLFxuICAgIHF1ZXJ5XG4gIH0gPSBwcm9wcztcbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gdXNlQ2FsbGJhY2soZXZlbnQgPT4gb25DaGFuZ2UoZXZlbnQudGFyZ2V0LnZhbHVlKSwgW29uQ2hhbmdlXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goVGV4dElucHV0LCB7XG4gICAgaWNvbjogU2VhcmNoSWNvbixcbiAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLFxuICAgIHBsYWNlaG9sZGVyOiBcIlNlYXJjaFwiLFxuICAgIHJhZGl1czogMixcbiAgICB2YWx1ZTogcXVlcnkgfHwgXCJcIlxuICB9KTtcbn1cbmZ1bmN0aW9uIEluc3BlY3REaWFsb2cocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHZhbHVlXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qge1xuICAgIG9uSW5zcGVjdENsb3NlLFxuICAgIHBhbmVLZXlcbiAgfSA9IHVzZURvY3VtZW50UGFuZSgpO1xuICBjb25zdCBkaWFsb2dJZFByZWZpeCA9IFwiXCIuY29uY2F0KHBhbmVLZXksIFwiX2luc3BlY3RfXCIpO1xuICBjb25zdCBbdmlld01vZGVJZCwgb25WaWV3TW9kZUNoYW5nZV0gPSB1c2VEZXNrVG9vbFNldHRpbmcoXCJkZXNrLXRvb2xcIiwgXCJpbnNwZWN0LXZpZXctcHJlZmVycmVkLXZpZXctbW9kZS1cIi5jb25jYXQocGFuZUtleSksIFwicGFyc2VkXCIpO1xuICBjb25zdCB2aWV3TW9kZSA9IFZJRVdfTU9ERVMuZmluZChtb2RlID0+IG1vZGUuaWQgPT09IHZpZXdNb2RlSWQpO1xuICBjb25zdCBzZXRQYXJzZWRWaWV3TW9kZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBvblZpZXdNb2RlQ2hhbmdlKFZJRVdfTU9ERV9QQVJTRUQuaWQpO1xuICB9LCBbb25WaWV3TW9kZUNoYW5nZV0pO1xuICBjb25zdCBzZXRSYXdWaWV3TW9kZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBvblZpZXdNb2RlQ2hhbmdlKFZJRVdfTU9ERV9SQVcuaWQpO1xuICB9LCBbb25WaWV3TW9kZUNoYW5nZV0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KERpYWxvZywge1xuICAgIGlkOiBcIlwiLmNvbmNhdChkaWFsb2dJZFByZWZpeCwgXCJkaWFsb2dcIiksXG4gICAgaGVhZGVyOiBpc0RvY3VtZW50TGlrZSh2YWx1ZSkgPyAvKiBAX19QVVJFX18gKi9qc3hzKEZyYWdtZW50LCB7XG4gICAgICBjaGlsZHJlbjogW1wiSW5zcGVjdGluZ1wiLCBcIiBcIiwgLyogQF9fUFVSRV9fICovanN4KFwiZW1cIiwge1xuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KERvY1RpdGxlLCB7XG4gICAgICAgICAgZG9jdW1lbnQ6IHZhbHVlXG4gICAgICAgIH0pXG4gICAgICB9KV1cbiAgICB9KSA6IC8qIEBfX1BVUkVfXyAqL2pzeChcImVtXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBcIk5vIHZhbHVlXCJcbiAgICB9KSxcbiAgICBvbkNsb3NlOiBvbkluc3BlY3RDbG9zZSxcbiAgICBvbkNsaWNrT3V0c2lkZTogb25JbnNwZWN0Q2xvc2UsXG4gICAgd2lkdGg6IDMsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAgaGVpZ2h0OiBcImZpbGxcIixcbiAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KENhcmQsIHtcbiAgICAgICAgcGFkZGluZzogMyxcbiAgICAgICAgc2hhZG93OiAxLFxuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIHBvc2l0aW9uOiBcInN0aWNreVwiLFxuICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICB6SW5kZXg6IDNcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoVGFiTGlzdCwge1xuICAgICAgICAgIHNwYWNlOiAxLFxuICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFRhYiwge1xuICAgICAgICAgICAgXCJhcmlhLWNvbnRyb2xzXCI6IFwiXCIuY29uY2F0KGRpYWxvZ0lkUHJlZml4LCBcInRhYnBhbmVsXCIpLFxuICAgICAgICAgICAgZm9udFNpemU6IDEsXG4gICAgICAgICAgICBpZDogXCJcIi5jb25jYXQoZGlhbG9nSWRQcmVmaXgsIFwidGFiLVwiKS5jb25jYXQoVklFV19NT0RFX1BBUlNFRC5pZCksXG4gICAgICAgICAgICBsYWJlbDogVklFV19NT0RFX1BBUlNFRC50aXRsZSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IHNldFBhcnNlZFZpZXdNb2RlLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IHZpZXdNb2RlID09PSBWSUVXX01PREVfUEFSU0VEXG4gICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChUYWIsIHtcbiAgICAgICAgICAgIFwiYXJpYS1jb250cm9sc1wiOiBcIlwiLmNvbmNhdChkaWFsb2dJZFByZWZpeCwgXCJ0YWJwYW5lbFwiKSxcbiAgICAgICAgICAgIGZvbnRTaXplOiAxLFxuICAgICAgICAgICAgaWQ6IFwiXCIuY29uY2F0KGRpYWxvZ0lkUHJlZml4LCBcInRhYi1cIikuY29uY2F0KFZJRVdfTU9ERV9SQVcuaWQpLFxuICAgICAgICAgICAgbGFiZWw6IFZJRVdfTU9ERV9SQVcudGl0bGUsXG4gICAgICAgICAgICBvbkNsaWNrOiBzZXRSYXdWaWV3TW9kZSxcbiAgICAgICAgICAgIHNlbGVjdGVkOiB2aWV3TW9kZSA9PT0gVklFV19NT0RFX1JBV1xuICAgICAgICAgIH0pXVxuICAgICAgICB9KVxuICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeHMoVGFiUGFuZWwsIHtcbiAgICAgICAgXCJhcmlhLWxhYmVsbGVkYnlcIjogXCJcIi5jb25jYXQoZGlhbG9nSWRQcmVmaXgsIFwidGFiLVwiKS5jb25jYXQodmlld01vZGVJZCksXG4gICAgICAgIGZsZXg6IDEsXG4gICAgICAgIGlkOiBcIlwiLmNvbmNhdChkaWFsb2dJZFByZWZpeCwgXCJ0YWJwYW5lbFwiKSxcbiAgICAgICAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxuICAgICAgICBwYWRkaW5nOiA0LFxuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIG91dGxpbmU6IFwibm9uZVwiXG4gICAgICAgIH0sXG4gICAgICAgIGNoaWxkcmVuOiBbdmlld01vZGUgPT09IFZJRVdfTU9ERV9QQVJTRUQgJiYgLyogQF9fUFVSRV9fICovanN4KEpTT05JbnNwZWN0b3JXcmFwcGVyLCB7XG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChKU09OSW5zcGVjdG9yLCB7XG4gICAgICAgICAgICBkYXRhOiB2YWx1ZSxcbiAgICAgICAgICAgIGlzRXhwYW5kZWQsXG4gICAgICAgICAgICBvbkNsaWNrOiB0b2dnbGVFeHBhbmRlZCxcbiAgICAgICAgICAgIHNlYXJjaDogU2VhcmNoXG4gICAgICAgICAgfSlcbiAgICAgICAgfSksIHZpZXdNb2RlID09PSBWSUVXX01PREVfUkFXICYmIC8qIEBfX1BVUkVfXyAqL2pzeChDb2RlLCB7XG4gICAgICAgICAgbGFuZ3VhZ2U6IFwianNvblwiLFxuICAgICAgICAgIHRhYkluZGV4OiAwLFxuICAgICAgICAgIG9uS2V5RG93bjogbWF5YmVTZWxlY3RBbGwsXG4gICAgICAgICAgb25Eb3VibGVDbGljazogc2VsZWN0LFxuICAgICAgICAgIG9uRm9jdXM6IHNlbGVjdCxcbiAgICAgICAgICBjaGlsZHJlbjogSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIDIpXG4gICAgICAgIH0pXVxuICAgICAgfSldXG4gICAgfSlcbiAgfSk7XG59XG52YXIgX19mcmVlemUkOCA9IE9iamVjdC5mcmVlemU7XG52YXIgX19kZWZQcm9wJDggPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX190ZW1wbGF0ZSQ4ID0gKGNvb2tlZCwgcmF3KSA9PiBfX2ZyZWV6ZSQ4KF9fZGVmUHJvcCQ4KGNvb2tlZCwgXCJyYXdcIiwge1xuICB2YWx1ZTogX19mcmVlemUkOChyYXcgfHwgY29va2VkLnNsaWNlKCkpXG59KSk7XG52YXIgX2EkODtcbmNvbnN0IFJvb3QkMyA9IHN0eWxlZChDYXJkKShfYSQ4IHx8IChfYSQ4ID0gX190ZW1wbGF0ZSQ4KFtcIlxcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgei1pbmRleDogNTA7XFxuXCJdKSkpO1xuZnVuY3Rpb24gRGVsZXRlZERvY3VtZW50QmFubmVyKF9yZWYxMykge1xuICBsZXQge1xuICAgIHJldmlzaW9uSWRcbiAgfSA9IF9yZWYxMztcbiAgY29uc3Qge1xuICAgIGRvY3VtZW50SWQsXG4gICAgZG9jdW1lbnRUeXBlXG4gIH0gPSB1c2VEb2N1bWVudFBhbmUoKTtcbiAgY29uc3Qge1xuICAgIHJlc3RvcmVcbiAgfSA9IHVzZURvY3VtZW50T3BlcmF0aW9uKGRvY3VtZW50SWQsIGRvY3VtZW50VHlwZSk7XG4gIGNvbnN0IHtcbiAgICBuYXZpZ2F0ZUludGVudFxuICB9ID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IGhhbmRsZVJlc3RvcmUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHJldmlzaW9uSWQpIHtcbiAgICAgIHJlc3RvcmUuZXhlY3V0ZShyZXZpc2lvbklkKTtcbiAgICAgIG5hdmlnYXRlSW50ZW50KFwiZWRpdFwiLCB7XG4gICAgICAgIGlkOiBkb2N1bWVudElkLFxuICAgICAgICB0eXBlOiBkb2N1bWVudFR5cGVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2RvY3VtZW50SWQsIGRvY3VtZW50VHlwZSwgbmF2aWdhdGVJbnRlbnQsIHJlc3RvcmUsIHJldmlzaW9uSWRdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChSb290JDMsIHtcbiAgICBcImRhdGEtdGVzdGlkXCI6IFwiZGVsZXRlZC1kb2N1bWVudC1iYW5uZXJcIixcbiAgICBzaGFkb3c6IDEsXG4gICAgdG9uZTogXCJ0cmFuc3BhcmVudFwiLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQ29udGFpbmVyLCB7XG4gICAgICBwYWRkaW5nWDogNCxcbiAgICAgIHBhZGRpbmdZOiByZXZpc2lvbklkID8gMiA6IDMsXG4gICAgICBzaXppbmc6IFwiYm9yZGVyXCIsXG4gICAgICB3aWR0aDogMSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hzKEZsZXgsIHtcbiAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goUmVhZE9ubHlJY29uLCB7fSlcbiAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgIGdhcDogMixcbiAgICAgICAgICBmbGV4OiAxLFxuICAgICAgICAgIG1hcmdpbkxlZnQ6IDMsXG4gICAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBcIlRoaXMgZG9jdW1lbnQgaGFzIGJlZW4gZGVsZXRlZC5cIlxuICAgICAgICAgIH0pLCByZXZpc2lvbklkICYmIC8qIEBfX1BVUkVfXyAqL2pzeChCdXR0b24sIHtcbiAgICAgICAgICAgIGZvbnRTaXplOiAxLFxuICAgICAgICAgICAgcGFkZGluZzogMixcbiAgICAgICAgICAgIG1vZGU6IFwiYmxlZWRcIixcbiAgICAgICAgICAgIHRvbmU6IFwicHJpbWFyeVwiLFxuICAgICAgICAgICAgb25DbGljazogaGFuZGxlUmVzdG9yZSxcbiAgICAgICAgICAgIHRleHQ6IFwiUmVzdG9yZSBtb3N0IHJlY2VudCB2ZXJzaW9uXCJcbiAgICAgICAgICB9KV1cbiAgICAgICAgfSldXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufVxudmFyIF9fZnJlZXplJDcgPSBPYmplY3QuZnJlZXplO1xudmFyIF9fZGVmUHJvcCQ3ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fdGVtcGxhdGUkNyA9IChjb29rZWQsIHJhdykgPT4gX19mcmVlemUkNyhfX2RlZlByb3AkNyhjb29rZWQsIFwicmF3XCIsIHtcbiAgdmFsdWU6IF9fZnJlZXplJDcocmF3IHx8IGNvb2tlZC5zbGljZSgpKVxufSkpO1xudmFyIF9hJDcsIF9iJDE7XG5jb25zdCBSb290JDIgPSBzdHlsZWQoQ2FyZCkoX2EkNyB8fCAoX2EkNyA9IF9fdGVtcGxhdGUkNyhbXCJcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIHotaW5kZXg6IDUwO1xcblwiXSkpKTtcbmNvbnN0IFRleHRPbmVMaW5lID0gc3R5bGVkKFRleHQpKF9iJDEgfHwgKF9iJDEgPSBfX3RlbXBsYXRlJDcoW1wiXFxuICAmID4gKiB7XFxuICAgIG92ZXJmbG93OiBoaWRkZW47XFxuICAgIG92ZXJmbG93OiBjbGlwO1xcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcXG4gIH1cXG5cIl0pKSk7XG5jb25zdCBSZWZlcmVuY2VDaGFuZ2VkQmFubmVyID0gbWVtbygoKSA9PiB7XG4gIHZhciBfYTIsIF9iMiwgX2MsIF9kLCBfZSwgX2Y7XG4gIGNvbnN0IGRvY3VtZW50UHJldmlld1N0b3JlID0gdXNlRG9jdW1lbnRQcmV2aWV3U3RvcmUoKTtcbiAgY29uc3Qge1xuICAgIHBhcmFtcyxcbiAgICBncm91cEluZGV4LFxuICAgIHJvdXRlclBhbmVzU3RhdGUsXG4gICAgcmVwbGFjZUN1cnJlbnQsXG4gICAgQmFja0xpbmtcbiAgfSA9IHVzZVBhbmVSb3V0ZXIoKTtcbiAgY29uc3Qgcm91dGVyUmVmZXJlbmNlSWQgPSAoX2EyID0gcm91dGVyUGFuZXNTdGF0ZVtncm91cEluZGV4XSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMlswXS5pZDtcbiAgY29uc3QgcGFyZW50R3JvdXAgPSByb3V0ZXJQYW5lc1N0YXRlW2dyb3VwSW5kZXggLSAxXTtcbiAgY29uc3QgcGFyZW50U2libGluZyA9IHBhcmVudEdyb3VwID09IG51bGwgPyB2b2lkIDAgOiBwYXJlbnRHcm91cFswXTtcbiAgY29uc3QgcGFyZW50SWQgPSBwYXJlbnRTaWJsaW5nID09IG51bGwgPyB2b2lkIDAgOiBwYXJlbnRTaWJsaW5nLmlkO1xuICBjb25zdCBoYXNIaXN0b3J5T3BlbiA9IEJvb2xlYW4oKF9iMiA9IHBhcmVudFNpYmxpbmcgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmVudFNpYmxpbmcucGFyYW1zKSA9PSBudWxsID8gdm9pZCAwIDogX2IyLnJldik7XG4gIGNvbnN0IHBhcmVudFJlZlBhdGggPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gKHBhcmFtcyA9PSBudWxsID8gdm9pZCAwIDogcGFyYW1zLnBhcmVudFJlZlBhdGgpICYmIGZyb21TdHJpbmcocGFyYW1zLnBhcmVudFJlZlBhdGgpIHx8IG51bGw7XG4gIH0sIFtwYXJhbXMgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmFtcy5wYXJlbnRSZWZQYXRoXSk7XG4gIGNvbnN0IHJlZmVyZW5jZUluZm8gPSB1c2VNZW1vT2JzZXJ2YWJsZSgoKSA9PiB7XG4gICAgY29uc3QgcGFyZW50UmVmUGF0aFNlZ21lbnQgPSBwYXJlbnRSZWZQYXRoID09IG51bGwgPyB2b2lkIDAgOiBwYXJlbnRSZWZQYXRoWzBdO1xuICAgIGlmICghcGFyZW50SWQgfHwgIXBhcmVudFJlZlBhdGhTZWdtZW50IHx8ICFwYXJlbnRSZWZQYXRoKSB7XG4gICAgICByZXR1cm4gb2Yoe1xuICAgICAgICBsb2FkaW5nOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHB1Ymxpc2hlZElkID0gZ2V0UHVibGlzaGVkSWQocGFyZW50SWQpO1xuICAgIGNvbnN0IHBhdGggPSBmcm9tU3RyaW5nKHBhcmVudFJlZlBhdGhTZWdtZW50KTtcbiAgICBjb25zdCBrZXllZFNlZ21lbnRJbmRleCA9IHBhdGguZmluZEluZGV4KHAgPT4gdHlwZW9mIHAgPT0gXCJvYmplY3RcIiAmJiBcIl9rZXlcIiBpbiBwKTtcbiAgICByZXR1cm4gY29uY2F0KFxuICAgIC8vIGVtaXQgYSBsb2FkaW5nIHN0YXRlIGluc3RhbnRseVxuICAgIG9mKHtcbiAgICAgIGxvYWRpbmc6IHRydWVcbiAgICB9KSxcbiAgICAvLyB0aGVuIGVtaXQgdGhlIHZhbHVlcyBmcm9tIHdhdGNoaW5nIHRoZSBwdWJsaXNoZWQgSUQncyBwYXRoXG4gICAgZG9jdW1lbnRQcmV2aWV3U3RvcmUudW5zdGFibGVfb2JzZXJ2ZVBhdGhzRG9jdW1lbnRQYWlyKHB1Ymxpc2hlZElkLCBrZXllZFNlZ21lbnRJbmRleCA9PT0gLTEgPyBwYXRoIDogcGF0aC5zbGljZSgwLCBrZXllZFNlZ21lbnRJbmRleCkpLnBpcGUoXG4gICAgLy8gdGhpcyBkZWJvdW5jZSB0aW1lIGlzIG5lZWRlZCB0byBwcmV2ZW50IGZsYXNoaW5nIGJhbm5lcnMgZHVlIHRvXG4gICAgLy8gdGhlIHJvdXRlciBzdGF0ZSB1cGRhdGluZyBmYXN0ZXIgdGhhbiB0aGUgY29udGVudC1sYWtlIHN0YXRlLiB3ZVxuICAgIC8vIGRlYm91bmNlIHRvIHdhaXQgZm9yIG1vcmUgZW1pc3Npb25zIGJlY2F1c2UgdGhlIHZhbHVlIHB1bGxlZFxuICAgIC8vIGluaXRpYWxseSBjb3VsZCBiZSBzdGFsZS5cbiAgICBkZWJvdW5jZVRpbWUoNzUwKSwgbWFwKF9yZWYxNCA9PiB7XG4gICAgICBsZXQge1xuICAgICAgICBkcmFmdCxcbiAgICAgICAgcHVibGlzaGVkXG4gICAgICB9ID0gX3JlZjE0O1xuICAgICAgdmFyIF9hMztcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICBhdmFpbGFiaWxpdHk6IHtcbiAgICAgICAgICAgIGRyYWZ0OiBkcmFmdC5hdmFpbGFiaWxpdHksXG4gICAgICAgICAgICBwdWJsaXNoZWQ6IHB1Ymxpc2hlZC5hdmFpbGFiaWxpdHlcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlZlZhbHVlOiAoX2EzID0gZ2V0KGRyYWZ0LnNuYXBzaG90IHx8IHB1Ymxpc2hlZC5zbmFwc2hvdCwgcGFyZW50UmVmUGF0aCkpID09IG51bGwgPyB2b2lkIDAgOiBfYTMuX3JlZlxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pKSk7XG4gIH0sIFtkb2N1bWVudFByZXZpZXdTdG9yZSwgcGFyZW50SWQsIHBhcmVudFJlZlBhdGhdLCB7XG4gICAgbG9hZGluZzogdHJ1ZVxuICB9KTtcbiAgY29uc3QgaGFuZGxlUmVsb2FkUmVmZXJlbmNlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHZhciBfYTM7XG4gICAgaWYgKHJlZmVyZW5jZUluZm8ubG9hZGluZykgcmV0dXJuO1xuICAgIGlmICgoX2EzID0gcmVmZXJlbmNlSW5mby5yZXN1bHQpID09IG51bGwgPyB2b2lkIDAgOiBfYTMucmVmVmFsdWUpIHtcbiAgICAgIHJlcGxhY2VDdXJyZW50KHtcbiAgICAgICAgaWQ6IHJlZmVyZW5jZUluZm8ucmVzdWx0LnJlZlZhbHVlLFxuICAgICAgICBwYXJhbXNcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3JlZmVyZW5jZUluZm8ubG9hZGluZywgcmVmZXJlbmNlSW5mby5yZXN1bHQsIHJlcGxhY2VDdXJyZW50LCBwYXJhbXNdKTtcbiAgY29uc3Qgc2hvdWxkSGlkZSA9XG4gIC8vIGlmIGBwYXJlbnRJZGAgb3IgYHBhcmVudFJlZlBhdGhgIGlzIG5vdCBwcmVzZW50IHRoZW4gdGhpcyBiYW5uZXIgaXMgbi9hXG4gICFwYXJlbnRJZCB8fCAhcGFyZW50UmVmUGF0aCB8fFxuICAvLyBpZiB2aWV3aW5nIHRoaXMgcGFuZSB2aWEgaGlzdG9yeSwgdGhlbiBoaWRlXG4gIGhhc0hpc3RvcnlPcGVuIHx8XG4gIC8vIGlmIGxvYWRpbmcsIGhpZGVcbiAgcmVmZXJlbmNlSW5mby5sb2FkaW5nIHx8XG4gIC8vIGlmIHRoZSBwYXJlbnQgZG9jdW1lbnQgaXMgbm90IGF2YWlsYWJsZSAoZS5nLiBkdWUgdG8gcGVybWlzc2lvbiBkZW5pZWQgb3JcbiAgLy8gbm90IGZvdW5kKSB3ZSBkb24ndCB3YW50IHRvIGRpc3BsYXkgYSB3YXJuaW5nIGhlcmUsIGJ1dCBpbnN0ZWFkIHJlbHkgb24gdGhlXG4gIC8vIHBhcmVudCB2aWV3IHRvIGRpc3BsYXkgdGhlIGFwcHJvcHJpYXRlIG1lc3NhZ2VcbiAgISgoX2MgPSByZWZlcmVuY2VJbmZvLnJlc3VsdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmF2YWlsYWJpbGl0eS5kcmFmdC5hdmFpbGFibGUpICYmICEoKF9kID0gcmVmZXJlbmNlSW5mby5yZXN1bHQpID09IG51bGwgPyB2b2lkIDAgOiBfZC5hdmFpbGFiaWxpdHkucHVibGlzaGVkLmF2YWlsYWJsZSkgfHxcbiAgLy8gaWYgdGhlIHJlZmVyZW5jZXMgYXJlIHRoZSBzYW1lLCB0aGVuIGhpZGUgdGhlIHJlZmVyZW5jZSBjaGFuZ2VkIGJhbm5lclxuICAoKF9lID0gcmVmZXJlbmNlSW5mby5yZXN1bHQpID09IG51bGwgPyB2b2lkIDAgOiBfZS5yZWZWYWx1ZSkgPT09IHJvdXRlclJlZmVyZW5jZUlkO1xuICBpZiAoc2hvdWxkSGlkZSkgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUm9vdCQyLCB7XG4gICAgc2hhZG93OiAxLFxuICAgIHRvbmU6IFwiY2F1dGlvblwiLFxuICAgIFwiZGF0YS10ZXN0aWRcIjogXCJyZWZlcmVuY2UtY2hhbmdlZC1iYW5uZXJcIixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KENvbnRhaW5lciwge1xuICAgICAgcGFkZGluZ1g6IDQsXG4gICAgICBwYWRkaW5nWTogMixcbiAgICAgIHNpemluZzogXCJib3JkZXJcIixcbiAgICAgIHdpZHRoOiAxLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChXYXJuaW5nT3V0bGluZUljb24sIHt9KVxuICAgICAgICB9KSwgKChfZiA9IHJlZmVyZW5jZUluZm8ucmVzdWx0KSA9PSBudWxsID8gdm9pZCAwIDogX2YucmVmVmFsdWUpID8gLyogQF9fUFVSRV9fICovanN4cyhGcmFnbWVudCwge1xuICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICAgICAgZmxleDogMSxcbiAgICAgICAgICAgIG1hcmdpbkxlZnQ6IDMsXG4gICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFRleHRPbmVMaW5lLCB7XG4gICAgICAgICAgICAgIHRpdGxlOiBcIlRoaXMgcmVmZXJlbmNlIGhhcyBjaGFuZ2VkIHNpbmNlIHlvdSBvcGVuZWQgaXQuXCIsXG4gICAgICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBcIlRoaXMgcmVmZXJlbmNlIGhhcyBjaGFuZ2VkIHNpbmNlIHlvdSBvcGVuZWQgaXQuXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgICAgIG1hcmdpbkxlZnQ6IDMsXG4gICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEJ1dHRvbiwge1xuICAgICAgICAgICAgICBvbkNsaWNrOiBoYW5kbGVSZWxvYWRSZWZlcmVuY2UsXG4gICAgICAgICAgICAgIGljb246IFN5bmNJY29uLFxuICAgICAgICAgICAgICBmb250U2l6ZTogMSxcbiAgICAgICAgICAgICAgbW9kZTogXCJnaG9zdFwiLFxuICAgICAgICAgICAgICBwYWRkaW5nOiAyLFxuICAgICAgICAgICAgICBzcGFjZTogMixcbiAgICAgICAgICAgICAgdGV4dDogXCJSZWxvYWQgcmVmZXJlbmNlXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pIDogLyogQF9fUFVSRV9fICovanN4cyhGcmFnbWVudCwge1xuICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICAgICAgZmxleDogMSxcbiAgICAgICAgICAgIG1hcmdpbkxlZnQ6IDMsXG4gICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFRleHRPbmVMaW5lLCB7XG4gICAgICAgICAgICAgIHRpdGxlOiBcIlRoaXMgcmVmZXJlbmNlIGhhcyBiZWVuIHJlbW92ZWQgc2luY2UgeW91IG9wZW5lZCBpdC5cIixcbiAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFwiVGhpcyByZWZlcmVuY2UgaGFzIGJlZW4gcmVtb3ZlZCBzaW5jZSB5b3Ugb3BlbmVkIGl0LlwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgICAgICBtYXJnaW5MZWZ0OiAzLFxuICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChCdXR0b24sIHtcbiAgICAgICAgICAgICAgYXM6IEJhY2tMaW5rLFxuICAgICAgICAgICAgICBpY29uOiBDbG9zZUljb24sXG4gICAgICAgICAgICAgIGZvbnRTaXplOiAxLFxuICAgICAgICAgICAgICBtb2RlOiBcImdob3N0XCIsXG4gICAgICAgICAgICAgIHBhZGRpbmc6IDIsXG4gICAgICAgICAgICAgIHNwYWNlOiAyLFxuICAgICAgICAgICAgICB0ZXh0OiBcIkNsb3NlIHJlZmVyZW5jZVwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXVxuICAgICAgICB9KV1cbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG59KTtcblJlZmVyZW5jZUNoYW5nZWRCYW5uZXIuZGlzcGxheU5hbWUgPSBcIlJlZmVyZW5jZUNoYW5nZWRCYW5uZXJcIjtcbnZhciBfX2ZyZWV6ZSQ2ID0gT2JqZWN0LmZyZWV6ZTtcbnZhciBfX2RlZlByb3AkNiA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX3RlbXBsYXRlJDYgPSAoY29va2VkLCByYXcpID0+IF9fZnJlZXplJDYoX19kZWZQcm9wJDYoY29va2VkLCBcInJhd1wiLCB7XG4gIHZhbHVlOiBfX2ZyZWV6ZSQ2KHJhdyB8fCBjb29rZWQuc2xpY2UoKSlcbn0pKTtcbnZhciBfYSQ2O1xuY29uc3QgUm9vdCQxID0gc3R5bGVkKENhcmQpKF9hJDYgfHwgKF9hJDYgPSBfX3RlbXBsYXRlJDYoW1wiXFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICB6LWluZGV4OiA1MDtcXG5cIl0pKSk7XG5mdW5jdGlvbiBQZXJtaXNzaW9uQ2hlY2tCYW5uZXIoX3JlZjE1KSB7XG4gIGxldCB7XG4gICAgZ3JhbnRlZCxcbiAgICByZXF1aXJlZFBlcm1pc3Npb25cbiAgfSA9IF9yZWYxNTtcbiAgdmFyIF9hMiwgX2I7XG4gIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlQ3VycmVudFVzZXIoKTtcbiAgY29uc3QgcGx1cmFsID0gKChfYTIgPSBjdXJyZW50VXNlciA9PSBudWxsID8gdm9pZCAwIDogY3VycmVudFVzZXIucm9sZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYTIubGVuZ3RoKSAhPT0gMTtcbiAgY29uc3Qgcm9sZXMgPSBqb2luKCgoX2IgPSBjdXJyZW50VXNlciA9PSBudWxsID8gdm9pZCAwIDogY3VycmVudFVzZXIucm9sZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYi5tYXAociA9PiAvKiBAX19QVVJFX18gKi9qc3goXCJjb2RlXCIsIHtcbiAgICBjaGlsZHJlbjogci50aXRsZVxuICB9LCByLm5hbWUpKSkgfHwgW10sIFwiLCBcIik7XG4gIGlmIChncmFudGVkKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChSb290JDEsIHtcbiAgICBcImRhdGEtdGVzdGlkXCI6IFwicGVybWlzc2lvbi1jaGVjay1iYW5uZXJcIixcbiAgICBzaGFkb3c6IDEsXG4gICAgdG9uZTogXCJ0cmFuc3BhcmVudFwiLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQ29udGFpbmVyLCB7XG4gICAgICBwYWRkaW5nWDogNCxcbiAgICAgIHBhZGRpbmdZOiAzLFxuICAgICAgc2l6aW5nOiBcImJvcmRlclwiLFxuICAgICAgd2lkdGg6IDEsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhGbGV4LCB7XG4gICAgICAgIGFsaWduOiBcImZsZXgtc3RhcnRcIixcbiAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChSZWFkT25seUljb24sIHt9KVxuICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICAgIGZsZXg6IDEsXG4gICAgICAgICAgbWFyZ2luTGVmdDogMyxcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhUZXh0LCB7XG4gICAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtcIllvdXIgcm9sZVwiLCBwbHVyYWwgJiYgXCJzXCIsIFwiIFwiLCByb2xlcywgXCIgXCIsIHBsdXJhbCA/IFwiZG9cIiA6IFwiZG9lc1wiLCBcIiBub3QgaGF2ZSBwZXJtaXNzaW9ucyB0b1wiLCBcIiBcIiwgcmVxdWlyZWRQZXJtaXNzaW9uLCBcIiB0aGlzIGRvY3VtZW50LlwiXVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXVxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn1cbmZ1bmN0aW9uIGpvaW4oYXJyYXksIHNlcCkge1xuICByZXR1cm4gYXJyYXkucmVkdWNlKChyZXN1bHQsIGl0ZW0pID0+IHtcbiAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gW2l0ZW1dO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0LmNvbmNhdChbc2VwLCBpdGVtXSk7XG4gIH0sIG51bGwpO1xufVxuZnVuY3Rpb24gdXNlUHJldmlvdXModmFsdWUpIHtcbiAgY29uc3QgcmVmID0gdXNlUmVmKCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgfSwgW3ZhbHVlXSk7XG4gIHJldHVybiByZWYuY3VycmVudDtcbn1cbmNvbnN0IExPTkdfRU5PVUdIX0JVVF9OT1RfVE9PX0xPTkcgPSAxZTMgKiA2MCAqIDYwICogMjQgKiAyNDtcbmZ1bmN0aW9uIHVzZUNvbmRpdGlvbmFsVG9hc3QocGFyYW1zKSB7XG4gIGNvbnN0IHRvYXN0ID0gdXNlVG9hc3QoKTtcbiAgY29uc3Qgd2FzRW5hYmxlZCA9IHVzZVByZXZpb3VzKHBhcmFtcy5lbmFibGVkKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXdhc0VuYWJsZWQgJiYgcGFyYW1zLmVuYWJsZWQpIHtcbiAgICAgIHRvYXN0LnB1c2goe1xuICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgIGR1cmF0aW9uOiBMT05HX0VOT1VHSF9CVVRfTk9UX1RPT19MT05HXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHdhc0VuYWJsZWQgJiYgIXBhcmFtcy5lbmFibGVkKSB7XG4gICAgICB0b2FzdC5wdXNoKHtcbiAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAvLyBOb3RlOiBAc2FuaXR5L3VpIGZhbGxiYWNrcyB0byB0aGUgZGVmYXVsdCBkdXJhdGlvbiBvZiA0cyBpbiBjYXNlIG9mIGZhbHNleSB2YWx1ZXNcbiAgICAgICAgZHVyYXRpb246IDAuMDFcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3BhcmFtcywgdG9hc3QsIHdhc0VuYWJsZWRdKTtcbn1cbmNvbnN0IHByZXZlbnREZWZhdWx0ID0gZXYgPT4gZXYucHJldmVudERlZmF1bHQoKTtcbmNvbnN0IEZvcm1WaWV3ID0gZm9yd2FyZFJlZihmdW5jdGlvbiBGb3JtVmlldzIocHJvcHMsIHJlZikge1xuICB2YXIgX2E7XG4gIGNvbnN0IHtcbiAgICBoaWRkZW4sXG4gICAgbWFyZ2luc1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBjb2xsYXBzZWRGaWVsZFNldHMsXG4gICAgY29sbGFwc2VkUGF0aHMsXG4gICAgZGlzcGxheWVkOiB2YWx1ZSxcbiAgICBlZGl0U3RhdGUsXG4gICAgZG9jdW1lbnRJZCxcbiAgICBkb2N1bWVudFR5cGUsXG4gICAgZmllbGRBY3Rpb25zLFxuICAgIG9uQ2hhbmdlLFxuICAgIHZhbGlkYXRpb24sXG4gICAgcmVhZHksXG4gICAgZm9ybVN0YXRlLFxuICAgIG9uRm9jdXMsXG4gICAgb25CbHVyLFxuICAgIG9uU2V0Q29sbGFwc2VkUGF0aCxcbiAgICBvblBhdGhPcGVuLFxuICAgIG9uU2V0Q29sbGFwc2VkRmllbGRTZXQsXG4gICAgb25TZXRBY3RpdmVGaWVsZEdyb3VwXG4gIH0gPSB1c2VEb2N1bWVudFBhbmUoKTtcbiAgY29uc3QgZG9jdW1lbnRTdG9yZSA9IHVzZURvY3VtZW50U3RvcmUoKTtcbiAgY29uc3QgcHJlc2VuY2UgPSB1c2VEb2N1bWVudFByZXNlbmNlKGRvY3VtZW50SWQpO1xuICBjb25zdCBwYXRjaENoYW5uZWwgPSB1c2VNZW1vKCgpID0+IGNyZWF0ZVBhdGNoQ2hhbm5lbCgpLCBbXSk7XG4gIGNvbnN0IGlzTG9ja2VkID0gKF9hID0gZWRpdFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBlZGl0U3RhdGUudHJhbnNhY3Rpb25TeW5jTG9jaykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmVuYWJsZWQ7XG4gIHVzZUNvbmRpdGlvbmFsVG9hc3Qoe1xuICAgIGlkOiBcInN5bmMtbG9jay1cIi5jb25jYXQoZG9jdW1lbnRJZCksXG4gICAgc3RhdHVzOiBcIndhcm5pbmdcIixcbiAgICBlbmFibGVkOiBpc0xvY2tlZCxcbiAgICB0aXRsZTogXCJTeW5jaW5nIGRvY3VtZW50XFx1MjAyNlwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlBsZWFzZSBob2xkIHRpZ2h0IHdoaWxlIHRoZSBkb2N1bWVudCBpcyBzeW5jZWQuIFRoaXMgdXN1YWxseSBoYXBwZW5zIHJpZ2h0IGFmdGVyIHRoZSBkb2N1bWVudCBoYXMgYmVlbiBwdWJsaXNoZWQsIGFuZCBpdCBzaG91bGRuJ3QgdGFrZSBtb3JlIHRoYW4gYSBmZXcgc2Vjb25kc1wiXG4gIH0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHN1YiA9IGRvY3VtZW50U3RvcmUucGFpci5kb2N1bWVudEV2ZW50cyhkb2N1bWVudElkLCBkb2N1bWVudFR5cGUpLnBpcGUodGFwKGV2ZW50ID0+IHtcbiAgICAgIGlmIChldmVudC50eXBlID09PSBcIm11dGF0aW9uXCIpIHtcbiAgICAgICAgcGF0Y2hDaGFubmVsLnB1Ymxpc2gocHJlcGFyZU11dGF0aW9uRXZlbnQoZXZlbnQpKTtcbiAgICAgIH1cbiAgICAgIGlmIChldmVudC50eXBlID09PSBcInJlYmFzZVwiKSB7XG4gICAgICAgIHBhdGNoQ2hhbm5lbC5wdWJsaXNoKHByZXBhcmVSZWJhc2VFdmVudChldmVudCkpO1xuICAgICAgfVxuICAgIH0pKS5zdWJzY3JpYmUoKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc3ViLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgfSwgW2RvY3VtZW50SWQsIGRvY3VtZW50U3RvcmUsIGRvY3VtZW50VHlwZSwgcGF0Y2hDaGFubmVsXSk7XG4gIGNvbnN0IGhhc1JldiA9IEJvb2xlYW4odmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLl9yZXYpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChoYXNSZXYpIHtcbiAgICAgIHBhdGNoQ2hhbm5lbC5wdWJsaXNoKHtcbiAgICAgICAgdHlwZTogXCJtdXRhdGlvblwiLFxuICAgICAgICBwYXRjaGVzOiBbXSxcbiAgICAgICAgc25hcHNob3Q6IHZhbHVlXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtoYXNSZXZdKTtcbiAgY29uc3QgW2Zvcm1SZWYsIHNldEZvcm1SZWZdID0gdXNlU3RhdGUobnVsbCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJlYWR5ICYmICEoZm9ybVN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBmb3JtU3RhdGUuZm9jdXNQYXRoLmxlbmd0aCkgJiYgZm9ybVJlZikge1xuICAgICAgZm9jdXNGaXJzdERlc2NlbmRhbnQoZm9ybVJlZik7XG4gICAgfVxuICB9LCBbcmVhZHldKTtcbiAgY29uc3Qgc2V0UmVmID0gdXNlQ2FsbGJhY2sobm9kZSA9PiB7XG4gICAgc2V0Rm9ybVJlZihub2RlKTtcbiAgICBpZiAodHlwZW9mIHJlZiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZWYobm9kZSk7XG4gICAgfSBlbHNlIGlmIChyZWYpIHtcbiAgICAgIHJlZi5jdXJyZW50ID0gbm9kZTtcbiAgICB9XG4gIH0sIFtyZWZdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChDb250YWluZXIsIHtcbiAgICBoaWRkZW4sXG4gICAgcGFkZGluZ1g6IDQsXG4gICAgcGFkZGluZ1RvcDogNSxcbiAgICBwYWRkaW5nQm90dG9tOiA5LFxuICAgIHNpemluZzogXCJib3JkZXJcIixcbiAgICB3aWR0aDogMSxcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFByZXNlbmNlT3ZlcmxheSwge1xuICAgICAgbWFyZ2lucyxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgIGFzOiBcImZvcm1cIixcbiAgICAgICAgb25TdWJtaXQ6IHByZXZlbnREZWZhdWx0LFxuICAgICAgICByZWY6IHNldFJlZixcbiAgICAgICAgY2hpbGRyZW46IHJlYWR5ID8gZm9ybVN0YXRlID09PSBudWxsID8gLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICAgIHBhZGRpbmc6IDIsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogXCJUaGlzIGZvcm0gaXMgaGlkZGVuXCJcbiAgICAgICAgICB9KVxuICAgICAgICB9KSA6IC8qIEBfX1BVUkVfXyAqL2pzeChGb3JtQnVpbGRlciwge1xuICAgICAgICAgIF9faW50ZXJuYWxfZmllbGRBY3Rpb25zOiBmaWVsZEFjdGlvbnMsXG4gICAgICAgICAgX19pbnRlcm5hbF9wYXRjaENoYW5uZWw6IHBhdGNoQ2hhbm5lbCxcbiAgICAgICAgICBjb2xsYXBzZWRGaWVsZFNldHMsXG4gICAgICAgICAgY29sbGFwc2VkUGF0aHMsXG4gICAgICAgICAgZm9jdXNQYXRoOiBmb3JtU3RhdGUuZm9jdXNQYXRoLFxuICAgICAgICAgIGNoYW5nZWQ6IGZvcm1TdGF0ZS5jaGFuZ2VkLFxuICAgICAgICAgIGZvY3VzZWQ6IGZvcm1TdGF0ZS5mb2N1c2VkLFxuICAgICAgICAgIGdyb3VwczogZm9ybVN0YXRlLmdyb3VwcyxcbiAgICAgICAgICBpZDogXCJyb290XCIsXG4gICAgICAgICAgbWVtYmVyczogZm9ybVN0YXRlLm1lbWJlcnMsXG4gICAgICAgICAgb25DaGFuZ2UsXG4gICAgICAgICAgb25GaWVsZEdyb3VwU2VsZWN0OiBvblNldEFjdGl2ZUZpZWxkR3JvdXAsXG4gICAgICAgICAgb25QYXRoQmx1cjogb25CbHVyLFxuICAgICAgICAgIG9uUGF0aEZvY3VzOiBvbkZvY3VzLFxuICAgICAgICAgIG9uUGF0aE9wZW4sXG4gICAgICAgICAgb25TZXRGaWVsZFNldENvbGxhcHNlZDogb25TZXRDb2xsYXBzZWRGaWVsZFNldCxcbiAgICAgICAgICBvblNldFBhdGhDb2xsYXBzZWQ6IG9uU2V0Q29sbGFwc2VkUGF0aCxcbiAgICAgICAgICBwcmVzZW5jZSxcbiAgICAgICAgICByZWFkT25seTogZm9ybVN0YXRlLnJlYWRPbmx5LFxuICAgICAgICAgIHNjaGVtYVR5cGU6IGZvcm1TdGF0ZS5zY2hlbWFUeXBlLFxuICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgdmFsdWU6IGZvcm1TdGF0ZS52YWx1ZVxuICAgICAgICB9KSA6IC8qIEBfX1BVUkVfXyAqL2pzeChEZWxheSwge1xuICAgICAgICAgIG1zOiAzMDAsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgICAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICAgICAgICBoZWlnaHQ6IFwiZmlsbFwiLFxuICAgICAgICAgICAganVzdGlmeTogXCJjZW50ZXJcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFNwaW5uZXIsIHtcbiAgICAgICAgICAgICAgbXV0ZWQ6IHRydWVcbiAgICAgICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgICAgICAgIG1hcmdpblRvcDogMyxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgICAgICAgICAgbXV0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJMb2FkaW5nIGRvY3VtZW50XCJcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufSk7XG5mdW5jdGlvbiBwcmVwYXJlTXV0YXRpb25FdmVudChldmVudCkge1xuICBjb25zdCBwYXRjaGVzID0gZXZlbnQubXV0YXRpb25zLm1hcChtdXQgPT4gbXV0LnBhdGNoKS5maWx0ZXIoQm9vbGVhbik7XG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJtdXRhdGlvblwiLFxuICAgIHNuYXBzaG90OiBldmVudC5kb2N1bWVudCxcbiAgICBwYXRjaGVzOiBmcm9tTXV0YXRpb25QYXRjaGVzKGV2ZW50Lm9yaWdpbiwgcGF0Y2hlcylcbiAgfTtcbn1cbmZ1bmN0aW9uIHByZXBhcmVSZWJhc2VFdmVudChldmVudCkge1xuICBjb25zdCByZW1vdGVQYXRjaGVzID0gZXZlbnQucmVtb3RlTXV0YXRpb25zLm1hcChtdXQgPT4gbXV0LnBhdGNoKS5maWx0ZXIoQm9vbGVhbik7XG4gIGNvbnN0IGxvY2FsUGF0Y2hlcyA9IGV2ZW50LmxvY2FsTXV0YXRpb25zLm1hcChtdXQgPT4gbXV0LnBhdGNoKS5maWx0ZXIoQm9vbGVhbik7XG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJyZWJhc2VcIixcbiAgICBzbmFwc2hvdDogZXZlbnQuZG9jdW1lbnQsXG4gICAgcGF0Y2hlczogZnJvbU11dGF0aW9uUGF0Y2hlcyhcInJlbW90ZVwiLCByZW1vdGVQYXRjaGVzKS5jb25jYXQoZnJvbU11dGF0aW9uUGF0Y2hlcyhcImxvY2FsXCIsIGxvY2FsUGF0Y2hlcykpXG4gIH07XG59XG5mdW5jdGlvbiBEb2N1bWVudEhlYWRlclRhYnMoKSB7XG4gIGNvbnN0IHtcbiAgICBhY3RpdmVWaWV3SWQsXG4gICAgcGFuZUtleSxcbiAgICB2aWV3c1xuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGNvbnN0IHRhYlBhbmVsSWQgPSBcIlwiLmNvbmNhdChwYW5lS2V5LCBcInRhYnBhbmVsXCIpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFRhYkxpc3QsIHtcbiAgICBzcGFjZTogMSxcbiAgICBjaGlsZHJlbjogdmlld3MubWFwKCh2aWV3LCBpbmRleCkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudEhlYWRlclRhYiwge1xuICAgICAgICBpY29uOiB2aWV3Lmljb24sXG4gICAgICAgIGlkOiBcIlwiLmNvbmNhdChwYW5lS2V5LCBcInRhYi1cIikuY29uY2F0KHZpZXcuaWQpLFxuICAgICAgICBpc0FjdGl2ZTogYWN0aXZlVmlld0lkID09PSB2aWV3LmlkLFxuICAgICAgICBsYWJlbDogLyogQF9fUFVSRV9fICovanN4KEZyYWdtZW50LCB7XG4gICAgICAgICAgY2hpbGRyZW46IHZpZXcudGl0bGVcbiAgICAgICAgfSksXG4gICAgICAgIHRhYlBhbmVsSWQsXG4gICAgICAgIHZpZXdJZDogaW5kZXggPT09IDAgPyBudWxsIDogKF9hID0gdmlldy5pZCkgIT0gbnVsbCA/IF9hIDogbnVsbFxuICAgICAgfSwgdmlldy5pZCk7XG4gICAgfSlcbiAgfSk7XG59XG5mdW5jdGlvbiBEb2N1bWVudEhlYWRlclRhYihwcm9wcykge1xuICBjb25zdCB7XG4gICAgaXNBY3RpdmUsXG4gICAgdGFiUGFuZWxJZCxcbiAgICB2aWV3SWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgcmVhZHlcbiAgfSA9IHVzZURvY3VtZW50UGFuZSgpO1xuICBjb25zdCB7XG4gICAgc2V0Vmlld1xuICB9ID0gdXNlUGFuZVJvdXRlcigpO1xuICBjb25zdCBoYW5kbGVDbGljayA9IHVzZUNhbGxiYWNrKCgpID0+IHNldFZpZXcodmlld0lkKSwgW3NldFZpZXcsIHZpZXdJZF0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFRhYiwge1xuICAgIC4uLnByb3BzLFxuICAgIFwiYXJpYS1jb250cm9sc1wiOiB0YWJQYW5lbElkLFxuICAgIGRpc2FibGVkOiAhcmVhZHksXG4gICAgZm9udFNpemU6IDEsXG4gICAgc2VsZWN0ZWQ6IGlzQWN0aXZlLFxuICAgIG9uQ2xpY2s6IGhhbmRsZUNsaWNrXG4gIH0pO1xufVxuZnVuY3Rpb24gRG9jdW1lbnRIZWFkZXJUaXRsZSgpIHtcbiAgY29uc3Qge1xuICAgIGNvbm5lY3Rpb25TdGF0ZSxcbiAgICBzY2hlbWFUeXBlLFxuICAgIHRpdGxlLFxuICAgIHZhbHVlOiBkb2N1bWVudFZhbHVlXG4gIH0gPSB1c2VEb2N1bWVudFBhbmUoKTtcbiAgY29uc3Qgc3Vic2NyaWJlZCA9IEJvb2xlYW4oZG9jdW1lbnRWYWx1ZSkgJiYgY29ubmVjdGlvblN0YXRlID09PSBcImNvbm5lY3RlZFwiO1xuICBjb25zdCB7XG4gICAgZXJyb3IsXG4gICAgdmFsdWVcbiAgfSA9IHVuc3RhYmxlX3VzZVZhbHVlUHJldmlldyh7XG4gICAgZW5hYmxlZDogc3Vic2NyaWJlZCxcbiAgICBzY2hlbWFUeXBlLFxuICAgIHZhbHVlOiBkb2N1bWVudFZhbHVlXG4gIH0pO1xuICBpZiAoY29ubmVjdGlvblN0YXRlICE9PSBcImNvbm5lY3RlZFwiKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChGcmFnbWVudCwge30pO1xuICB9XG4gIGlmICh0aXRsZSkge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goRnJhZ21lbnQsIHtcbiAgICAgIGNoaWxkcmVuOiB0aXRsZVxuICAgIH0pO1xuICB9XG4gIGlmICghZG9jdW1lbnRWYWx1ZSkge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3hzKEZyYWdtZW50LCB7XG4gICAgICBjaGlsZHJlbjogW1wiTmV3IFwiLCAoc2NoZW1hVHlwZSA9PSBudWxsID8gdm9pZCAwIDogc2NoZW1hVHlwZS50aXRsZSkgfHwgKHNjaGVtYVR5cGUgPT0gbnVsbCA/IHZvaWQgMCA6IHNjaGVtYVR5cGUubmFtZSldXG4gICAgfSk7XG4gIH1cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoRnJhZ21lbnQsIHtcbiAgICAgIGNoaWxkcmVuOiBbXCJFcnJvcjogXCIsIGVycm9yLm1lc3NhZ2VdXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChGcmFnbWVudCwge1xuICAgIGNoaWxkcmVuOiAodmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLnRpdGxlKSB8fCAvKiBAX19QVVJFX18gKi9qc3goXCJzcGFuXCIsIHtcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIGNvbG9yOiBcInZhcigtLWNhcmQtbXV0ZWQtZmctY29sb3IpXCJcbiAgICAgIH0sXG4gICAgICBjaGlsZHJlbjogXCJVbnRpdGxlZFwiXG4gICAgfSlcbiAgfSk7XG59XG5jb25zdCBEb2N1bWVudFBhbmVsSGVhZGVyID0gbWVtbyhmb3J3YXJkUmVmKGZ1bmN0aW9uIERvY3VtZW50UGFuZWxIZWFkZXIyKF9wcm9wcywgcmVmKSB7XG4gIGNvbnN0IHtcbiAgICBvbk1lbnVBY3Rpb24sXG4gICAgb25QYW5lQ2xvc2UsXG4gICAgb25QYW5lU3BsaXQsXG4gICAgbWVudUl0ZW1zLFxuICAgIG1lbnVJdGVtR3JvdXBzLFxuICAgIHNjaGVtYVR5cGUsXG4gICAgdGltZWxpbmVTdG9yZSxcbiAgICByZWFkeSxcbiAgICB2aWV3cyxcbiAgICB1bnN0YWJsZV9sYW5ndWFnZUZpbHRlclxuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGNvbnN0IHtcbiAgICBmZWF0dXJlc1xuICB9ID0gdXNlRGVza1Rvb2woKTtcbiAgY29uc3Qge1xuICAgIGluZGV4LFxuICAgIEJhY2tMaW5rLFxuICAgIGhhc0dyb3VwU2libGluZ3NcbiAgfSA9IHVzZVBhbmVSb3V0ZXIoKTtcbiAgY29uc3Qge1xuICAgIGFjdGlvbnM6IGZpZWxkQWN0aW9uc1xuICB9ID0gdXNlRmllbGRBY3Rpb25zKCk7XG4gIGNvbnN0IG1lbnVOb2RlcyA9IHVzZU1lbW8oKCkgPT4gcmVzb2x2ZU1lbnVOb2Rlcyh7XG4gICAgYWN0aW9uSGFuZGxlcjogb25NZW51QWN0aW9uLFxuICAgIGZpZWxkQWN0aW9ucyxcbiAgICBtZW51SXRlbXMsXG4gICAgbWVudUl0ZW1Hcm91cHNcbiAgfSksIFtvbk1lbnVBY3Rpb24sIGZpZWxkQWN0aW9ucywgbWVudUl0ZW1Hcm91cHMsIG1lbnVJdGVtc10pO1xuICBjb25zdCBtZW51QnV0dG9uTm9kZXMgPSB1c2VNZW1vKCgpID0+IG1lbnVOb2Rlcy5maWx0ZXIoaXNNZW51Tm9kZUJ1dHRvbiksIFttZW51Tm9kZXNdKTtcbiAgY29uc3QgY29udGV4dE1lbnVOb2RlcyA9IHVzZU1lbW8oKCkgPT4gbWVudU5vZGVzLmZpbHRlcihpc05vdE1lbnVOb2RlQnV0dG9uKSwgW21lbnVOb2Rlc10pO1xuICBjb25zdCBzaG93VGFicyA9IHZpZXdzLmxlbmd0aCA+IDE7XG4gIGNvbnN0IHJldiA9IHVzZVRpbWVsaW5lU2VsZWN0b3IodGltZWxpbmVTdG9yZSwgc3RhdGUgPT4gc3RhdGUucmV2VGltZSk7XG4gIGNvbnN0IHtcbiAgICBjb2xsYXBzZWQsXG4gICAgaXNMYXN0XG4gIH0gPSB1c2VQYW5lKCk7XG4gIGNvbnN0IHRhYkluZGV4ID0gaXNMYXN0ICYmICFjb2xsYXBzZWQgPyAtMSA6IDA7XG4gIGNvbnN0IHNob3dTcGxpdFBhbmVCdXR0b24gPSBmZWF0dXJlcy5zcGxpdFZpZXdzICYmIG9uUGFuZVNwbGl0ICYmIHZpZXdzLmxlbmd0aCA+IDE7XG4gIGNvbnN0IHNob3dTcGxpdFBhbmVDbG9zZUJ1dHRvbiA9IHNob3dTcGxpdFBhbmVCdXR0b24gJiYgaGFzR3JvdXBTaWJsaW5ncztcbiAgY29uc3Qgc2hvd1BhbmVHcm91cENsb3NlQnV0dG9uID0gIXNob3dTcGxpdFBhbmVDbG9zZUJ1dHRvbiAmJiAhZmVhdHVyZXMuYmFja0J1dHRvbjtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChQYW5lSGVhZGVyLCB7XG4gICAgcmVmLFxuICAgIGxvYWRpbmc6ICFyZWFkeSxcbiAgICB0aXRsZTogLyogQF9fUFVSRV9fICovanN4KERvY3VtZW50SGVhZGVyVGl0bGUsIHt9KSxcbiAgICB0YWJzOiBzaG93VGFicyAmJiAvKiBAX19QVVJFX18gKi9qc3goRG9jdW1lbnRIZWFkZXJUYWJzLCB7fSksXG4gICAgdGFiSW5kZXgsXG4gICAgYmFja0J1dHRvbjogZmVhdHVyZXMuYmFja0J1dHRvbiAmJiBpbmRleCA+IDAgJiYgLyogQF9fUFVSRV9fICovanN4KEJ1dHRvbiwge1xuICAgICAgYXM6IEJhY2tMaW5rLFxuICAgICAgXCJkYXRhLWFzXCI6IFwiYVwiLFxuICAgICAgaWNvbjogQXJyb3dMZWZ0SWNvbixcbiAgICAgIG1vZGU6IFwiYmxlZWRcIixcbiAgICAgIHBhZGRpbmc6IDJcbiAgICB9KSxcbiAgICBzdWJBY3Rpb25zOiAvKiBAX19QVVJFX18gKi9qc3goVGltZWxpbmVNZW51LCB7XG4gICAgICBjaHVuazogcmV2LFxuICAgICAgbW9kZTogXCJyZXZcIixcbiAgICAgIHBsYWNlbWVudDogXCJib3R0b20tZW5kXCJcbiAgICB9KSxcbiAgICBhY3Rpb25zOiAvKiBAX19QVVJFX18gKi9qc3hzKEZsZXgsIHtcbiAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgZ2FwOiAxLFxuICAgICAgY2hpbGRyZW46IFt1bnN0YWJsZV9sYW5ndWFnZUZpbHRlci5sZW5ndGggPiAwICYmIC8qIEBfX1BVUkVfXyAqL2pzeChGcmFnbWVudCwge1xuICAgICAgICBjaGlsZHJlbjogdW5zdGFibGVfbGFuZ3VhZ2VGaWx0ZXIubWFwKChsYW5ndWFnZUZpbHRlckNvbXBvbmVudCwgaWR4KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQobGFuZ3VhZ2VGaWx0ZXJDb21wb25lbnQsIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9uby1hcnJheS1pbmRleC1rZXlcbiAgICAgICAgICAgIGtleTogXCJsYW5ndWFnZS1maWx0ZXItXCIuY29uY2F0KGlkeCksXG4gICAgICAgICAgICBzY2hlbWFUeXBlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICB9KSwgbWVudUJ1dHRvbk5vZGVzLm1hcChpdGVtID0+IC8qIEBfX1BVUkVfXyAqL2pzeChQYW5lSGVhZGVyQWN0aW9uQnV0dG9uLCB7XG4gICAgICAgIG5vZGU6IGl0ZW1cbiAgICAgIH0sIGl0ZW0ua2V5KSksIC8qIEBfX1BVUkVfXyAqL2pzeChQYW5lQ29udGV4dE1lbnVCdXR0b24sIHtcbiAgICAgICAgbm9kZXM6IGNvbnRleHRNZW51Tm9kZXNcbiAgICAgIH0sIFwiY29udGV4dC1tZW51XCIpLCBzaG93U3BsaXRQYW5lQnV0dG9uICYmIC8qIEBfX1BVUkVfXyAqL2pzeChUb29sdGlwLCB7XG4gICAgICAgIGNvbnRlbnQ6IC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgd2hpdGVTcGFjZTogXCJub3dyYXBcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2hpbGRyZW46IFwiU3BsaXQgcGFuZSByaWdodFwiXG4gICAgICAgIH0pLFxuICAgICAgICBwYWRkaW5nOiAyLFxuICAgICAgICBwbGFjZW1lbnQ6IFwiYm90dG9tXCIsXG4gICAgICAgIHBvcnRhbDogdHJ1ZSxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChCdXR0b24sIHtcbiAgICAgICAgICBcImFyaWEtbGFiZWxcIjogXCJTcGxpdCBwYW5lIHJpZ2h0XCIsXG4gICAgICAgICAgaWNvbjogU3BsaXRWZXJ0aWNhbEljb24sXG4gICAgICAgICAgbW9kZTogXCJibGVlZFwiLFxuICAgICAgICAgIG9uQ2xpY2s6IG9uUGFuZVNwbGl0XG4gICAgICAgIH0sIFwic3BsaXQtcGFuZS1idXR0b25cIilcbiAgICAgIH0pLCBzaG93U3BsaXRQYW5lQ2xvc2VCdXR0b24gJiYgLyogQF9fUFVSRV9fICovanN4KEJ1dHRvbiwge1xuICAgICAgICBpY29uOiBDbG9zZUljb24sXG4gICAgICAgIG1vZGU6IFwiYmxlZWRcIixcbiAgICAgICAgb25DbGljazogb25QYW5lQ2xvc2UsXG4gICAgICAgIHRpdGxlOiBcIkNsb3NlIHNwbGl0IHBhbmVcIlxuICAgICAgfSwgXCJjbG9zZS12aWV3LWJ1dHRvblwiKSwgc2hvd1BhbmVHcm91cENsb3NlQnV0dG9uICYmIC8qIEBfX1BVUkVfXyAqL2pzeChCdXR0b24sIHtcbiAgICAgICAgaWNvbjogQ2xvc2VJY29uLFxuICAgICAgICBtb2RlOiBcImJsZWVkXCIsXG4gICAgICAgIHRpdGxlOiBcIkNsb3NlIHBhbmUgZ3JvdXBcIixcbiAgICAgICAgYXM6IEJhY2tMaW5rXG4gICAgICB9LCBcImNsb3NlLXZpZXctYnV0dG9uXCIpXVxuICAgIH0pXG4gIH0pO1xufSkpO1xudmFyIF9fZnJlZXplJDUgPSBPYmplY3QuZnJlZXplO1xudmFyIF9fZGVmUHJvcCQ1ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fdGVtcGxhdGUkNSA9IChjb29rZWQsIHJhdykgPT4gX19mcmVlemUkNShfX2RlZlByb3AkNShjb29rZWQsIFwicmF3XCIsIHtcbiAgdmFsdWU6IF9fZnJlZXplJDUocmF3IHx8IGNvb2tlZC5zbGljZSgpKVxufSkpO1xudmFyIF9hJDU7XG5jb25zdCBEb2N1bWVudEJveCA9IHN0eWxlZChCb3gpKHtcbiAgcG9zaXRpb246IFwicmVsYXRpdmVcIlxufSk7XG5jb25zdCBTY3JvbGxlciA9IHN0eWxlZChTY3JvbGxDb250YWluZXIpKF9yZWYxNiA9PiB7XG4gIGxldCB7XG4gICAgJGRpc2FibGVkXG4gIH0gPSBfcmVmMTY7XG4gIGlmICgkZGlzYWJsZWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGVpZ2h0OiBcIjEwMCVcIlxuICAgIH07XG4gIH1cbiAgcmV0dXJuIGNzcyhfYSQ1IHx8IChfYSQ1ID0gX190ZW1wbGF0ZSQ1KFtcIlxcbiAgICBoZWlnaHQ6IDEwMCU7XFxuICAgIG92ZXJmbG93OiBhdXRvO1xcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICAgIHNjcm9sbC1iZWhhdmlvcjogc21vb3RoO1xcbiAgICBvdXRsaW5lOiBub25lO1xcbiAgXCJdKSkpO1xufSk7XG5jb25zdCBEb2N1bWVudFBhbmVsID0gZnVuY3Rpb24gRG9jdW1lbnRQYW5lbDIocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGZvb3RlckhlaWdodCxcbiAgICBpc0luc3BlY3RPcGVuLFxuICAgIHJvb3RFbGVtZW50LFxuICAgIHNldERvY3VtZW50UGFuZWxQb3J0YWxFbGVtZW50XG4gIH0gPSBwcm9wcztcbiAgY29uc3Qge1xuICAgIGFjdGl2ZVZpZXdJZCxcbiAgICBkaXNwbGF5ZWQsXG4gICAgZG9jdW1lbnRJZCxcbiAgICBlZGl0U3RhdGUsXG4gICAgaW5zcGVjdG9yLFxuICAgIHZhbHVlLFxuICAgIHZpZXdzLFxuICAgIHJlYWR5LFxuICAgIHNjaGVtYVR5cGUsXG4gICAgcGVybWlzc2lvbnMsXG4gICAgaXNQZXJtaXNzaW9uc0xvYWRpbmcsXG4gICAgaXNEZWxldGluZyxcbiAgICBpc0RlbGV0ZWQsXG4gICAgdGltZWxpbmVTdG9yZSxcbiAgICBmb3JtU3RhdGVcbiAgfSA9IHVzZURvY3VtZW50UGFuZSgpO1xuICBjb25zdCB7XG4gICAgY29sbGFwc2VkOiBsYXlvdXRDb2xsYXBzZWRcbiAgfSA9IHVzZVBhbmVMYXlvdXQoKTtcbiAgY29uc3Qge1xuICAgIGNvbGxhcHNlZFxuICB9ID0gdXNlUGFuZSgpO1xuICBjb25zdCBwYXJlbnRQb3J0YWwgPSB1c2VQb3J0YWwoKTtcbiAgY29uc3Qge1xuICAgIGZlYXR1cmVzXG4gIH0gPSB1c2VEZXNrVG9vbCgpO1xuICBjb25zdCBbaGVhZGVyRWxlbWVudCwgc2V0SGVhZGVyRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgaGVhZGVyUmVjdCA9IHVzZUVsZW1lbnRSZWN0KGhlYWRlckVsZW1lbnQpO1xuICBjb25zdCBwb3J0YWxSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFtkb2N1bWVudFNjcm9sbEVsZW1lbnQsIHNldERvY3VtZW50U2Nyb2xsRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgZm9ybUNvbnRhaW5lckVsZW1lbnQgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHJlcXVpcmVkUGVybWlzc2lvbiA9IHZhbHVlLl9jcmVhdGVkQXQgPyBcInVwZGF0ZVwiIDogXCJjcmVhdGVcIjtcbiAgY29uc3Qgc2VsZWN0ZWRHcm91cCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghZm9ybVN0YXRlKSByZXR1cm4gdm9pZCAwO1xuICAgIHJldHVybiBmb3JtU3RhdGUuZ3JvdXBzLmZpbmQoZ3JvdXAgPT4gZ3JvdXAuc2VsZWN0ZWQpO1xuICB9LCBbZm9ybVN0YXRlXSk7XG4gIGNvbnN0IGFjdGl2ZVZpZXcgPSB1c2VNZW1vKCgpID0+IHZpZXdzLmZpbmQodmlldyA9PiB2aWV3LmlkID09PSBhY3RpdmVWaWV3SWQpIHx8IHZpZXdzWzBdIHx8IHtcbiAgICB0eXBlOiBcImZvcm1cIlxuICB9LCBbYWN0aXZlVmlld0lkLCB2aWV3c10pO1xuICBjb25zdCBwb3J0YWxFbGVtZW50ID0gZmVhdHVyZXMuc3BsaXRQYW5lcyA/IHBvcnRhbFJlZi5jdXJyZW50IHx8IHBhcmVudFBvcnRhbC5lbGVtZW50IDogcGFyZW50UG9ydGFsLmVsZW1lbnQ7XG4gIGNvbnN0IG1hcmdpbnMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAobGF5b3V0Q29sbGFwc2VkKSB7XG4gICAgICByZXR1cm4gWyhoZWFkZXJSZWN0ID09IG51bGwgPyB2b2lkIDAgOiBoZWFkZXJSZWN0LmhlaWdodCkgfHwgMCwgMCwgZm9vdGVySGVpZ2h0ID8gZm9vdGVySGVpZ2h0ICsgMiA6IDIsIDBdO1xuICAgIH1cbiAgICByZXR1cm4gWzAsIDAsIDIsIDBdO1xuICB9LCBbbGF5b3V0Q29sbGFwc2VkLCBmb290ZXJIZWlnaHQsIGhlYWRlclJlY3RdKTtcbiAgY29uc3QgZm9ybVZpZXdIaWRkZW4gPSBhY3RpdmVWaWV3LnR5cGUgIT09IFwiZm9ybVwiO1xuICBjb25zdCBhY3RpdmVWaWV3Tm9kZSA9IHVzZU1lbW8oKCkgPT4gYWN0aXZlVmlldy50eXBlID09PSBcImNvbXBvbmVudFwiICYmIGFjdGl2ZVZpZXcuY29tcG9uZW50ICYmIGNyZWF0ZUVsZW1lbnQoYWN0aXZlVmlldy5jb21wb25lbnQsIHtcbiAgICBkb2N1bWVudDoge1xuICAgICAgZHJhZnQ6IChlZGl0U3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGVkaXRTdGF0ZS5kcmFmdCkgfHwgbnVsbCxcbiAgICAgIGRpc3BsYXllZDogZGlzcGxheWVkIHx8IHZhbHVlLFxuICAgICAgaGlzdG9yaWNhbDogZGlzcGxheWVkLFxuICAgICAgcHVibGlzaGVkOiAoZWRpdFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBlZGl0U3RhdGUucHVibGlzaGVkKSB8fCBudWxsXG4gICAgfSxcbiAgICBkb2N1bWVudElkLFxuICAgIG9wdGlvbnM6IGFjdGl2ZVZpZXcub3B0aW9ucyxcbiAgICBzY2hlbWFUeXBlXG4gIH0pLCBbYWN0aXZlVmlldywgZGlzcGxheWVkLCBkb2N1bWVudElkLCBlZGl0U3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGVkaXRTdGF0ZS5kcmFmdCwgZWRpdFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBlZGl0U3RhdGUucHVibGlzaGVkLCBzY2hlbWFUeXBlLCB2YWx1ZV0pO1xuICBjb25zdCBsYXN0Tm9uRGVsZXRlZFJldklkID0gdXNlVGltZWxpbmVTZWxlY3Rvcih0aW1lbGluZVN0b3JlLCBzdGF0ZSA9PiBzdGF0ZS5sYXN0Tm9uRGVsZXRlZFJldklkKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIShkb2N1bWVudFNjcm9sbEVsZW1lbnQgPT0gbnVsbCA/IHZvaWQgMCA6IGRvY3VtZW50U2Nyb2xsRWxlbWVudC5zY3JvbGxUbykpIHJldHVybjtcbiAgICBkb2N1bWVudFNjcm9sbEVsZW1lbnQuc2Nyb2xsVG8oMCwgMCk7XG4gIH0sIFtkb2N1bWVudElkLCBkb2N1bWVudFNjcm9sbEVsZW1lbnRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocG9ydGFsRWxlbWVudCkge1xuICAgICAgc2V0RG9jdW1lbnRQYW5lbFBvcnRhbEVsZW1lbnQocG9ydGFsRWxlbWVudCk7XG4gICAgfVxuICB9LCBbcG9ydGFsRWxlbWVudCwgc2V0RG9jdW1lbnRQYW5lbFBvcnRhbEVsZW1lbnRdKTtcbiAgY29uc3QgaW5zcGVjdERpYWxvZyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBpc0luc3BlY3RPcGVuID8gLyogQF9fUFVSRV9fICovanN4KEluc3BlY3REaWFsb2csIHtcbiAgICAgIHZhbHVlOiBkaXNwbGF5ZWQgfHwgdmFsdWVcbiAgICB9KSA6IG51bGw7XG4gIH0sIFtpc0luc3BlY3RPcGVuLCBkaXNwbGF5ZWQsIHZhbHVlXSk7XG4gIGNvbnN0IHNob3dJbnNwZWN0b3IgPSBCb29sZWFuKCFjb2xsYXBzZWQgJiYgaW5zcGVjdG9yKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoRnJhZ21lbnQsIHtcbiAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudFBhbmVsSGVhZGVyLCB7XG4gICAgICByZWY6IHNldEhlYWRlckVsZW1lbnRcbiAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KFBhbmVDb250ZW50LCB7XG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhGbGV4LCB7XG4gICAgICAgIGhlaWdodDogXCJmaWxsXCIsXG4gICAgICAgIGNoaWxkcmVuOiBbKGZlYXR1cmVzLnJlc2l6YWJsZVBhbmVzIHx8ICFzaG93SW5zcGVjdG9yKSAmJiAvKiBAX19QVVJFX18gKi9qc3goRG9jdW1lbnRCb3gsIHtcbiAgICAgICAgICBmbGV4OiAyLFxuICAgICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goUG9ydGFsUHJvdmlkZXIsIHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IHBvcnRhbEVsZW1lbnQsXG4gICAgICAgICAgICBfX3Vuc3RhYmxlX2VsZW1lbnRzOiB7XG4gICAgICAgICAgICAgIGRvY3VtZW50U2Nyb2xsRWxlbWVudFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQm91bmRhcnlFbGVtZW50UHJvdmlkZXIsIHtcbiAgICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnRTY3JvbGxFbGVtZW50LFxuICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhWaXJ0dWFsaXplclNjcm9sbEluc3RhbmNlUHJvdmlkZXIsIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxFbGVtZW50OiBkb2N1bWVudFNjcm9sbEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgY29udGFpbmVyRWxlbWVudDogZm9ybUNvbnRhaW5lckVsZW1lbnQsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFthY3RpdmVWaWV3LnR5cGUgPT09IFwiZm9ybVwiICYmICFpc1Blcm1pc3Npb25zTG9hZGluZyAmJiByZWFkeSAmJiAvKiBAX19QVVJFX18gKi9qc3hzKEZyYWdtZW50LCB7XG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChQZXJtaXNzaW9uQ2hlY2tCYW5uZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JhbnRlZDogQm9vbGVhbihwZXJtaXNzaW9ucyA9PSBudWxsID8gdm9pZCAwIDogcGVybWlzc2lvbnMuZ3JhbnRlZCksXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkUGVybWlzc2lvblxuICAgICAgICAgICAgICAgICAgfSksICFpc0RlbGV0aW5nICYmIGlzRGVsZXRlZCAmJiAvKiBAX19QVVJFX18gKi9qc3goRGVsZXRlZERvY3VtZW50QmFubmVyLCB7XG4gICAgICAgICAgICAgICAgICAgIHJldmlzaW9uSWQ6IGxhc3ROb25EZWxldGVkUmV2SWRcbiAgICAgICAgICAgICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goUmVmZXJlbmNlQ2hhbmdlZEJhbm5lciwge30pXVxuICAgICAgICAgICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3hzKFNjcm9sbGVyLCB7XG4gICAgICAgICAgICAgICAgICAkZGlzYWJsZWQ6IGxheW91dENvbGxhcHNlZCB8fCBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIFwiZGF0YS10ZXN0aWRcIjogXCJkb2N1bWVudC1wYW5lbC1zY3JvbGxlclwiLFxuICAgICAgICAgICAgICAgICAgcmVmOiBzZXREb2N1bWVudFNjcm9sbEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChGb3JtVmlldywge1xuICAgICAgICAgICAgICAgICAgICBoaWRkZW46IGZvcm1WaWV3SGlkZGVuLFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW5zLFxuICAgICAgICAgICAgICAgICAgICByZWY6IGZvcm1Db250YWluZXJFbGVtZW50XG4gICAgICAgICAgICAgICAgICB9LCBkb2N1bWVudElkICsgKHJlYWR5ID8gXCJfcmVhZHlcIiA6IFwiX3BlbmRpbmdcIikpLCBhY3RpdmVWaWV3Tm9kZV1cbiAgICAgICAgICAgICAgICB9LCBcIlwiLmNvbmNhdChzZWxlY3RlZEdyb3VwID09IG51bGwgPyB2b2lkIDAgOiBzZWxlY3RlZEdyb3VwLm5hbWUsIFwiLVwiKS5jb25jYXQoZG9jdW1lbnRJZCwgXCJ9XCIpKSwgaW5zcGVjdERpYWxvZywgLyogQF9fUFVSRV9fICovanN4KFwiZGl2XCIsIHtcbiAgICAgICAgICAgICAgICAgIFwiZGF0YS10ZXN0aWRcIjogXCJkb2N1bWVudC1wYW5lbC1wb3J0YWxcIixcbiAgICAgICAgICAgICAgICAgIHJlZjogcG9ydGFsUmVmXG4gICAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pLCBzaG93SW5zcGVjdG9yICYmIC8qIEBfX1BVUkVfXyAqL2pzeChCb3VuZGFyeUVsZW1lbnRQcm92aWRlciwge1xuICAgICAgICAgIGVsZW1lbnQ6IHJvb3RFbGVtZW50LFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goRG9jdW1lbnRJbnNwZWN0b3JQYW5lbCwge1xuICAgICAgICAgICAgZG9jdW1lbnRJZCxcbiAgICAgICAgICAgIGRvY3VtZW50VHlwZTogc2NoZW1hVHlwZS5uYW1lLFxuICAgICAgICAgICAgZmxleDogMVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXVxuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59O1xuY29uc3QgUE9QT1ZFUl9GQUxMQkFDS19QTEFDRU1FTlRTID0gW1wibGVmdFwiLCBcImJvdHRvbVwiXTtcbmNvbnN0IERJQUxPR19XSURUSF9UT19VSV9XSURUSCA9IHtcbiAgc21hbGw6IDAsXG4gIG1lZGl1bTogMSxcbiAgbGFyZ2U6IDIsXG4gIGZ1bGw6IFwiYXV0b1wiXG59O1xuZnVuY3Rpb24gQ29uZmlybURpYWxvZyhwcm9wcykge1xuICBjb25zdCB7XG4gICAgZGlhbG9nLFxuICAgIHJlZmVyZW5jZUVsZW1lbnRcbiAgfSA9IHByb3BzO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFBvcG92ZXIsIHtcbiAgICBjb250ZW50OiAvKiBAX19QVVJFX18gKi9qc3goQ29uZmlybURpYWxvZ0NvbnRlbnQsIHtcbiAgICAgIGRpYWxvZ1xuICAgIH0pLFxuICAgIGZhbGxiYWNrUGxhY2VtZW50czogUE9QT1ZFUl9GQUxMQkFDS19QTEFDRU1FTlRTLFxuICAgIG9wZW46IHRydWUsXG4gICAgcGxhY2VtZW50OiBcInRvcFwiLFxuICAgIHBvcnRhbDogdHJ1ZSxcbiAgICBwcmV2ZW50T3ZlcmZsb3c6IHRydWUsXG4gICAgcmVmZXJlbmNlRWxlbWVudFxuICB9KTtcbn1cbmZ1bmN0aW9uIENvbmZpcm1EaWFsb2dDb250ZW50KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBkaWFsb2dcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgY2FuY2VsQnV0dG9uSWNvbixcbiAgICBjYW5jZWxCdXR0b25UZXh0LFxuICAgIGNvbmZpcm1CdXR0b25JY29uLFxuICAgIGNvbmZpcm1CdXR0b25UZXh0LFxuICAgIC8vIGNvbG9yLFxuICAgIG1lc3NhZ2UsXG4gICAgb25DYW5jZWwsXG4gICAgb25Db25maXJtLFxuICAgIHRvbmVcbiAgfSA9IGRpYWxvZztcbiAgY29uc3Qge1xuICAgIGlzVG9wTGF5ZXJcbiAgfSA9IHVzZUxheWVyKCk7XG4gIGNvbnN0IFtlbGVtZW50LCBzZXRFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBoYW5kbGVDbGlja091dHNpZGUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGlzVG9wTGF5ZXIpIG9uQ2FuY2VsKCk7XG4gIH0sIFtpc1RvcExheWVyLCBvbkNhbmNlbF0pO1xuICBjb25zdCBoYW5kbGVHbG9iYWxLZXlEb3duID0gdXNlQ2FsbGJhY2soZXZlbnQgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIgJiYgaXNUb3BMYXllcikgb25DYW5jZWwoKTtcbiAgfSwgW2lzVG9wTGF5ZXIsIG9uQ2FuY2VsXSk7XG4gIHVzZUNsaWNrT3V0c2lkZShoYW5kbGVDbGlja091dHNpZGUsIFtlbGVtZW50XSk7XG4gIHVzZUdsb2JhbEtleURvd24oaGFuZGxlR2xvYmFsS2V5RG93bik7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3hzKEZsZXgsIHtcbiAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgcmVmOiBzZXRFbGVtZW50LFxuICAgIHN0eWxlOiB7XG4gICAgICBtaW5XaWR0aDogMzIwIC0gMTYsXG4gICAgICBtYXhXaWR0aDogNDAwXG4gICAgfSxcbiAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgIGZsZXg6IDEsXG4gICAgICBvdmVyZmxvdzogXCJhdXRvXCIsXG4gICAgICBwYWRkaW5nOiA0LFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgIGNoaWxkcmVuOiBtZXNzYWdlXG4gICAgICB9KVxuICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICBwYWRkaW5nWDogNCxcbiAgICAgIHBhZGRpbmdZOiAzLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgYm9yZGVyVG9wOiBcIjFweCBzb2xpZCB2YXIoLS1jYXJkLWJvcmRlci1jb2xvcilcIlxuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hzKEdyaWQsIHtcbiAgICAgICAgY29sdW1uczogMixcbiAgICAgICAgZ2FwOiAyLFxuICAgICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChCdXR0b24sIHtcbiAgICAgICAgICBpY29uOiBjYW5jZWxCdXR0b25JY29uLFxuICAgICAgICAgIG9uQ2xpY2s6IG9uQ2FuY2VsLFxuICAgICAgICAgIG1vZGU6IFwiZ2hvc3RcIixcbiAgICAgICAgICB0ZXh0OiBjYW5jZWxCdXR0b25UZXh0IHx8IFwiQ2FuY2VsXCJcbiAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChCdXR0b24sIHtcbiAgICAgICAgICBpY29uOiBjb25maXJtQnV0dG9uSWNvbixcbiAgICAgICAgICBvbkNsaWNrOiBvbkNvbmZpcm0sXG4gICAgICAgICAgdGV4dDogY29uZmlybUJ1dHRvblRleHQgfHwgXCJDb25maXJtXCIsXG4gICAgICAgICAgdG9uZVxuICAgICAgICB9KV1cbiAgICAgIH0pXG4gICAgfSldXG4gIH0pO1xufVxuZnVuY3Rpb24gTW9kYWxEaWFsb2cocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGRpYWxvZ1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGRpYWxvZ0lkID0gdXNlSWQoKTtcbiAgY29uc3QgZm9vdGVyID0gZGlhbG9nLmZvb3RlciAmJiAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgcGFkZGluZ1g6IDQsXG4gICAgcGFkZGluZ1k6IDMsXG4gICAgY2hpbGRyZW46IGRpYWxvZy5mb290ZXJcbiAgfSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goTGVnYWN5TGF5ZXJQcm92aWRlciwge1xuICAgIHpPZmZzZXQ6IFwiZnVsbHNjcmVlblwiLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goRGlhbG9nLCB7XG4gICAgICBfX3Vuc3RhYmxlX2hpZGVDbG9zZUJ1dHRvbjogZGlhbG9nLnNob3dDbG9zZUJ1dHRvbiA9PT0gZmFsc2UsXG4gICAgICBmb290ZXIsXG4gICAgICBoZWFkZXI6IGRpYWxvZy5oZWFkZXIsXG4gICAgICBpZDogZGlhbG9nSWQsXG4gICAgICBvbkNsb3NlOiBkaWFsb2cub25DbG9zZSxcbiAgICAgIG9uQ2xpY2tPdXRzaWRlOiBkaWFsb2cub25DbG9zZSxcbiAgICAgIHdpZHRoOiBkaWFsb2cud2lkdGggPT09IHZvaWQgMCA/IDEgOiBESUFMT0dfV0lEVEhfVE9fVUlfV0lEVEhbZGlhbG9nLndpZHRoXSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgIHBhZGRpbmc6IDQsXG4gICAgICAgIGNoaWxkcmVuOiBkaWFsb2cuY29udGVudFxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn1cbmZ1bmN0aW9uIFBvcG92ZXJEaWFsb2cocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGRpYWxvZyxcbiAgICByZWZlcmVuY2VFbGVtZW50XG4gIH0gPSBwcm9wcztcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChQb3BvdmVyLCB7XG4gICAgY29udGVudDogLyogQF9fUFVSRV9fICovanN4KFBvcG92ZXJEaWFsb2dDb250ZW50LCB7XG4gICAgICBkaWFsb2dcbiAgICB9KSxcbiAgICBmYWxsYmFja1BsYWNlbWVudHM6IFBPUE9WRVJfRkFMTEJBQ0tfUExBQ0VNRU5UUyxcbiAgICBvcGVuOiB0cnVlLFxuICAgIHBsYWNlbWVudDogXCJ0b3BcIixcbiAgICBwb3J0YWw6IHRydWUsXG4gICAgcHJldmVudE92ZXJmbG93OiB0cnVlLFxuICAgIHJlZmVyZW5jZUVsZW1lbnRcbiAgfSk7XG59XG5mdW5jdGlvbiBQb3BvdmVyRGlhbG9nQ29udGVudChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZGlhbG9nXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qge1xuICAgIGNvbnRlbnQsXG4gICAgb25DbG9zZVxuICB9ID0gZGlhbG9nO1xuICBjb25zdCB7XG4gICAgaXNUb3BMYXllclxuICB9ID0gdXNlTGF5ZXIoKTtcbiAgY29uc3QgW2VsZW1lbnQsIHNldEVsZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IGhhbmRsZUNsaWNrT3V0c2lkZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoaXNUb3BMYXllcikgb25DbG9zZSgpO1xuICB9LCBbaXNUb3BMYXllciwgb25DbG9zZV0pO1xuICBjb25zdCBoYW5kbGVHbG9iYWxLZXlEb3duID0gdXNlQ2FsbGJhY2soZXZlbnQgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIgJiYgaXNUb3BMYXllcikgb25DbG9zZSgpO1xuICB9LCBbaXNUb3BMYXllciwgb25DbG9zZV0pO1xuICB1c2VDbGlja091dHNpZGUoaGFuZGxlQ2xpY2tPdXRzaWRlLCBbZWxlbWVudF0pO1xuICB1c2VHbG9iYWxLZXlEb3duKGhhbmRsZUdsb2JhbEtleURvd24pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFwiZGl2XCIsIHtcbiAgICByZWY6IHNldEVsZW1lbnQsXG4gICAgY2hpbGRyZW46IGNvbnRlbnRcbiAgfSk7XG59XG5mdW5jdGlvbiBEb2N1bWVudEFjdGlvblBvcnRhbFByb3ZpZGVyKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBjaGlsZHJlblxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBlbGVtZW50LFxuICAgIGVsZW1lbnRzXG4gIH0gPSB1c2VQb3J0YWwoKTtcbiAgY29uc3QgcG9ydGFsRWxlbWVudCA9IChlbGVtZW50cyA9PSBudWxsID8gdm9pZCAwIDogZWxlbWVudHNbRE9DVU1FTlRfUEFORUxfUE9SVEFMX0VMRU1FTlRdKSB8fCBlbGVtZW50O1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFBvcnRhbFByb3ZpZGVyLCB7XG4gICAgZWxlbWVudDogcG9ydGFsRWxlbWVudCxcbiAgICBjaGlsZHJlblxuICB9KTtcbn1cbmZ1bmN0aW9uIEFjdGlvblN0YXRlRGlhbG9nKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBkaWFsb2csXG4gICAgcmVmZXJlbmNlRWxlbWVudCA9IG51bGxcbiAgfSA9IHByb3BzO1xuICBjb25zdCBtb2RhbElkID0gdXNlSWQoKTtcbiAgaWYgKGRpYWxvZy50eXBlID09PSBcImNvbmZpcm1cIikge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goQ29uZmlybURpYWxvZywge1xuICAgICAgZGlhbG9nLFxuICAgICAgcmVmZXJlbmNlRWxlbWVudFxuICAgIH0pO1xuICB9XG4gIGlmIChkaWFsb2cudHlwZSA9PT0gXCJwb3BvdmVyXCIpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFBvcG92ZXJEaWFsb2csIHtcbiAgICAgIGRpYWxvZyxcbiAgICAgIHJlZmVyZW5jZUVsZW1lbnRcbiAgICB9KTtcbiAgfVxuICBpZiAoZGlhbG9nLnR5cGUgPT09IFwiZGlhbG9nXCIgfHwgIWRpYWxvZy50eXBlKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudEFjdGlvblBvcnRhbFByb3ZpZGVyLCB7XG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KE1vZGFsRGlhbG9nLCB7XG4gICAgICAgIGRpYWxvZ1xuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuICBpZiAoZGlhbG9nLnR5cGUgPT09IFwiY3VzdG9tXCIpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KERvY3VtZW50QWN0aW9uUG9ydGFsUHJvdmlkZXIsIHtcbiAgICAgIGNoaWxkcmVuOiBkaWFsb2cgPT0gbnVsbCA/IHZvaWQgMCA6IGRpYWxvZy5jb21wb25lbnRcbiAgICB9KTtcbiAgfVxuICBjb25zdCB1bmtub3duTW9kYWwgPSBkaWFsb2c7XG4gIGNvbnNvbGUud2FybihcIlVuc3VwcG9ydGVkIG1vZGFsIHR5cGUgXCIuY29uY2F0KHVua25vd25Nb2RhbC50eXBlKSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goRGlhbG9nLCB7XG4gICAgaWQ6IG1vZGFsSWQsXG4gICAgb25DbG9zZTogdW5rbm93bk1vZGFsLm9uQ2xvc2UsXG4gICAgb25DbGlja091dHNpZGU6IHVua25vd25Nb2RhbC5vbkNsb3NlLFxuICAgIHdpZHRoOiAyLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICBwYWRkaW5nOiA0LFxuICAgICAgY2hpbGRyZW46IHVua25vd25Nb2RhbC5jb250ZW50IHx8IC8qIEBfX1BVUkVfXyAqL2pzeHMoRnJhZ21lbnQsIHtcbiAgICAgICAgY2hpbGRyZW46IFtcIlVuZXhwZWN0ZWQgbW9kYWwgdHlwZSAoXCIsIC8qIEBfX1BVUkVfXyAqL2pzeChcImNvZGVcIiwge1xuICAgICAgICAgIGNoaWxkcmVuOiB1bmtub3duTW9kYWwudHlwZVxuICAgICAgICB9KSwgXCIpXCJdXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufVxuZnVuY3Rpb24gQWN0aW9uTWVudUJ1dHRvbihwcm9wcykge1xuICBjb25zdCB7XG4gICAgYWN0aW9uU3RhdGVzLFxuICAgIGRpc2FibGVkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgaWRQcmVmaXggPSB1c2VJZCgpO1xuICBjb25zdCBidXR0b25SZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFthY3Rpb25JbmRleCwgc2V0QWN0aW9uSW5kZXhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbcmVmZXJlbmNlRWxlbWVudCwgc2V0UmVmZXJlbmNlRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgaGFuZGxlQWN0aW9uID0gdXNlQ2FsbGJhY2soaWR4ID0+IHtcbiAgICBzZXRBY3Rpb25JbmRleChpZHgpO1xuICB9LCBbXSk7XG4gIGNvbnN0IHBvcG92ZXJQcm9wcyA9IHVzZU1lbW8oKCkgPT4gKHtcbiAgICBwbGFjZW1lbnQ6IFwidG9wLWVuZFwiLFxuICAgIHBvcnRhbDogdHJ1ZSxcbiAgICBwcmV2ZW50T3ZlcmZsb3c6IHRydWVcbiAgfSksIFtdKTtcbiAgY29uc3QgY3VycmVudEFjdGlvbiA9IGFjdGlvblN0YXRlc1thY3Rpb25JbmRleF07XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3hzKEZyYWdtZW50LCB7XG4gICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goTWVudUJ1dHRvbiwge1xuICAgICAgaWQ6IFwiXCIuY29uY2F0KGlkUHJlZml4LCBcIi1hY3Rpb24tbWVudVwiKSxcbiAgICAgIGJ1dHRvbjogLyogQF9fUFVSRV9fICovanN4KEJ1dHRvbiwge1xuICAgICAgICBcImRhdGEtdGVzdGlkXCI6IFwiYWN0aW9uLW1lbnUtYnV0dG9uXCIsXG4gICAgICAgIFwiYXJpYS1sYWJlbFwiOiBcIk9wZW4gZG9jdW1lbnQgYWN0aW9uc1wiLFxuICAgICAgICBkaXNhYmxlZCxcbiAgICAgICAgaWNvbjogQ2hldnJvbkRvd25JY29uLFxuICAgICAgICBtb2RlOiBcImdob3N0XCIsXG4gICAgICAgIHJlZjogYnV0dG9uUmVmXG4gICAgICB9KSxcbiAgICAgIG1lbnU6IC8qIEBfX1BVUkVfXyAqL2pzeChNZW51LCB7XG4gICAgICAgIHBhZGRpbmc6IDEsXG4gICAgICAgIGNoaWxkcmVuOiBhY3Rpb25TdGF0ZXMubWFwKChhY3Rpb25TdGF0ZSwgaWR4KSA9PiAvKiBAX19QVVJFX18gKi9qc3goQWN0aW9uTWVudUxpc3RJdGVtLCB7XG4gICAgICAgICAgYWN0aW9uU3RhdGUsXG4gICAgICAgICAgZGlzYWJsZWQsXG4gICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICBvbkFjdGlvbjogaGFuZGxlQWN0aW9uXG4gICAgICAgIH0sIGlkeCkpXG4gICAgICB9KSxcbiAgICAgIHBvcG92ZXI6IHBvcG92ZXJQcm9wcyxcbiAgICAgIHJlZjogc2V0UmVmZXJlbmNlRWxlbWVudFxuICAgIH0pLCBjdXJyZW50QWN0aW9uICYmIGN1cnJlbnRBY3Rpb24uZGlhbG9nICYmIC8qIEBfX1BVUkVfXyAqL2pzeChMZWdhY3lMYXllclByb3ZpZGVyLCB7XG4gICAgICB6T2Zmc2V0OiBcInBhbmVGb290ZXJcIixcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQWN0aW9uU3RhdGVEaWFsb2csIHtcbiAgICAgICAgZGlhbG9nOiBjdXJyZW50QWN0aW9uLmRpYWxvZyxcbiAgICAgICAgcmVmZXJlbmNlRWxlbWVudFxuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBBY3Rpb25NZW51TGlzdEl0ZW0ocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGFjdGlvblN0YXRlLFxuICAgIGRpc2FibGVkLFxuICAgIGluZGV4LFxuICAgIG9uQWN0aW9uXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qge1xuICAgIG9uSGFuZGxlXG4gIH0gPSBhY3Rpb25TdGF0ZTtcbiAgY29uc3QgaGFuZGxlQ2xpY2sgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgb25BY3Rpb24oaW5kZXgpO1xuICAgIGlmIChvbkhhbmRsZSkgb25IYW5kbGUoKTtcbiAgfSwgW2luZGV4LCBvbkFjdGlvbiwgb25IYW5kbGVdKTtcbiAgY29uc3QgdG9vbHRpcENvbnRlbnQgPSBhY3Rpb25TdGF0ZS50aXRsZSAmJiAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgcGFkZGluZzogMixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgIHNpemU6IDEsXG4gICAgICBjaGlsZHJlbjogYWN0aW9uU3RhdGUudGl0bGVcbiAgICB9KVxuICB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChNZW51SXRlbSwge1xuICAgIFwiZGF0YS10ZXN0aWRcIjogXCJhY3Rpb24tXCIuY29uY2F0KGFjdGlvblN0YXRlLmxhYmVsLnJlcGxhY2UoXCIgXCIsIFwiXCIpKSxcbiAgICBkaXNhYmxlZDogZGlzYWJsZWQgfHwgQm9vbGVhbihhY3Rpb25TdGF0ZS5kaXNhYmxlZCksXG4gICAgb25DbGljazogaGFuZGxlQ2xpY2ssXG4gICAgcGFkZGluZzogMCxcbiAgICB0b25lOiBhY3Rpb25TdGF0ZS50b25lLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goVG9vbHRpcCwge1xuICAgICAgY29udGVudDogdG9vbHRpcENvbnRlbnQsXG4gICAgICBkaXNhYmxlZDogIXRvb2x0aXBDb250ZW50LFxuICAgICAgZmFsbGJhY2tQbGFjZW1lbnRzOiBbXCJsZWZ0XCIsIFwiYm90dG9tXCJdLFxuICAgICAgcGxhY2VtZW50OiBcInRvcFwiLFxuICAgICAgcG9ydGFsOiB0cnVlLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgcGFkZGluZ1g6IDMsXG4gICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4cyhGbGV4LCB7XG4gICAgICAgICAgZmxleDogMSxcbiAgICAgICAgICBwYWRkaW5nWTogMyxcbiAgICAgICAgICBjaGlsZHJlbjogW2FjdGlvblN0YXRlLmljb24gJiYgLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IDMsXG4gICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhUZXh0LCB7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbaXNWYWxpZEVsZW1lbnQoYWN0aW9uU3RhdGUuaWNvbikgJiYgYWN0aW9uU3RhdGUuaWNvbiwgaXNWYWxpZEVsZW1lbnRUeXBlKGFjdGlvblN0YXRlLmljb24pICYmIGNyZWF0ZUVsZW1lbnQoYWN0aW9uU3RhdGUuaWNvbildXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgY2hpbGRyZW46IGFjdGlvblN0YXRlLmxhYmVsXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pLCBhY3Rpb25TdGF0ZS5zaG9ydGN1dCAmJiAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgICAgbWFyZ2luTGVmdDogMyxcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEhvdGtleXMsIHtcbiAgICAgICAgICAgIGtleXM6IFN0cmluZyhhY3Rpb25TdGF0ZS5zaG9ydGN1dCkuc3BsaXQoXCIrXCIpLm1hcChzID0+IHMuc2xpY2UoMCwgMSkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSkpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSldXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufVxuZnVuY3Rpb24gRG9jdW1lbnRTdGF0dXNCYXJBY3Rpb25zSW5uZXIocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGRpc2FibGVkLFxuICAgIHNob3dNZW51LFxuICAgIHN0YXRlc1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IFtmaXJzdEFjdGlvblN0YXRlLCAuLi5tZW51QWN0aW9uU3RhdGVzXSA9IHN0YXRlcztcbiAgY29uc3QgW2J1dHRvbkVsZW1lbnQsIHNldEJ1dHRvbkVsZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IHRvb2x0aXBDb250ZW50ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFmaXJzdEFjdGlvblN0YXRlIHx8ICFmaXJzdEFjdGlvblN0YXRlLnRpdGxlICYmICFmaXJzdEFjdGlvblN0YXRlLnNob3J0Y3V0KSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4cyhGbGV4LCB7XG4gICAgICBwYWRkaW5nOiAyLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWF4V2lkdGg6IDMwMFxuICAgICAgfSxcbiAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICBzaXplOiAxLFxuICAgICAgICBjaGlsZHJlbjogZmlyc3RBY3Rpb25TdGF0ZS50aXRsZVxuICAgICAgfSksIGZpcnN0QWN0aW9uU3RhdGUuc2hvcnRjdXQgJiYgLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICBtYXJnaW5MZWZ0OiBmaXJzdEFjdGlvblN0YXRlLnRpdGxlID8gMiA6IDAsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goSG90a2V5cywge1xuICAgICAgICAgIGtleXM6IFN0cmluZyhmaXJzdEFjdGlvblN0YXRlLnNob3J0Y3V0KS5zcGxpdChcIitcIikubWFwKHMgPT4gcy5zbGljZSgwLCAxKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICB9KVxuICAgICAgfSldXG4gICAgfSk7XG4gIH0sIFtmaXJzdEFjdGlvblN0YXRlXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3hzKEZsZXgsIHtcbiAgICBjaGlsZHJlbjogW2ZpcnN0QWN0aW9uU3RhdGUgJiYgLyogQF9fUFVSRV9fICovanN4KExheWVyUHJvdmlkZXIsIHtcbiAgICAgIHpPZmZzZXQ6IDIwMCxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goVG9vbHRpcCwge1xuICAgICAgICBkaXNhYmxlZDogIXRvb2x0aXBDb250ZW50LFxuICAgICAgICBjb250ZW50OiB0b29sdGlwQ29udGVudCxcbiAgICAgICAgcG9ydGFsOiB0cnVlLFxuICAgICAgICBwbGFjZW1lbnQ6IFwidG9wXCIsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goU3RhY2ssIHtcbiAgICAgICAgICBmbGV4OiAxLFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQnV0dG9uLCB7XG4gICAgICAgICAgICBcImRhdGEtdGVzdGlkXCI6IFwiYWN0aW9uLVwiLmNvbmNhdChmaXJzdEFjdGlvblN0YXRlLmxhYmVsKSxcbiAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCB8fCBCb29sZWFuKGZpcnN0QWN0aW9uU3RhdGUuZGlzYWJsZWQpLFxuICAgICAgICAgICAgaWNvbjogZmlyc3RBY3Rpb25TdGF0ZS5pY29uLFxuICAgICAgICAgICAgb25DbGljazogZmlyc3RBY3Rpb25TdGF0ZS5vbkhhbmRsZSxcbiAgICAgICAgICAgIHJlZjogc2V0QnV0dG9uRWxlbWVudCxcbiAgICAgICAgICAgIHRleHQ6IGZpcnN0QWN0aW9uU3RhdGUubGFiZWwsXG4gICAgICAgICAgICB0b25lOiBmaXJzdEFjdGlvblN0YXRlLnRvbmUgfHwgXCJwcmltYXJ5XCJcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KSwgc2hvd01lbnUgJiYgbWVudUFjdGlvblN0YXRlcy5sZW5ndGggPiAwICYmIC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgIG1hcmdpbkxlZnQ6IDEsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEFjdGlvbk1lbnVCdXR0b24sIHtcbiAgICAgICAgYWN0aW9uU3RhdGVzOiBtZW51QWN0aW9uU3RhdGVzLFxuICAgICAgICBkaXNhYmxlZFxuICAgICAgfSlcbiAgICB9KSwgZmlyc3RBY3Rpb25TdGF0ZSAmJiBmaXJzdEFjdGlvblN0YXRlLmRpYWxvZyAmJiAvKiBAX19QVVJFX18gKi9qc3goQWN0aW9uU3RhdGVEaWFsb2csIHtcbiAgICAgIGRpYWxvZzogZmlyc3RBY3Rpb25TdGF0ZS5kaWFsb2csXG4gICAgICByZWZlcmVuY2VFbGVtZW50OiBidXR0b25FbGVtZW50XG4gICAgfSldXG4gIH0pO1xufVxuY29uc3QgRG9jdW1lbnRTdGF0dXNCYXJBY3Rpb25zID0gbWVtbyhmdW5jdGlvbiBEb2N1bWVudFN0YXR1c0JhckFjdGlvbnMyKCkge1xuICBjb25zdCB7XG4gICAgYWN0aW9ucyxcbiAgICBjb25uZWN0aW9uU3RhdGUsXG4gICAgZG9jdW1lbnRJZCxcbiAgICBlZGl0U3RhdGVcbiAgfSA9IHVzZURvY3VtZW50UGFuZSgpO1xuICBpZiAoIWFjdGlvbnMgfHwgIWVkaXRTdGF0ZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUmVuZGVyQWN0aW9uQ29sbGVjdGlvblN0YXRlLCB7XG4gICAgYWN0aW9ucyxcbiAgICBhY3Rpb25Qcm9wczogZWRpdFN0YXRlLFxuICAgIGNoaWxkcmVuOiBfcmVmMTcgPT4ge1xuICAgICAgbGV0IHtcbiAgICAgICAgc3RhdGVzXG4gICAgICB9ID0gX3JlZjE3O1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudFN0YXR1c0JhckFjdGlvbnNJbm5lciwge1xuICAgICAgICBkaXNhYmxlZDogY29ubmVjdGlvblN0YXRlICE9PSBcImNvbm5lY3RlZFwiLFxuICAgICAgICBzaG93TWVudTogYWN0aW9ucy5sZW5ndGggPiAxLFxuICAgICAgICBzdGF0ZXNcbiAgICAgIH0sIGRvY3VtZW50SWQpO1xuICAgIH1cbiAgfSk7XG59KTtcbmNvbnN0IEhpc3RvcnlTdGF0dXNCYXJBY3Rpb25zID0gbWVtbyhmdW5jdGlvbiBIaXN0b3J5U3RhdHVzQmFyQWN0aW9uczIoKSB7XG4gIGNvbnN0IHtcbiAgICBjb25uZWN0aW9uU3RhdGUsXG4gICAgZWRpdFN0YXRlLFxuICAgIHRpbWVsaW5lU3RvcmVcbiAgfSA9IHVzZURvY3VtZW50UGFuZSgpO1xuICBjb25zdCByZXZUaW1lID0gdXNlVGltZWxpbmVTZWxlY3Rvcih0aW1lbGluZVN0b3JlLCBzdGF0ZSA9PiBzdGF0ZS5yZXZUaW1lKTtcbiAgY29uc3QgcmV2aXNpb24gPSAocmV2VGltZSA9PSBudWxsID8gdm9pZCAwIDogcmV2VGltZS5pZCkgfHwgXCJcIjtcbiAgY29uc3QgZGlzYWJsZWQgPSAoKGVkaXRTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogZWRpdFN0YXRlLmRyYWZ0KSB8fCAoZWRpdFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBlZGl0U3RhdGUucHVibGlzaGVkKSB8fCB7fSkuX3JldiA9PT0gcmV2aXNpb247XG4gIGNvbnN0IGFjdGlvblByb3BzID0gdXNlTWVtbygoKSA9PiAoe1xuICAgIC4uLihlZGl0U3RhdGUgfHwge30pLFxuICAgIHJldmlzaW9uXG4gIH0pLCBbZWRpdFN0YXRlLCByZXZpc2lvbl0pO1xuICBjb25zdCBoaXN0b3J5QWN0aW9ucyA9IHVzZU1lbW8oKCkgPT4gW0hpc3RvcnlSZXN0b3JlQWN0aW9uXSwgW10pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFJlbmRlckFjdGlvbkNvbGxlY3Rpb25TdGF0ZSwge1xuICAgIGFjdGlvbnM6IGhpc3RvcnlBY3Rpb25zLFxuICAgIGFjdGlvblByb3BzLFxuICAgIGNoaWxkcmVuOiBfcmVmMTggPT4ge1xuICAgICAgbGV0IHtcbiAgICAgICAgc3RhdGVzXG4gICAgICB9ID0gX3JlZjE4O1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudFN0YXR1c0JhckFjdGlvbnNJbm5lciwge1xuICAgICAgICBkaXNhYmxlZDogY29ubmVjdGlvblN0YXRlICE9PSBcImNvbm5lY3RlZFwiIHx8IEJvb2xlYW4oZGlzYWJsZWQpLFxuICAgICAgICBzaG93TWVudTogZmFsc2UsXG4gICAgICAgIHN0YXRlc1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn0pO1xuY29uc3QgQkFER0VfVE9ORVMgPSB7XG4gIHByaW1hcnk6IFwicHJpbWFyeVwiLFxuICBzdWNjZXNzOiBcInBvc2l0aXZlXCIsXG4gIHdhcm5pbmc6IFwiY2F1dGlvblwiLFxuICBkYW5nZXI6IFwiY3JpdGljYWxcIlxufTtcbmZ1bmN0aW9uIERvY3VtZW50QmFkZ2VzSW5uZXIoX3JlZjE5KSB7XG4gIGxldCB7XG4gICAgc3RhdGVzXG4gIH0gPSBfcmVmMTk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goSW5saW5lLCB7XG4gICAgc3BhY2U6IDEsXG4gICAgY2hpbGRyZW46IHN0YXRlcy5tYXAoKGJhZGdlLCBpbmRleCkgPT4gLyogQF9fUFVSRV9fICovanN4KFRvb2x0aXAsIHtcbiAgICAgIGNvbnRlbnQ6IGJhZGdlLnRpdGxlICYmIC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgcGFkZGluZzogMixcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICBjaGlsZHJlbjogYmFkZ2UudGl0bGVcbiAgICAgICAgfSlcbiAgICAgIH0pLFxuICAgICAgZGlzYWJsZWQ6ICFiYWRnZS50aXRsZSxcbiAgICAgIHBsYWNlbWVudDogXCJ0b3BcIixcbiAgICAgIHBvcnRhbDogdHJ1ZSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQmFkZ2UsIHtcbiAgICAgICAgZm9udFNpemU6IDEsXG4gICAgICAgIG1vZGU6IFwib3V0bGluZVwiLFxuICAgICAgICBwYWRkaW5nWDogMixcbiAgICAgICAgcGFkZGluZ1k6IDEsXG4gICAgICAgIHJhZGl1czogNCxcbiAgICAgICAgdG9uZTogYmFkZ2UuY29sb3IgPyBCQURHRV9UT05FU1tiYWRnZS5jb2xvcl0gOiB2b2lkIDAsXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgd2hpdGVTcGFjZTogXCJub3dyYXBcIlxuICAgICAgICB9LFxuICAgICAgICBjaGlsZHJlbjogYmFkZ2UubGFiZWxcbiAgICAgIH0pXG4gICAgfSwgU3RyaW5nKGluZGV4KSkpXG4gIH0pO1xufVxuZnVuY3Rpb24gRG9jdW1lbnRCYWRnZXMoKSB7XG4gIGNvbnN0IHtcbiAgICBiYWRnZXMsXG4gICAgZWRpdFN0YXRlXG4gIH0gPSB1c2VEb2N1bWVudFBhbmUoKTtcbiAgaWYgKCFlZGl0U3RhdGUgfHwgIWJhZGdlcykgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUmVuZGVyQmFkZ2VDb2xsZWN0aW9uU3RhdGUsIHtcbiAgICBiYWRnZXMsXG4gICAgYmFkZ2VQcm9wczogZWRpdFN0YXRlLFxuICAgIGNoaWxkcmVuOiBfcmVmMjAgPT4ge1xuICAgICAgbGV0IHtcbiAgICAgICAgc3RhdGVzXG4gICAgICB9ID0gX3JlZjIwO1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudEJhZGdlc0lubmVyLCB7XG4gICAgICAgIHN0YXRlc1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cbnZhciBfX2ZyZWV6ZSQ0ID0gT2JqZWN0LmZyZWV6ZTtcbnZhciBfX2RlZlByb3AkNCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX3RlbXBsYXRlJDQgPSAoY29va2VkLCByYXcpID0+IF9fZnJlZXplJDQoX19kZWZQcm9wJDQoY29va2VkLCBcInJhd1wiLCB7XG4gIHZhbHVlOiBfX2ZyZWV6ZSQ0KHJhdyB8fCBjb29rZWQuc2xpY2UoKSlcbn0pKTtcbnZhciBfYSQ0O1xuY29uc3QgUm9vdCA9IHN0eWxlZChGbGV4KShfYSQ0IHx8IChfYSQ0ID0gX190ZW1wbGF0ZSQ0KFtcIlxcbiAgY3Vyc29yOiBkZWZhdWx0O1xcblwiXSkpKTtcbmZ1bmN0aW9uIFB1Ymxpc2hTdGF0dXMocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGNvbGxhcHNlZCxcbiAgICBkaXNhYmxlZCxcbiAgICBsYXN0UHVibGlzaGVkLFxuICAgIGxhc3RVcGRhdGVkLFxuICAgIGxpdmVFZGl0XG4gIH0gPSBwcm9wcztcbiAgY29uc3QgbGFzdFB1Ymxpc2hlZFRpbWVBZ28gPSB1c2VUaW1lQWdvKGxhc3RQdWJsaXNoZWQgfHwgXCJcIiwge1xuICAgIG1pbmltYWw6IHRydWUsXG4gICAgYWdvU3VmZml4OiB0cnVlXG4gIH0pO1xuICBjb25zdCBsYXN0UHVibGlzaGVkVGltZSA9IHVzZVRpbWVBZ28obGFzdFB1Ymxpc2hlZCB8fCBcIlwiLCB7XG4gICAgbWluaW1hbDogdHJ1ZVxuICB9KTtcbiAgY29uc3QgbGFzdFVwZGF0ZWRUaW1lQWdvID0gdXNlVGltZUFnbyhsYXN0VXBkYXRlZCB8fCBcIlwiLCB7XG4gICAgbWluaW1hbDogdHJ1ZSxcbiAgICBhZ29TdWZmaXg6IHRydWVcbiAgfSk7XG4gIGNvbnN0IGxhc3RVcGRhdGVkVGltZSA9IHVzZVRpbWVBZ28obGFzdFVwZGF0ZWQgfHwgXCJcIiwge1xuICAgIG1pbmltYWw6IHRydWVcbiAgfSk7XG4gIGNvbnN0IGExMXlVcGRhdGVkQWdvID0gdXNlVGltZUFnbyhsYXN0VXBkYXRlZCB8fCBcIlwiLCB7XG4gICAgbWluaW1hbDogZmFsc2UsXG4gICAgYWdvU3VmZml4OiB0cnVlXG4gIH0pO1xuICBjb25zdCBhMTF5UHVibGlzaGVkQWdvID0gdXNlVGltZUFnbyhsYXN0UHVibGlzaGVkIHx8IFwiXCIsIHtcbiAgICBtaW5pbWFsOiBmYWxzZSxcbiAgICBhZ29TdWZmaXg6IHRydWVcbiAgfSk7XG4gIGNvbnN0IGExMXlMYWJlbCA9IGxpdmVFZGl0ID8gXCJMYXN0IHVwZGF0ZWQgXCIuY29uY2F0KGExMXlVcGRhdGVkQWdvKSA6IFwiTGFzdCBwdWJsaXNoZWQgXCIuY29uY2F0KGExMXlQdWJsaXNoZWRBZ28pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFJvb3QsIHtcbiAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICBcImRhdGEtdWlcIjogXCJTZXNzaW9uTGF5b3V0XCIsXG4gICAgc2l6aW5nOiBcImJvcmRlclwiLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goVG9vbHRpcCwge1xuICAgICAgcGxhY2VtZW50OiBcInRvcFwiLFxuICAgICAgcG9ydGFsOiB0cnVlLFxuICAgICAgY29udGVudDogLyogQF9fUFVSRV9fICovanN4KFN0YWNrLCB7XG4gICAgICAgIHBhZGRpbmc6IDMsXG4gICAgICAgIHNwYWNlOiAzLFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgIGNoaWxkcmVuOiBsaXZlRWRpdCA/IC8qIEBfX1BVUkVfXyAqL2pzeHMoRnJhZ21lbnQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXCJMYXN0IHVwZGF0ZWRcIiwgXCIgXCIsIC8qIEBfX1BVUkVfXyAqL2pzeChcImFiYnJcIiwge1xuICAgICAgICAgICAgICBcImFyaWEtbGFiZWxcIjogbGFzdFVwZGF0ZWQgPyBhMTF5VXBkYXRlZEFnbyA6IGExMXlQdWJsaXNoZWRBZ28sXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBsYXN0VXBkYXRlZCA/IGxhc3RVcGRhdGVkVGltZUFnbyA6IGxhc3RQdWJsaXNoZWRUaW1lQWdvXG4gICAgICAgICAgICB9KV1cbiAgICAgICAgICB9KSA6IC8qIEBfX1BVUkVfXyAqL2pzeHMoRnJhZ21lbnQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXCJMYXN0IHB1Ymxpc2hlZCBcIiwgLyogQF9fUFVSRV9fICovanN4KFwiYWJiclwiLCB7XG4gICAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiBhMTF5UHVibGlzaGVkQWdvLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogbGFzdFB1Ymxpc2hlZFRpbWVBZ29cbiAgICAgICAgICAgIH0pXVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQnV0dG9uLCB7XG4gICAgICAgIG1vZGU6IFwiYmxlZWRcIixcbiAgICAgICAgdG9uZTogbGl2ZUVkaXQgPyBcImNyaXRpY2FsXCIgOiBcInBvc2l0aXZlXCIsXG4gICAgICAgIHRhYkluZGV4OiAtMSxcbiAgICAgICAgZGlzYWJsZWQsXG4gICAgICAgIFwiYXJpYS1sYWJlbFwiOiBhMTF5TGFiZWwsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hzKEZsZXgsIHtcbiAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBjb2xsYXBzZWQgPyAwIDogMyxcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgICBzaXplOiAyLFxuICAgICAgICAgICAgICBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogbGl2ZUVkaXQgPyAvKiBAX19QVVJFX18gKi9qc3goUGxheUljb24sIHt9KSA6IC8qIEBfX1BVUkVfXyAqL2pzeChQdWJsaXNoSWNvbiwge30pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pLCAhY29sbGFwc2VkICYmIC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgICAgd2VpZ2h0OiBcIm1lZGl1bVwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IGxpdmVFZGl0ID8gLyogQF9fUFVSRV9fICovanN4KFwiYWJiclwiLCB7XG4gICAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiBhMTF5TGFiZWwsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBsYXN0VXBkYXRlZCA/IGxhc3RVcGRhdGVkVGltZSA6IGxhc3RQdWJsaXNoZWRUaW1lXG4gICAgICAgICAgICB9KSA6IC8qIEBfX1BVUkVfXyAqL2pzeChcImFiYnJcIiwge1xuICAgICAgICAgICAgICBcImFyaWEtbGFiZWxcIjogYTExeUxhYmVsLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogbGFzdFB1Ymxpc2hlZFRpbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufVxudmFyIF9fZnJlZXplJDMgPSBPYmplY3QuZnJlZXplO1xudmFyIF9fZGVmUHJvcCQzID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fdGVtcGxhdGUkMyA9IChjb29rZWQsIHJhdykgPT4gX19mcmVlemUkMyhfX2RlZlByb3AkMyhjb29rZWQsIFwicmF3XCIsIHtcbiAgdmFsdWU6IF9fZnJlZXplJDMocmF3IHx8IGNvb2tlZC5zbGljZSgpKVxufSkpO1xudmFyIF9hJDMsIF9iLCBfYztcbmNvbnN0IFN0eWxlZE1vdGlvblBhdGggPSBzdHlsZWQobW90aW9uLnBhdGgpKF9hJDMgfHwgKF9hJDMgPSBfX3RlbXBsYXRlJDMoW1wiXFxuICB0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXI7XFxuXCJdKSkpO1xuY29uc3QgQ2lyY2xlID0gcHJvcHMgPT4gLyogQF9fUFVSRV9fICovanN4KG1vdGlvbi5jaXJjbGUsIHtcbiAgZmlsbDogXCJub25lXCIsXG4gIHI6IFwiOFwiLFxuICBjeDogXCIxMi41XCIsXG4gIGN5OiBcIjEyLjVcIixcbiAgc3Ryb2tlV2lkdGg6IFwiMS4yXCIsXG4gIC4uLnByb3BzXG59KTtcbmNvbnN0IEFycm93cyA9IHByb3BzID0+IC8qIEBfX1BVUkVfXyAqL2pzeChTdHlsZWRNb3Rpb25QYXRoLCB7XG4gIGZpbGw6IFwibm9uZVwiLFxuICBkOiBcIk0xNCAxNy41NjE5TDExLjUgMjAuNUwxNC41IDIzLjA2MTlNMTEgNy40MzgxMUwxMy41IDQuNTAwMDFMMTAuNSAxLjkzODExXCIsXG4gIC4uLnByb3BzXG59KTtcbmNvbnN0IENoZWNrbWFyayA9IHByb3BzID0+IC8qIEBfX1BVUkVfXyAqL2pzeChtb3Rpb24ucGF0aCwge1xuICBkOiBcIk05LjUgMTIuMTMxNkwxMS43NDE0IDE0LjVMMTYgMTBcIixcbiAgLi4ucHJvcHNcbn0pO1xuY29uc3QgRWRpdCA9IHByb3BzID0+IC8qIEBfX1BVUkVfXyAqL2pzeChtb3Rpb24ucGF0aCwge1xuICBkOiBcIk0xNSA3TDE4IDEwTTYgMTlMNyAxNUwxNyA1TDIwIDhMMTAgMThMNiAxOVpcIixcbiAgLi4ucHJvcHNcbn0pO1xuY29uc3Qgcm90YXRlQW5pbWF0aW9uID0ga2V5ZnJhbWVzKF9iIHx8IChfYiA9IF9fdGVtcGxhdGUkMyhbXCJcXG4gIDAlIHtcXG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMCk7XFxuICB9XFxuICAxMDAlIHtcXG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcXG4gIH1cXG5cIl0pKSk7XG5jb25zdCBSb3RhdGVHcm91cCA9IHN0eWxlZC5nKF9jIHx8IChfYyA9IF9fdGVtcGxhdGUkMyhbXCJcXG4gIHRyYW5zZm9ybS1vcmlnaW46IGNlbnRlcjtcXG5cXG4gICZbZGF0YS1yb3RhdGVdIHtcXG4gICAgYW5pbWF0aW9uOiBcIiwgXCIgMXMgZWFzZS1pbi1vdXQgaW5maW5pdGU7XFxuICB9XFxuXCJdKSksIHJvdGF0ZUFuaW1hdGlvbik7XG5jb25zdCByb290ID0ge1xuICBzeW5jaW5nOiB7XG4gICAgc2NhbGU6IDEsXG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDBcbiAgICB9XG4gIH0sXG4gIHNhdmVkOiB7XG4gICAgc2NhbGU6IFsxLCAwLjgsIDEuMiwgMC45LCAxLjEsIDAuOTUsIDEuMDUsIDAuOTksIDFdLFxuICAgIHRyYW5zaXRpb246IHtcbiAgICAgIGR1cmF0aW9uOiAwLjUsXG4gICAgICBkZWxheTogMC4yXG4gICAgfVxuICB9LFxuICBjaGFuZ2VzOiB7XG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDBcbiAgICB9XG4gIH1cbn07XG5jb25zdCBjaXJjbGUgPSB7XG4gIHN5bmNpbmc6IHtcbiAgICBzdHJva2VEYXNoYXJyYXk6IFwiMCwgMCwgMjMsIDMsIDIzLCAzXCIsXG4gICAgc3Ryb2tlRGFzaG9mZnNldDogMTAsXG4gICAgb3BhY2l0eTogMSxcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMFxuICAgIH1cbiAgfSxcbiAgc2F2ZWQ6IHtcbiAgICBzdHJva2VEYXNoYXJyYXk6IFwiMCwgMCwgMjMsIDAsIDIzLCAwXCIsXG4gICAgc3Ryb2tlRGFzaG9mZnNldDogMTAsXG4gICAgb3BhY2l0eTogMSxcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMC4yXG4gICAgfVxuICB9LFxuICBjaGFuZ2VzOiB7XG4gICAgc3Ryb2tlRGFzaGFycmF5OiBcIjAsIDYwLCAyMywgMCwgMjMsIDBcIixcbiAgICBzdHJva2VEYXNob2Zmc2V0OiAwLFxuICAgIG9wYWNpdHk6IDAsXG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDAuNVxuICAgIH1cbiAgfVxufTtcbmNvbnN0IGFycm93cyA9IHtcbiAgc3luY2luZzoge1xuICAgIG9wYWNpdHk6IDEsXG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDBcbiAgICB9XG4gIH0sXG4gIHNhdmVkOiB7XG4gICAgb3BhY2l0eTogMCxcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMC4yXG4gICAgfVxuICB9LFxuICBjaGFuZ2VzOiB7XG4gICAgb3BhY2l0eTogMFxuICB9XG59O1xuY29uc3QgY2hlY2ttYXJrID0ge1xuICBzeW5jaW5nOiB7XG4gICAgcGF0aExlbmd0aDogMCxcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMFxuICAgIH1cbiAgfSxcbiAgc2F2ZWQ6IHtcbiAgICBwYXRoTGVuZ3RoOiAxLFxuICAgIHRyYW5zaXRpb246IHtcbiAgICAgIGRlbGF5OiAwLjQsXG4gICAgICBkdXJhdGlvbjogMC4zXG4gICAgfVxuICB9LFxuICBjaGFuZ2VzOiB7XG4gICAgcGF0aExlbmd0aDogMCxcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMC4yXG4gICAgfVxuICB9XG59O1xuY29uc3QgZWRpdCA9IHtcbiAgc3luY2luZzoge1xuICAgIHBhdGhMZW5ndGg6IDAsXG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDBcbiAgICB9XG4gIH0sXG4gIHNhdmVkOiB7XG4gICAgcGF0aExlbmd0aDogMCxcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMFxuICAgIH1cbiAgfSxcbiAgY2hhbmdlczoge1xuICAgIHBhdGhMZW5ndGg6IDEsXG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDAuNCxcbiAgICAgIGRlbGF5OiAwLjVcbiAgICB9XG4gIH1cbn07XG5mdW5jdGlvbiBBbmltYXRlZFN0YXR1c0ljb24ocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHN0YXR1c1xuICB9ID0gcHJvcHM7XG4gIGlmICghc3RhdHVzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChcInN2Z1wiLCB7XG4gICAgd2lkdGg6IFwiMWVtXCIsXG4gICAgaGVpZ2h0OiBcIjFlbVwiLFxuICAgIHZpZXdCb3g6IFwiMCAwIDI1IDI1XCIsXG4gICAgZmlsbDogXCJub25lXCIsXG4gICAgc3Ryb2tlOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIHN0cm9rZVdpZHRoOiBcIjEuMlwiLFxuICAgIFwiZGF0YS1zYW5pdHktaWNvblwiOiBcIlwiLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hzKG1vdGlvbi5nLCB7XG4gICAgICB2YXJpYW50czogcm9vdCxcbiAgICAgIGluaXRpYWw6IHN0YXR1cyxcbiAgICAgIGFuaW1hdGU6IHN0YXR1cyxcbiAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4cyhSb3RhdGVHcm91cCwge1xuICAgICAgICBcImRhdGEtcm90YXRlXCI6IHN0YXR1cyA9PT0gXCJjaGFuZ2VzXCIgPyB2b2lkIDAgOiBcIlwiLFxuICAgICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChBcnJvd3MsIHtcbiAgICAgICAgICB2YXJpYW50czogYXJyb3dzLFxuICAgICAgICAgIGluaXRpYWw6IHN0YXR1cyxcbiAgICAgICAgICBhbmltYXRlOiBzdGF0dXNcbiAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChDaXJjbGUsIHtcbiAgICAgICAgICB2YXJpYW50czogY2lyY2xlLFxuICAgICAgICAgIGluaXRpYWw6IHN0YXR1cyxcbiAgICAgICAgICBhbmltYXRlOiBzdGF0dXNcbiAgICAgICAgfSldXG4gICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KENoZWNrbWFyaywge1xuICAgICAgICB2YXJpYW50czogY2hlY2ttYXJrLFxuICAgICAgICBpbml0aWFsOiBzdGF0dXMsXG4gICAgICAgIGFuaW1hdGU6IHN0YXR1c1xuICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChFZGl0LCB7XG4gICAgICAgIHZhcmlhbnRzOiBlZGl0LFxuICAgICAgICBpbml0aWFsOiBzdGF0dXMsXG4gICAgICAgIGFuaW1hdGU6IHN0YXR1c1xuICAgICAgfSldXG4gICAgfSlcbiAgfSk7XG59XG5jb25zdCBSZXZpZXdCdXR0b24gPSBSZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIFJldmlld0J1dHRvbjIocHJvcHMsIHJlZikge1xuICBjb25zdCB7XG4gICAgY29sbGFwc2VkLFxuICAgIHN0YXR1cyxcbiAgICBsYXN0VXBkYXRlZCxcbiAgICAuLi5yZXN0XG4gIH0gPSBwcm9wcztcbiAgY29uc3QgbGFzdFVwZGF0ZWRUaW1lID0gdXNlVGltZUFnbyhsYXN0VXBkYXRlZCB8fCBcIlwiLCB7XG4gICAgbWluaW1hbDogdHJ1ZVxuICB9KTtcbiAgY29uc3QgbGFzdFVwZGF0ZWRUaW1lQWdvID0gdXNlVGltZUFnbyhsYXN0VXBkYXRlZCB8fCBcIlwiLCB7XG4gICAgbWluaW1hbDogdHJ1ZSxcbiAgICBhZ29TdWZmaXg6IHRydWVcbiAgfSk7XG4gIGNvbnN0IGExMXlVcGRhdGVkQWdvID0gdXNlVGltZUFnbyhsYXN0VXBkYXRlZCB8fCBcIlwiLCB7XG4gICAgbWluaW1hbDogZmFsc2UsXG4gICAgYWdvU3VmZml4OiB0cnVlXG4gIH0pO1xuICBjb25zdCBidXR0b25Qcm9wcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChzdGF0dXMgPT09IFwic3luY2luZ1wiKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0ZXh0OiBcIlNhdmluZy4uLlwiLFxuICAgICAgICB0b25lOiB2b2lkIDBcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChzdGF0dXMgPT09IFwiY2hhbmdlc1wiKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0ZXh0OiBsYXN0VXBkYXRlZFRpbWUsXG4gICAgICAgIHRvbmU6IFwiY2F1dGlvblwiXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoc3RhdHVzID09PSBcInNhdmVkXCIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRleHQ6IFwiU2F2ZWQhXCIsXG4gICAgICAgIHRvbmU6IFwicG9zaXRpdmVcIlxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHt9O1xuICB9LCBbc3RhdHVzLCBsYXN0VXBkYXRlZFRpbWVdKTtcbiAgaWYgKCFzdGF0dXMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFRvb2x0aXAsIHtcbiAgICBwbGFjZW1lbnQ6IFwidG9wXCIsXG4gICAgcG9ydGFsOiB0cnVlLFxuICAgIGRpc2FibGVkOiBzdGF0dXMgIT09IFwiY2hhbmdlc1wiLFxuICAgIGNvbnRlbnQ6IC8qIEBfX1BVUkVfXyAqL2pzeHMoU3RhY2ssIHtcbiAgICAgIHBhZGRpbmc6IDMsXG4gICAgICBzcGFjZTogMyxcbiAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgd2VpZ2h0OiBcInNlbWlib2xkXCIsXG4gICAgICAgIGNoaWxkcmVuOiBcIlJldmlldyBjaGFuZ2VzXCJcbiAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3hzKFRleHQsIHtcbiAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgbXV0ZWQ6IHRydWUsXG4gICAgICAgIGNoaWxkcmVuOiBbXCJDaGFuZ2VzIHNhdmVkIFwiLCAvKiBAX19QVVJFX18gKi9qc3goXCJhYmJyXCIsIHtcbiAgICAgICAgICBcImFyaWEtbGFiZWxcIjogYTExeVVwZGF0ZWRBZ28sXG4gICAgICAgICAgY2hpbGRyZW46IGxhc3RVcGRhdGVkVGltZUFnb1xuICAgICAgICB9KV1cbiAgICAgIH0pXVxuICAgIH0pLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQnV0dG9uLCB7XG4gICAgICBtb2RlOiBcImJsZWVkXCIsXG4gICAgICBqdXN0aWZ5OiBcImZsZXgtc3RhcnRcIixcbiAgICAgIHRvbmU6IGJ1dHRvblByb3BzID09IG51bGwgPyB2b2lkIDAgOiBidXR0b25Qcm9wcy50b25lLFxuICAgICAgLi4ucmVzdCxcbiAgICAgIFwiZGF0YS10ZXN0aWRcIjogXCJyZXZpZXctY2hhbmdlcy1idXR0b25cIixcbiAgICAgIHJlZixcbiAgICAgIFwiYXJpYS1sYWJlbFwiOiBcIlJldmlldyBjaGFuZ2VzXCIsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhGbGV4LCB7XG4gICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgICBtYXJnaW5SaWdodDogY29sbGFwc2VkID8gMCA6IDMsXG4gICAgICAgICAgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIixcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQW5pbWF0ZWRTdGF0dXNJY29uLCB7XG4gICAgICAgICAgICAgIHN0YXR1c1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KSwgIWNvbGxhcHNlZCAmJiAvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgd2VpZ2h0OiBcIm1lZGl1bVwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBidXR0b25Qcm9wcyA9PSBudWxsID8gdm9pZCAwIDogYnV0dG9uUHJvcHMudGV4dFxuICAgICAgICB9KV1cbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG59KTtcbmNvbnN0IFJldmlld0NoYW5nZXNCdXR0b24gPSBSZWFjdC5tZW1vKFJldmlld0J1dHRvbik7XG5jb25zdCBTWU5DSU5HX1RJTUVPVVQgPSAxZTM7XG5jb25zdCBTQVZFRF9USU1FT1VUID0gM2UzO1xuY29uc3QgRG9jdW1lbnRTcGFya2xpbmUgPSBtZW1vKGZ1bmN0aW9uIERvY3VtZW50U3BhcmtsaW5lMigpIHtcbiAgdmFyIF9hO1xuICBjb25zdCB7XG4gICAgY2hhbmdlc09wZW4sXG4gICAgZG9jdW1lbnRJZCxcbiAgICBkb2N1bWVudFR5cGUsXG4gICAgZWRpdFN0YXRlLFxuICAgIG9uSGlzdG9yeUNsb3NlLFxuICAgIG9uSGlzdG9yeU9wZW4sXG4gICAgdGltZWxpbmVTdG9yZSxcbiAgICB2YWx1ZVxuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGNvbnN0IHN5bmNTdGF0ZSA9IHVzZVN5bmNTdGF0ZShkb2N1bWVudElkLCBkb2N1bWVudFR5cGUpO1xuICBjb25zdCBsYXN0VXBkYXRlZCA9IHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS5fdXBkYXRlZEF0O1xuICBjb25zdCBsYXN0UHVibGlzaGVkID0gKF9hID0gZWRpdFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBlZGl0U3RhdGUucHVibGlzaGVkKSA9PSBudWxsID8gdm9pZCAwIDogX2EuX3VwZGF0ZWRBdDtcbiAgY29uc3QgbGl2ZUVkaXQgPSBCb29sZWFuKGVkaXRTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogZWRpdFN0YXRlLmxpdmVFZGl0KTtcbiAgY29uc3QgcHVibGlzaGVkID0gQm9vbGVhbihlZGl0U3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGVkaXRTdGF0ZS5wdWJsaXNoZWQpO1xuICBjb25zdCBjaGFuZ2VkID0gQm9vbGVhbihlZGl0U3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGVkaXRTdGF0ZS5kcmFmdCk7XG4gIGNvbnN0IFtyb290RmxleEVsZW1lbnQsIHNldFJvb3RGbGV4RWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3Qgcm9vdEZsZXhSZWN0ID0gdXNlRWxlbWVudFJlY3Qocm9vdEZsZXhFbGVtZW50KTtcbiAgY29uc3QgY29sbGFwc2VkID0gIXJvb3RGbGV4UmVjdCB8fCAocm9vdEZsZXhSZWN0ID09IG51bGwgPyB2b2lkIDAgOiByb290RmxleFJlY3Qud2lkdGgpIDwgMzAwO1xuICBjb25zdCBbc3RhdHVzLCBzZXRTdGF0dXNdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IHNob3dpbmdSZXZpc2lvbiA9IHVzZVRpbWVsaW5lU2VsZWN0b3IodGltZWxpbmVTdG9yZSwgc3RhdGUgPT4gc3RhdGUub25PbGRlclJldmlzaW9uKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc3RhdHVzID09PSBcInN5bmNpbmdcIiAmJiAhc3luY1N0YXRlLmlzU3luY2luZykge1xuICAgICAgY29uc3QgdGltZXJJZCA9IHNldFRpbWVvdXQoKCkgPT4gc2V0U3RhdHVzKFwic2F2ZWRcIiksIFNZTkNJTkdfVElNRU9VVCk7XG4gICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgICBpZiAoc3RhdHVzID09PSBcInNhdmVkXCIpIHtcbiAgICAgIGNvbnN0IHRpbWVySWQgPSBzZXRUaW1lb3V0KCgpID0+IHNldFN0YXR1cyhudWxsKSwgU0FWRURfVElNRU9VVCk7XG4gICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgfSwgW3N0YXR1cywgbGFzdFVwZGF0ZWQsIHN5bmNTdGF0ZS5pc1N5bmNpbmddKTtcbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBzZXRTdGF0dXMobnVsbCk7XG4gIH0sIFtkb2N1bWVudElkXSk7XG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN5bmNTdGF0ZS5pc1N5bmNpbmcpIHtcbiAgICAgIHNldFN0YXR1cyhcInN5bmNpbmdcIik7XG4gICAgfVxuICB9LCBbc3luY1N0YXRlLmlzU3luY2luZywgbGFzdFVwZGF0ZWRdKTtcbiAgY29uc3QgcmV2aWV3QnV0dG9uID0gdXNlTWVtbygoKSA9PiAvKiBAX19QVVJFX18gKi9qc3goUmV2aWV3Q2hhbmdlc0J1dHRvbiwge1xuICAgIGxhc3RVcGRhdGVkLFxuICAgIHN0YXR1czogc3RhdHVzIHx8IChjaGFuZ2VkID8gXCJjaGFuZ2VzXCIgOiB2b2lkIDApLFxuICAgIG9uQ2xpY2s6IGNoYW5nZXNPcGVuID8gb25IaXN0b3J5Q2xvc2UgOiBvbkhpc3RvcnlPcGVuLFxuICAgIGRpc2FibGVkOiBzaG93aW5nUmV2aXNpb24sXG4gICAgc2VsZWN0ZWQ6IGNoYW5nZXNPcGVuLFxuICAgIGNvbGxhcHNlZFxuICB9KSwgW2NoYW5nZWQsIGNoYW5nZXNPcGVuLCBvbkhpc3RvcnlDbG9zZSwgb25IaXN0b3J5T3BlbiwgbGFzdFVwZGF0ZWQsIHNob3dpbmdSZXZpc2lvbiwgc3RhdHVzLCBjb2xsYXBzZWRdKTtcbiAgY29uc3QgcHVibGlzaFN0YXR1cyA9IHVzZU1lbW8oKCkgPT4gKGxpdmVFZGl0IHx8IHB1Ymxpc2hlZCkgJiYgLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgIG1hcmdpblJpZ2h0OiAxLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goUHVibGlzaFN0YXR1cywge1xuICAgICAgZGlzYWJsZWQ6IHNob3dpbmdSZXZpc2lvbixcbiAgICAgIGxhc3RQdWJsaXNoZWQsXG4gICAgICBsYXN0VXBkYXRlZCxcbiAgICAgIGxpdmVFZGl0LFxuICAgICAgY29sbGFwc2VkXG4gICAgfSlcbiAgfSksIFtjb2xsYXBzZWQsIGxhc3RQdWJsaXNoZWQsIGxhc3RVcGRhdGVkLCBsaXZlRWRpdCwgcHVibGlzaGVkLCBzaG93aW5nUmV2aXNpb25dKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoRmxleCwge1xuICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgIFwiZGF0YS11aVwiOiBcIkRvY3VtZW50U3BhcmtsaW5lXCIsXG4gICAgcmVmOiBzZXRSb290RmxleEVsZW1lbnQsXG4gICAgY2hpbGRyZW46IFtwdWJsaXNoU3RhdHVzLCAvKiBAX19QVVJFX18gKi9qc3hzKEZsZXgsIHtcbiAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgZmxleDogMSxcbiAgICAgIGNoaWxkcmVuOiBbcmV2aWV3QnV0dG9uLCAhY29sbGFwc2VkICYmIC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgbWFyZ2luTGVmdDogMyxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudEJhZGdlcywge30pXG4gICAgICB9KV1cbiAgICB9KV1cbiAgfSk7XG59KTtcbnZhciBfX2ZyZWV6ZSQyID0gT2JqZWN0LmZyZWV6ZTtcbnZhciBfX2RlZlByb3AkMiA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX3RlbXBsYXRlJDIgPSAoY29va2VkLCByYXcpID0+IF9fZnJlZXplJDIoX19kZWZQcm9wJDIoY29va2VkLCBcInJhd1wiLCB7XG4gIHZhbHVlOiBfX2ZyZWV6ZSQyKHJhdyB8fCBjb29rZWQuc2xpY2UoKSlcbn0pKTtcbnZhciBfYSQyO1xuY29uc3QgRG9jdW1lbnRBY3Rpb25zQm94ID0gc3R5bGVkKEJveCkoX2EkMiB8fCAoX2EkMiA9IF9fdGVtcGxhdGUkMihbXCJcXG4gIG1pbi13aWR0aDogMTBlbTtcXG4gIG1heC13aWR0aDogMTZlbTtcXG5cIl0pKSk7XG5mdW5jdGlvbiBEb2N1bWVudFN0YXR1c0Jhcihwcm9wcykge1xuICBjb25zdCB7XG4gICAgYWN0aW9uc0JveFJlZlxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBiYWRnZXMsXG4gICAgdGltZWxpbmVTdG9yZVxuICB9ID0gdXNlRG9jdW1lbnRQYW5lKCk7XG4gIGNvbnN0IHNob3dpbmdSZXZpc2lvbiA9IHVzZVRpbWVsaW5lU2VsZWN0b3IodGltZWxpbmVTdG9yZSwgc3RhdGUgPT4gc3RhdGUub25PbGRlclJldmlzaW9uKTtcbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgIHBhZGRpbmdMZWZ0OiAyLFxuICAgIHBhZGRpbmdSaWdodDogWzIsIDNdLFxuICAgIHBhZGRpbmdZOiAyLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hzKEZsZXgsIHtcbiAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgIGZsZXg6IFsxLCAyXSxcbiAgICAgICAgY2hpbGRyZW46IGJhZGdlcyAmJiAvKiBAX19QVVJFX18gKi9qc3goRG9jdW1lbnRTcGFya2xpbmUsIHt9KVxuICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudEFjdGlvbnNCb3gsIHtcbiAgICAgICAgZmxleDogMSxcbiAgICAgICAgbWFyZ2luTGVmdDogWzEsIDNdLFxuICAgICAgICByZWY6IGFjdGlvbnNCb3hSZWYsXG4gICAgICAgIGNoaWxkcmVuOiBzaG93aW5nUmV2aXNpb24gPyAvKiBAX19QVVJFX18gKi9qc3goSGlzdG9yeVN0YXR1c0JhckFjdGlvbnMsIHt9KSA6IC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudFN0YXR1c0JhckFjdGlvbnMsIHt9KVxuICAgICAgfSldXG4gICAgfSlcbiAgfSksIFthY3Rpb25zQm94UmVmLCBiYWRnZXMsIHNob3dpbmdSZXZpc2lvbl0pO1xufVxuZnVuY3Rpb24gS2V5Ym9hcmRTaG9ydGN1dFJlc3BvbmRlcihwcm9wcykge1xuICBjb25zdCB7XG4gICAgYWN0aW9uc0JveEVsZW1lbnQsXG4gICAgYWN0aXZlSW5kZXgsXG4gICAgYXMgPSBcImRpdlwiLFxuICAgIGNoaWxkcmVuLFxuICAgIGlkLFxuICAgIG9uQWN0aW9uU3RhcnQsXG4gICAgb25LZXlEb3duLFxuICAgIHJvb3RSZWYsXG4gICAgc3RhdGVzLFxuICAgIC4uLnJlc3RcbiAgfSA9IHByb3BzO1xuICBjb25zdCBhY3RpdmVBY3Rpb24gPSBzdGF0ZXNbYWN0aXZlSW5kZXhdO1xuICBjb25zdCBoYW5kbGVLZXlEb3duID0gdXNlQ2FsbGJhY2soZXZlbnQgPT4ge1xuICAgIGNvbnN0IG1hdGNoaW5nU3RhdGVzID0gc3RhdGVzLmZpbHRlcihzdGF0ZSA9PiBzdGF0ZS5zaG9ydGN1dCAmJiBpc0hvdGtleShzdGF0ZS5zaG9ydGN1dCwgZXZlbnQpKTtcbiAgICBjb25zdCBtYXRjaGluZ1N0YXRlID0gbWF0Y2hpbmdTdGF0ZXNbMF07XG4gICAgaWYgKG1hdGNoaW5nU3RhdGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnNvbGUud2FybignS2V5Ym9hcmQgc2hvcnRjdXQgY29uZmxpY3Q6IE1vcmUgdGhhbiBvbmUgZG9jdW1lbnQgYWN0aW9uIG1hdGNoZXMgdGhlIHNob3J0Y3V0IFwiJy5jb25jYXQobWF0Y2hpbmdTdGF0ZS5zaG9ydGN1dCwgJ1wiJykpO1xuICAgIH1cbiAgICBpZiAobWF0Y2hpbmdTdGF0ZSAmJiAhbWF0Y2hpbmdTdGF0ZS5kaXNhYmxlZCAmJiBtYXRjaGluZ1N0YXRlLm9uSGFuZGxlKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgbWF0Y2hpbmdTdGF0ZS5vbkhhbmRsZSgpO1xuICAgICAgb25BY3Rpb25TdGFydChzdGF0ZXMuaW5kZXhPZihtYXRjaGluZ1N0YXRlKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvbktleURvd24pIHtcbiAgICAgIG9uS2V5RG93bihldmVudCk7XG4gICAgfVxuICB9LCBbb25BY3Rpb25TdGFydCwgb25LZXlEb3duLCBzdGF0ZXNdKTtcbiAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoYXMsIHtcbiAgICBpZCxcbiAgICBvbktleURvd246IGhhbmRsZUtleURvd24sXG4gICAgdGFiSW5kZXg6IC0xLFxuICAgIC4uLnJlc3QsXG4gICAgcmVmOiByb290UmVmXG4gIH0sIFtjaGlsZHJlbiwgYWN0aXZlQWN0aW9uICYmIGFjdGl2ZUFjdGlvbi5kaWFsb2cgJiYgLyogQF9fUFVSRV9fICovanN4KExlZ2FjeUxheWVyUHJvdmlkZXIsIHtcbiAgICB6T2Zmc2V0OiBcInBhbmVGb290ZXJcIixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEFjdGlvblN0YXRlRGlhbG9nLCB7XG4gICAgICBkaWFsb2c6IGFjdGl2ZUFjdGlvbi5kaWFsb2csXG4gICAgICByZWZlcmVuY2VFbGVtZW50OiBhY3Rpb25zQm94RWxlbWVudFxuICAgIH0pXG4gIH0pXSk7XG59XG5jb25zdCBEb2N1bWVudEFjdGlvblNob3J0Y3V0cyA9IFJlYWN0Lm1lbW8ocHJvcHMgPT4ge1xuICBjb25zdCB7XG4gICAgYWN0aW9uc0JveEVsZW1lbnQsXG4gICAgYXMgPSBcImRpdlwiLFxuICAgIGNoaWxkcmVuLFxuICAgIC4uLnJlc3RcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgYWN0aW9ucyxcbiAgICBlZGl0U3RhdGVcbiAgfSA9IHVzZURvY3VtZW50UGFuZSgpO1xuICBjb25zdCBbYWN0aXZlSW5kZXgsIHNldEFjdGl2ZUluZGV4XSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3Qgb25BY3Rpb25TdGFydCA9IHVzZUNhbGxiYWNrKGlkeCA9PiB7XG4gICAgc2V0QWN0aXZlSW5kZXgoaWR4KTtcbiAgfSwgW10pO1xuICBjb25zdCBhY3Rpb25Qcm9wcyA9IHVzZU1lbW8oKCkgPT4gZWRpdFN0YXRlICYmIHtcbiAgICAuLi5lZGl0U3RhdGUsXG4gICAgLy8gQHRvZG86IHdoYXQgdG8gY2FsbCBoZXJlP1xuICAgIG9uQ29tcGxldGU6ICgpID0+IHZvaWQgMCxcbiAgICAvLyBAdG9kbzogZ2V0IHJldmlzaW9uIHN0cmluZ1xuICAgIHJldmlzaW9uOiB2b2lkIDBcbiAgfSwgW2VkaXRTdGF0ZV0pO1xuICBpZiAoIWFjdGlvblByb3BzIHx8ICFhY3Rpb25zKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChSZW5kZXJBY3Rpb25Db2xsZWN0aW9uU3RhdGUsIHtcbiAgICBhY3Rpb25Qcm9wcyxcbiAgICBhY3Rpb25zLFxuICAgIGNoaWxkcmVuOiBfcmVmMjEgPT4ge1xuICAgICAgbGV0IHtcbiAgICAgICAgc3RhdGVzXG4gICAgICB9ID0gX3JlZjIxO1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChLZXlib2FyZFNob3J0Y3V0UmVzcG9uZGVyLCB7XG4gICAgICAgIC4uLnJlc3QsXG4gICAgICAgIGFjdGl2ZUluZGV4LFxuICAgICAgICBhY3Rpb25zQm94RWxlbWVudCxcbiAgICAgICAgYXMsXG4gICAgICAgIG9uQWN0aW9uU3RhcnQsXG4gICAgICAgIHN0YXRlcyxcbiAgICAgICAgY2hpbGRyZW5cbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59KTtcbkRvY3VtZW50QWN0aW9uU2hvcnRjdXRzLmRpc3BsYXlOYW1lID0gXCJEb2N1bWVudEFjdGlvblNob3J0Y3V0c1wiO1xudmFyIF9fZnJlZXplJDEgPSBPYmplY3QuZnJlZXplO1xudmFyIF9fZGVmUHJvcCQxID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fdGVtcGxhdGUkMSA9IChjb29rZWQsIHJhdykgPT4gX19mcmVlemUkMShfX2RlZlByb3AkMShjb29rZWQsIFwicmF3XCIsIHtcbiAgdmFsdWU6IF9fZnJlZXplJDEocmF3IHx8IGNvb2tlZC5zbGljZSgpKVxufSkpO1xudmFyIF9hJDE7XG5jb25zdCBESUFMT0dfUFJPVklERVJfUE9TSVRJT04gPSBbXG4vLyBXZSB1c2UgdGhlIGBwb3NpdGlvbjogZml4ZWRgIGZvciBkaWFsb2dzIG9uIG5hcnJvd2VyIHNjcmVlbnMgKGZpcnN0IHR3byBtZWRpYSBicmVha3BvaW50cykuXG5cImZpeGVkXCIsIFwiZml4ZWRcIixcbi8vIEFuZCB3ZSB1c2UgdGhlIGBwb3NpdGlvbjogYWJzb2x1dGVgIHN0cmF0ZWd5ICh3aXRoaW4gcGFuZXMpIG9uIHdpZGUgc2NyZWVucy5cblwiYWJzb2x1dGVcIl07XG5jb25zdCBTdHlsZWRDaGFuZ2VDb25uZWN0b3JSb290ID0gc3R5bGVkKENoYW5nZUNvbm5lY3RvclJvb3QpKF9hJDEgfHwgKF9hJDEgPSBfX3RlbXBsYXRlJDEoW1wiXFxuICBmbGV4OiAxO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICBtaW4taGVpZ2h0OiAwO1xcbiAgbWluLXdpZHRoOiAwO1xcblwiXSkpKTtcbmNvbnN0IERvY3VtZW50UGFuZSA9IG1lbW8oZnVuY3Rpb24gRG9jdW1lbnRQYW5lMihwcm9wcykge1xuICBjb25zdCB7XG4gICAgbmFtZTogcGFyZW50U291cmNlTmFtZVxuICB9ID0gdXNlU291cmNlKCk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goU291cmNlUHJvdmlkZXIsIHtcbiAgICBuYW1lOiBwcm9wcy5wYW5lLnNvdXJjZSB8fCBwYXJlbnRTb3VyY2VOYW1lLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goRG9jdW1lbnRQYW5lSW5uZXIsIHtcbiAgICAgIC4uLnByb3BzXG4gICAgfSlcbiAgfSk7XG59KTtcbmZ1bmN0aW9uIERvY3VtZW50UGFuZUlubmVyKHByb3BzKSB7XG4gIHZhciBfYTI7XG4gIGNvbnN0IHtcbiAgICBwYW5lLFxuICAgIHBhbmVLZXlcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgcmVzb2x2ZU5ld0RvY3VtZW50T3B0aW9uc1xuICB9ID0gdXNlU291cmNlKCkuZG9jdW1lbnQ7XG4gIGNvbnN0IHBhbmVSb3V0ZXIgPSB1c2VQYW5lUm91dGVyKCk7XG4gIGNvbnN0IG9wdGlvbnMgPSB1c2VQYW5lT3B0aW9ucyhwYW5lLm9wdGlvbnMsIHBhbmVSb3V0ZXIucGFyYW1zKTtcbiAgY29uc3Qge1xuICAgIGRvY3VtZW50VHlwZSxcbiAgICBpc0xvYWRlZDogaXNEb2N1bWVudExvYWRlZFxuICB9ID0gdXNlRG9jdW1lbnRUeXBlKG9wdGlvbnMuaWQsIG9wdGlvbnMudHlwZSk7XG4gIGNvbnN0IHRlbXBsYXRlSXRlbXMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gcmVzb2x2ZU5ld0RvY3VtZW50T3B0aW9ucyh7XG4gICAgICB0eXBlOiBcImRvY3VtZW50XCIsXG4gICAgICBkb2N1bWVudElkOiBvcHRpb25zLmlkLFxuICAgICAgc2NoZW1hVHlwZTogb3B0aW9ucy50eXBlXG4gICAgfSk7XG4gIH0sIFtvcHRpb25zLmlkLCBvcHRpb25zLnR5cGUsIHJlc29sdmVOZXdEb2N1bWVudE9wdGlvbnNdKTtcbiAgY29uc3QgW3RlbXBsYXRlUGVybWlzc2lvbnMsIGlzVGVtcGxhdGVQZXJtaXNzaW9uc0xvYWRpbmddID0gdXNlVGVtcGxhdGVQZXJtaXNzaW9ucyh7XG4gICAgdGVtcGxhdGVJdGVtc1xuICB9KTtcbiAgY29uc3QgaXNMb2FkZWQgPSBpc0RvY3VtZW50TG9hZGVkICYmICFpc1RlbXBsYXRlUGVybWlzc2lvbnNMb2FkaW5nO1xuICBjb25zdCBwcm92aWRlclByb3BzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGlzTG9hZGVkICYmIGRvY3VtZW50VHlwZSAmJiBvcHRpb25zLnR5cGUgIT09IGRvY3VtZW50VHlwZSA/IG1lcmdlRG9jdW1lbnRUeXBlKHByb3BzLCBvcHRpb25zLCBkb2N1bWVudFR5cGUpIDogcHJvcHM7XG4gIH0sIFtwcm9wcywgZG9jdW1lbnRUeXBlLCBpc0xvYWRlZCwgb3B0aW9uc10pO1xuICBjb25zdCB7XG4gICAgUmVmZXJlbmNlQ2hpbGRMaW5rLFxuICAgIGhhbmRsZUVkaXRSZWZlcmVuY2UsXG4gICAgZ3JvdXBJbmRleCxcbiAgICByb3V0ZXJQYW5lc1N0YXRlXG4gIH0gPSBwYW5lUm91dGVyO1xuICBjb25zdCBjaGlsZFBhcmFtcyA9ICgoX2EyID0gcm91dGVyUGFuZXNTdGF0ZVtncm91cEluZGV4ICsgMV0pID09IG51bGwgPyB2b2lkIDAgOiBfYTJbMF0ucGFyYW1zKSB8fCB7fTtcbiAgY29uc3Qgcm91dGVyUGFuZXNTdGF0ZUxlbmd0aCA9IHJvdXRlclBhbmVzU3RhdGUubGVuZ3RoO1xuICBjb25zdCB7XG4gICAgcGFyZW50UmVmUGF0aFxuICB9ID0gY2hpbGRQYXJhbXM7XG4gIGNvbnN0IGFjdGl2ZVBhdGggPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gcGFyZW50UmVmUGF0aCA/IHtcbiAgICAgIHBhdGg6IGZyb21TdHJpbmcocGFyZW50UmVmUGF0aCksXG4gICAgICBzdGF0ZTpcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICAgICAgZ3JvdXBJbmRleCA+PSByb3V0ZXJQYW5lc1N0YXRlTGVuZ3RoIC0gMSA/IFwibm9uZVwiIDogZ3JvdXBJbmRleCA+PSByb3V0ZXJQYW5lc1N0YXRlTGVuZ3RoIC0gMiA/IFwic2VsZWN0ZWRcIiA6IFwicHJlc3NlZFwiXG4gICAgfSA6IHtcbiAgICAgIHBhdGg6IFtdLFxuICAgICAgc3RhdGU6IFwibm9uZVwiXG4gICAgfTtcbiAgfSwgW3BhcmVudFJlZlBhdGgsIGdyb3VwSW5kZXgsIHJvdXRlclBhbmVzU3RhdGVMZW5ndGhdKTtcbiAgaWYgKG9wdGlvbnMudHlwZSA9PT0gXCIqXCIgJiYgIWlzTG9hZGVkKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChMb2FkaW5nUGFuZSwge1xuICAgICAgZmxleDogMi41LFxuICAgICAgbWluV2lkdGg6IDMyMCxcbiAgICAgIHBhbmVLZXksXG4gICAgICB0aXRsZTogXCJMb2FkaW5nIGRvY3VtZW50XFx1MjAyNlwiXG4gICAgfSk7XG4gIH1cbiAgaWYgKCFkb2N1bWVudFR5cGUpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KEVycm9yUGFuZSwge1xuICAgICAgZmxleDogMi41LFxuICAgICAgbWluV2lkdGg6IDMyMCxcbiAgICAgIHBhbmVLZXksXG4gICAgICB0aXRsZTogLyogQF9fUFVSRV9fICovanN4KEZyYWdtZW50LCB7XG4gICAgICAgIGNoaWxkcmVuOiBcIlRoZSBkb2N1bWVudCB3YXMgbm90IGZvdW5kXCJcbiAgICAgIH0pLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChTdGFjaywge1xuICAgICAgICBzcGFjZTogNCxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoVGV4dCwge1xuICAgICAgICAgIGFzOiBcInBcIixcbiAgICAgICAgICBjaGlsZHJlbjogW1wiVGhlIGRvY3VtZW50IHR5cGUgaXMgbm90IGRlZmluZWQsIGFuZCBhIGRvY3VtZW50IHdpdGggdGhlIFwiLCAvKiBAX19QVVJFX18gKi9qc3goXCJjb2RlXCIsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBvcHRpb25zLmlkXG4gICAgICAgICAgfSksIFwiIFwiLCBcImlkZW50aWZpZXIgY291bGQgbm90IGJlIGZvdW5kLlwiXVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KERvY3VtZW50UGFuZVByb3ZpZGVyLCB7XG4gICAgLi4ucHJvdmlkZXJQcm9wcyxcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFJlZmVyZW5jZUlucHV0T3B0aW9uc1Byb3ZpZGVyLCB7XG4gICAgICBFZGl0UmVmZXJlbmNlTGlua0NvbXBvbmVudDogUmVmZXJlbmNlQ2hpbGRMaW5rLFxuICAgICAgb25FZGl0UmVmZXJlbmNlOiBoYW5kbGVFZGl0UmVmZXJlbmNlLFxuICAgICAgaW5pdGlhbFZhbHVlVGVtcGxhdGVJdGVtczogdGVtcGxhdGVQZXJtaXNzaW9ucyxcbiAgICAgIGFjdGl2ZVBhdGgsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KElubmVyRG9jdW1lbnRQYW5lLCB7fSlcbiAgICB9KVxuICB9LCBcIlwiLmNvbmNhdChkb2N1bWVudFR5cGUsIFwiLVwiKS5jb25jYXQob3B0aW9ucy5pZCkpO1xufVxuZnVuY3Rpb24gdXNlUGFuZU9wdGlvbnMob3B0aW9ucykge1xuICBsZXQgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgY29uc3QgdGVtcGxhdGVzID0gdXNlVGVtcGxhdGVzKCk7XG4gIHJldHVybiB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAob3B0aW9ucy50eXBlICYmIG9wdGlvbnMudHlwZSAhPT0gXCIqXCIpIHtcbiAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cbiAgICBjb25zdCB0ZW1wbGF0ZU5hbWUgPSBvcHRpb25zLnRlbXBsYXRlIHx8IHBhcmFtcy50ZW1wbGF0ZTtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IHRlbXBsYXRlTmFtZSA/IHRlbXBsYXRlcy5maW5kKHQgPT4gdC5pZCA9PT0gdGVtcGxhdGVOYW1lKSA6IHZvaWQgMDtcbiAgICBjb25zdCBkb2N1bWVudFR5cGUgPSB0ZW1wbGF0ZSA9PSBudWxsID8gdm9pZCAwIDogdGVtcGxhdGUuc2NoZW1hVHlwZTtcbiAgICBpZiAoIWRvY3VtZW50VHlwZSkge1xuICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgdHlwZTogZG9jdW1lbnRUeXBlXG4gICAgfTtcbiAgfSwgW29wdGlvbnMsIHBhcmFtcy50ZW1wbGF0ZSwgdGVtcGxhdGVzXSk7XG59XG5mdW5jdGlvbiBtZXJnZURvY3VtZW50VHlwZShwcm9wcywgb3B0aW9ucywgZG9jdW1lbnRUeXBlKSB7XG4gIHJldHVybiB7XG4gICAgLi4ucHJvcHMsXG4gICAgcGFuZToge1xuICAgICAgLi4ucHJvcHMucGFuZSxcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgdHlwZTogZG9jdW1lbnRUeXBlXG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gSW5uZXJEb2N1bWVudFBhbmUoKSB7XG4gIGNvbnN0IHtcbiAgICBjaGFuZ2VzT3BlbixcbiAgICBkb2N1bWVudFR5cGUsXG4gICAgaW5zcGVjdG9yLFxuICAgIGluc3BlY3RPcGVuLFxuICAgIG9uRm9jdXMsXG4gICAgb25QYXRoT3BlbixcbiAgICBvbkhpc3RvcnlPcGVuLFxuICAgIG9uS2V5VXAsXG4gICAgcGFuZUtleSxcbiAgICBzY2hlbWFUeXBlLFxuICAgIHZhbHVlXG4gIH0gPSB1c2VEb2N1bWVudFBhbmUoKTtcbiAgY29uc3Qge1xuICAgIGNvbGxhcHNlZDogbGF5b3V0Q29sbGFwc2VkXG4gIH0gPSB1c2VQYW5lTGF5b3V0KCk7XG4gIGNvbnN0IHpPZmZzZXRzID0gdXNlWkluZGV4KCk7XG4gIGNvbnN0IFtyb290RWxlbWVudCwgc2V0Um9vdEVsZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFtmb290ZXJFbGVtZW50LCBzZXRGb290ZXJFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbYWN0aW9uc0JveEVsZW1lbnQsIHNldEFjdGlvbnNCb3hFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbZG9jdW1lbnRQYW5lbFBvcnRhbEVsZW1lbnQsIHNldERvY3VtZW50UGFuZWxQb3J0YWxFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBmb290ZXJSZWN0ID0gdXNlRWxlbWVudFJlY3QoZm9vdGVyRWxlbWVudCk7XG4gIGNvbnN0IGZvb3RlckggPSBmb290ZXJSZWN0ID09IG51bGwgPyB2b2lkIDAgOiBmb290ZXJSZWN0LmhlaWdodDtcbiAgY29uc3Qgb25Db25uZWN0b3JTZXRGb2N1cyA9IHVzZUNhbGxiYWNrKHBhdGggPT4ge1xuICAgIG9uUGF0aE9wZW4ocGF0aCk7XG4gICAgb25Gb2N1cyhwYXRoKTtcbiAgfSwgW29uUGF0aE9wZW4sIG9uRm9jdXNdKTtcbiAgY29uc3QgY3VycmVudE1pbldpZHRoID0gRE9DVU1FTlRfUEFORUxfSU5JVElBTF9NSU5fV0lEVEggKyAoaW5zcGVjdG9yID8gRE9DVU1FTlRfSU5TUEVDVE9SX01JTl9XSURUSCA6IDApO1xuICBjb25zdCBtaW5XaWR0aCA9IERPQ1VNRU5UX1BBTkVMX01JTl9XSURUSCArIChpbnNwZWN0b3IgPyBET0NVTUVOVF9JTlNQRUNUT1JfTUlOX1dJRFRIIDogMCk7XG4gIGlmICghc2NoZW1hVHlwZSkge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goRXJyb3JQYW5lLCB7XG4gICAgICBjdXJyZW50TWluV2lkdGgsXG4gICAgICBmbGV4OiAyLjUsXG4gICAgICBtaW5XaWR0aCxcbiAgICAgIHBhbmVLZXksXG4gICAgICB0aXRsZTogLyogQF9fUFVSRV9fICovanN4cyhGcmFnbWVudCwge1xuICAgICAgICBjaGlsZHJlbjogW1wiVW5rbm93biBkb2N1bWVudCB0eXBlOiBcIiwgLyogQF9fUFVSRV9fICovanN4KFwiY29kZVwiLCB7XG4gICAgICAgICAgY2hpbGRyZW46IGRvY3VtZW50VHlwZVxuICAgICAgICB9KV1cbiAgICAgIH0pLFxuICAgICAgdG9uZTogXCJjYXV0aW9uXCIsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhTdGFjaywge1xuICAgICAgICBzcGFjZTogNCxcbiAgICAgICAgY2hpbGRyZW46IFtkb2N1bWVudFR5cGUgJiYgLyogQF9fUFVSRV9fICovanN4cyhUZXh0LCB7XG4gICAgICAgICAgYXM6IFwicFwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXCJUaGlzIGRvY3VtZW50IGhhcyB0aGUgc2NoZW1hIHR5cGUgXCIsIC8qIEBfX1BVUkVfXyAqL2pzeChcImNvZGVcIiwge1xuICAgICAgICAgICAgY2hpbGRyZW46IGRvY3VtZW50VHlwZVxuICAgICAgICAgIH0pLCBcIiwgd2hpY2ggaXMgbm90IGRlZmluZWQgYXMgYSB0eXBlIGluIHRoZSBsb2NhbCBjb250ZW50IHN0dWRpbyBzY2hlbWEuXCJdXG4gICAgICAgIH0pLCAhZG9jdW1lbnRUeXBlICYmIC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgYXM6IFwicFwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBcIlRoaXMgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QsIGFuZCBubyBzY2hlbWEgdHlwZSB3YXMgc3BlY2lmaWVkIGZvciBpdC5cIlxuICAgICAgICB9KSwgaXNEZXYgJiYgdmFsdWUgJiYgLyogQF9fUFVSRV9fICovanN4cyhGcmFnbWVudCwge1xuICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICAgIGFzOiBcInBcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBcIkhlcmUgaXMgdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIGRvY3VtZW50OlwiXG4gICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChDYXJkLCB7XG4gICAgICAgICAgICBwYWRkaW5nOiAzLFxuICAgICAgICAgICAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxuICAgICAgICAgICAgcmFkaXVzOiAyLFxuICAgICAgICAgICAgc2hhZG93OiAxLFxuICAgICAgICAgICAgdG9uZTogXCJpbmhlcml0XCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KENvZGUsIHtcbiAgICAgICAgICAgICAgbGFuZ3VhZ2U6IFwianNvblwiLFxuICAgICAgICAgICAgICBzaXplOiBbMSwgMSwgMl0sXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgbnVsbCwgMilcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pXVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4cyhEb2N1bWVudEFjdGlvblNob3J0Y3V0cywge1xuICAgIGFjdGlvbnNCb3hFbGVtZW50LFxuICAgIGFzOiBQYW5lLFxuICAgIGN1cnJlbnRNaW5XaWR0aCxcbiAgICBcImRhdGEtdGVzdGlkXCI6IFwiZG9jdW1lbnQtcGFuZVwiLFxuICAgIGZsZXg6IDIuNSxcbiAgICBpZDogcGFuZUtleSxcbiAgICBtaW5XaWR0aCxcbiAgICBvbktleVVwLFxuICAgIHJvb3RSZWY6IHNldFJvb3RFbGVtZW50LFxuICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KERpYWxvZ1Byb3ZpZGVyLCB7XG4gICAgICBwb3NpdGlvbjogRElBTE9HX1BST1ZJREVSX1BPU0lUSU9OLFxuICAgICAgek9mZnNldDogek9mZnNldHMucG9ydGFsLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChGbGV4LCB7XG4gICAgICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgICAgZmxleDogMSxcbiAgICAgICAgaGVpZ2h0OiBsYXlvdXRDb2xsYXBzZWQgPyB2b2lkIDAgOiBcImZpbGxcIixcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChTdHlsZWRDaGFuZ2VDb25uZWN0b3JSb290LCB7XG4gICAgICAgICAgXCJkYXRhLXRlc3RpZFwiOiBcImNoYW5nZS1jb25uZWN0b3Itcm9vdFwiLFxuICAgICAgICAgIGlzUmV2aWV3Q2hhbmdlc09wZW46IGNoYW5nZXNPcGVuLFxuICAgICAgICAgIG9uT3BlblJldmlld0NoYW5nZXM6IG9uSGlzdG9yeU9wZW4sXG4gICAgICAgICAgb25TZXRGb2N1czogb25Db25uZWN0b3JTZXRGb2N1cyxcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KERvY3VtZW50UGFuZWwsIHtcbiAgICAgICAgICAgIGZvb3RlckhlaWdodDogZm9vdGVySCB8fCBudWxsLFxuICAgICAgICAgICAgaXNJbnNwZWN0T3BlbjogaW5zcGVjdE9wZW4sXG4gICAgICAgICAgICByb290RWxlbWVudCxcbiAgICAgICAgICAgIHNldERvY3VtZW50UGFuZWxQb3J0YWxFbGVtZW50XG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChQb3J0YWxQcm92aWRlciwge1xuICAgICAgX191bnN0YWJsZV9lbGVtZW50czoge1xuICAgICAgICBbRE9DVU1FTlRfUEFORUxfUE9SVEFMX0VMRU1FTlRdOiBkb2N1bWVudFBhbmVsUG9ydGFsRWxlbWVudFxuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goRGlhbG9nUHJvdmlkZXIsIHtcbiAgICAgICAgcG9zaXRpb246IERJQUxPR19QUk9WSURFUl9QT1NJVElPTixcbiAgICAgICAgek9mZnNldDogek9mZnNldHMucG9ydGFsLFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFBhbmVGb290ZXIsIHtcbiAgICAgICAgICByZWY6IHNldEZvb3RlckVsZW1lbnQsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudFN0YXR1c0Jhciwge1xuICAgICAgICAgICAgYWN0aW9uc0JveFJlZjogc2V0QWN0aW9uc0JveEVsZW1lbnRcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KERvY3VtZW50T3BlcmF0aW9uUmVzdWx0cywge30pXVxuICB9KTtcbn1cbmZ1bmN0aW9uIE5vRG9jdW1lbnRUeXBlc1NjcmVlbigpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChDYXJkLCB7XG4gICAgaGVpZ2h0OiBcImZpbGxcIixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEZsZXgsIHtcbiAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgaGVpZ2h0OiBcImZpbGxcIixcbiAgICAgIGp1c3RpZnk6IFwiY2VudGVyXCIsXG4gICAgICBwYWRkaW5nOiA0LFxuICAgICAgc2l6aW5nOiBcImJvcmRlclwiLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChDb250YWluZXIsIHtcbiAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQ2FyZCwge1xuICAgICAgICAgIHBhZGRpbmc6IDQsXG4gICAgICAgICAgcmFkaXVzOiAyLFxuICAgICAgICAgIHNoYWRvdzogMSxcbiAgICAgICAgICB0b25lOiBcImNhdXRpb25cIixcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhGbGV4LCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFdhcm5pbmdPdXRsaW5lSWNvbiwge30pXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4cyhTdGFjaywge1xuICAgICAgICAgICAgICBmbGV4OiAxLFxuICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiAzLFxuICAgICAgICAgICAgICBzcGFjZTogMyxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgICAgIGFzOiBcImgxXCIsXG4gICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICB3ZWlnaHQ6IFwiYm9sZFwiLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBcIk5vIGRvY3VtZW50IHR5cGVzXCJcbiAgICAgICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICAgICAgYXM6IFwicFwiLFxuICAgICAgICAgICAgICAgIG11dGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiUGxlYXNlIGRlZmluZSBhdCBsZWFzdCBvbmUgZG9jdW1lbnQgdHlwZSBpbiB5b3VyIHNjaGVtYS5cIlxuICAgICAgICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICAgICAgICBhczogXCJwXCIsXG4gICAgICAgICAgICAgICAgbXV0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFwiYVwiLCB7XG4gICAgICAgICAgICAgICAgICBocmVmOiBcImh0dHBzOi8vd3d3LnNhbml0eS5pby9kb2NzL2NyZWF0ZS1hLXNjaGVtYS1hbmQtY29uZmlndXJlLXNhbml0eS1zdHVkaW9cIixcbiAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICAgICAgICAgICAgICAgIHJlbDogXCJub3JlZmVycmVyXCIsXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJMZWFybiBob3cgdG8gYWRkIGEgZG9jdW1lbnQgdHlwZSBcXHUyMTkyXCJcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9KV1cbiAgICAgICAgICAgIH0pXVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufVxuY29uc3QgRG9jdW1lbnRUaXRsZSA9IHByb3BzID0+IHtcbiAgY29uc3Qge1xuICAgIGRvY3VtZW50SWQsXG4gICAgZG9jdW1lbnRUeXBlXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZWRpdFN0YXRlID0gdXNlRWRpdFN0YXRlKGRvY3VtZW50SWQsIGRvY3VtZW50VHlwZSk7XG4gIGNvbnN0IHNjaGVtYSA9IHVzZVNjaGVtYSgpO1xuICBjb25zdCBpc05ld0RvY3VtZW50ID0gIShlZGl0U3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGVkaXRTdGF0ZS5wdWJsaXNoZWQpICYmICEoZWRpdFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBlZGl0U3RhdGUuZHJhZnQpO1xuICBjb25zdCBkb2N1bWVudFZhbHVlID0gKGVkaXRTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogZWRpdFN0YXRlLmRyYWZ0KSB8fCAoZWRpdFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBlZGl0U3RhdGUucHVibGlzaGVkKTtcbiAgY29uc3Qgc2NoZW1hVHlwZSA9IHNjaGVtYS5nZXQoZG9jdW1lbnRUeXBlKTtcbiAgY29uc3Qge1xuICAgIHZhbHVlLFxuICAgIGlzTG9hZGluZzogcHJldmlld1ZhbHVlSXNMb2FkaW5nXG4gIH0gPSB1bnN0YWJsZV91c2VWYWx1ZVByZXZpZXcoe1xuICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgc2NoZW1hVHlwZSxcbiAgICB2YWx1ZTogZG9jdW1lbnRWYWx1ZVxuICB9KTtcbiAgY29uc3QgZG9jdW1lbnRUaXRsZSA9IGlzTmV3RG9jdW1lbnQgPyBcIk5ldyBcIi5jb25jYXQoKHNjaGVtYVR5cGUgPT0gbnVsbCA/IHZvaWQgMCA6IHNjaGVtYVR5cGUudGl0bGUpIHx8IChzY2hlbWFUeXBlID09IG51bGwgPyB2b2lkIDAgOiBzY2hlbWFUeXBlLm5hbWUpKSA6ICh2YWx1ZSA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUudGl0bGUpIHx8IFwiVW50aXRsZWRcIjtcbiAgY29uc3Qgc2V0dGxlZCA9IGVkaXRTdGF0ZS5yZWFkeSAmJiAhcHJldmlld1ZhbHVlSXNMb2FkaW5nO1xuICBjb25zdCBuZXdUaXRsZSA9IHVzZUNvbnN0cnVjdERvY3VtZW50VGl0bGUoZG9jdW1lbnRUaXRsZSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFzZXR0bGVkKSByZXR1cm47XG4gICAgZG9jdW1lbnQudGl0bGUgPSBuZXdUaXRsZTtcbiAgfSwgW2RvY3VtZW50VGl0bGUsIHNldHRsZWQsIG5ld1RpdGxlXSk7XG4gIHJldHVybiBudWxsO1xufTtcbmNvbnN0IFBhc3N0aHJvdWdoVGl0bGUgPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHtcbiAgICB0aXRsZVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IG5ld1RpdGxlID0gdXNlQ29uc3RydWN0RG9jdW1lbnRUaXRsZSh0aXRsZSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZG9jdW1lbnQudGl0bGUgPSBuZXdUaXRsZTtcbiAgfSwgW25ld1RpdGxlLCB0aXRsZV0pO1xuICByZXR1cm4gbnVsbDtcbn07XG5jb25zdCBEZXNrVGl0bGUgPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHtcbiAgICByZXNvbHZlZFBhbmVzXG4gIH0gPSBwcm9wcztcbiAgaWYgKCEocmVzb2x2ZWRQYW5lcyA9PSBudWxsID8gdm9pZCAwIDogcmVzb2x2ZWRQYW5lcy5sZW5ndGgpKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgbGFzdFBhbmUgPSByZXNvbHZlZFBhbmVzW3Jlc29sdmVkUGFuZXMubGVuZ3RoIC0gMV07XG4gIGlmIChpc0xvYWRpbmdQYW5lKGxhc3RQYW5lKSkge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUGFzc3Rocm91Z2hUaXRsZSwge30pO1xuICB9XG4gIGlmIChpc0RvY3VtZW50UGFuZShsYXN0UGFuZSkpIHtcbiAgICBpZiAobGFzdFBhbmUgPT0gbnVsbCA/IHZvaWQgMCA6IGxhc3RQYW5lLnRpdGxlKSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFBhc3N0aHJvdWdoVGl0bGUsIHtcbiAgICAgICAgdGl0bGU6IGxhc3RQYW5lLnRpdGxlXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudFRpdGxlLCB7XG4gICAgICBkb2N1bWVudElkOiBsYXN0UGFuZS5vcHRpb25zLmlkLFxuICAgICAgZG9jdW1lbnRUeXBlOiBsYXN0UGFuZS5vcHRpb25zLnR5cGVcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFBhc3N0aHJvdWdoVGl0bGUsIHtcbiAgICB0aXRsZTogbGFzdFBhbmUgPT0gbnVsbCA/IHZvaWQgMCA6IGxhc3RQYW5lLnRpdGxlXG4gIH0pO1xufTtcbmZ1bmN0aW9uIHVzZUNvbnN0cnVjdERvY3VtZW50VGl0bGUoYWN0aXZlVGl0bGUpIHtcbiAgY29uc3QgZGVza1Rvb2xCYXNlVGl0bGUgPSB1c2VEZXNrVG9vbCgpLnN0cnVjdHVyZUNvbnRleHQudGl0bGU7XG4gIHJldHVybiBbYWN0aXZlVGl0bGUsIGRlc2tUb29sQmFzZVRpdGxlXS5maWx0ZXIodGl0bGUgPT4gdGl0bGUpLmpvaW4oXCIgfCBcIik7XG59XG5mdW5jdGlvbiBpc0RvY3VtZW50UGFuZShwYW5lKSB7XG4gIHJldHVybiBwYW5lICE9PSBMT0FESU5HX1BBTkUgJiYgcGFuZS50eXBlID09PSBcImRvY3VtZW50XCI7XG59XG5mdW5jdGlvbiBpc0xvYWRpbmdQYW5lKHBhbmUpIHtcbiAgcmV0dXJuIHBhbmUgPT09IExPQURJTkdfUEFORTtcbn1cbnZhciBfX2ZyZWV6ZSA9IE9iamVjdC5mcmVlemU7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fdGVtcGxhdGUgPSAoY29va2VkLCByYXcpID0+IF9fZnJlZXplKF9fZGVmUHJvcChjb29rZWQsIFwicmF3XCIsIHtcbiAgdmFsdWU6IF9fZnJlZXplKHJhdyB8fCBjb29rZWQuc2xpY2UoKSlcbn0pKTtcbnZhciBfYTtcbmNvbnN0IFN0eWxlZFBhbmVMYXlvdXQgPSBzdHlsZWQoUGFuZUxheW91dCkoX2EgfHwgKF9hID0gX190ZW1wbGF0ZShbXCJcXG4gIG1pbi1oZWlnaHQ6IDEwMCU7XFxuICBtaW4td2lkdGg6IDMyMHB4O1xcblwiXSkpKTtcbmNvbnN0IGlzU2F2ZUhvdGtleSA9IGlzSG90a2V5KFwibW9kK3NcIik7XG5jb25zdCBEZXNrVG9vbCA9IG1lbW8oZnVuY3Rpb24gRGVza1Rvb2wyKF9yZWYyMikge1xuICBsZXQge1xuICAgIG9uUGFuZUNoYW5nZVxuICB9ID0gX3JlZjIyO1xuICB2YXIgX2EyO1xuICBjb25zdCB7XG4gICAgcHVzaDogcHVzaFRvYXN0XG4gIH0gPSB1c2VUb2FzdCgpO1xuICBjb25zdCBzY2hlbWEgPSB1c2VTY2hlbWEoKTtcbiAgY29uc3Qge1xuICAgIGxheW91dENvbGxhcHNlZCxcbiAgICBzZXRMYXlvdXRDb2xsYXBzZWRcbiAgfSA9IHVzZURlc2tUb29sKCk7XG4gIGNvbnN0IHtcbiAgICBwYW5lRGF0YUl0ZW1zLFxuICAgIHJlc29sdmVkUGFuZXNcbiAgfSA9IHVzZVJlc29sdmVkUGFuZXMoKTtcbiAgY29uc3QgaXNSZXNvbHZpbmdJbnRlbnQgPSB1c2VSb3V0ZXJTdGF0ZSh1c2VDYWxsYmFjayhyb3V0ZXJTdGF0ZSA9PiB0eXBlb2Ygcm91dGVyU3RhdGUuaW50ZW50ID09PSBcInN0cmluZ1wiLCBbXSkpO1xuICBjb25zdCB7XG4gICAgc2FuaXR5OiB7XG4gICAgICBtZWRpYVxuICAgIH1cbiAgfSA9IHVzZVRoZW1lKCk7XG4gIGNvbnN0IFtwb3J0YWxFbGVtZW50LCBzZXRQb3J0YWxFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBoYW5kbGVSb290Q29sbGFwc2UgPSB1c2VDYWxsYmFjaygoKSA9PiBzZXRMYXlvdXRDb2xsYXBzZWQodHJ1ZSksIFtzZXRMYXlvdXRDb2xsYXBzZWRdKTtcbiAgY29uc3QgaGFuZGxlUm9vdEV4cGFuZCA9IHVzZUNhbGxiYWNrKCgpID0+IHNldExheW91dENvbGxhcHNlZChmYWxzZSksIFtzZXRMYXlvdXRDb2xsYXBzZWRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocmVzb2x2ZWRQYW5lcy5sZW5ndGgpIHtcbiAgICAgIG9uUGFuZUNoYW5nZShyZXNvbHZlZFBhbmVzKTtcbiAgICB9XG4gIH0sIFtvblBhbmVDaGFuZ2UsIHJlc29sdmVkUGFuZXNdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVHbG9iYWxLZXlEb3duID0gZXZlbnQgPT4ge1xuICAgICAgaWYgKGlzU2F2ZUhvdGtleShldmVudCkpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcHVzaFRvYXN0KHtcbiAgICAgICAgICBjbG9zYWJsZTogdHJ1ZSxcbiAgICAgICAgICBpZDogXCJhdXRvLXNhdmUtbWVzc2FnZVwiLFxuICAgICAgICAgIHN0YXR1czogXCJpbmZvXCIsXG4gICAgICAgICAgdGl0bGU6IFwiWW91ciB3b3JrIGlzIGF1dG9tYXRpY2FsbHkgc2F2ZWQhXCIsXG4gICAgICAgICAgZHVyYXRpb246IDRlM1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVHbG9iYWxLZXlEb3duKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUdsb2JhbEtleURvd24pO1xuICB9LCBbcHVzaFRvYXN0XSk7XG4gIGNvbnN0IGhhc0RlZmluZWREb2N1bWVudFR5cGVzID0gKF9hMiA9IHNjaGVtYS5fb3JpZ2luYWwpID09IG51bGwgPyB2b2lkIDAgOiBfYTIudHlwZXMuc29tZShfaXNDdXN0b21Eb2N1bWVudFR5cGVEZWZpbml0aW9uKTtcbiAgaWYgKCFoYXNEZWZpbmVkRG9jdW1lbnRUeXBlcykge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goTm9Eb2N1bWVudFR5cGVzU2NyZWVuLCB7fSk7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoUG9ydGFsUHJvdmlkZXIsIHtcbiAgICBlbGVtZW50OiBwb3J0YWxFbGVtZW50IHx8IG51bGwsXG4gICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3hzKFN0eWxlZFBhbmVMYXlvdXQsIHtcbiAgICAgIGZsZXg6IDEsXG4gICAgICBoZWlnaHQ6IGxheW91dENvbGxhcHNlZCA/IHZvaWQgMCA6IFwiZmlsbFwiLFxuICAgICAgbWluV2lkdGg6IG1lZGlhWzFdLFxuICAgICAgb25Db2xsYXBzZTogaGFuZGxlUm9vdENvbGxhcHNlLFxuICAgICAgb25FeHBhbmQ6IGhhbmRsZVJvb3RFeHBhbmQsXG4gICAgICBjaGlsZHJlbjogW3BhbmVEYXRhSXRlbXMubWFwKF9yZWYyMyA9PiB7XG4gICAgICAgIGxldCB7XG4gICAgICAgICAgYWN0aXZlLFxuICAgICAgICAgIGNoaWxkSXRlbUlkLFxuICAgICAgICAgIGdyb3VwSW5kZXgsXG4gICAgICAgICAgaXRlbUlkLFxuICAgICAgICAgIGtleTogcGFuZUtleSxcbiAgICAgICAgICBwYW5lLFxuICAgICAgICAgIGluZGV4OiBwYW5lSW5kZXgsXG4gICAgICAgICAgcGFyYW1zOiBwYW5lUGFyYW1zLFxuICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICBzaWJsaW5nSW5kZXgsXG4gICAgICAgICAgc2VsZWN0ZWRcbiAgICAgICAgfSA9IF9yZWYyMztcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChGcmFnbWVudCQxLCB7XG4gICAgICAgICAgY2hpbGRyZW46IHBhbmUgPT09IExPQURJTkdfUEFORSA/IC8qIEBfX1BVUkVfXyAqL2pzeChMb2FkaW5nUGFuZSwge1xuICAgICAgICAgICAgcGFuZUtleSxcbiAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICBzZWxlY3RlZFxuICAgICAgICAgIH0pIDogLyogQF9fUFVSRV9fICovanN4KERlc2tUb29sUGFuZSwge1xuICAgICAgICAgICAgYWN0aXZlLFxuICAgICAgICAgICAgZ3JvdXBJbmRleCxcbiAgICAgICAgICAgIGluZGV4OiBwYW5lSW5kZXgsXG4gICAgICAgICAgICBwYW5lLFxuICAgICAgICAgICAgY2hpbGRJdGVtSWQsXG4gICAgICAgICAgICBpdGVtSWQsXG4gICAgICAgICAgICBwYW5lS2V5LFxuICAgICAgICAgICAgcGFyYW1zOiBwYW5lUGFyYW1zLFxuICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICBzZWxlY3RlZCxcbiAgICAgICAgICAgIHNpYmxpbmdJbmRleFxuICAgICAgICAgIH0pXG4gICAgICAgIH0sIFwiXCIuY29uY2F0KHBhbmUgPT09IExPQURJTkdfUEFORSA/IFwibG9hZGluZ1wiIDogcGFuZS50eXBlLCBcIi1cIikuY29uY2F0KHBhbmVJbmRleCkpO1xuICAgICAgfSksIHBhbmVEYXRhSXRlbXMubGVuZ3RoIDw9IDEgJiYgaXNSZXNvbHZpbmdJbnRlbnQgJiYgLyogQF9fUFVSRV9fICovanN4KExvYWRpbmdQYW5lLCB7XG4gICAgICAgIHBhbmVLZXk6IFwiaW50ZW50LXJlc29sdmVyXCJcbiAgICAgIH0pXVxuICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goRGVza1RpdGxlLCB7XG4gICAgICByZXNvbHZlZFBhbmVzXG4gICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChcImRpdlwiLCB7XG4gICAgICBcImRhdGEtcG9ydGFsXCI6IFwiXCIsXG4gICAgICByZWY6IHNldFBvcnRhbEVsZW1lbnRcbiAgICB9KV1cbiAgfSk7XG59KTtcbmZ1bmN0aW9uIERlc2tUb29sQm91bmRhcnkoX3JlZjI0KSB7XG4gIGxldCB7XG4gICAgdG9vbDoge1xuICAgICAgb3B0aW9uc1xuICAgIH1cbiAgfSA9IF9yZWYyNDtcbiAgY29uc3Qge1xuICAgIHVuc3RhYmxlX3NvdXJjZXM6IHNvdXJjZXNcbiAgfSA9IHVzZVdvcmtzcGFjZSgpO1xuICBjb25zdCBbZmlyc3RTb3VyY2VdID0gc291cmNlcztcbiAgY29uc3Qge1xuICAgIHNvdXJjZSxcbiAgICBkZWZhdWx0RG9jdW1lbnROb2RlLFxuICAgIHN0cnVjdHVyZVxuICB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRBY3RpdmVQYW5lcyhbXSk7XG4gICAgcmV0dXJuICgpID0+IHNldEFjdGl2ZVBhbmVzKFtdKTtcbiAgfSwgW10pO1xuICBjb25zdCBbe1xuICAgIGVycm9yXG4gIH0sIHNldEVycm9yXSA9IHVzZVN0YXRlKHtcbiAgICBlcnJvcjogbnVsbFxuICB9KTtcbiAgaWYgKGVycm9yKSByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFN0cnVjdHVyZUVycm9yLCB7XG4gICAgZXJyb3JcbiAgfSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goRXJyb3JCb3VuZGFyeSwge1xuICAgIG9uQ2F0Y2g6IHNldEVycm9yLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goU291cmNlUHJvdmlkZXIsIHtcbiAgICAgIG5hbWU6IHNvdXJjZSB8fCBmaXJzdFNvdXJjZS5uYW1lLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoRGVza1Rvb2xQcm92aWRlciwge1xuICAgICAgICBkZWZhdWx0RG9jdW1lbnROb2RlLFxuICAgICAgICBzdHJ1Y3R1cmUsXG4gICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KERlc2tUb29sLCB7XG4gICAgICAgICAgb25QYW5lQ2hhbmdlOiBzZXRBY3RpdmVQYW5lc1xuICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KEludGVudFJlc29sdmVyLCB7fSldXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufVxudmFyIGluZGV4ID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGRlZmF1bHQ6IERlc2tUb29sQm91bmRhcnlcbn0pO1xuZXhwb3J0IHsgRG9jdW1lbnRQYW5lLCBpbmRleCwgdXNlRGVza1Rvb2xTZXR0aW5nIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC1jY2JkM2M1Ny5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/sanity/lib/_chunks/index-ccbd3c57.js\n"));

/***/ })

}]);